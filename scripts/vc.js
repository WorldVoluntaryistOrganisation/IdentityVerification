"use strict";var Web5Credentials=(()=>{var Bz=Object.create;var Ay=Object.defineProperty;var kz=Object.getOwnPropertyDescriptor;var Rz=Object.getOwnPropertyNames;var $z=Object.getPrototypeOf,jz=Object.prototype.hasOwnProperty;var TO=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var ct=(t,e)=>()=>(t&&(e=t(t=0)),e);var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),xr=(t,e)=>{for(var r in e)Ay(t,r,{get:e[r],enumerable:!0})},IO=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Rz(e))!jz.call(t,s)&&s!==r&&Ay(t,s,{get:()=>e[s],enumerable:!(n=kz(e,s))||n.enumerable});return t};var xs=(t,e,r)=>(r=t!=null?Bz($z(t)):{},IO(e||!t||!t.__esModule?Ay(r,"default",{value:t,enumerable:!0}):r,t)),W_=t=>IO(Ay({},"__esModule",{value:!0}),t);var kO=v((Mwe,BO)=>{var Nz=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Dy=()=>Nz.now(),Mz=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),J_=t=>t===1/0||Mz(t),G_=class t{constructor({max:e=1/0,ttl:r,updateAgeOnGet:n=!1,checkAgeOnGet:s=!1,noUpdateTTL:i=!1,dispose:o,noDisposeOnSet:a=!1}={}){if(this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,r!==void 0&&!J_(r))throw new TypeError("ttl must be positive integer or Infinity if set");if(!J_(e))throw new TypeError("max must be positive integer or Infinity");if(this.ttl=r,this.max=e,this.updateAgeOnGet=!!n,this.checkAgeOnGet=!!s,this.noUpdateTTL=!!i,this.noDisposeOnSet=!!a,o!==void 0){if(typeof o!="function")throw new TypeError("dispose must be function if set");this.dispose=o}this.timer=void 0,this.timerExpiration=void 0}setTimer(e,r){if(this.timerExpiration<e)return;this.timer&&clearTimeout(this.timer);let n=setTimeout(()=>{this.timer=void 0,this.timerExpiration=void 0,this.purgeStale();for(let s in this.expirations){this.setTimer(s,s-Dy());break}},r);n.unref&&n.unref(),this.timerExpiration=e,this.timer=n}cancelTimer(){this.timer&&(clearTimeout(this.timer),this.timerExpiration=void 0,this.timer=void 0)}cancelTimers(){return process.emitWarning('TTLCache.cancelTimers has been renamed to TTLCache.cancelTimer (no "s"), and will be removed in the next major version update'),this.cancelTimer()}clear(){let e=this.dispose!==t.prototype.dispose?[...this]:[];this.data.clear(),this.expirationMap.clear(),this.cancelTimer(),this.expirations=Object.create(null);for(let[r,n]of e)this.dispose(n,r,"delete")}setTTL(e,r=this.ttl){let n=this.expirationMap.get(e);if(n!==void 0){let s=this.expirations[n];!s||s.length<=1?delete this.expirations[n]:this.expirations[n]=s.filter(i=>i!==e)}if(r!==1/0){let s=Math.floor(Dy()+r);this.expirationMap.set(e,s),this.expirations[s]||(this.expirations[s]=[],this.setTimer(s,r)),this.expirations[s].push(e)}else this.expirationMap.set(e,1/0)}set(e,r,{ttl:n=this.ttl,noUpdateTTL:s=this.noUpdateTTL,noDisposeOnSet:i=this.noDisposeOnSet}={}){if(!J_(n))throw new TypeError("ttl must be positive integer or Infinity");if(this.expirationMap.has(e)){s||this.setTTL(e,n);let o=this.data.get(e);o!==r&&(this.data.set(e,r),i||this.dispose(o,e,"set"))}else this.setTTL(e,n),this.data.set(e,r);for(;this.size>this.max;)this.purgeToCapacity();return this}has(e){return this.data.has(e)}getRemainingTTL(e){let r=this.expirationMap.get(e);return r===1/0?r:r!==void 0?Math.max(0,Math.ceil(r-Dy())):0}get(e,{updateAgeOnGet:r=this.updateAgeOnGet,ttl:n=this.ttl,checkAgeOnGet:s=this.checkAgeOnGet}={}){let i=this.data.get(e);if(s&&this.getRemainingTTL(e)===0){this.delete(e);return}return r&&this.setTTL(e,n),i}dispose(e,r){}delete(e){let r=this.expirationMap.get(e);if(r!==void 0){let n=this.data.get(e);this.data.delete(e),this.expirationMap.delete(e);let s=this.expirations[r];return s&&(s.length<=1?delete this.expirations[r]:this.expirations[r]=s.filter(i=>i!==e)),this.dispose(n,e,"delete"),this.size===0&&this.cancelTimer(),!0}return!1}purgeToCapacity(){for(let e in this.expirations){let r=this.expirations[e];if(this.size-r.length>=this.max){delete this.expirations[e];let n=[];for(let s of r)n.push([s,this.data.get(s)]),this.data.delete(s),this.expirationMap.delete(s);for(let[s,i]of n)this.dispose(i,s,"evict")}else{let n=this.size-this.max,s=[];for(let i of r.splice(0,n))s.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of s)this.dispose(o,i,"evict");return}}}get size(){return this.data.size}purgeStale(){let e=Math.ceil(Dy());for(let r in this.expirations){if(r==="Infinity"||r>e)return;let n=[...this.expirations[r]||[]],s=[];delete this.expirations[r];for(let i of n)s.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of s)this.dispose(o,i,"stale")}this.size===0&&this.cancelTimer()}*entries(){for(let e in this.expirations)for(let r of this.expirations[e])yield[r,this.data.get(r)]}*keys(){for(let e in this.expirations)for(let r of this.expirations[e])yield r}*values(){for(let e in this.expirations)for(let r of this.expirations[e])yield this.data.get(r)}[Symbol.iterator](){return this.entries()}};BO.exports=G_});var XO=v(ZO=>{"use strict";ZO.supports=function(...e){let r=e.reduce((n,s)=>Object.assign(n,s),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}});var Hi=v((jEe,YO)=>{"use strict";YO.exports=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var tF=v(Cy=>{"use strict";Cy.byteLength=bH;Cy.toByteArray=wH;Cy.fromByteArray=AH;var Ps=[],pi=[],vH=typeof Uint8Array<"u"?Uint8Array:Array,c1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Uu=0,QO=c1.length;Uu<QO;++Uu)Ps[Uu]=c1[Uu],pi[c1.charCodeAt(Uu)]=Uu;var Uu,QO;pi[45]=62;pi[95]=63;function eF(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function bH(t){var e=eF(t),r=e[0],n=e[1];return(r+n)*3/4-n}function _H(t,e,r){return(e+r)*3/4-r}function wH(t){var e,r=eF(t),n=r[0],s=r[1],i=new vH(_H(t,n,s)),o=0,a=s>0?n-4:n,c;for(c=0;c<a;c+=4)e=pi[t.charCodeAt(c)]<<18|pi[t.charCodeAt(c+1)]<<12|pi[t.charCodeAt(c+2)]<<6|pi[t.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=pi[t.charCodeAt(c)]<<2|pi[t.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=pi[t.charCodeAt(c)]<<10|pi[t.charCodeAt(c+1)]<<4|pi[t.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function EH(t){return Ps[t>>18&63]+Ps[t>>12&63]+Ps[t>>6&63]+Ps[t&63]}function SH(t,e,r){for(var n,s=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(EH(n));return s.join("")}function AH(t){for(var e,r=t.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(SH(t,o,o+i>a?a:o+i));return n===1?(e=t[r-1],s.push(Ps[e>>2]+Ps[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(Ps[e>>10]+Ps[e>>4&63]+Ps[e<<2&63]+"=")),s.join("")}});var rF=v(l1=>{l1.read=function(t,e,r,n,s){var i,o,a=s*8-n-1,c=(1<<a)-1,u=c>>1,l=-7,d=r?s-1:0,p=r?-1:1,f=t[e+d];for(d+=p,i=f&(1<<-l)-1,f>>=-l,l+=a;l>0;i=i*256+t[e+d],d+=p,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+t[e+d],d+=p,l-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-u}return(f?-1:1)*o*Math.pow(2,i-n)};l1.write=function(t,e,r,n,s,i){var o,a,c,u=i*8-s-1,l=(1<<u)-1,d=l>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,h=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=p/c:e+=p*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*c-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[r+f]=a&255,f+=h,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[r+f]=o&255,f+=h,o/=256,u-=8);t[r+f-h]|=y*128}});var hi=v($l=>{"use strict";var d1=tF(),kl=rF(),nF=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;$l.Buffer=J;$l.SlowBuffer=FH;$l.INSPECT_MAX_BYTES=50;var Py=2147483647;$l.kMaxLength=Py;J.TYPED_ARRAY_SUPPORT=DH();!J.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function DH(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(J.prototype,"parent",{enumerable:!0,get:function(){if(J.isBuffer(this))return this.buffer}});Object.defineProperty(J.prototype,"offset",{enumerable:!0,get:function(){if(J.isBuffer(this))return this.byteOffset}});function So(t){if(t>Py)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,J.prototype),e}function J(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m1(t)}return aF(t,e,r)}J.poolSize=8192;function aF(t,e,r){if(typeof t=="string")return CH(t,e);if(ArrayBuffer.isView(t))return PH(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Os(t,ArrayBuffer)||t&&Os(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Os(t,SharedArrayBuffer)||t&&Os(t.buffer,SharedArrayBuffer)))return p1(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return J.from(n,e,r);let s=OH(t);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return J.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}J.from=function(t,e,r){return aF(t,e,r)};Object.setPrototypeOf(J.prototype,Uint8Array.prototype);Object.setPrototypeOf(J,Uint8Array);function uF(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function xH(t,e,r){return uF(t),t<=0?So(t):e!==void 0?typeof r=="string"?So(t).fill(e,r):So(t).fill(e):So(t)}J.alloc=function(t,e,r){return xH(t,e,r)};function m1(t){return uF(t),So(t<0?0:y1(t)|0)}J.allocUnsafe=function(t){return m1(t)};J.allocUnsafeSlow=function(t){return m1(t)};function CH(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!J.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=cF(t,e)|0,n=So(r),s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n}function f1(t){let e=t.length<0?0:y1(t.length)|0,r=So(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function PH(t){if(Os(t,Uint8Array)){let e=new Uint8Array(t);return p1(e.buffer,e.byteOffset,e.byteLength)}return f1(t)}function p1(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,J.prototype),n}function OH(t){if(J.isBuffer(t)){let e=y1(t.length)|0,r=So(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||v1(t.length)?So(0):f1(t);if(t.type==="Buffer"&&Array.isArray(t.data))return f1(t.data)}function y1(t){if(t>=Py)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Py.toString(16)+" bytes");return t|0}function FH(t){return+t!=t&&(t=0),J.alloc(+t)}J.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==J.prototype};J.compare=function(e,r){if(Os(e,Uint8Array)&&(e=J.from(e,e.offset,e.byteLength)),Os(r,Uint8Array)&&(r=J.from(r,r.offset,r.byteLength)),!J.isBuffer(e)||!J.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,s=r.length;for(let i=0,o=Math.min(n,s);i<o;++i)if(e[i]!==r[i]){n=e[i],s=r[i];break}return n<s?-1:s<n?1:0};J.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};J.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return J.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let s=J.allocUnsafe(r),i=0;for(n=0;n<e.length;++n){let o=e[n];if(Os(o,Uint8Array))i+o.length>s.length?(J.isBuffer(o)||(o=J.from(o)),o.copy(s,i)):Uint8Array.prototype.set.call(s,o,i);else if(J.isBuffer(o))o.copy(s,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=o.length}return s};function cF(t,e){if(J.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Os(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return h1(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return vF(t).length;default:if(s)return n?-1:h1(t).length;e=(""+e).toLowerCase(),s=!0}}J.byteLength=cF;function TH(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return LH(this,e,r);case"utf8":case"utf-8":return dF(this,e,r);case"ascii":return MH(this,e,r);case"latin1":case"binary":return qH(this,e,r);case"base64":return jH(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return UH(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}J.prototype._isBuffer=!0;function Vu(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}J.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Vu(this,r,r+1);return this};J.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Vu(this,r,r+3),Vu(this,r+1,r+2);return this};J.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Vu(this,r,r+7),Vu(this,r+1,r+6),Vu(this,r+2,r+5),Vu(this,r+3,r+4);return this};J.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?dF(this,0,e):TH.apply(this,arguments)};J.prototype.toLocaleString=J.prototype.toString;J.prototype.equals=function(e){if(!J.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:J.compare(this,e)===0};J.prototype.inspect=function(){let e="",r=$l.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};nF&&(J.prototype[nF]=J.prototype.inspect);J.prototype.compare=function(e,r,n,s,i){if(Os(e,Uint8Array)&&(e=J.from(e,e.offset,e.byteLength)),!J.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),i===void 0&&(i=this.length),r<0||n>e.length||s<0||i>this.length)throw new RangeError("out of range index");if(s>=i&&r>=n)return 0;if(s>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,s>>>=0,i>>>=0,this===e)return 0;let o=i-s,a=n-r,c=Math.min(o,a),u=this.slice(s,i),l=e.slice(r,n);for(let d=0;d<c;++d)if(u[d]!==l[d]){o=u[d],a=l[d];break}return o<a?-1:a<o?1:0};function lF(t,e,r,n,s){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,v1(r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0)if(s)r=0;else return-1;if(typeof e=="string"&&(e=J.from(e,n)),J.isBuffer(e))return e.length===0?-1:iF(t,e,r,n,s);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):iF(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function iF(t,e,r,n,s){let i=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;i=2,o/=2,a/=2,r/=2}function c(l,d){return i===1?l[d]:l.readUInt16BE(d*i)}let u;if(s){let l=-1;for(u=r;u<o;u++)if(c(t,u)===c(e,l===-1?0:u-l)){if(l===-1&&(l=u),u-l+1===a)return l*i}else l!==-1&&(u-=u-l),l=-1}else for(r+a>o&&(r=o-a),u=r;u>=0;u--){let l=!0;for(let d=0;d<a;d++)if(c(t,u+d)!==c(e,d)){l=!1;break}if(l)return u}return-1}J.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};J.prototype.indexOf=function(e,r,n){return lF(this,e,r,n,!0)};J.prototype.lastIndexOf=function(e,r,n){return lF(this,e,r,n,!1)};function IH(t,e,r,n){r=Number(r)||0;let s=t.length-r;n?(n=Number(n),n>s&&(n=s)):n=s;let i=e.length;n>i/2&&(n=i/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(v1(a))return o;t[r+o]=a}return o}function BH(t,e,r,n){return Oy(h1(e,t.length-r),t,r,n)}function kH(t,e,r,n){return Oy(HH(e),t,r,n)}function RH(t,e,r,n){return Oy(vF(e),t,r,n)}function $H(t,e,r,n){return Oy(WH(e,t.length-r),t,r,n)}J.prototype.write=function(e,r,n,s){if(r===void 0)s="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")s=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-r;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let o=!1;for(;;)switch(s){case"hex":return IH(this,e,r,n);case"utf8":case"utf-8":return BH(this,e,r,n);case"ascii":case"latin1":case"binary":return kH(this,e,r,n);case"base64":return RH(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $H(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}};J.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function jH(t,e,r){return e===0&&r===t.length?d1.fromByteArray(t):d1.fromByteArray(t.slice(e,r))}function dF(t,e,r){r=Math.min(t.length,r);let n=[],s=e;for(;s<r;){let i=t[s],o=null,a=i>239?4:i>223?3:i>191?2:1;if(s+a<=r){let c,u,l,d;switch(a){case 1:i<128&&(o=i);break;case 2:c=t[s+1],(c&192)===128&&(d=(i&31)<<6|c&63,d>127&&(o=d));break;case 3:c=t[s+1],u=t[s+2],(c&192)===128&&(u&192)===128&&(d=(i&15)<<12|(c&63)<<6|u&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:c=t[s+1],u=t[s+2],l=t[s+3],(c&192)===128&&(u&192)===128&&(l&192)===128&&(d=(i&15)<<18|(c&63)<<12|(u&63)<<6|l&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),s+=a}return NH(n)}var sF=4096;function NH(t){let e=t.length;if(e<=sF)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=sF));return r}function MH(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]&127);return n}function qH(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]);return n}function LH(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let s="";for(let i=e;i<r;++i)s+=JH[t[i]];return s}function UH(t,e,r){let n=t.slice(e,r),s="";for(let i=0;i<n.length-1;i+=2)s+=String.fromCharCode(n[i]+n[i+1]*256);return s}J.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let s=this.subarray(e,r);return Object.setPrototypeOf(s,J.prototype),s};function $r(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}J.prototype.readUintLE=J.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||$r(e,r,this.length);let s=this[e],i=1,o=0;for(;++o<r&&(i*=256);)s+=this[e+o]*i;return s};J.prototype.readUintBE=J.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||$r(e,r,this.length);let s=this[e+--r],i=1;for(;r>0&&(i*=256);)s+=this[e+--r]*i;return s};J.prototype.readUint8=J.prototype.readUInt8=function(e,r){return e=e>>>0,r||$r(e,1,this.length),this[e]};J.prototype.readUint16LE=J.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||$r(e,2,this.length),this[e]|this[e+1]<<8};J.prototype.readUint16BE=J.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||$r(e,2,this.length),this[e]<<8|this[e+1]};J.prototype.readUint32LE=J.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||$r(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};J.prototype.readUint32BE=J.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||$r(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};J.prototype.readBigUInt64LE=Sa(function(e){e=e>>>0,Rl(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&up(e,this.length-8);let s=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(s)+(BigInt(i)<<BigInt(32))});J.prototype.readBigUInt64BE=Sa(function(e){e=e>>>0,Rl(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&up(e,this.length-8);let s=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(i)});J.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||$r(e,r,this.length);let s=this[e],i=1,o=0;for(;++o<r&&(i*=256);)s+=this[e+o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*r)),s};J.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||$r(e,r,this.length);let s=r,i=1,o=this[e+--s];for(;s>0&&(i*=256);)o+=this[e+--s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o};J.prototype.readInt8=function(e,r){return e=e>>>0,r||$r(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};J.prototype.readInt16LE=function(e,r){e=e>>>0,r||$r(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};J.prototype.readInt16BE=function(e,r){e=e>>>0,r||$r(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};J.prototype.readInt32LE=function(e,r){return e=e>>>0,r||$r(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};J.prototype.readInt32BE=function(e,r){return e=e>>>0,r||$r(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};J.prototype.readBigInt64LE=Sa(function(e){e=e>>>0,Rl(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&up(e,this.length-8);let s=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});J.prototype.readBigInt64BE=Sa(function(e){e=e>>>0,Rl(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&up(e,this.length-8);let s=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});J.prototype.readFloatLE=function(e,r){return e=e>>>0,r||$r(e,4,this.length),kl.read(this,e,!0,23,4)};J.prototype.readFloatBE=function(e,r){return e=e>>>0,r||$r(e,4,this.length),kl.read(this,e,!1,23,4)};J.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||$r(e,8,this.length),kl.read(this,e,!0,52,8)};J.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||$r(e,8,this.length),kl.read(this,e,!1,52,8)};function In(t,e,r,n,s,i){if(!J.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}J.prototype.writeUintLE=J.prototype.writeUIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;In(this,e,r,n,a,0)}let i=1,o=0;for(this[r]=e&255;++o<n&&(i*=256);)this[r+o]=e/i&255;return r+n};J.prototype.writeUintBE=J.prototype.writeUIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;In(this,e,r,n,a,0)}let i=n-1,o=1;for(this[r+i]=e&255;--i>=0&&(o*=256);)this[r+i]=e/o&255;return r+n};J.prototype.writeUint8=J.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||In(this,e,r,1,255,0),this[r]=e&255,r+1};J.prototype.writeUint16LE=J.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||In(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};J.prototype.writeUint16BE=J.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||In(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};J.prototype.writeUint32LE=J.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||In(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};J.prototype.writeUint32BE=J.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||In(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function fF(t,e,r,n,s){gF(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function pF(t,e,r,n,s){gF(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i=i>>8,t[r+6]=i,i=i>>8,t[r+5]=i,i=i>>8,t[r+4]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}J.prototype.writeBigUInt64LE=Sa(function(e,r=0){return fF(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});J.prototype.writeBigUInt64BE=Sa(function(e,r=0){return pF(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});J.prototype.writeIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let c=Math.pow(2,8*n-1);In(this,e,r,n,c-1,-c)}let i=0,o=1,a=0;for(this[r]=e&255;++i<n&&(o*=256);)e<0&&a===0&&this[r+i-1]!==0&&(a=1),this[r+i]=(e/o>>0)-a&255;return r+n};J.prototype.writeIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let c=Math.pow(2,8*n-1);In(this,e,r,n,c-1,-c)}let i=n-1,o=1,a=0;for(this[r+i]=e&255;--i>=0&&(o*=256);)e<0&&a===0&&this[r+i+1]!==0&&(a=1),this[r+i]=(e/o>>0)-a&255;return r+n};J.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||In(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};J.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||In(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};J.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||In(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};J.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||In(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};J.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||In(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};J.prototype.writeBigInt64LE=Sa(function(e,r=0){return fF(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});J.prototype.writeBigInt64BE=Sa(function(e,r=0){return pF(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function hF(t,e,r,n,s,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function mF(t,e,r,n,s){return e=+e,r=r>>>0,s||hF(t,e,r,4,34028234663852886e22,-34028234663852886e22),kl.write(t,e,r,n,23,4),r+4}J.prototype.writeFloatLE=function(e,r,n){return mF(this,e,r,!0,n)};J.prototype.writeFloatBE=function(e,r,n){return mF(this,e,r,!1,n)};function yF(t,e,r,n,s){return e=+e,r=r>>>0,s||hF(t,e,r,8,17976931348623157e292,-17976931348623157e292),kl.write(t,e,r,n,52,8),r+8}J.prototype.writeDoubleLE=function(e,r,n){return yF(this,e,r,!0,n)};J.prototype.writeDoubleBE=function(e,r,n){return yF(this,e,r,!1,n)};J.prototype.copy=function(e,r,n,s){if(!J.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),r>=e.length&&(r=e.length),r||(r=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-r<s-n&&(s=e.length-r+n);let i=s-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),r),i};J.prototype.fill=function(e,r,n,s){if(typeof e=="string"){if(typeof r=="string"?(s=r,r=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!J.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(e.length===1){let o=e.charCodeAt(0);(s==="utf8"&&o<128||s==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let i;if(typeof e=="number")for(i=r;i<n;++i)this[i]=e;else{let o=J.isBuffer(e)?e:J.from(e,s),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-r;++i)this[i+r]=o[i%a]}return this};var Bl={};function g1(t,e,r){Bl[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}g1("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);g1("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);g1("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>2**32?s=oF(String(r)):typeof r=="bigint"&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=oF(s)),s+="n"),n+=` It must be ${e}. Received ${s}`,n},RangeError);function oF(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function VH(t,e,r){Rl(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&up(e,t.length-(r+1))}function gF(t,e,r,n,s,i){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw i>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(i+1)*8}${o}`:a=`>= -(2${o} ** ${(i+1)*8-1}${o}) and < 2 ** ${(i+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Bl.ERR_OUT_OF_RANGE("value",a,t)}VH(n,s,i)}function Rl(t,e){if(typeof t!="number")throw new Bl.ERR_INVALID_ARG_TYPE(e,"number",t)}function up(t,e,r){throw Math.floor(t)!==t?(Rl(t,r),new Bl.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Bl.ERR_BUFFER_OUT_OF_BOUNDS:new Bl.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var KH=/[^+/0-9A-Za-z-_]/g;function zH(t){if(t=t.split("=")[0],t=t.trim().replace(KH,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function h1(t,e){e=e||1/0;let r,n=t.length,s=null,i=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function HH(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function WH(t,e){let r,n,s,i=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,s=r%256,i.push(s),i.push(n);return i}function vF(t){return d1.toByteArray(zH(t))}function Oy(t,e,r,n){let s;for(s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function Os(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function v1(t){return t!==t}var JH=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let s=0;s<16;++s)e[n+s]=t[r]+t[s]}return e}();function Sa(t){return typeof BigInt>"u"?GH:t}function GH(){throw new Error("BigInt not supported")}});var _1=v((UEe,bF)=>{"use strict";var b1=null;bF.exports=function(){return b1===null&&(b1={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),b1}});var S1=v(_F=>{"use strict";var w1=Hi(),ZH=new Set(["buffer","view","utf8"]),E1=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!ZH.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new w1(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new w1(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new w1(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};_F.Encoding=E1});var C1=v(Fy=>{"use strict";var{Buffer:D1}=hi()||{},{Encoding:x1}=S1(),XH=_1(),cp=class extends x1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new lp({encode:this.encode,decode:e=>this.decode(D1.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},lp=class extends x1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new cp({encode:e=>{let r=this.encode(e);return D1.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},A1=class extends x1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new cp({encode:e=>D1.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:r}=XH();return new lp({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Fy.BufferFormat=cp;Fy.ViewFormat=lp;Fy.UTF8Format=A1});var AF=v(Ku=>{"use strict";var{Buffer:un}=hi()||{Buffer:{isBuffer:()=>!1}},{textEncoder:EF,textDecoder:wF}=_1()(),{BufferFormat:dp,ViewFormat:P1,UTF8Format:SF}=C1(),Ty=t=>t;Ku.utf8=new SF({encode:function(t){return un.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?wF.decode(t):String(t)},decode:Ty,name:"utf8",createViewTranscoder(){return new P1({encode:function(t){return ArrayBuffer.isView(t)?t:EF.encode(t)},decode:function(t){return wF.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new dp({encode:function(t){return un.isBuffer(t)?t:ArrayBuffer.isView(t)?un.from(t.buffer,t.byteOffset,t.byteLength):un.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});Ku.json=new SF({encode:JSON.stringify,decode:JSON.parse,name:"json"});Ku.buffer=new dp({encode:function(t){return un.isBuffer(t)?t:ArrayBuffer.isView(t)?un.from(t.buffer,t.byteOffset,t.byteLength):un.from(String(t),"utf8")},decode:Ty,name:"buffer",createViewTranscoder(){return new P1({encode:function(t){return ArrayBuffer.isView(t)?t:un.from(String(t),"utf8")},decode:function(t){return un.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});Ku.view=new P1({encode:function(t){return ArrayBuffer.isView(t)?t:EF.encode(t)},decode:Ty,name:"view",createBufferTranscoder(){return new dp({encode:function(t){return un.isBuffer(t)?t:ArrayBuffer.isView(t)?un.from(t.buffer,t.byteOffset,t.byteLength):un.from(String(t),"utf8")},decode:Ty,name:`${this.name}+buffer`})}});Ku.hex=new dp({encode:function(t){return un.isBuffer(t)?t:un.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});Ku.base64=new dp({encode:function(t){return un.isBuffer(t)?t:un.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})});var CF=v(xF=>{"use strict";var DF=Hi(),By=AF(),{Encoding:YH}=S1(),{BufferFormat:QH,ViewFormat:eW,UTF8Format:tW}=C1(),fp=Symbol("formats"),Iy=Symbol("encodings"),rW=new Set(["buffer","view","utf8"]),O1=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>rW.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[Iy]=new Map,this[fp]=new Set(e);for(let r in By)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[Iy].values()))}encoding(e){let r=this[Iy].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=oW[e],!r)throw new DF(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=nW(e)}let{name:n,format:s}=r;if(!this[fp].has(s))if(this[fp].has("view"))r=r.createViewTranscoder();else if(this[fp].has("buffer"))r=r.createBufferTranscoder();else if(this[fp].has("utf8"))r=r.createUTF8Transcoder();else throw new DF(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let i of[e,n,r.name,r.commonName])this[Iy].set(i,r)}return r}};xF.Transcoder=O1;function nW(t){if(t instanceof YH)return t;let e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${aW++}`;switch(iW(t)){case"view":return new eW({...t,name:r});case"utf8":return new tW({...t,name:r});case"buffer":return new QH({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function iW(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}var sW={binary:By.buffer,"utf-8":By.utf8},oW={...By,...sW},aW=0});var Nl=v((WEe,F1)=>{"use strict";var jl=typeof Reflect=="object"?Reflect:null,PF=jl&&typeof jl.apply=="function"?jl.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ky;jl&&typeof jl.ownKeys=="function"?ky=jl.ownKeys:Object.getOwnPropertySymbols?ky=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ky=function(e){return Object.getOwnPropertyNames(e)};function uW(t){console&&console.warn&&console.warn(t)}var FF=Number.isNaN||function(e){return e!==e};function Nt(){Nt.init.call(this)}F1.exports=Nt;F1.exports.once=fW;Nt.EventEmitter=Nt;Nt.prototype._events=void 0;Nt.prototype._eventsCount=0;Nt.prototype._maxListeners=void 0;var OF=10;function Ry(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Nt,"defaultMaxListeners",{enumerable:!0,get:function(){return OF},set:function(t){if(typeof t!="number"||t<0||FF(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");OF=t}});Nt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Nt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||FF(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function TF(t){return t._maxListeners===void 0?Nt.defaultMaxListeners:t._maxListeners}Nt.prototype.getMaxListeners=function(){return TF(this)};Nt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")PF(c,this,r);else for(var u=c.length,l=$F(c,u),n=0;n<u;++n)PF(l[n],this,r);return!0};function IF(t,e,r,n){var s,i,o;if(Ry(r),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),o=i[e]),o===void 0)o=i[e]=r,++t._eventsCount;else if(typeof o=="function"?o=i[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),s=TF(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,uW(a)}return t}Nt.prototype.addListener=function(e,r){return IF(this,e,r,!1)};Nt.prototype.on=Nt.prototype.addListener;Nt.prototype.prependListener=function(e,r){return IF(this,e,r,!0)};function cW(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function BF(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=cW.bind(n);return s.listener=r,n.wrapFn=s,s}Nt.prototype.once=function(e,r){return Ry(r),this.on(e,BF(this,e,r)),this};Nt.prototype.prependOnceListener=function(e,r){return Ry(r),this.prependListener(e,BF(this,e,r)),this};Nt.prototype.removeListener=function(e,r){var n,s,i,o,a;if(Ry(r),s=this._events,s===void 0)return this;if(n=s[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():lW(n,i),n.length===1&&(s[e]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};Nt.prototype.off=Nt.prototype.removeListener;Nt.prototype.removeAllListeners=function(e){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this};function kF(t,e,r){var n=t._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?dW(s):$F(s,s.length)}Nt.prototype.listeners=function(e){return kF(this,e,!0)};Nt.prototype.rawListeners=function(e){return kF(this,e,!1)};Nt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):RF.call(t,e)};Nt.prototype.listenerCount=RF;function RF(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Nt.prototype.eventNames=function(){return this._eventsCount>0?ky(this._events):[]};function $F(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function lW(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function dW(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function fW(t,e){return new Promise(function(r,n){function s(o){t.removeListener(e,i),n(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),r([].slice.call(arguments))}jF(t,e,i,{once:!0}),e!=="error"&&pW(t,s,{once:!0})})}function pW(t,e,r){typeof t.on=="function"&&jF(t,"error",e,r)}function jF(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){n.once&&t.removeEventListener(e,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var MF=v((JEe,NF)=>{NF.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)});var pp=v(T1=>{"use strict";var qF=MF();T1.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,s){t=function(i,o){i?s(i):n(o)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};T1.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){qF(()=>e(null,r))}).catch(function(r){qF(()=>e(r))})}});var $y=v(I1=>{"use strict";I1.getCallback=function(t,e){return typeof t=="function"?t:e};I1.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}}});var Oa=v(qy=>{"use strict";var{fromCallback:B1}=pp(),Gn=Hi(),{getOptions:k1,getCallback:LF}=$y(),zu=Symbol("promise"),Ml=Symbol("callback"),Fs=Symbol("working"),Hu=Symbol("handleOne"),Ao=Symbol("handleMany"),R1=Symbol("autoClose"),Ca=Symbol("finishWork"),Ts=Symbol("returnMany"),Aa=Symbol("closing"),hp=Symbol("handleClose"),jy=Symbol("closed"),mp=Symbol("closeCallbacks"),xa=Symbol("keyEncoding"),Wu=Symbol("valueEncoding"),$1=Symbol("abortOnClose"),Ny=Symbol("legacy"),j1=Symbol("keys"),N1=Symbol("values"),Da=Symbol("limit"),mi=Symbol("count"),My=Object.freeze({}),hW=()=>{},UF=!1,yp=class{constructor(e,r,n){if(typeof e!="object"||e===null){let s=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${s}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[jy]=!1,this[mp]=[],this[Fs]=!1,this[Aa]=!1,this[R1]=!1,this[Ml]=null,this[Hu]=this[Hu].bind(this),this[Ao]=this[Ao].bind(this),this[hp]=this[hp].bind(this),this[xa]=r[xa],this[Wu]=r[Wu],this[Ny]=n,this[Da]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[mi]=0,this[$1]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[mi]}get limit(){return this[Da]}next(e){let r;if(e===void 0)r=new Promise((n,s)=>{e=(i,o,a)=>{i?s(i):this[Ny]?o===void 0&&a===void 0?n():n([o,a]):n(o)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Aa]?this.nextTick(e,new Gn("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Fs]?this.nextTick(e,new Gn("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Fs]=!0,this[Ml]=e,this[mi]>=this[Da]?this.nextTick(this[Hu],null):this._next(this[Hu])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=LF(r,n),n=B1(n,zu),r=k1(r,My),Number.isInteger(e)?(this[Aa]?this.nextTick(n,new Gn("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Fs]?this.nextTick(n,new Gn("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[Da]<1/0&&(e=Math.min(e,this[Da]-this[mi])),this[Fs]=!0,this[Ml]=n,e<=0?this.nextTick(this[Ao],null,[]):this._nextv(e,r,this[Ao])),n[zu]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[zu])}_nextv(e,r,n){let s=[],i=(o,a,c)=>{if(o)return n(o);if(this[Ny]?a===void 0&&c===void 0:a===void 0)return n(null,s);s.push(this[Ny]?[a,c]:a),s.length===e?n(null,s):this._next(i)};this._next(i)}all(e,r){return r=LF(e,r),r=B1(r,zu),e=k1(e,My),this[Aa]?this.nextTick(r,new Gn("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Fs]?this.nextTick(r,new Gn("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Fs]=!0,this[Ml]=r,this[R1]=!0,this[mi]>=this[Da]?this.nextTick(this[Ao],null,[]):this._all(e,this[Ao])),r[zu]}_all(e,r){let n=this[mi],s=[],i=()=>{let a=this[Da]<1/0?Math.min(1e3,this[Da]-n):1e3;a<=0?this.nextTick(r,null,s):this._nextv(a,My,o)},o=(a,c)=>{a?r(a):c.length===0?r(null,s):(s.push.apply(s,c),n+=c.length,i())};i()}[Ca](){let e=this[Ml];return this[$1]&&e===null?hW:(this[Fs]=!1,this[Ml]=null,this[Aa]&&this._close(this[hp]),e)}[Ts](e,r,n){this[R1]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=k1(r,My),!this[Aa]){if(this[Fs])throw new Gn("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(r.keyEncoding||this[xa]),s=n.format;r.keyEncoding!==s&&(r={...r,keyEncoding:s});let i=this.db.prefixKey(n.encode(e),s);this._seek(i,r)}}}_seek(e,r){throw new Gn("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=B1(e,zu),this[jy]?this.nextTick(e):this[Aa]?this[mp].push(e):(this[Aa]=!0,this[mp].push(e),this[Fs]?this[$1]&&this[Ca]()(new Gn("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[hp])),e[zu]}_close(e){this.nextTick(e)}[hp](){this[jy]=!0,this.db.detachResource(this);let e=this[mp];this[mp]=[];for(let r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[jy]||await this.close()}}},ql=class extends yp{constructor(e,r){super(e,r,!0),this[j1]=r.keys!==!1,this[N1]=r.values!==!1}[Hu](e,r,n){let s=this[Ca]();if(e)return s(e);try{r=this[j1]&&r!==void 0?this[xa].decode(r):void 0,n=this[N1]&&n!==void 0?this[Wu].decode(n):void 0}catch(i){return s(new Pa("entry",i))}r===void 0&&n===void 0||this[mi]++,s(null,r,n)}[Ao](e,r){let n=this[Ca]();if(e)return this[Ts](n,e);try{for(let s of r){let i=s[0],o=s[1];s[0]=this[j1]&&i!==void 0?this[xa].decode(i):void 0,s[1]=this[N1]&&o!==void 0?this[Wu].decode(o):void 0}}catch(s){return this[Ts](n,new Pa("entries",s))}this[mi]+=r.length,this[Ts](n,null,r)}end(e){return!UF&&typeof console<"u"&&(UF=!0,console.warn(new Gn("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},M1=class extends yp{constructor(e,r){super(e,r,!1)}[Hu](e,r){let n=this[Ca]();if(e)return n(e);try{r=r!==void 0?this[xa].decode(r):void 0}catch(s){return n(new Pa("key",s))}r!==void 0&&this[mi]++,n(null,r)}[Ao](e,r){let n=this[Ca]();if(e)return this[Ts](n,e);try{for(let s=0;s<r.length;s++){let i=r[s];r[s]=i!==void 0?this[xa].decode(i):void 0}}catch(s){return this[Ts](n,new Pa("keys",s))}this[mi]+=r.length,this[Ts](n,null,r)}},q1=class extends yp{constructor(e,r){super(e,r,!1)}[Hu](e,r){let n=this[Ca]();if(e)return n(e);try{r=r!==void 0?this[Wu].decode(r):void 0}catch(s){return n(new Pa("value",s))}r!==void 0&&this[mi]++,n(null,r)}[Ao](e,r){let n=this[Ca]();if(e)return this[Ts](n,e);try{for(let s=0;s<r.length;s++){let i=r[s];r[s]=i!==void 0?this[Wu].decode(i):void 0}}catch(s){return this[Ts](n,new Pa("values",s))}this[mi]+=r.length,this[Ts](n,null,r)}},Pa=class extends Gn{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}};for(let t of["_ended property","_nexting property","_end method"])Object.defineProperty(ql.prototype,t.split(" ")[0],{get(){throw new Gn(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Gn(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});ql.keyEncoding=xa;ql.valueEncoding=Wu;qy.AbstractIterator=ql;qy.AbstractKeyIterator=M1;qy.AbstractValueIterator=q1});var VF=v(L1=>{"use strict";var{AbstractKeyIterator:mW,AbstractValueIterator:yW}=Oa(),Ju=Symbol("iterator"),gp=Symbol("callback"),Ll=Symbol("handleOne"),Gu=Symbol("handleMany"),vp=class extends mW{constructor(e,r){super(e,r),this[Ju]=e.iterator({...r,keys:!0,values:!1}),this[Ll]=this[Ll].bind(this),this[Gu]=this[Gu].bind(this)}},Ly=class extends yW{constructor(e,r){super(e,r),this[Ju]=e.iterator({...r,keys:!1,values:!0}),this[Ll]=this[Ll].bind(this),this[Gu]=this[Gu].bind(this)}};for(let t of[vp,Ly]){let e=t===vp,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[gp]=n,this[Ju].next(this[Ll])},t.prototype[Ll]=function(n,s,i){let o=this[gp];n?o(n):o(null,e?s:i)},t.prototype._nextv=function(n,s,i){this[gp]=i,this[Ju].nextv(n,s,this[Gu])},t.prototype._all=function(n,s){this[gp]=s,this[Ju].all(n,this[Gu])},t.prototype[Gu]=function(n,s){let i=this[gp];n?i(n):i(null,s.map(r))},t.prototype._seek=function(n,s){this[Ju].seek(n,s)},t.prototype._close=function(n){this[Ju].close(n)}}L1.DefaultKeyIterator=vp;L1.DefaultValueIterator=Ly});var KF=v(Wy=>{"use strict";var{AbstractIterator:gW,AbstractKeyIterator:vW,AbstractValueIterator:bW}=Oa(),U1=Hi(),Bn=Symbol("nut"),zy=Symbol("undefer"),Hy=Symbol("factory"),Uy=class extends gW{constructor(e,r){super(e,r),this[Bn]=null,this[Hy]=()=>e.iterator(r),this.db.defer(()=>this[zy]())}},Vy=class extends vW{constructor(e,r){super(e,r),this[Bn]=null,this[Hy]=()=>e.keys(r),this.db.defer(()=>this[zy]())}},Ky=class extends bW{constructor(e,r){super(e,r),this[Bn]=null,this[Hy]=()=>e.values(r),this.db.defer(()=>this[zy]())}};for(let t of[Uy,Vy,Ky])t.prototype[zy]=function(){this.db.status==="open"&&(this[Bn]=this[Hy]())},t.prototype._next=function(e){this[Bn]!==null?this[Bn].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new U1("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[Bn]!==null?this[Bn].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new U1("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[Bn]!==null?this[Bn].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new U1("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[Bn]!==null?this[Bn]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[Bn]!==null?this[Bn].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};Wy.DeferredIterator=Uy;Wy.DeferredKeyIterator=Vy;Wy.DeferredValueIterator=Ky});var K1=v(HF=>{"use strict";var{fromCallback:zF}=pp(),Jy=Hi(),{getCallback:_W,getOptions:wW}=$y(),Gy=Symbol("promise"),yi=Symbol("status"),Ul=Symbol("operations"),bp=Symbol("finishClose"),Vl=Symbol("closeCallbacks"),V1=class{constructor(e){if(typeof e!="object"||e===null){let r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[Ul]=[],this[Vl]=[],this[yi]="open",this[bp]=this[bp].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Ul].length}put(e,r,n){if(this[yi]!=="open")throw new Jy("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let s=this.db._checkKey(e)||this.db._checkValue(r);if(s)throw s;let i=n&&n.sublevel!=null?n.sublevel:this.db,o=n,a=i.keyEncoding(n&&n.keyEncoding),c=i.valueEncoding(n&&n.valueEncoding),u=a.format;n={...n,keyEncoding:u,valueEncoding:c.format},i!==this.db&&(n.sublevel=null);let l=i.prefixKey(a.encode(e),u),d=c.encode(r);return this._put(l,d,n),this[Ul].push({...o,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[yi]!=="open")throw new Jy("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let s=r&&r.sublevel!=null?r.sublevel:this.db,i=r,o=s.keyEncoding(r&&r.keyEncoding),a=o.format;return r={...r,keyEncoding:a},s!==this.db&&(r.sublevel=null),this._del(s.prefixKey(o.encode(e),a),r),this[Ul].push({...i,type:"del",key:e}),this}_del(e,r){}clear(){if(this[yi]!=="open")throw new Jy("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Ul]=[],this}_clear(){}write(e,r){return r=_W(e,r),r=zF(r,Gy),e=wW(e),this[yi]!=="open"?this.nextTick(r,new Jy("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[yi]="writing",this._write(e,n=>{this[yi]="closing",this[Vl].push(()=>r(n)),n||this.db.emit("batch",this[Ul]),this._close(this[bp])})),r[Gy]}_write(e,r){}close(e){return e=zF(e,Gy),this[yi]==="closing"?this[Vl].push(e):this[yi]==="closed"?this.nextTick(e):(this[Vl].push(e),this[yi]!=="writing"&&(this[yi]="closing",this._close(this[bp]))),e[Gy]}_close(e){this.nextTick(e)}[bp](){this[yi]="closed",this.db.detachResource(this);let e=this[Vl];this[Vl]=[];for(let r of e)r()}};HF.AbstractChainedBatch=V1});var JF=v(WF=>{"use strict";var{AbstractChainedBatch:EW}=K1(),SW=Hi(),Kl=Symbol("encoded"),z1=class extends EW{constructor(e){super(e),this[Kl]=[]}_put(e,r,n){this[Kl].push({...n,type:"put",key:e,value:r})}_del(e,r){this[Kl].push({...r,type:"del",key:e})}_clear(){this[Kl]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[Kl].length===0?this.nextTick(r):this.db._batch(this[Kl],e,r):this.nextTick(r,new SW("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};WF.DefaultChainedBatch=z1});var XF=v((rSe,ZF)=>{"use strict";var GF=Hi(),AW=Object.prototype.hasOwnProperty,DW=new Set(["lt","lte","gt","gte"]);ZF.exports=function(t,e){let r={};for(let n in t)if(AW.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new GF(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new GF("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});DW.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}});var H1=v((nSe,QF)=>{var YF;QF.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(YF||(YF=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var rT=v((iSe,tT)=>{"use strict";var eT=H1();tT.exports=function(t,...e){e.length===0?eT(t):eT(()=>t(...e))}});var nT=v(Zy=>{"use strict";var{AbstractIterator:xW,AbstractKeyIterator:CW,AbstractValueIterator:PW}=Oa(),zl=Symbol("unfix"),Wi=Symbol("iterator"),Zu=Symbol("handleOne"),Fa=Symbol("handleMany"),Do=Symbol("callback"),_p=class extends xW{constructor(e,r,n,s){super(e,r),this[Wi]=n,this[zl]=s,this[Zu]=this[Zu].bind(this),this[Fa]=this[Fa].bind(this),this[Do]=null}[Zu](e,r,n){let s=this[Do];if(e)return s(e);r!==void 0&&(r=this[zl](r)),s(e,r,n)}[Fa](e,r){let n=this[Do];if(e)return n(e);for(let s of r){let i=s[0];i!==void 0&&(s[0]=this[zl](i))}n(e,r)}},wp=class extends CW{constructor(e,r,n,s){super(e,r),this[Wi]=n,this[zl]=s,this[Zu]=this[Zu].bind(this),this[Fa]=this[Fa].bind(this),this[Do]=null}[Zu](e,r){let n=this[Do];if(e)return n(e);r!==void 0&&(r=this[zl](r)),n(e,r)}[Fa](e,r){let n=this[Do];if(e)return n(e);for(let s=0;s<r.length;s++){let i=r[s];i!==void 0&&(r[s]=this[zl](i))}n(e,r)}},Ep=class extends PW{constructor(e,r,n){super(e,r),this[Wi]=n}};for(let t of[_p,wp])t.prototype._next=function(e){this[Do]=e,this[Wi].next(this[Zu])},t.prototype._nextv=function(e,r,n){this[Do]=n,this[Wi].nextv(e,r,this[Fa])},t.prototype._all=function(e,r){this[Do]=r,this[Wi].all(e,this[Fa])};for(let t of[Ep])t.prototype._next=function(e){this[Wi].next(e)},t.prototype._nextv=function(e,r,n){this[Wi].nextv(e,r,n)},t.prototype._all=function(e,r){this[Wi].all(e,r)};for(let t of[_p,wp,Ep])t.prototype._seek=function(e,r){this[Wi].seek(e,r)},t.prototype._close=function(e){this[Wi].close(e)};Zy.AbstractSublevelIterator=_p;Zy.AbstractSublevelKeyIterator=wp;Zy.AbstractSublevelValueIterator=Ep});var aT=v((oSe,oT)=>{"use strict";var W1=Hi(),{Buffer:Z1}=hi()||{},{AbstractSublevelIterator:OW,AbstractSublevelKeyIterator:FW,AbstractSublevelValueIterator:TW}=nT(),xo=Symbol("prefix"),iT=Symbol("upperBound"),Sp=Symbol("prefixRange"),Zn=Symbol("parent"),J1=Symbol("unfix"),sT=new TextEncoder,IW={separator:"!"};oT.exports=function({AbstractLevel:t}){class e extends t{static defaults(n){if(typeof n=="string")throw new W1("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new W1("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?IW:n.separator?n:{...n,separator:"!"}}constructor(n,s,i){let{separator:o,manifest:a,...c}=e.defaults(i);s=kW(s,o);let u=o.charCodeAt(0)+1,l=n[Zn]||n;if(!sT.encode(s).every(f=>f>u&&f<127))throw new W1(`Prefix must use bytes > ${u} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(BW(l,a),c);let d=(n.prefix||"")+o+s+o,p=d.slice(0,-1)+String.fromCharCode(u);this[Zn]=l,this[xo]=new Xy(d),this[iT]=new Xy(p),this[J1]=new X1,this.nextTick=l.nextTick}prefixKey(n,s){if(s==="utf8")return this[xo].utf8+n;if(n.byteLength===0)return this[xo][s];if(s==="view"){let i=this[xo].view,o=new Uint8Array(i.byteLength+n.byteLength);return o.set(i,0),o.set(n,i.byteLength),o}else{let i=this[xo].buffer;return Z1.concat([i,n],i.byteLength+n.byteLength)}}[Sp](n,s){n.gte!==void 0?n.gte=this.prefixKey(n.gte,s):n.gt!==void 0?n.gt=this.prefixKey(n.gt,s):n.gte=this[xo][s],n.lte!==void 0?n.lte=this.prefixKey(n.lte,s):n.lt!==void 0?n.lt=this.prefixKey(n.lt,s):n.lte=this[iT][s]}get prefix(){return this[xo].utf8}get db(){return this[Zn]}_open(n,s){this[Zn].open({passive:!0},s)}_put(n,s,i,o){this[Zn].put(n,s,i,o)}_get(n,s,i){this[Zn].get(n,s,i)}_getMany(n,s,i){this[Zn].getMany(n,s,i)}_del(n,s,i){this[Zn].del(n,s,i)}_batch(n,s,i){this[Zn].batch(n,s,i)}_clear(n,s){this[Sp](n,n.keyEncoding),this[Zn].clear(n,s)}_iterator(n){this[Sp](n,n.keyEncoding);let s=this[Zn].iterator(n),i=this[J1].get(this[xo].utf8.length,n.keyEncoding);return new OW(this,n,s,i)}_keys(n){this[Sp](n,n.keyEncoding);let s=this[Zn].keys(n),i=this[J1].get(this[xo].utf8.length,n.keyEncoding);return new FW(this,n,s,i)}_values(n){this[Sp](n,n.keyEncoding);let s=this[Zn].values(n);return new TW(this,n,s)}}return{AbstractSublevel:e}};var BW=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:G1(t,"utf8"),buffer:G1(t,"buffer"),view:G1(t,"view")}}},G1=function(t,e){return t.supports.encodings[e]?t.keyEncoding(e).name===e:!1},Xy=class{constructor(e){this.utf8=e,this.view=sT.encode(e),this.buffer=Z1?Z1.from(this.view.buffer,0,this.view.byteLength):{}}},X1=class{constructor(){this.cache=new Map}get(e,r){let n=this.cache.get(r);return n===void 0&&(r==="view"?n=(function(s,i){return i.subarray(s)}).bind(null,e):n=(function(s,i){return i.slice(s)}).bind(null,e),this.cache.set(r,n)),n}},kW=function(t,e){let r=0,n=t.length;for(;r<n&&t[r]===e;)r++;for(;n>r&&t[n-1]===e;)n--;return t.slice(r,n)}});var rw=v(tw=>{"use strict";var{supports:RW}=XO(),{Transcoder:$W}=CF(),{EventEmitter:jW}=Nl(),{fromCallback:Ta}=pp(),Ji=Hi(),{AbstractIterator:Xu}=Oa(),{DefaultKeyIterator:NW,DefaultValueIterator:MW}=VF(),{DeferredIterator:qW,DeferredKeyIterator:LW,DeferredValueIterator:UW}=KF(),{DefaultChainedBatch:uT}=JF(),{getCallback:Yu,getOptions:Ia}=$y(),Yy=XF(),Xe=Symbol("promise"),Co=Symbol("landed"),Qu=Symbol("resources"),Y1=Symbol("closeResources"),Ap=Symbol("operations"),Dp=Symbol("undefer"),Qy=Symbol("deferOpen"),cT=Symbol("options"),ut=Symbol("status"),ec=Symbol("defaultOptions"),Hl=Symbol("transcoder"),e0=Symbol("keyEncoding"),Q1=Symbol("valueEncoding"),VW=()=>{},xp=class extends jW{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=Ia(r);let{keyEncoding:n,valueEncoding:s,passive:i,...o}=r;this[Qu]=new Set,this[Ap]=[],this[Qy]=!0,this[cT]=o,this[ut]="opening",this.supports=RW(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Hl]=new $W(KW(this)),this[e0]=this[Hl].encoding(n||"utf8"),this[Q1]=this[Hl].encoding(s||"utf8");for(let a of this[Hl].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[ec]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[e0].commonName,valueEncoding:this[Q1].commonName}),key:Object.freeze({keyEncoding:this[e0].commonName})},this.nextTick(()=>{this[Qy]&&this.open({passive:!1},VW)})}get status(){return this[ut]}keyEncoding(e){return this[Hl].encoding(e??this[e0])}valueEncoding(e){return this[Hl].encoding(e??this[Q1])}open(e,r){r=Yu(e,r),r=Ta(r,Xe),e={...this[cT],...Ia(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=s=>{this[ut]==="closing"||this[ut]==="opening"?this.once(Co,s?()=>n(s):n):this[ut]!=="open"?r(new Ji("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:s})):r()};return e.passive?this[ut]==="opening"?this.once(Co,n):this.nextTick(n):this[ut]==="closed"||this[Qy]?(this[Qy]=!1,this[ut]="opening",this.emit("opening"),this._open(e,s=>{if(s){this[ut]="closed",this[Y1](()=>{this.emit(Co),n(s)}),this[Dp]();return}this[ut]="open",this[Dp](),this.emit(Co),this[ut]==="open"&&this.emit("open"),this[ut]==="open"&&this.emit("ready"),n()})):this[ut]==="open"?this.nextTick(n):this.once(Co,()=>this.open(e,r)),r[Xe]}_open(e,r){this.nextTick(r)}close(e){e=Ta(e,Xe);let r=n=>{this[ut]==="opening"||this[ut]==="closing"?this.once(Co,n?r(n):r):this[ut]!=="closed"?e(new Ji("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[ut]==="open"){this[ut]="closing",this.emit("closing");let n=s=>{this[ut]="open",this[Dp](),this.emit(Co),r(s)};this[Y1](()=>{this._close(s=>{if(s)return n(s);this[ut]="closed",this[Dp](),this.emit(Co),this[ut]==="closed"&&this.emit("closed"),r()})})}else this[ut]==="closed"?this.nextTick(r):this.once(Co,()=>this.close(e));return e[Xe]}[Y1](e){if(this[Qu].size===0)return this.nextTick(e);let r=this[Qu].size,n=!0,s=()=>{--r===0&&(n?this.nextTick(e):e())};for(let i of this[Qu])i.close(s);n=!1,this[Qu].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=Yu(r,n),n=Ta(n,Xe),r=Ia(r,this[ec].entry),this[ut]==="opening")return this.defer(()=>this.get(e,r,n)),n[Xe];if(Wl(this,n))return n[Xe];let s=this._checkKey(e);if(s)return this.nextTick(n,s),n[Xe];let i=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),a=i.format,c=o.format;return(r.keyEncoding!==a||r.valueEncoding!==c)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:c})),this._get(this.prefixKey(i.encode(e),a),r,(u,l)=>{if(u)return(u.code==="LEVEL_NOT_FOUND"||u.notFound||/NotFound/i.test(u))&&(u.code||(u.code="LEVEL_NOT_FOUND"),u.notFound||(u.notFound=!0),u.status||(u.status=404)),n(u);try{l=o.decode(l)}catch(d){return n(new Ji("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,l)}),n[Xe]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=Yu(r,n),n=Ta(n,Xe),r=Ia(r,this[ec].entry),this[ut]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[Xe];if(Wl(this,n))return n[Xe];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[Xe];if(e.length===0)return this.nextTick(n,null,[]),n[Xe];let s=this.keyEncoding(r.keyEncoding),i=this.valueEncoding(r.valueEncoding),o=s.format,a=i.format;(r.keyEncoding!==o||r.valueEncoding!==a)&&(r=Object.assign({},r,{keyEncoding:o,valueEncoding:a}));let c=new Array(e.length);for(let u=0;u<e.length;u++){let l=e[u],d=this._checkKey(l);if(d)return this.nextTick(n,d),n[Xe];c[u]=this.prefixKey(s.encode(l),o)}return this._getMany(c,r,(u,l)=>{if(u)return n(u);try{for(let d=0;d<l.length;d++)l[d]!==void 0&&(l[d]=i.decode(l[d]))}catch(d){return n(new Ji(`Could not decode one or more of ${l.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,l)}),n[Xe]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,s){if(s=Yu(n,s),s=Ta(s,Xe),n=Ia(n,this[ec].entry),this[ut]==="opening")return this.defer(()=>this.put(e,r,n,s)),s[Xe];if(Wl(this,s))return s[Xe];let i=this._checkKey(e)||this._checkValue(r);if(i)return this.nextTick(s,i),s[Xe];let o=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),c=o.format,u=a.format;(n.keyEncoding!==c||n.valueEncoding!==u)&&(n=Object.assign({},n,{keyEncoding:c,valueEncoding:u}));let l=this.prefixKey(o.encode(e),c),d=a.encode(r);return this._put(l,d,n,p=>{if(p)return s(p);this.emit("put",e,r),s()}),s[Xe]}_put(e,r,n,s){this.nextTick(s)}del(e,r,n){if(n=Yu(r,n),n=Ta(n,Xe),r=Ia(r,this[ec].key),this[ut]==="opening")return this.defer(()=>this.del(e,r,n)),n[Xe];if(Wl(this,n))return n[Xe];let s=this._checkKey(e);if(s)return this.nextTick(n,s),n[Xe];let i=this.keyEncoding(r.keyEncoding),o=i.format;return r.keyEncoding!==o&&(r=Object.assign({},r,{keyEncoding:o})),this._del(this.prefixKey(i.encode(e),o),r,a=>{if(a)return n(a);this.emit("del",e),n()}),n[Xe]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[ut]==="opening")return new uT(this);if(this[ut]!=="open")throw new Ji("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=Yu(r,n),n=Ta(n,Xe),r=Ia(r,this[ec].empty),this[ut]==="opening")return this.defer(()=>this.batch(e,r,n)),n[Xe];if(Wl(this,n))return n[Xe];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[Xe];if(e.length===0)return this.nextTick(n),n[Xe];let s=new Array(e.length),{keyEncoding:i,valueEncoding:o,...a}=r;for(let c=0;c<e.length;c++){if(typeof e[c]!="object"||e[c]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[Xe];let u=Object.assign({},e[c]);if(u.type!=="put"&&u.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[Xe];let l=this._checkKey(u.key);if(l)return this.nextTick(n,l),n[Xe];let d=u.sublevel!=null?u.sublevel:this,p=d.keyEncoding(u.keyEncoding||i),f=p.format;if(u.key=d.prefixKey(p.encode(u.key),f),u.keyEncoding=f,u.type==="put"){let h=this._checkValue(u.value);if(h)return this.nextTick(n,h),n[Xe];let y=d.valueEncoding(u.valueEncoding||o);u.value=y.encode(u.value),u.valueEncoding=y.format}d!==this&&(u.sublevel=null),s[c]=u}return this._batch(s,a,c=>{if(c)return n(c);this.emit("batch",e),n()}),n[Xe]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,ew.defaults(r))}_sublevel(e,r){return new ew(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=Yu(e,r),r=Ta(r,Xe),e=Ia(e,this[ec].empty),this[ut]==="opening")return this.defer(()=>this.clear(e,r)),r[Xe];if(Wl(this,r))return r[Xe];let n=e,s=this.keyEncoding(e.keyEncoding);return e=Yy(e,s),e.keyEncoding=s.format,e.limit===0?this.nextTick(r):this._clear(e,i=>{if(i)return r(i);this.emit("clear",n),r()}),r[Xe]}_clear(e,r){this.nextTick(r)}iterator(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Yy(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Xu.keyEncoding]=r,e[Xu.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[ut]==="opening")return new qW(this,e);if(this[ut]!=="open")throw new Ji("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Xu(this,e)}keys(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Yy(e,r),e[Xu.keyEncoding]=r,e[Xu.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[ut]==="opening")return new LW(this,e);if(this[ut]!=="open")throw new Ji("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new NW(this,e)}values(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Yy(e,r),e[Xu.keyEncoding]=r,e[Xu.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[ut]==="opening")return new UW(this,e);if(this[ut]!=="open")throw new Ji("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new MW(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Ap].push(e)}[Dp](){if(this[Ap].length===0)return;let e=this[Ap];this[Ap]=[];for(let r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[Qu].add(e)}detachResource(e){this[Qu].delete(e)}_chainedBatch(){return new uT(this)}_checkKey(e){if(e==null)return new Ji("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new Ji("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};xp.prototype.nextTick=rT();var{AbstractSublevel:ew}=aT()({AbstractLevel:xp});tw.AbstractLevel=xp;tw.AbstractSublevel=ew;var Wl=function(t,e){return t[ut]!=="open"?(t.nextTick(e,new Ji("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},KW=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])}});var nw=v(tc=>{"use strict";tc.AbstractLevel=rw().AbstractLevel;tc.AbstractSublevel=rw().AbstractSublevel;tc.AbstractIterator=Oa().AbstractIterator;tc.AbstractKeyIterator=Oa().AbstractKeyIterator;tc.AbstractValueIterator=Oa().AbstractValueIterator;tc.AbstractChainedBatch=K1().AbstractChainedBatch});var dT=v((cSe,lT)=>{lT.exports=HW;var zW=H1();function HW(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,s,i,o,a,c=!0,u;Array.isArray(t)?(n=[],i=s=t.length):(o=Object.keys(t),n={},i=s=o.length);function l(p){function f(){r&&r(p,n),r=null}c?zW(f):f()}function d(p,f,h){if(n[p]=h,f&&(a=!0),--i===0||f)l(f);else if(!a&&u<s){let y;o?(y=o[u],u+=1,t[y](function(g,A){d(y,g,A)})):(y=u,u+=1,t[y](function(g,A){d(y,g,A)}))}}u=e,i?o?o.some(function(p,f){return t[p](function(h,y){d(p,h,y)}),f===e-1}):t.some(function(p,f){return p(function(h,y){d(f,h,y)}),f===e-1}):l(null),c=!1}});var iw=v((lSe,fT)=>{"use strict";fT.exports=function(e){let r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,s=e.gte===void 0,i=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,s,i):r!==void 0?IDBKeyRange.lowerBound(r,s):n!==void 0?IDBKeyRange.upperBound(n,i):null}});var sw=v((dSe,pT)=>{"use strict";var WW=new TextEncoder;pT.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):WW.encode(t)}});var vT=v(gT=>{"use strict";var{AbstractIterator:JW}=nw(),hT=iw(),t0=sw(),Is=Symbol("cache"),Po=Symbol("finished"),Xn=Symbol("options"),Oo=Symbol("currentOptions"),rc=Symbol("position"),ow=Symbol("location"),Jl=Symbol("first"),mT={},aw=class extends JW{constructor(e,r,n){super(e,n),this[Is]=[],this[Po]=this.limit===0,this[Xn]=n,this[Oo]={...n},this[rc]=void 0,this[ow]=r,this[Jl]=!0}_nextv(e,r,n){if(this[Jl]=!1,this[Po])return this.nextTick(n,null,[]);if(this[Is].length>0)return e=Math.min(e,this[Is].length),this.nextTick(n,null,this[Is].splice(0,e));this[rc]!==void 0&&(this[Xn].reverse?(this[Oo].lt=this[rc],this[Oo].lte=void 0):(this[Oo].gt=this[rc],this[Oo].gte=void 0));let s;try{s=hT(this[Oo])}catch{return this[Po]=!0,this.nextTick(n,null,[])}let i=this.db.db.transaction([this[ow]],"readonly"),o=i.objectStore(this[ow]),a=[];if(this[Xn].reverse){let c=!this[Xn].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[c](s,"prev").onsuccess=u=>{let l=u.target.result;if(l){let{key:d,value:p}=l;this[rc]=d,a.push([this[Xn].keys&&d!==void 0?t0(d):void 0,this[Xn].values&&p!==void 0?t0(p):void 0]),a.length<e?l.continue():yT(i)}else this[Po]=!0}}else{let c,u,l=()=>{if(c===void 0||u===void 0)return;let d=Math.max(c.length,u.length);d===0||e===1/0?this[Po]=!0:this[rc]=c[d-1],a.length=d;for(let p=0;p<d;p++){let f=c[p],h=u[p];a[p]=[this[Xn].keys&&f!==void 0?t0(f):void 0,this[Xn].values&&h!==void 0?t0(h):void 0]}yT(i)};this[Xn].keys||e<1/0?o.getAllKeys(s,e<1/0?e:void 0).onsuccess=d=>{c=d.target.result,l()}:(c=[],this.nextTick(l)),this[Xn].values?o.getAll(s,e<1/0?e:void 0).onsuccess=d=>{u=d.target.result,l()}:(u=[],this.nextTick(l))}i.onabort=()=>{n(i.error||new Error("aborted by user")),n=null},i.oncomplete=()=>{n(null,a),n=null}}_next(e){if(this[Is].length>0){let[r,n]=this[Is].shift();this.nextTick(e,null,r,n)}else if(this[Po])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[Jl]&&(this[Jl]=!1,r=1),this._nextv(r,mT,(n,s)=>{if(n)return e(n);this[Is]=s,this._next(e)})}}_all(e,r){this[Jl]=!1;let n=this[Is].splice(0,this[Is].length),s=this.limit-this.count-n.length;if(s<=0)return this.nextTick(r,null,n);this._nextv(s,mT,(i,o)=>{if(i)return r(i);n.length>0&&(o=n.concat(o)),r(null,o)})}_seek(e,r){this[Jl]=!0,this[Is]=[],this[Po]=!1,this[rc]=void 0,this[Oo]={...this[Xn]};let n;try{n=hT(this[Xn])}catch{this[Po]=!0;return}n!==null&&!n.includes(e)?this[Po]=!0:this[Xn].reverse?this[Oo].lte=e:this[Oo].gte=e}};gT.Iterator=aw;function yT(t){typeof t.commit=="function"&&t.commit()}});var _T=v((pSe,bT)=>{"use strict";bT.exports=function(e,r,n,s,i){if(s.limit===0)return e.nextTick(i);let o=e.db.transaction([r],"readwrite"),a=o.objectStore(r),c=0;o.oncomplete=function(){i()},o.onabort=function(){i(o.error||new Error("aborted by user"))};let u=a.openKeyCursor?"openKeyCursor":"openCursor",l=s.reverse?"prev":"next";a[u](n,l).onsuccess=function(d){let p=d.target.result;p&&(a.delete(p.key).onsuccess=function(){(s.limit<=0||++c<s.limit)&&p.continue()})}}});var xT=v(DT=>{"use strict";var{AbstractLevel:GW}=nw(),wT=Hi(),ZW=dT(),{fromCallback:XW}=pp(),{Iterator:YW}=vT(),ET=sw(),QW=_T(),eJ=iw(),AT="level-js-",Cp=Symbol("idb"),uw=Symbol("namePrefix"),Fo=Symbol("location"),cw=Symbol("version"),nc=Symbol("store"),Pp=Symbol("onComplete"),ST=Symbol("promise"),r0=class extends GW{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new wT("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:s,version:i,...o}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof e!="string")throw new Error("constructor requires a location string argument");this[Fo]=e,this[uw]=s??AT,this[cw]=parseInt(i||1,10),this[Cp]=null}get location(){return this[Fo]}get namePrefix(){return this[uw]}get version(){return this[cw]}get db(){return this[Cp]}get type(){return"browser-level"}_open(e,r){let n=indexedDB.open(this[uw]+this[Fo],this[cw]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Cp]=n.result,r()},n.onupgradeneeded=s=>{let i=s.target.result;i.objectStoreNames.contains(this[Fo])||i.createObjectStore(this[Fo])}}[nc](e){return this[Cp].transaction([this[Fo]],e).objectStore(this[Fo])}[Pp](e,r){let n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){let s=this[nc]("readonly"),i;try{i=s.get(e)}catch(o){return this.nextTick(n,o)}this[Pp](i,function(o,a){if(o)return n(o);if(a===void 0)return n(new wT("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,ET(a))})}_getMany(e,r,n){let s=this[nc]("readonly"),i=e.map(o=>a=>{let c;try{c=s.get(o)}catch(u){return a(u)}c.onsuccess=()=>{let u=c.result;a(null,u===void 0?u:ET(u))},c.onerror=u=>{u.stopPropagation(),a(c.error)}});ZW(i,16,n)}_del(e,r,n){let s=this[nc]("readwrite"),i;try{i=s.delete(e)}catch(o){return this.nextTick(n,o)}this[Pp](i,n)}_put(e,r,n,s){let i=this[nc]("readwrite"),o;try{o=i.put(r,e)}catch(a){return this.nextTick(s,a)}this[Pp](o,s)}_iterator(e){return new YW(this,this[Fo],e)}_batch(e,r,n){let s=this[nc]("readwrite"),i=s.transaction,o=0,a;i.onabort=function(){n(a||i.error||new Error("aborted by user"))},i.oncomplete=function(){n()};function c(){let u=e[o++],l=u.key,d;try{d=u.type==="del"?s.delete(l):s.put(u.value,l)}catch(p){a=p,i.abort();return}o<e.length?d.onsuccess=c:typeof i.commit=="function"&&i.commit()}c()}_clear(e,r){let n,s;try{n=eJ(e)}catch{return this.nextTick(r)}if(e.limit>=0)return QW(this,this[Fo],n,e,r);try{let i=this[nc]("readwrite");s=n?i.delete(n):i.clear()}catch(i){return this.nextTick(r,i)}this[Pp](s,r)}_close(e){this[Cp].close(),this.nextTick(e)}};r0.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=AT),r=XW(r,ST);let n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(s){r(s)},r[ST]};DT.BrowserLevel=r0});var lw=v(CT=>{CT.Level=xT().BrowserLevel});var nr=v((bSe,PT)=>{"use strict";PT.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var Gl=v((_Se,i0)=>{"use strict";var{AbortController:OT,AbortSignal:rJ}=typeof self<"u"?self:typeof window<"u"?window:void 0;i0.exports=OT;i0.exports.AbortSignal=rJ;i0.exports.default=OT});var cn=v((wSe,fw)=>{"use strict";var nJ=hi(),{kResistStopPropagation:iJ,SymbolDispose:sJ}=nr(),oJ=globalThis.AbortSignal||Gl().AbortSignal,aJ=globalThis.AbortController||Gl().AbortController,uJ=Object.getPrototypeOf(async function(){}).constructor,FT=globalThis.Blob||nJ.Blob,cJ=typeof FT<"u"?function(e){return e instanceof FT}:function(e){return!1},TT=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ERR_INVALID_ARG_TYPE(e,"AbortSignal",t)},lJ=(t,e)=>{if(typeof t!="function")throw new ERR_INVALID_ARG_TYPE(e,"Function",t)},dw=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};fw.exports={AggregateError:dw,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...s)=>n?r(n):e(...s))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let s=e.shift();return n==="f"?s.toFixed(6):n==="j"?JSON.stringify(s):n==="s"&&typeof s=="object"?`${s.constructor!==Object?s.constructor.name:""} {}`.trim():s.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof uJ},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:cJ,deprecate(t,e){return t},addAbortListener:Nl().addAbortListener||function(e,r){if(e===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);TT(e,"signal"),lJ(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[iJ]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[sJ](){var s;(s=n)===null||s===void 0||s()}}},AbortSignalAny:oJ.any||function(e){if(e.length===1)return e[0];let r=new aJ,n=()=>r.abort();return e.forEach(s=>{TT(s,"signals"),s.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(s=>s.removeEventListener("abort",n))},{once:!0}),r.signal}};fw.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var wn=v((ESe,kT)=>{"use strict";var{format:dJ,inspect:s0,AggregateError:fJ}=cn(),pJ=globalThis.AggregateError||fJ,hJ=Symbol("kIsNodeError"),mJ=["string","function","number","object","Function","Object","boolean","bigint","symbol"],yJ=/^([A-Z][a-z0-9]*)+$/,gJ="__node_internal_",o0={};function sc(t,e){if(!t)throw new o0.ERR_INTERNAL_ASSERTION(e)}function IT(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function vJ(t,e,r){if(typeof e=="function")return sc(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return sc(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:dJ(e,...r)}function Jr(t,e,r){r||(r=Error);class n extends r{constructor(...i){super(vJ(t,e,i))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[hJ]=!0,o0[t]=n}function BT(t){let e=gJ+t.name;return Object.defineProperty(t,"name",{value:e}),t}function bJ(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new pJ([e,t],e.message);return r.code=e.code,r}return t||e}var pw=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new o0.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Jr("ERR_ASSERTION","%s",Error);Jr("ERR_INVALID_ARG_TYPE",(t,e,r)=>{sc(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let s=[],i=[],o=[];for(let c of e)sc(typeof c=="string","All expected entries have to be of type string"),mJ.includes(c)?s.push(c.toLowerCase()):yJ.test(c)?i.push(c):(sc(c!=="object",'The value "object" should be written as "Object"'),o.push(c));if(i.length>0){let c=s.indexOf("object");c!==-1&&(s.splice(s,c,1),i.push("Object"))}if(s.length>0){switch(s.length){case 1:n+=`of type ${s[0]}`;break;case 2:n+=`one of type ${s[0]} or ${s[1]}`;break;default:{let c=s.pop();n+=`one of type ${s.join(", ")}, or ${c}`}}(i.length>0||o.length>0)&&(n+=" or ")}if(i.length>0){switch(i.length){case 1:n+=`an instance of ${i[0]}`;break;case 2:n+=`an instance of ${i[0]} or ${i[1]}`;break;default:{let c=i.pop();n+=`an instance of ${i.join(", ")}, or ${c}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let c=o.pop();n+=`one of ${o.join(", ")}, or ${c}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let c=s0(r,{depth:-1});n+=`. Received ${c}`}}else{let c=s0(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`}return n},TypeError);Jr("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=s0(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Jr("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let s=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${s}.`},TypeError);Jr("ERR_MISSING_ARGS",(...t)=>{sc(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Jr("ERR_OUT_OF_RANGE",(t,e,r)=>{sc(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=IT(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=IT(n)),n+="n"):n=s0(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Jr("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Jr("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Jr("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Jr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Jr("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Jr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Jr("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Jr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Jr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Jr("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Jr("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);kT.exports={AbortError:pw,aggregateTwoErrors:BT(bJ),hideStackFrames:BT,codes:o0}});var Xl=v((SSe,KT)=>{"use strict";var{ArrayIsArray:mw,ArrayPrototypeIncludes:NT,ArrayPrototypeJoin:MT,ArrayPrototypeMap:_J,NumberIsInteger:yw,NumberIsNaN:wJ,NumberMAX_SAFE_INTEGER:EJ,NumberMIN_SAFE_INTEGER:SJ,NumberParseInt:AJ,ObjectPrototypeHasOwnProperty:DJ,RegExpPrototypeExec:qT,String:xJ,StringPrototypeToUpperCase:CJ,StringPrototypeTrim:PJ}=nr(),{hideStackFrames:gi,codes:{ERR_SOCKET_BAD_PORT:OJ,ERR_INVALID_ARG_TYPE:ln,ERR_INVALID_ARG_VALUE:Zl,ERR_OUT_OF_RANGE:oc,ERR_UNKNOWN_SIGNAL:RT}}=wn(),{normalizeEncoding:FJ}=cn(),{isAsyncFunction:TJ,isArrayBufferView:IJ}=cn().types,$T={};function BJ(t){return t===(t|0)}function kJ(t){return t===t>>>0}var RJ=/^[0-7]+$/,$J="must be a 32-bit unsigned integer or an octal string";function jJ(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(qT(RJ,t)===null)throw new Zl(e,t,$J);t=AJ(t,8)}return LT(t,e),t}var NJ=gi((t,e,r=SJ,n=EJ)=>{if(typeof t!="number")throw new ln(e,"number",t);if(!yw(t))throw new oc(e,"an integer",t);if(t<r||t>n)throw new oc(e,`>= ${r} && <= ${n}`,t)}),MJ=gi((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new ln(e,"number",t);if(!yw(t))throw new oc(e,"an integer",t);if(t<r||t>n)throw new oc(e,`>= ${r} && <= ${n}`,t)}),LT=gi((t,e,r=!1)=>{if(typeof t!="number")throw new ln(e,"number",t);if(!yw(t))throw new oc(e,"an integer",t);let n=r?1:0,s=4294967295;if(t<n||t>s)throw new oc(e,`>= ${n} && <= ${s}`,t)});function gw(t,e){if(typeof t!="string")throw new ln(e,"string",t)}function qJ(t,e,r=void 0,n){if(typeof t!="number")throw new ln(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&wJ(t))throw new oc(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var LJ=gi((t,e,r)=>{if(!NT(r,t)){let s="must be one of: "+MT(_J(r,i=>typeof i=="string"?`'${i}'`:xJ(i)),", ");throw new Zl(e,t,s)}});function UT(t,e){if(typeof t!="boolean")throw new ln(e,"boolean",t)}function hw(t,e,r){return t==null||!DJ(t,e)?r:t[e]}var UJ=gi((t,e,r=null)=>{let n=hw(r,"allowArray",!1),s=hw(r,"allowFunction",!1);if(!hw(r,"nullable",!1)&&t===null||!n&&mw(t)||typeof t!="object"&&(!s||typeof t!="function"))throw new ln(e,"Object",t)}),VJ=gi((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new ln(e,"a dictionary",t)}),a0=gi((t,e,r=0)=>{if(!mw(t))throw new ln(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Zl(e,t,n)}});function KJ(t,e){a0(t,e);for(let r=0;r<t.length;r++)gw(t[r],`${e}[${r}]`)}function zJ(t,e){a0(t,e);for(let r=0;r<t.length;r++)UT(t[r],`${e}[${r}]`)}function HJ(t,e){a0(t,e);for(let r=0;r<t.length;r++){let n=t[r],s=`${e}[${r}]`;if(n==null)throw new ln(s,"AbortSignal",n);VT(n,s)}}function WJ(t,e="signal"){if(gw(t,e),$T[t]===void 0)throw $T[CJ(t)]!==void 0?new RT(t+" (signals must use all capital letters)"):new RT(t)}var JJ=gi((t,e="buffer")=>{if(!IJ(t))throw new ln(e,["Buffer","TypedArray","DataView"],t)});function GJ(t,e){let r=FJ(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Zl("encoding",e,`is invalid for data of length ${n}`)}function ZJ(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&PJ(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new OJ(e,t,r);return t|0}var VT=gi((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ln(e,"AbortSignal",t)}),XJ=gi((t,e)=>{if(typeof t!="function")throw new ln(e,"Function",t)}),YJ=gi((t,e)=>{if(typeof t!="function"||TJ(t))throw new ln(e,"Function",t)}),QJ=gi((t,e)=>{if(t!==void 0)throw new ln(e,"undefined",t)});function eG(t,e,r){if(!NT(r,t))throw new ln(e,`('${MT(r,"|")}')`,t)}var tG=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function jT(t,e){if(typeof t>"u"||!qT(tG,t))throw new Zl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function rG(t){if(typeof t=="string")return jT(t,"hints"),t;if(mw(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let s=t[n];jT(s,"hints"),r+=s,n!==e-1&&(r+=", ")}return r}throw new Zl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}KT.exports={isInt32:BJ,isUint32:kJ,parseFileMode:jJ,validateArray:a0,validateStringArray:KJ,validateBooleanArray:zJ,validateAbortSignalArray:HJ,validateBoolean:UT,validateBuffer:JJ,validateDictionary:VJ,validateEncoding:GJ,validateFunction:XJ,validateInt32:MJ,validateInteger:NJ,validateNumber:qJ,validateObject:UJ,validateOneOf:LJ,validatePlainFunction:YJ,validatePort:ZJ,validateSignalName:WJ,validateString:gw,validateUint32:LT,validateUndefined:QJ,validateUnion:eG,validateAbortSignal:VT,validateLinkHeaderValue:rG}});var Ba=v((ASe,JT)=>{var gr=JT.exports={},Bs,ks;function vw(){throw new Error("setTimeout has not been defined")}function bw(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Bs=setTimeout:Bs=vw}catch{Bs=vw}try{typeof clearTimeout=="function"?ks=clearTimeout:ks=bw}catch{ks=bw}})();function zT(t){if(Bs===setTimeout)return setTimeout(t,0);if((Bs===vw||!Bs)&&setTimeout)return Bs=setTimeout,setTimeout(t,0);try{return Bs(t,0)}catch{try{return Bs.call(null,t,0)}catch{return Bs.call(this,t,0)}}}function nG(t){if(ks===clearTimeout)return clearTimeout(t);if((ks===bw||!ks)&&clearTimeout)return ks=clearTimeout,clearTimeout(t);try{return ks(t)}catch{try{return ks.call(null,t)}catch{return ks.call(this,t)}}}var To=[],Yl=!1,ac,u0=-1;function iG(){!Yl||!ac||(Yl=!1,ac.length?To=ac.concat(To):u0=-1,To.length&&HT())}function HT(){if(!Yl){var t=zT(iG);Yl=!0;for(var e=To.length;e;){for(ac=To,To=[];++u0<e;)ac&&ac[u0].run();u0=-1,e=To.length}ac=null,Yl=!1,nG(t)}}gr.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];To.push(new WT(t,e)),To.length===1&&!Yl&&zT(HT)};function WT(t,e){this.fun=t,this.array=e}WT.prototype.run=function(){this.fun.apply(null,this.array)};gr.title="browser";gr.browser=!0;gr.env={};gr.argv=[];gr.version="";gr.versions={};function Io(){}gr.on=Io;gr.addListener=Io;gr.once=Io;gr.off=Io;gr.removeListener=Io;gr.removeAllListeners=Io;gr.emit=Io;gr.prependListener=Io;gr.prependOnceListener=Io;gr.listeners=function(t){return[]};gr.binding=function(t){throw new Error("process.binding is not supported")};gr.cwd=function(){return"/"};gr.chdir=function(t){throw new Error("process.chdir is not supported")};gr.umask=function(){return 0}});var $s=v((DSe,c8)=>{"use strict";var{SymbolAsyncIterator:GT,SymbolIterator:ZT,SymbolFor:uc}=nr(),XT=uc("nodejs.stream.destroyed"),YT=uc("nodejs.stream.errored"),_w=uc("nodejs.stream.readable"),ww=uc("nodejs.stream.writable"),QT=uc("nodejs.stream.disturbed"),sG=uc("nodejs.webstream.isClosedPromise"),oG=uc("nodejs.webstream.controllerErrorFunction");function c0(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function l0(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function aG(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Rs(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function e8(t){return!!(t&&!Rs(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function t8(t){return!!(t&&!Rs(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function r8(t){return!!(t&&!Rs(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function uG(t){return e8(t)||t8(t)||r8(t)}function cG(t,e){return t==null?!1:e===!0?typeof t[GT]=="function":e===!1?typeof t[ZT]=="function":typeof t[GT]=="function"||typeof t[ZT]=="function"}function d0(t){if(!Rs(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[XT]||n!=null&&n.destroyed)}function n8(t){if(!l0(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function lG(t,e){if(!l0(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function dG(t){if(!c0(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function i8(t,e){if(!c0(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function s8(t){return t&&t[_w]!=null?t[_w]:typeof t?.readable!="boolean"?null:d0(t)?!1:c0(t)&&t.readable&&!i8(t)}function o8(t){return t&&t[ww]!=null?t[ww]:typeof t?.writable!="boolean"?null:d0(t)?!1:l0(t)&&t.writable&&!n8(t)}function fG(t,e){return Rs(t)?d0(t)?!0:!(e?.readable!==!1&&s8(t)||e?.writable!==!1&&o8(t)):null}function pG(t){var e,r;return Rs(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function hG(t){var e,r;return Rs(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function mG(t){if(!Rs(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&a8(t)?t._closed:null}function a8(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function u8(t){return typeof t._sent100=="boolean"&&a8(t)}function yG(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function gG(t){if(!Rs(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&u8(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function vG(t){var e;return!!(t&&((e=t[QT])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function bG(t){var e,r,n,s,i,o,a,c,u,l;return!!(t&&((e=(r=(n=(s=(i=(o=t[YT])!==null&&o!==void 0?o:t.readableErrored)!==null&&i!==void 0?i:t.writableErrored)!==null&&s!==void 0?s:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(c=t._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(u=t._readableState)===null||u===void 0?void 0:u.errored)!==null&&e!==void 0?e:!((l=t._writableState)===null||l===void 0)&&l.errored))}c8.exports={isDestroyed:d0,kIsDestroyed:XT,isDisturbed:vG,kIsDisturbed:QT,isErrored:bG,kIsErrored:YT,isReadable:s8,kIsReadable:_w,kIsClosedPromise:sG,kControllerErrorFunction:oG,kIsWritable:ww,isClosed:mG,isDuplexNodeStream:aG,isFinished:fG,isIterable:cG,isReadableNodeStream:c0,isReadableStream:e8,isReadableEnded:dG,isReadableFinished:i8,isReadableErrored:hG,isNodeStream:Rs,isWebStream:uG,isWritable:o8,isWritableNodeStream:l0,isWritableStream:t8,isWritableEnded:n8,isWritableFinished:lG,isWritableErrored:pG,isServerRequest:yG,isServerResponse:u8,willEmitClose:gG,isTransformStream:r8}});var Bo=v((xSe,xw)=>{var ka=Ba(),{AbortError:v8,codes:_G}=wn(),{ERR_INVALID_ARG_TYPE:wG,ERR_STREAM_PREMATURE_CLOSE:l8}=_G,{kEmptyObject:Sw,once:Aw}=cn(),{validateAbortSignal:EG,validateFunction:SG,validateObject:AG,validateBoolean:DG}=Xl(),{Promise:xG,PromisePrototypeThen:CG,SymbolDispose:b8}=nr(),{isClosed:PG,isReadable:d8,isReadableNodeStream:Ew,isReadableStream:OG,isReadableFinished:f8,isReadableErrored:p8,isWritable:h8,isWritableNodeStream:m8,isWritableStream:FG,isWritableFinished:y8,isWritableErrored:g8,isNodeStream:TG,willEmitClose:IG,kIsClosedPromise:BG}=$s(),Ql;function kG(t){return t.setHeader&&typeof t.abort=="function"}var Dw=()=>{};function _8(t,e,r){var n,s;if(arguments.length===2?(r=e,e=Sw):e==null?e=Sw:AG(e,"options"),SG(r,"callback"),EG(e.signal,"options.signal"),r=Aw(r),OG(t)||FG(t))return RG(t,e,r);if(!TG(t))throw new wG("stream",["ReadableStream","WritableStream","Stream"],t);let i=(n=e.readable)!==null&&n!==void 0?n:Ew(t),o=(s=e.writable)!==null&&s!==void 0?s:m8(t),a=t._writableState,c=t._readableState,u=()=>{t.writable||p()},l=IG(t)&&Ew(t)===i&&m8(t)===o,d=y8(t,!1),p=()=>{d=!0,t.destroyed&&(l=!1),!(l&&(!t.readable||i))&&(!i||f)&&r.call(t)},f=f8(t,!1),h=()=>{f=!0,t.destroyed&&(l=!1),!(l&&(!t.writable||o))&&(!o||d)&&r.call(t)},y=D=>{r.call(t,D)},g=PG(t),A=()=>{g=!0;let D=g8(t)||p8(t);if(D&&typeof D!="boolean")return r.call(t,D);if(i&&!f&&Ew(t,!0)&&!f8(t,!1))return r.call(t,new l8);if(o&&!d&&!y8(t,!1))return r.call(t,new l8);r.call(t)},x=()=>{g=!0;let D=g8(t)||p8(t);if(D&&typeof D!="boolean")return r.call(t,D);r.call(t)},b=()=>{t.req.on("finish",p)};kG(t)?(t.on("complete",p),l||t.on("abort",A),t.req?b():t.on("request",b)):o&&!a&&(t.on("end",u),t.on("close",u)),!l&&typeof t.aborted=="boolean"&&t.on("aborted",A),t.on("end",h),t.on("finish",p),e.error!==!1&&t.on("error",y),t.on("close",A),g?ka.nextTick(A):a!=null&&a.errorEmitted||c!=null&&c.errorEmitted?l||ka.nextTick(x):(!i&&(!l||d8(t))&&(d||h8(t)===!1)||!o&&(!l||h8(t))&&(f||d8(t)===!1)||c&&t.req&&t.aborted)&&ka.nextTick(x);let w=()=>{r=Dw,t.removeListener("aborted",A),t.removeListener("complete",p),t.removeListener("abort",A),t.removeListener("request",b),t.req&&t.req.removeListener("finish",p),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",p),t.removeListener("end",h),t.removeListener("error",y),t.removeListener("close",A)};if(e.signal&&!g){let D=()=>{let F=r;w(),F.call(t,new v8(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)ka.nextTick(D);else{Ql=Ql||cn().addAbortListener;let F=Ql(e.signal,D),C=r;r=Aw((...I)=>{F[b8](),C.apply(t,I)})}}return w}function RG(t,e,r){let n=!1,s=Dw;if(e.signal)if(s=()=>{n=!0,r.call(t,new v8(void 0,{cause:e.signal.reason}))},e.signal.aborted)ka.nextTick(s);else{Ql=Ql||cn().addAbortListener;let o=Ql(e.signal,s),a=r;r=Aw((...c)=>{o[b8](),a.apply(t,c)})}let i=(...o)=>{n||ka.nextTick(()=>r.apply(t,o))};return CG(t[BG].promise,i,i),Dw}function $G(t,e){var r;let n=!1;return e===null&&(e=Sw),(r=e)!==null&&r!==void 0&&r.cleanup&&(DG(e.cleanup,"cleanup"),n=e.cleanup),new xG((s,i)=>{let o=_8(t,e,a=>{n&&o(),a?i(a):s()})})}xw.exports=_8;xw.exports.finished=$G});var cc=v((CSe,P8)=>{"use strict";var js=Ba(),{aggregateTwoErrors:jG,codes:{ERR_MULTIPLE_CALLBACK:NG},AbortError:MG}=wn(),{Symbol:S8}=nr(),{kIsDestroyed:qG,isDestroyed:LG,isFinished:UG,isServerRequest:VG}=$s(),A8=S8("kDestroy"),Cw=S8("kConstruct");function D8(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function KG(t,e){let r=this._readableState,n=this._writableState,s=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(D8(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),s.constructed?w8(this,t,e):this.once(A8,function(i){w8(this,jG(i,t),e)}),this)}function w8(t,e,r){let n=!1;function s(i){if(n)return;n=!0;let o=t._readableState,a=t._writableState;D8(i,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(i),i?js.nextTick(zG,t,i):js.nextTick(x8,t)}try{t._destroy(e||null,s)}catch(i){s(i)}}function zG(t,e){Pw(t,e),x8(t)}function x8(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function Pw(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function HG(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Ow(t,e,r){let n=t._readableState,s=t._writableState;if(s!=null&&s.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||s!=null&&s.autoDestroy?t.destroy(e):e&&(e.stack,s&&!s.errored&&(s.errored=e),n&&!n.errored&&(n.errored=e),r?js.nextTick(Pw,t,e):Pw(t,e))}function WG(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(Cw,e),!(t.listenerCount(Cw)>1)&&js.nextTick(JG,t)}function JG(t){let e=!1;function r(n){if(e){Ow(t,n??new NG);return}e=!0;let s=t._readableState,i=t._writableState,o=i||s;s&&(s.constructed=!0),i&&(i.constructed=!0),o.destroyed?t.emit(A8,n):n?Ow(t,n,!0):js.nextTick(GG,t)}try{t._construct(n=>{js.nextTick(r,n)})}catch(n){js.nextTick(r,n)}}function GG(t){t.emit(Cw)}function E8(t){return t?.setHeader&&typeof t.abort=="function"}function C8(t){t.emit("close")}function ZG(t,e){t.emit("error",e),js.nextTick(C8,t)}function XG(t,e){!t||LG(t)||(!e&&!UG(t)&&(e=new MG),VG(t)?(t.socket=null,t.destroy(e)):E8(t)?t.abort():E8(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?js.nextTick(ZG,t,e):js.nextTick(C8,t),t.destroyed||(t[qG]=!0))}P8.exports={construct:WG,destroyer:XG,destroy:KG,undestroy:HG,errorOrDestroy:Ow}});var h0=v((PSe,F8)=>{"use strict";var{ArrayIsArray:YG,ObjectSetPrototypeOf:O8}=nr(),{EventEmitter:f0}=Nl();function p0(t){f0.call(this,t)}O8(p0.prototype,f0.prototype);O8(p0,f0);p0.prototype.pipe=function(t,e){let r=this;function n(l){t.writable&&t.write(l)===!1&&r.pause&&r.pause()}r.on("data",n);function s(){r.readable&&r.resume&&r.resume()}t.on("drain",s),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let i=!1;function o(){i||(i=!0,t.end())}function a(){i||(i=!0,typeof t.destroy=="function"&&t.destroy())}function c(l){u(),f0.listenerCount(this,"error")===0&&this.emit("error",l)}Fw(r,"error",c),Fw(t,"error",c);function u(){r.removeListener("data",n),t.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};function Fw(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):YG(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}F8.exports={Stream:p0,prependListener:Fw}});var Op=v((OSe,m0)=>{"use strict";var{SymbolDispose:QG}=nr(),{AbortError:T8,codes:eZ}=wn(),{isNodeStream:I8,isWebStream:tZ,kControllerErrorFunction:rZ}=$s(),nZ=Bo(),{ERR_INVALID_ARG_TYPE:B8}=eZ,Tw,iZ=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new B8(e,"AbortSignal",t)};m0.exports.addAbortSignal=function(e,r){if(iZ(e,"signal"),!I8(r)&&!tZ(r))throw new B8("stream",["ReadableStream","WritableStream","Stream"],r);return m0.exports.addAbortSignalNoValidate(e,r)};m0.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=I8(e)?()=>{e.destroy(new T8(void 0,{cause:t.reason}))}:()=>{e[rZ](new T8(void 0,{cause:t.reason}))};if(t.aborted)r();else{Tw=Tw||cn().addAbortListener;let n=Tw(t,r);nZ(e,n[QG])}return e}});var $8=v((TSe,R8)=>{"use strict";var{StringPrototypeSlice:k8,SymbolIterator:sZ,TypedArrayPrototypeSet:y0,Uint8Array:oZ}=nr(),{Buffer:Iw}=hi(),{inspect:aZ}=cn();R8.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return Iw.alloc(0);let r=Iw.allocUnsafe(e>>>0),n=this.head,s=0;for(;n;)y0(r,n.data,s),s+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let s=n.slice(0,e);return this.head.data=n.slice(e),s}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[sZ](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,s=0;do{let i=n.data;if(e>i.length)r+=i,e-=i.length;else{e===i.length?(r+=i,++s,n.next?this.head=n.next:this.head=this.tail=null):(r+=k8(i,0,e),this.head=n,n.data=k8(i,e));break}++s}while((n=n.next)!==null);return this.length-=s,r}_getBuffer(e){let r=Iw.allocUnsafe(e),n=e,s=this.head,i=0;do{let o=s.data;if(e>o.length)y0(r,o,n-e),e-=o.length;else{e===o.length?(y0(r,o,n-e),++i,s.next?this.head=s.next:this.head=this.tail=null):(y0(r,new oZ(o.buffer,o.byteOffset,e),n-e),this.head=s,s.data=o.slice(e));break}++i}while((s=s.next)!==null);return this.length-=i,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return aZ(this,{...r,depth:0,customInspect:!1})}}});var Fp=v((ISe,q8)=>{"use strict";var{MathFloor:uZ,NumberIsInteger:cZ}=nr(),{validateInteger:lZ}=Xl(),{ERR_INVALID_ARG_VALUE:dZ}=wn().codes,j8=16*1024,N8=16;function fZ(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function M8(t){return t?N8:j8}function pZ(t,e){lZ(e,"value",0),t?N8=e:j8=e}function hZ(t,e,r,n){let s=fZ(e,n,r);if(s!=null){if(!cZ(s)||s<0){let i=n?`options.${r}`:"options.highWaterMark";throw new dZ(i,s)}return uZ(s)}return M8(t.objectMode)}q8.exports={getHighWaterMark:hZ,getDefaultHighWaterMark:M8,setDefaultHighWaterMark:pZ}});var V8=v((Bw,U8)=>{var g0=hi(),Ns=g0.Buffer;function L8(t,e){for(var r in t)e[r]=t[r]}Ns.from&&Ns.alloc&&Ns.allocUnsafe&&Ns.allocUnsafeSlow?U8.exports=g0:(L8(g0,Bw),Bw.Buffer=lc);function lc(t,e,r){return Ns(t,e,r)}lc.prototype=Object.create(Ns.prototype);L8(Ns,lc);lc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ns(t,e,r)};lc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ns(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};lc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ns(t)};lc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return g0.SlowBuffer(t)}});var H8=v(z8=>{"use strict";var Rw=V8().Buffer,K8=Rw.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function mZ(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function yZ(t){var e=mZ(t);if(typeof e!="string"&&(Rw.isEncoding===K8||!K8(t)))throw new Error("Unknown encoding: "+t);return e||t}z8.StringDecoder=Tp;function Tp(t){this.encoding=yZ(t);var e;switch(this.encoding){case"utf16le":this.text=EZ,this.end=SZ,e=4;break;case"utf8":this.fillLast=bZ,e=4;break;case"base64":this.text=AZ,this.end=DZ,e=3;break;default:this.write=xZ,this.end=CZ;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Rw.allocUnsafe(e)}Tp.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Tp.prototype.end=wZ;Tp.prototype.text=_Z;Tp.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function kw(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function gZ(t,e,r){var n=e.length-1;if(n<r)return 0;var s=kw(e[n]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--n<r||s===-2?0:(s=kw(e[n]),s>=0?(s>0&&(t.lastNeed=s-2),s):--n<r||s===-2?0:(s=kw(e[n]),s>=0?(s>0&&(s===2?s=0:t.lastNeed=s-3),s):0))}function vZ(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function bZ(t){var e=this.lastTotal-this.lastNeed,r=vZ(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function _Z(t,e){var r=gZ(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function wZ(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function EZ(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function SZ(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function AZ(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function DZ(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function xZ(t){return t.toString(this.encoding)}function CZ(t){return t&&t.length?this.write(t):""}});var $w=v((kSe,Z8)=>{"use strict";var W8=Ba(),{PromisePrototypeThen:PZ,SymbolAsyncIterator:J8,SymbolIterator:G8}=nr(),{Buffer:OZ}=hi(),{ERR_INVALID_ARG_TYPE:FZ,ERR_STREAM_NULL_VALUES:TZ}=wn().codes;function IZ(t,e,r){let n;if(typeof e=="string"||e instanceof OZ)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let s;if(e&&e[J8])s=!0,n=e[J8]();else if(e&&e[G8])s=!1,n=e[G8]();else throw new FZ("iterable",["Iterable"],e);let i=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;i._read=function(){o||(o=!0,c())},i._destroy=function(u,l){PZ(a(u),()=>W8.nextTick(l,u),d=>W8.nextTick(l,d||u))};async function a(u){let l=u!=null,d=typeof n.throw=="function";if(l&&d){let{value:p,done:f}=await n.throw(u);if(await p,f)return}if(typeof n.return=="function"){let{value:p}=await n.return();await p}}async function c(){for(;;){try{let{value:u,done:l}=s?await n.next():n.next();if(l)i.push(null);else{let d=u&&typeof u.then=="function"?await u:u;if(d===null)throw o=!1,new TZ;if(i.push(d))continue;o=!1}}catch(u){i.destroy(u)}break}}return i}Z8.exports=IZ});var Bp=v((RSe,hI)=>{var Gi=Ba(),{ArrayPrototypeIndexOf:BZ,NumberIsInteger:kZ,NumberIsNaN:RZ,NumberParseInt:$Z,ObjectDefineProperties:Kw,ObjectKeys:jZ,ObjectSetPrototypeOf:Q8,Promise:eI,SafeSet:NZ,SymbolAsyncDispose:MZ,SymbolAsyncIterator:qZ,Symbol:LZ}=nr();hI.exports=Ye;Ye.ReadableState=w0;var{EventEmitter:UZ}=Nl(),{Stream:Ra,prependListener:VZ}=h0(),{Buffer:jw}=hi(),{addAbortSignal:KZ}=Op(),tI=Bo(),lt=cn().debuglog("stream",t=>{lt=t}),zZ=$8(),rd=cc(),{getHighWaterMark:HZ,getDefaultHighWaterMark:WZ}=Fp(),{aggregateTwoErrors:X8,codes:{ERR_INVALID_ARG_TYPE:JZ,ERR_METHOD_NOT_IMPLEMENTED:GZ,ERR_OUT_OF_RANGE:ZZ,ERR_STREAM_PUSH_AFTER_EOF:XZ,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:YZ},AbortError:QZ}=wn(),{validateObject:eX}=Xl(),dc=LZ("kPaused"),{StringDecoder:rI}=H8(),tX=$w();Q8(Ye.prototype,Ra.prototype);Q8(Ye,Ra);var Nw=()=>{},{errorOrDestroy:ed}=rd,td=1,rX=2,nI=4,Ip=8,iI=16,v0=32,b0=64,sI=128,nX=256,iX=512,sX=1024,Uw=2048,Vw=4096,oX=8192,aX=16384,uX=32768,oI=65536,cX=1<<17,lX=1<<18;function Cr(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Kw(w0.prototype,{objectMode:Cr(td),ended:Cr(rX),endEmitted:Cr(nI),reading:Cr(Ip),constructed:Cr(iI),sync:Cr(v0),needReadable:Cr(b0),emittedReadable:Cr(sI),readableListening:Cr(nX),resumeScheduled:Cr(iX),errorEmitted:Cr(sX),emitClose:Cr(Uw),autoDestroy:Cr(Vw),destroyed:Cr(oX),closed:Cr(aX),closeEmitted:Cr(uX),multiAwaitDrain:Cr(oI),readingMore:Cr(cX),dataEmitted:Cr(lX)});function w0(t,e,r){typeof r!="boolean"&&(r=e instanceof Ms()),this.state=Uw|Vw|iI|v0,t&&t.objectMode&&(this.state|=td),r&&t&&t.readableObjectMode&&(this.state|=td),this.highWaterMark=t?HZ(this,t,"readableHighWaterMark",r):WZ(!1),this.buffer=new zZ,this.length=0,this.pipes=[],this.flowing=null,this[dc]=null,t&&t.emitClose===!1&&(this.state&=~Uw),t&&t.autoDestroy===!1&&(this.state&=~Vw),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new rI(t.encoding),this.encoding=t.encoding)}function Ye(t){if(!(this instanceof Ye))return new Ye(t);let e=this instanceof Ms();this._readableState=new w0(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&KZ(t.signal,this)),Ra.call(this,t),rd.construct(this,()=>{this._readableState.needReadable&&_0(this,this._readableState)})}Ye.prototype.destroy=rd.destroy;Ye.prototype._undestroy=rd.undestroy;Ye.prototype._destroy=function(t,e){e(t)};Ye.prototype[UZ.captureRejectionSymbol]=function(t){this.destroy(t)};Ye.prototype[MZ]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new QZ,this.destroy(t)),new eI((e,r)=>tI(this,n=>n&&n!==t?r(n):e(null)))};Ye.prototype.push=function(t,e){return aI(this,t,e,!1)};Ye.prototype.unshift=function(t,e){return aI(this,t,e,!0)};function aI(t,e,r,n){lt("readableAddChunk",e);let s=t._readableState,i;if(s.state&td||(typeof e=="string"?(r=r||s.defaultEncoding,s.encoding!==r&&(n&&s.encoding?e=jw.from(e,r).toString(s.encoding):(e=jw.from(e,r),r=""))):e instanceof jw?r="":Ra._isUint8Array(e)?(e=Ra._uint8ArrayToBuffer(e),r=""):e!=null&&(i=new JZ("chunk",["string","Buffer","Uint8Array"],e))),i)ed(t,i);else if(e===null)s.state&=~Ip,pX(t,s);else if(s.state&td||e&&e.length>0)if(n)if(s.state&nI)ed(t,new YZ);else{if(s.destroyed||s.errored)return!1;Mw(t,s,e,!0)}else if(s.ended)ed(t,new XZ);else{if(s.destroyed||s.errored)return!1;s.state&=~Ip,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?Mw(t,s,e,!1):_0(t,s)):Mw(t,s,e,!1)}else n||(s.state&=~Ip,_0(t,s));return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function Mw(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.state&oI?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.state&b0&&E0(t)),_0(t,e)}Ye.prototype.isPaused=function(){let t=this._readableState;return t[dc]===!0||t.flowing===!1};Ye.prototype.setEncoding=function(t){let e=new rI(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let s of r)n+=e.write(s);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var dX=1073741824;function fX(t){if(t>dX)throw new ZZ("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Y8(t,e){return t<=0||e.length===0&&e.ended?0:e.state&td?1:RZ(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Ye.prototype.read=function(t){lt("read",t),t===void 0?t=NaN:kZ(t)||(t=$Z(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=fX(t)),t!==0&&(e.state&=~sI),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return lt("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?qw(this):E0(this),null;if(t=Y8(t,e),t===0&&e.ended)return e.length===0&&qw(this),null;let n=(e.state&b0)!==0;if(lt("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,lt("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,lt("reading, ended or constructing",n);else if(n){lt("do read"),e.state|=Ip|v0,e.length===0&&(e.state|=b0);try{this._read(e.highWaterMark)}catch(i){ed(this,i)}e.state&=~v0,e.reading||(t=Y8(r,e))}let s;return t>0?s=fI(t,e):s=null,s===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&qw(this)),s!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",s)),s};function pX(t,e){if(lt("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?E0(t):(e.needReadable=!1,e.emittedReadable=!0,uI(t))}}function E0(t){let e=t._readableState;lt("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(lt("emitReadable",e.flowing),e.emittedReadable=!0,Gi.nextTick(uI,t))}function uI(t){let e=t._readableState;lt("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,lI(t)}function _0(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Gi.nextTick(hX,t,e))}function hX(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(lt("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Ye.prototype._read=function(t){throw new GZ("_read()")};Ye.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new NZ(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),lt("pipe count=%d opts=%j",n.pipes.length,e);let i=(!e||e.end!==!1)&&t!==Gi.stdout&&t!==Gi.stderr?a:g;n.endEmitted?Gi.nextTick(i):r.once("end",i),t.on("unpipe",o);function o(A,x){lt("onunpipe"),A===r&&x&&x.hasUnpiped===!1&&(x.hasUnpiped=!0,l())}function a(){lt("onend"),t.end()}let c,u=!1;function l(){lt("cleanup"),t.removeListener("close",h),t.removeListener("finish",y),c&&t.removeListener("drain",c),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",p),u=!0,c&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&c()}function d(){u||(n.pipes.length===1&&n.pipes[0]===t?(lt("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(lt("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),c||(c=mX(r,t),t.on("drain",c))}r.on("data",p);function p(A){lt("ondata");let x=t.write(A);lt("dest.write",x),x===!1&&d()}function f(A){if(lt("onerror",A),g(),t.removeListener("error",f),t.listenerCount("error")===0){let x=t._writableState||t._readableState;x&&!x.errorEmitted?ed(t,A):t.emit("error",A)}}VZ(t,"error",f);function h(){t.removeListener("finish",y),g()}t.once("close",h);function y(){lt("onfinish"),t.removeListener("close",h),g()}t.once("finish",y);function g(){lt("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(lt("pipe resume"),r.resume()),t};function mX(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(lt("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(lt("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Ye.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let s=e.pipes;e.pipes=[],this.pause();for(let i=0;i<s.length;i++)s[i].emit("unpipe",this,{hasUnpiped:!1});return this}let n=BZ(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};Ye.prototype.on=function(t,e){let r=Ra.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,lt("on readable",n.length,n.reading),n.length?E0(this):n.reading||Gi.nextTick(yX,this)),r};Ye.prototype.addListener=Ye.prototype.on;Ye.prototype.removeListener=function(t,e){let r=Ra.prototype.removeListener.call(this,t,e);return t==="readable"&&Gi.nextTick(cI,this),r};Ye.prototype.off=Ye.prototype.removeListener;Ye.prototype.removeAllListeners=function(t){let e=Ra.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Gi.nextTick(cI,this),e};function cI(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[dc]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function yX(t){lt("readable nexttick read 0"),t.read(0)}Ye.prototype.resume=function(){let t=this._readableState;return t.flowing||(lt("resume"),t.flowing=!t.readableListening,gX(this,t)),t[dc]=!1,this};function gX(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Gi.nextTick(vX,t,e))}function vX(t,e){lt("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),lI(t),e.flowing&&!e.reading&&t.read(0)}Ye.prototype.pause=function(){return lt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(lt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[dc]=!0,this};function lI(t){let e=t._readableState;for(lt("flow",e.flowing);e.flowing&&t.read()!==null;);}Ye.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{ed(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=jZ(t);for(let n=1;n<r.length;n++){let s=r[n];this[s]===void 0&&typeof t[s]=="function"&&(this[s]=t[s].bind(t))}return this};Ye.prototype[qZ]=function(){return dI(this)};Ye.prototype.iterator=function(t){return t!==void 0&&eX(t,"options"),dI(this,t)};function dI(t,e){typeof t.read!="function"&&(t=Ye.wrap(t,{objectMode:!0}));let r=bX(t,e);return r.stream=t,r}async function*bX(t,e){let r=Nw;function n(o){this===t?(r(),r=Nw):r=o}t.on("readable",n);let s,i=tI(t,{writable:!1},o=>{s=o?X8(s,o):null,r(),r=Nw});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(s)throw s;if(s===null)return;await new eI(n)}}}catch(o){throw s=X8(s,o),s}finally{(s||e?.destroyOnReturn!==!1)&&(s===void 0||t._readableState.autoDestroy)?rd.destroyer(t,null):(t.off("readable",n),i())}}Kw(Ye.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Kw(w0.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[dc]!==!1},set(t){this[dc]=!!t}}});Ye._fromList=fI;function fI(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function qw(t){let e=t._readableState;lt("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Gi.nextTick(_X,e,t))}function _X(t,e){if(lt("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Gi.nextTick(wX,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function wX(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Ye.from=function(t,e){return tX(Ye,t,e)};var Lw;function pI(){return Lw===void 0&&(Lw={}),Lw}Ye.fromWeb=function(t,e){return pI().newStreamReadableFromReadableStream(t,e)};Ye.toWeb=function(t,e){return pI().newReadableStreamFromStreamReadable(t,e)};Ye.wrap=function(t,e){var r,n;return new Ye({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(s,i){rd.destroyer(t,s),i(s)}}).wrap(t)}});var C0=v(($Se,xI)=>{var fc=Ba(),{ArrayPrototypeSlice:gI,Error:EX,FunctionPrototypeSymbolHasInstance:vI,ObjectDefineProperty:bI,ObjectDefineProperties:SX,ObjectSetPrototypeOf:_I,StringPrototypeToLowerCase:AX,Symbol:DX,SymbolHasInstance:xX}=nr();xI.exports=ir;ir.WritableState=$p;var{EventEmitter:CX}=Nl(),kp=h0().Stream,{Buffer:S0}=hi(),x0=cc(),{addAbortSignal:PX}=Op(),{getHighWaterMark:OX,getDefaultHighWaterMark:FX}=Fp(),{ERR_INVALID_ARG_TYPE:TX,ERR_METHOD_NOT_IMPLEMENTED:IX,ERR_MULTIPLE_CALLBACK:wI,ERR_STREAM_CANNOT_PIPE:BX,ERR_STREAM_DESTROYED:Rp,ERR_STREAM_ALREADY_FINISHED:kX,ERR_STREAM_NULL_VALUES:RX,ERR_STREAM_WRITE_AFTER_END:$X,ERR_UNKNOWN_ENCODING:EI}=wn().codes,{errorOrDestroy:nd}=x0;_I(ir.prototype,kp.prototype);_I(ir,kp);function Ww(){}var id=DX("kOnFinished");function $p(t,e,r){typeof r!="boolean"&&(r=e instanceof Ms()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?OX(this,t,"writableHighWaterMark",r):FX(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=NX.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,D0(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[id]=[]}function D0(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}$p.prototype.getBuffer=function(){return gI(this.buffered,this.bufferedIndex)};bI($p.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ir(t){let e=this instanceof Ms();if(!e&&!vI(ir,this))return new ir(t);this._writableState=new $p(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&PX(t.signal,this)),kp.call(this,t),x0.construct(this,()=>{let r=this._writableState;r.writing||Gw(this,r),Zw(this,r)})}bI(ir,xX,{__proto__:null,value:function(t){return vI(this,t)?!0:this!==ir?!1:t&&t._writableState instanceof $p}});ir.prototype.pipe=function(){nd(this,new BX)};function SI(t,e,r,n){let s=t._writableState;if(typeof r=="function")n=r,r=s.defaultEncoding;else{if(!r)r=s.defaultEncoding;else if(r!=="buffer"&&!S0.isEncoding(r))throw new EI(r);typeof n!="function"&&(n=Ww)}if(e===null)throw new RX;if(!s.objectMode)if(typeof e=="string")s.decodeStrings!==!1&&(e=S0.from(e,r),r="buffer");else if(e instanceof S0)r="buffer";else if(kp._isUint8Array(e))e=kp._uint8ArrayToBuffer(e),r="buffer";else throw new TX("chunk",["string","Buffer","Uint8Array"],e);let i;return s.ending?i=new $X:s.destroyed&&(i=new Rp("write")),i?(fc.nextTick(n,i),nd(t,i,!0),i):(s.pendingcb++,jX(t,s,e,r,n))}ir.prototype.write=function(t,e,r){return SI(this,t,e,r)===!0};ir.prototype.cork=function(){this._writableState.corked++};ir.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Gw(this,t))};ir.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=AX(e)),!S0.isEncoding(e))throw new EI(e);return this._writableState.defaultEncoding=e,this};function jX(t,e,r,n,s){let i=e.objectMode?1:r.length;e.length+=i;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:s}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&s!==Ww&&(e.allNoop=!1)):(e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function mI(t,e,r,n,s,i,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Rp("write")):r?t._writev(s,e.onwrite):t._write(s,i,e.onwrite),e.sync=!1}function yI(t,e,r,n){--e.pendingcb,n(r),Jw(e),nd(t,r)}function NX(t,e){let r=t._writableState,n=r.sync,s=r.writecb;if(typeof s!="function"){nd(t,new wI);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?fc.nextTick(yI,t,r,e,s):yI(t,r,e,s)):(r.buffered.length>r.bufferedIndex&&Gw(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===s?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:s,stream:t,state:r},fc.nextTick(MX,r.afterWriteTickInfo)):AI(t,r,1,s))}function MX({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,AI(t,e,r,n)}function AI(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&Jw(e),Zw(t,e)}function Jw(t){if(t.writing)return;for(let s=t.bufferedIndex;s<t.buffered.length;++s){var e;let{chunk:i,callback:o}=t.buffered[s],a=t.objectMode?1:i.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Rp("write"))}let r=t[id].splice(0);for(let s=0;s<r.length;s++){var n;r[s]((n=t.errored)!==null&&n!==void 0?n:new Rp("end"))}D0(t)}function Gw(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:s}=e,i=r.length-n;if(!i)return;let o=n;if(e.bufferProcessing=!0,i>1&&t._writev){e.pendingcb-=i-1;let a=e.allNoop?Ww:u=>{for(let l=o;l<r.length;++l)r[l].callback(u)},c=e.allNoop&&o===0?r:gI(r,o);c.allBuffers=e.allBuffers,mI(t,e,!0,e.length,c,"",a),D0(e)}else{do{let{chunk:a,encoding:c,callback:u}=r[o];r[o++]=null;let l=s?1:a.length;mI(t,e,!1,l,a,c,u)}while(o<r.length&&!e.writing);o===r.length?D0(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}ir.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new IX("_write()")};ir.prototype._writev=null;ir.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let s;if(t!=null){let i=SI(this,t,e);i instanceof EX&&(s=i)}return n.corked&&(n.corked=1,this.uncork()),s||(!n.errored&&!n.ending?(n.ending=!0,Zw(this,n,!0),n.ended=!0):n.finished?s=new kX("end"):n.destroyed&&(s=new Rp("end"))),typeof r=="function"&&(s||n.finished?fc.nextTick(r,s):n[id].push(r)),this};function A0(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function qX(t,e){let r=!1;function n(s){if(r){nd(t,s??wI());return}if(r=!0,e.pendingcb--,s){let i=e[id].splice(0);for(let o=0;o<i.length;o++)i[o](s);nd(t,s,e.sync)}else A0(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,fc.nextTick(Hw,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(s){n(s)}e.sync=!1}function LX(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,qX(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Zw(t,e,r){A0(e)&&(LX(t,e),e.pendingcb===0&&(r?(e.pendingcb++,fc.nextTick((n,s)=>{A0(s)?Hw(n,s):s.pendingcb--},t,e)):A0(e)&&(e.pendingcb++,Hw(t,e))))}function Hw(t,e){e.pendingcb--,e.finished=!0;let r=e[id].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}SX(ir.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var UX=x0.destroy;ir.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[id].length)&&fc.nextTick(Jw,r),UX.call(this,t,e),this};ir.prototype._undestroy=x0.undestroy;ir.prototype._destroy=function(t,e){e(t)};ir.prototype[CX.captureRejectionSymbol]=function(t){this.destroy(t)};var zw;function DI(){return zw===void 0&&(zw={}),zw}ir.fromWeb=function(t,e){return DI().newStreamWritableFromWritableStream(t,e)};ir.toWeb=function(t){return DI().newWritableStreamFromStreamWritable(t)}});var LI=v((jSe,qI)=>{var Xw=Ba(),VX=hi(),{isReadable:KX,isWritable:zX,isIterable:CI,isNodeStream:HX,isReadableNodeStream:PI,isWritableNodeStream:OI,isDuplexNodeStream:WX,isReadableStream:FI,isWritableStream:TI}=$s(),II=Bo(),{AbortError:NI,codes:{ERR_INVALID_ARG_TYPE:JX,ERR_INVALID_RETURN_VALUE:BI}}=wn(),{destroyer:od}=cc(),GX=Ms(),MI=Bp(),ZX=C0(),{createDeferredPromise:kI}=cn(),RI=$w(),$I=globalThis.Blob||VX.Blob,XX=typeof $I<"u"?function(e){return e instanceof $I}:function(e){return!1},YX=globalThis.AbortController||Gl().AbortController,{FunctionPrototypeCall:jI}=nr(),$a=class extends GX{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};qI.exports=function t(e,r){if(WX(e))return e;if(PI(e))return sd({readable:e});if(OI(e))return sd({writable:e});if(HX(e))return sd({writable:!1,readable:!1});if(FI(e))return sd({readable:MI.fromWeb(e)});if(TI(e))return sd({writable:ZX.fromWeb(e)});if(typeof e=="function"){let{value:s,write:i,final:o,destroy:a}=QX(e);if(CI(s))return RI($a,s,{objectMode:!0,write:i,final:o,destroy:a});let c=s?.then;if(typeof c=="function"){let u,l=jI(c,s,d=>{if(d!=null)throw new BI("nully","body",d)},d=>{od(u,d)});return u=new $a({objectMode:!0,readable:!1,write:i,final(d){o(async()=>{try{await l,Xw.nextTick(d,null)}catch(p){Xw.nextTick(d,p)}})},destroy:a})}throw new BI("Iterable, AsyncIterable or AsyncFunction",r,s)}if(XX(e))return t(e.arrayBuffer());if(CI(e))return RI($a,e,{objectMode:!0,writable:!1});if(FI(e?.readable)&&TI(e?.writable))return $a.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let s=e!=null&&e.readable?PI(e?.readable)?e?.readable:t(e.readable):void 0,i=e!=null&&e.writable?OI(e?.writable)?e?.writable:t(e.writable):void 0;return sd({readable:s,writable:i})}let n=e?.then;if(typeof n=="function"){let s;return jI(n,e,i=>{i!=null&&s.push(i),s.push(null)},i=>{od(s,i)}),s=new $a({objectMode:!0,writable:!1,read(){}})}throw new JX(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function QX(t){let{promise:e,resolve:r}=kI(),n=new YX,s=n.signal;return{value:t(async function*(){for(;;){let o=e;e=null;let{chunk:a,done:c,cb:u}=await o;if(Xw.nextTick(u),c)return;if(s.aborted)throw new NI(void 0,{cause:s.reason});({promise:e,resolve:r}=kI()),yield a}}(),{signal:s}),write(o,a,c){let u=r;r=null,u({chunk:o,done:!1,cb:c})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function sd(t){let e=t.readable&&typeof t.readable.read!="function"?MI.wrap(t.readable):t.readable,r=t.writable,n=!!KX(e),s=!!zX(r),i,o,a,c,u;function l(d){let p=c;c=null,p?p(d):d&&u.destroy(d)}return u=new $a({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:s}),s&&(II(r,d=>{s=!1,d&&od(e,d),l(d)}),u._write=function(d,p,f){r.write(d,p)?f():i=f},u._final=function(d){r.end(),o=d},r.on("drain",function(){if(i){let d=i;i=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(II(e,d=>{n=!1,d&&od(e,d),l(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){u.push(null)}),u._read=function(){for(;;){let d=e.read();if(d===null){a=u._read;return}if(!u.push(d))return}}),u._destroy=function(d,p){!d&&c!==null&&(d=new NI),a=null,i=null,o=null,c===null?p(d):(c=p,od(r,d),od(e,d))},u}});var Ms=v((NSe,KI)=>{"use strict";var{ObjectDefineProperties:eY,ObjectGetOwnPropertyDescriptor:ko,ObjectKeys:tY,ObjectSetPrototypeOf:UI}=nr();KI.exports=Zi;var eE=Bp(),vi=C0();UI(Zi.prototype,eE.prototype);UI(Zi,eE);{let t=tY(vi.prototype);for(let e=0;e<t.length;e++){let r=t[e];Zi.prototype[r]||(Zi.prototype[r]=vi.prototype[r])}}function Zi(t){if(!(this instanceof Zi))return new Zi(t);eE.call(this,t),vi.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}eY(Zi.prototype,{writable:{__proto__:null,...ko(vi.prototype,"writable")},writableHighWaterMark:{__proto__:null,...ko(vi.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...ko(vi.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...ko(vi.prototype,"writableBuffer")},writableLength:{__proto__:null,...ko(vi.prototype,"writableLength")},writableFinished:{__proto__:null,...ko(vi.prototype,"writableFinished")},writableCorked:{__proto__:null,...ko(vi.prototype,"writableCorked")},writableEnded:{__proto__:null,...ko(vi.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...ko(vi.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Yw;function VI(){return Yw===void 0&&(Yw={}),Yw}Zi.fromWeb=function(t,e){return VI().newStreamDuplexFromReadableWritablePair(t,e)};Zi.toWeb=function(t){return VI().newReadableWritablePairFromDuplex(t)};var Qw;Zi.from=function(t){return Qw||(Qw=LI()),Qw(t,"body")}});var nE=v((MSe,HI)=>{"use strict";var{ObjectSetPrototypeOf:zI,Symbol:rY}=nr();HI.exports=Ro;var{ERR_METHOD_NOT_IMPLEMENTED:nY}=wn().codes,rE=Ms(),{getHighWaterMark:iY}=Fp();zI(Ro.prototype,rE.prototype);zI(Ro,rE);var jp=rY("kCallback");function Ro(t){if(!(this instanceof Ro))return new Ro(t);let e=t?iY(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),rE.call(this,t),this._readableState.sync=!1,this[jp]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",sY)}function tE(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function sY(){this._final!==tE&&tE.call(this)}Ro.prototype._final=tE;Ro.prototype._transform=function(t,e,r){throw new nY("_transform()")};Ro.prototype._write=function(t,e,r){let n=this._readableState,s=this._writableState,i=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),s.ended||i===n.length||n.length<n.highWaterMark?r():this[jp]=r})};Ro.prototype._read=function(){if(this[jp]){let t=this[jp];this[jp]=null,t()}}});var sE=v((qSe,JI)=>{"use strict";var{ObjectSetPrototypeOf:WI}=nr();JI.exports=ad;var iE=nE();WI(ad.prototype,iE.prototype);WI(ad,iE);function ad(t){if(!(this instanceof ad))return new ad(t);iE.call(this,t)}ad.prototype._transform=function(t,e,r){r(null,t)}});var T0=v((LSe,QI)=>{var Np=Ba(),{ArrayIsArray:oY,Promise:aY,SymbolAsyncIterator:uY,SymbolDispose:cY}=nr(),F0=Bo(),{once:lY}=cn(),dY=cc(),GI=Ms(),{aggregateTwoErrors:fY,codes:{ERR_INVALID_ARG_TYPE:hE,ERR_INVALID_RETURN_VALUE:oE,ERR_MISSING_ARGS:pY,ERR_STREAM_DESTROYED:hY,ERR_STREAM_PREMATURE_CLOSE:mY},AbortError:yY}=wn(),{validateFunction:gY,validateAbortSignal:vY}=Xl(),{isIterable:pc,isReadable:aE,isReadableNodeStream:O0,isNodeStream:ZI,isTransformStream:ud,isWebStream:bY,isReadableStream:uE,isReadableFinished:_Y}=$s(),wY=globalThis.AbortController||Gl().AbortController,cE,lE,dE;function XI(t,e,r){let n=!1;t.on("close",()=>{n=!0});let s=F0(t,{readable:e,writable:r},i=>{n=!i});return{destroy:i=>{n||(n=!0,dY.destroyer(t,i||new hY("pipe")))},cleanup:s}}function EY(t){return gY(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function fE(t){if(pc(t))return t;if(O0(t))return SY(t);throw new hE("val",["Readable","Iterable","AsyncIterable"],t)}async function*SY(t){lE||(lE=Bp()),yield*lE.prototype[uY].call(t)}async function P0(t,e,r,{end:n}){let s,i=null,o=u=>{if(u&&(s=u),i){let l=i;i=null,l()}},a=()=>new aY((u,l)=>{s?l(s):i=()=>{s?l(s):u()}});e.on("drain",o);let c=F0(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let u of t)e.write(u)||await a();n&&(e.end(),await a()),r()}catch(u){r(s!==u?fY(s,u):u)}finally{c(),e.off("drain",o)}}async function pE(t,e,r,{end:n}){ud(e)&&(e=e.writable);let s=e.getWriter();try{for await(let i of t)await s.ready,s.write(i).catch(()=>{});await s.ready,n&&await s.close(),r()}catch(i){try{await s.abort(i),r(i)}catch(o){r(o)}}}function AY(...t){return YI(t,lY(EY(t)))}function YI(t,e,r){if(t.length===1&&oY(t[0])&&(t=t[0]),t.length<2)throw new pY("streams");let n=new wY,s=n.signal,i=r?.signal,o=[];vY(i,"options.signal");function a(){h(new yY)}dE=dE||cn().addAbortListener;let c;i&&(c=dE(i,a));let u,l,d=[],p=0;function f(b){h(b,--p===0)}function h(b,w){var D;if(b&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=b),!(!u&&!w)){for(;d.length;)d.shift()(u);(D=c)===null||D===void 0||D[cY](),n.abort(),w&&(u||o.forEach(F=>F()),Np.nextTick(e,u,l))}}let y;for(let b=0;b<t.length;b++){let w=t[b],D=b<t.length-1,F=b>0,C=D||r?.end!==!1,I=b===t.length-1;if(ZI(w)){let k=function(T){T&&T.name!=="AbortError"&&T.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(T)};var x=k;if(C){let{destroy:T,cleanup:j}=XI(w,D,F);d.push(T),aE(w)&&I&&o.push(j)}w.on("error",k),aE(w)&&I&&o.push(()=>{w.removeListener("error",k)})}if(b===0)if(typeof w=="function"){if(y=w({signal:s}),!pc(y))throw new oE("Iterable, AsyncIterable or Stream","source",y)}else pc(w)||O0(w)||ud(w)?y=w:y=GI.from(w);else if(typeof w=="function"){if(ud(y)){var g;y=fE((g=y)===null||g===void 0?void 0:g.readable)}else y=fE(y);if(y=w(y,{signal:s}),D){if(!pc(y,!0))throw new oE("AsyncIterable",`transform[${b-1}]`,y)}else{var A;cE||(cE=sE());let k=new cE({objectMode:!0}),T=(A=y)===null||A===void 0?void 0:A.then;if(typeof T=="function")p++,T.call(y,Q=>{l=Q,Q!=null&&k.write(Q),C&&k.end(),Np.nextTick(f)},Q=>{k.destroy(Q),Np.nextTick(f,Q)});else if(pc(y,!0))p++,P0(y,k,f,{end:C});else if(uE(y)||ud(y)){let Q=y.readable||y;p++,P0(Q,k,f,{end:C})}else throw new oE("AsyncIterable or Promise","destination",y);y=k;let{destroy:j,cleanup:L}=XI(y,!1,!0);d.push(j),I&&o.push(L)}}else if(ZI(w)){if(O0(y)){p+=2;let k=DY(y,w,f,{end:C});aE(w)&&I&&o.push(k)}else if(ud(y)||uE(y)){let k=y.readable||y;p++,P0(k,w,f,{end:C})}else if(pc(y))p++,P0(y,w,f,{end:C});else throw new hE("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],y);y=w}else if(bY(w)){if(O0(y))p++,pE(fE(y),w,f,{end:C});else if(uE(y)||pc(y))p++,pE(y,w,f,{end:C});else if(ud(y))p++,pE(y.readable,w,f,{end:C});else throw new hE("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],y);y=w}else y=GI.from(w)}return(s!=null&&s.aborted||i!=null&&i.aborted)&&Np.nextTick(a),y}function DY(t,e,r,{end:n}){let s=!1;if(e.on("close",()=>{s||r(new mY)}),t.pipe(e,{end:!1}),n){let o=function(){s=!0,e.end()};var i=o;_Y(t)?Np.nextTick(o):t.once("end",o)}else r();return F0(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),F0(e,{readable:!1,writable:!0},r)}QI.exports={pipelineImpl:YI,pipeline:AY}});var yE=v((USe,sB)=>{"use strict";var{pipeline:xY}=T0(),I0=Ms(),{destroyer:CY}=cc(),{isNodeStream:B0,isReadable:eB,isWritable:tB,isWebStream:mE,isTransformStream:hc,isWritableStream:rB,isReadableStream:nB}=$s(),{AbortError:PY,codes:{ERR_INVALID_ARG_VALUE:iB,ERR_MISSING_ARGS:OY}}=wn(),FY=Bo();sB.exports=function(...e){if(e.length===0)throw new OY("streams");if(e.length===1)return I0.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=I0.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=I0.from(e[f])}for(let f=0;f<e.length;++f)if(!(!B0(e[f])&&!mE(e[f]))){if(f<e.length-1&&!(eB(e[f])||nB(e[f])||hc(e[f])))throw new iB(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(tB(e[f])||rB(e[f])||hc(e[f])))throw new iB(`streams[${f}]`,r[f],"must be writable")}let n,s,i,o,a;function c(f){let h=o;o=null,h?h(f):f?a.destroy(f):!p&&!d&&a.destroy()}let u=e[0],l=xY(e,c),d=!!(tB(u)||rB(u)||hc(u)),p=!!(eB(l)||nB(l)||hc(l));if(a=new I0({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(l!=null&&l.readableObjectMode),writable:d,readable:p}),d){if(B0(u))a._write=function(h,y,g){u.write(h,y)?g():n=g},a._final=function(h){u.end(),s=h},u.on("drain",function(){if(n){let h=n;n=null,h()}});else if(mE(u)){let y=(hc(u)?u.writable:u).getWriter();a._write=async function(g,A,x){try{await y.ready,y.write(g).catch(()=>{}),x()}catch(b){x(b)}},a._final=async function(g){try{await y.ready,y.close().catch(()=>{}),s=g}catch(A){g(A)}}}let f=hc(l)?l.readable:l;FY(f,()=>{if(s){let h=s;s=null,h()}})}if(p){if(B0(l))l.on("readable",function(){if(i){let f=i;i=null,f()}}),l.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=l.read();if(f===null){i=a._read;return}if(!a.push(f))return}};else if(mE(l)){let h=(hc(l)?l.readable:l).getReader();a._read=async function(){for(;;)try{let{value:y,done:g}=await h.read();if(!a.push(y))return;if(g){a.push(null);return}}catch{return}}}}return a._destroy=function(f,h){!f&&o!==null&&(f=new PY),i=null,n=null,s=null,o===null?h(f):(o=h,B0(l)&&CY(l,f))},a}});var mB=v((VSe,bE)=>{"use strict";var TY=globalThis.AbortController||Gl().AbortController,{codes:{ERR_INVALID_ARG_VALUE:IY,ERR_INVALID_ARG_TYPE:Mp,ERR_MISSING_ARGS:BY,ERR_OUT_OF_RANGE:kY},AbortError:qs}=wn(),{validateAbortSignal:mc,validateInteger:oB,validateObject:yc}=Xl(),RY=nr().Symbol("kWeak"),$Y=nr().Symbol("kResistStopPropagation"),{finished:jY}=Bo(),NY=yE(),{addAbortSignalNoValidate:MY}=Op(),{isWritable:qY,isNodeStream:LY}=$s(),{deprecate:UY}=cn(),{ArrayPrototypePush:VY,Boolean:KY,MathFloor:aB,Number:zY,NumberIsNaN:HY,Promise:uB,PromiseReject:cB,PromiseResolve:WY,PromisePrototypeThen:lB,Symbol:fB}=nr(),k0=fB("kEmpty"),dB=fB("kEof");function JY(t,e){if(e!=null&&yc(e,"options"),e?.signal!=null&&mc(e.signal,"options.signal"),LY(t)&&!qY(t))throw new IY("stream",t,"must be writable");let r=NY(this,t);return e!=null&&e.signal&&MY(e.signal,r),r}function R0(t,e){if(typeof t!="function")throw new Mp("fn",["Function","AsyncFunction"],t);e!=null&&yc(e,"options"),e?.signal!=null&&mc(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=aB(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=aB(e.highWaterMark)),oB(r,"options.concurrency",1),oB(n,"options.highWaterMark",0),n+=r,(async function*(){let i=cn().AbortSignalAny([e?.signal].filter(KY)),o=this,a=[],c={signal:i},u,l,d=!1,p=0;function f(){d=!0,h()}function h(){p-=1,y()}function y(){l&&!d&&p<r&&a.length<n&&(l(),l=null)}async function g(){try{for await(let A of o){if(d)return;if(i.aborted)throw new qs;try{if(A=t(A,c),A===k0)continue;A=WY(A)}catch(x){A=cB(x)}p+=1,lB(A,h,f),a.push(A),u&&(u(),u=null),!d&&(a.length>=n||p>=r)&&await new uB(x=>{l=x})}a.push(dB)}catch(A){let x=cB(A);lB(x,h,f),a.push(x)}finally{d=!0,u&&(u(),u=null)}}g();try{for(;;){for(;a.length>0;){let A=await a[0];if(A===dB)return;if(i.aborted)throw new qs;A!==k0&&(yield A),a.shift(),y()}await new uB(A=>{u=A})}}finally{d=!0,l&&(l(),l=null)}}).call(this)}function GY(t=void 0){return t!=null&&yc(t,"options"),t?.signal!=null&&mc(t.signal,"options.signal"),(async function*(){let r=0;for await(let s of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new qs({cause:t.signal.reason});yield[r++,s]}}).call(this)}async function pB(t,e=void 0){for await(let r of vE.call(this,t,e))return!0;return!1}async function ZY(t,e=void 0){if(typeof t!="function")throw new Mp("fn",["Function","AsyncFunction"],t);return!await pB.call(this,async(...r)=>!await t(...r),e)}async function XY(t,e){for await(let r of vE.call(this,t,e))return r}async function YY(t,e){if(typeof t!="function")throw new Mp("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s),k0}for await(let n of R0.call(this,r,e));}function vE(t,e){if(typeof t!="function")throw new Mp("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s)?n:k0}return R0.call(this,r,e)}var gE=class extends BY{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function QY(t,e,r){var n;if(typeof t!="function")throw new Mp("reducer",["Function","AsyncFunction"],t);r!=null&&yc(r,"options"),r?.signal!=null&&mc(r.signal,"options.signal");let s=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let u=new qs(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await jY(this.destroy(u)),u}let i=new TY,o=i.signal;if(r!=null&&r.signal){let u={once:!0,[RY]:this,[$Y]:!0};r.signal.addEventListener("abort",()=>i.abort(),u)}let a=!1;try{for await(let u of this){var c;if(a=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new qs;s?e=await t(e,u,{signal:o}):(e=u,s=!0)}if(!a&&!s)throw new gE}finally{i.abort()}return e}async function eQ(t){t!=null&&yc(t,"options"),t?.signal!=null&&mc(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new qs(void 0,{cause:t.signal.reason});VY(e,n)}return e}function tQ(t,e){let r=R0.call(this,t,e);return(async function*(){for await(let s of r)yield*s}).call(this)}function hB(t){if(t=zY(t),HY(t))return 0;if(t<0)throw new kY("number",">= 0",t);return t}function rQ(t,e=void 0){return e!=null&&yc(e,"options"),e?.signal!=null&&mc(e.signal,"options.signal"),t=hB(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new qs;for await(let i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new qs;t--<=0&&(yield i)}}).call(this)}function nQ(t,e=void 0){return e!=null&&yc(e,"options"),e?.signal!=null&&mc(e.signal,"options.signal"),t=hB(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new qs;for await(let i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new qs;if(t-- >0&&(yield i),t<=0)return}}).call(this)}bE.exports.streamReturningOperators={asIndexedPairs:UY(GY,"readable.asIndexedPairs will be removed in a future version."),drop:rQ,filter:vE,flatMap:tQ,map:R0,take:nQ,compose:JY};bE.exports.promiseReturningOperators={every:ZY,forEach:YY,reduce:QY,toArray:eQ,some:pB,find:XY}});var _E=v((KSe,yB)=>{"use strict";var{ArrayPrototypePop:iQ,Promise:sQ}=nr(),{isIterable:oQ,isNodeStream:aQ,isWebStream:uQ}=$s(),{pipelineImpl:cQ}=T0(),{finished:lQ}=Bo();wE();function dQ(...t){return new sQ((e,r)=>{let n,s,i=t[t.length-1];if(i&&typeof i=="object"&&!aQ(i)&&!oQ(i)&&!uQ(i)){let o=iQ(t);n=o.signal,s=o.end}cQ(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:s})})}yB.exports={finished:lQ,pipeline:dQ}});var wE=v((zSe,DB)=>{var{Buffer:fQ}=hi(),{ObjectDefineProperty:$o,ObjectKeys:bB,ReflectApply:_B}=nr(),{promisify:{custom:wB}}=cn(),{streamReturningOperators:gB,promiseReturningOperators:vB}=mB(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:EB}}=wn(),pQ=yE(),{setDefaultHighWaterMark:hQ,getDefaultHighWaterMark:mQ}=Fp(),{pipeline:SB}=T0(),{destroyer:yQ}=cc(),AB=Bo(),EE=_E(),qp=$s(),Kt=DB.exports=h0().Stream;Kt.isDestroyed=qp.isDestroyed;Kt.isDisturbed=qp.isDisturbed;Kt.isErrored=qp.isErrored;Kt.isReadable=qp.isReadable;Kt.isWritable=qp.isWritable;Kt.Readable=Bp();for(let t of bB(gB)){let r=function(...n){if(new.target)throw EB();return Kt.Readable.from(_B(e,this,n))};SE=r;let e=gB[t];$o(r,"name",{__proto__:null,value:e.name}),$o(r,"length",{__proto__:null,value:e.length}),$o(Kt.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var SE;for(let t of bB(vB)){let r=function(...s){if(new.target)throw EB();return _B(e,this,s)};SE=r;let e=vB[t];$o(r,"name",{__proto__:null,value:e.name}),$o(r,"length",{__proto__:null,value:e.length}),$o(Kt.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var SE;Kt.Writable=C0();Kt.Duplex=Ms();Kt.Transform=nE();Kt.PassThrough=sE();Kt.pipeline=SB;var{addAbortSignal:gQ}=Op();Kt.addAbortSignal=gQ;Kt.finished=AB;Kt.destroy=yQ;Kt.compose=pQ;Kt.setDefaultHighWaterMark=hQ;Kt.getDefaultHighWaterMark=mQ;$o(Kt,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return EE}});$o(SB,wB,{__proto__:null,enumerable:!0,get(){return EE.pipeline}});$o(AB,wB,{__proto__:null,enumerable:!0,get(){return EE.finished}});Kt.Stream=Kt;Kt._isUint8Array=function(e){return e instanceof Uint8Array};Kt._uint8ArrayToBuffer=function(e){return fQ.from(e.buffer,e.byteOffset,e.byteLength)}});var AE=v((HSe,vr)=>{"use strict";var Pr=wE(),vQ=_E(),bQ=Pr.Readable.destroy;vr.exports=Pr.Readable;vr.exports._uint8ArrayToBuffer=Pr._uint8ArrayToBuffer;vr.exports._isUint8Array=Pr._isUint8Array;vr.exports.isDisturbed=Pr.isDisturbed;vr.exports.isErrored=Pr.isErrored;vr.exports.isReadable=Pr.isReadable;vr.exports.Readable=Pr.Readable;vr.exports.Writable=Pr.Writable;vr.exports.Duplex=Pr.Duplex;vr.exports.Transform=Pr.Transform;vr.exports.PassThrough=Pr.PassThrough;vr.exports.addAbortSignal=Pr.addAbortSignal;vr.exports.finished=Pr.finished;vr.exports.destroy=Pr.destroy;vr.exports.destroy=bQ;vr.exports.pipeline=Pr.pipeline;vr.exports.compose=Pr.compose;Object.defineProperty(Pr,"promises",{configurable:!0,enumerable:!0,get(){return vQ}});vr.exports.Stream=Pr.Stream;vr.exports.default=vr.exports});var z3=v((xg,K3)=>{(function(t,e){typeof xg=="object"&&typeof K3<"u"?e(xg):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(xg,function(t){"use strict";function e(){for(var B=arguments.length,O=Array(B),$=0;$<B;$++)O[$]=arguments[$];if(O.length>1){O[0]=O[0].slice(0,-1);for(var K=O.length-1,z=1;z<K;++z)O[z]=O[z].slice(1,-1);return O[K]=O[K].slice(1),O.join("")}else return O[0]}function r(B){return"(?:"+B+")"}function n(B){return B===void 0?"undefined":B===null?"null":Object.prototype.toString.call(B).split(" ").pop().split("]").shift().toLowerCase()}function s(B){return B.toUpperCase()}function i(B){return B!=null?B instanceof Array?B:typeof B.length!="number"||B.split||B.setInterval||B.call?[B]:Array.prototype.slice.call(B):[]}function o(B,O){var $=B;if(O)for(var K in O)$[K]=O[K];return $}function a(B){var O="[A-Za-z]",$="[\\x0D]",K="[0-9]",z="[\\x22]",ce=e(K,"[A-Fa-f]"),We="[\\x0A]",Et="[\\x20]",Bt=r(r("%[EFef]"+ce+"%"+ce+ce+"%"+ce+ce)+"|"+r("%[89A-Fa-f]"+ce+"%"+ce+ce)+"|"+r("%"+ce+ce)),wr="[\\:\\/\\?\\#\\[\\]\\@]",vt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",tr=e(wr,vt),Er=B?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Xt=B?"[\\uE000-\\uF8FF]":"[]",Dt=e(O,K,"[\\-\\.\\_\\~]",Er),rr=r(O+e(O,K,"[\\+\\-\\.]")+"*"),jt=r(r(Bt+"|"+e(Dt,vt,"[\\:]"))+"*"),$u=r(r("25[0-5]")+"|"+r("2[0-4]"+K)+"|"+r("1"+K+K)+"|"+r("[1-9]"+K)+"|"+K),Wn=r(r("25[0-5]")+"|"+r("2[0-4]"+K)+"|"+r("1"+K+K)+"|"+r("0?[1-9]"+K)+"|0?0?"+K),di=r(Wn+"\\."+Wn+"\\."+Wn+"\\."+Wn),Lt=r(ce+"{1,4}"),Jn=r(r(Lt+"\\:"+Lt)+"|"+di),fi=r(r(Lt+"\\:")+"{6}"+Jn),Ds=r("\\:\\:"+r(Lt+"\\:")+"{5}"+Jn),ju=r(r(Lt)+"?\\:\\:"+r(Lt+"\\:")+"{4}"+Jn),bo=r(r(r(Lt+"\\:")+"{0,1}"+Lt)+"?\\:\\:"+r(Lt+"\\:")+"{3}"+Jn),Yf=r(r(r(Lt+"\\:")+"{0,2}"+Lt)+"?\\:\\:"+r(Lt+"\\:")+"{2}"+Jn),wy=r(r(r(Lt+"\\:")+"{0,3}"+Lt)+"?\\:\\:"+Lt+"\\:"+Jn),Ey=r(r(r(Lt+"\\:")+"{0,4}"+Lt)+"?\\:\\:"+Jn),Sl=r(r(r(Lt+"\\:")+"{0,5}"+Lt)+"?\\:\\:"+Lt),Al=r(r(r(Lt+"\\:")+"{0,6}"+Lt)+"?\\:\\:"),_o=r([fi,Ds,ju,bo,Yf,wy,Ey,Sl,Al].join("|")),Dl=r(r(Dt+"|"+Bt)+"+"),z_=r(_o+"\\%25"+Dl),Nu=r(_o+r("\\%25|\\%(?!"+ce+"{2})")+Dl),xz=r("[vV]"+ce+"+\\."+e(Dt,vt,"[\\:]")+"+"),Cz=r("\\["+r(Nu+"|"+_o+"|"+xz)+"\\]"),CO=r(r(Bt+"|"+e(Dt,vt))+"*"),Qf=r(Cz+"|"+di+"(?!"+CO+")|"+CO),ep=r(K+"*"),PO=r(r(jt+"@")+"?"+Qf+r("\\:"+ep)+"?"),tp=r(Bt+"|"+e(Dt,vt,"[\\:\\@]")),Pz=r(tp+"*"),OO=r(tp+"+"),Oz=r(r(Bt+"|"+e(Dt,vt,"[\\@]"))+"+"),wo=r(r("\\/"+Pz)+"*"),xl=r("\\/"+r(OO+wo)+"?"),H_=r(Oz+wo),Sy=r(OO+wo),Cl="(?!"+tp+")",Fwe=r(wo+"|"+xl+"|"+H_+"|"+Sy+"|"+Cl),Pl=r(r(tp+"|"+e("[\\/\\?]",Xt))+"*"),rp=r(r(tp+"|[\\/\\?]")+"*"),FO=r(r("\\/\\/"+PO+wo)+"|"+xl+"|"+Sy+"|"+Cl),Fz=r(rr+"\\:"+FO+r("\\?"+Pl)+"?"+r("\\#"+rp)+"?"),Tz=r(r("\\/\\/"+PO+wo)+"|"+xl+"|"+H_+"|"+Cl),Iz=r(Tz+r("\\?"+Pl)+"?"+r("\\#"+rp)+"?"),Twe=r(Fz+"|"+Iz),Iwe=r(rr+"\\:"+FO+r("\\?"+Pl)+"?"),Bwe="^("+rr+")\\:"+r(r("\\/\\/("+r("("+jt+")@")+"?("+Qf+")"+r("\\:("+ep+")")+"?)")+"?("+wo+"|"+xl+"|"+Sy+"|"+Cl+")")+r("\\?("+Pl+")")+"?"+r("\\#("+rp+")")+"?$",kwe="^(){0}"+r(r("\\/\\/("+r("("+jt+")@")+"?("+Qf+")"+r("\\:("+ep+")")+"?)")+"?("+wo+"|"+xl+"|"+H_+"|"+Cl+")")+r("\\?("+Pl+")")+"?"+r("\\#("+rp+")")+"?$",Rwe="^("+rr+")\\:"+r(r("\\/\\/("+r("("+jt+")@")+"?("+Qf+")"+r("\\:("+ep+")")+"?)")+"?("+wo+"|"+xl+"|"+Sy+"|"+Cl+")")+r("\\?("+Pl+")")+"?$",$we="^"+r("\\#("+rp+")")+"?$",jwe="^"+r("("+jt+")@")+"?("+Qf+")"+r("\\:("+ep+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",O,K,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Dt,vt),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Dt,vt),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Dt,vt),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Dt,vt),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Dt,vt,"[\\:\\@\\/\\?]",Xt),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Dt,vt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Dt,vt),"g"),UNRESERVED:new RegExp(Dt,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Dt,tr),"g"),PCT_ENCODED:new RegExp(Bt,"g"),IPV4ADDRESS:new RegExp("^("+di+")$"),IPV6ADDRESS:new RegExp("^\\[?("+_o+")"+r(r("\\%25|\\%(?!"+ce+"{2})")+"("+Dl+")")+"?\\]?$")}}var c=a(!1),u=a(!0),l=function(){function B(O,$){var K=[],z=!0,ce=!1,We=void 0;try{for(var Et=O[Symbol.iterator](),Bt;!(z=(Bt=Et.next()).done)&&(K.push(Bt.value),!($&&K.length===$));z=!0);}catch(wr){ce=!0,We=wr}finally{try{!z&&Et.return&&Et.return()}finally{if(ce)throw We}}return K}return function(O,$){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return B(O,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(B){if(Array.isArray(B)){for(var O=0,$=Array(B.length);O<B.length;O++)$[O]=B[O];return $}else return Array.from(B)},p=2147483647,f=36,h=1,y=26,g=38,A=700,x=72,b=128,w="-",D=/^xn--/,F=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=f-h,T=Math.floor,j=String.fromCharCode;function L(B){throw new RangeError(I[B])}function Q(B,O){for(var $=[],K=B.length;K--;)$[K]=O(B[K]);return $}function ne(B,O){var $=B.split("@"),K="";$.length>1&&(K=$[0]+"@",B=$[1]),B=B.replace(C,".");var z=B.split("."),ce=Q(z,O).join(".");return K+ce}function W(B){for(var O=[],$=0,K=B.length;$<K;){var z=B.charCodeAt($++);if(z>=55296&&z<=56319&&$<K){var ce=B.charCodeAt($++);(ce&64512)==56320?O.push(((z&1023)<<10)+(ce&1023)+65536):(O.push(z),$--)}else O.push(z)}return O}var ee=function(O){return String.fromCodePoint.apply(String,d(O))},ue=function(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:f},U=function(O,$){return O+22+75*(O<26)-(($!=0)<<5)},q=function(O,$,K){var z=0;for(O=K?T(O/A):O>>1,O+=T(O/$);O>k*y>>1;z+=f)O=T(O/k);return T(z+(k+1)*O/(O+g))},N=function(O){var $=[],K=O.length,z=0,ce=b,We=x,Et=O.lastIndexOf(w);Et<0&&(Et=0);for(var Bt=0;Bt<Et;++Bt)O.charCodeAt(Bt)>=128&&L("not-basic"),$.push(O.charCodeAt(Bt));for(var wr=Et>0?Et+1:0;wr<K;){for(var vt=z,tr=1,Er=f;;Er+=f){wr>=K&&L("invalid-input");var Xt=ue(O.charCodeAt(wr++));(Xt>=f||Xt>T((p-z)/tr))&&L("overflow"),z+=Xt*tr;var Dt=Er<=We?h:Er>=We+y?y:Er-We;if(Xt<Dt)break;var rr=f-Dt;tr>T(p/rr)&&L("overflow"),tr*=rr}var jt=$.length+1;We=q(z-vt,jt,vt==0),T(z/jt)>p-ce&&L("overflow"),ce+=T(z/jt),z%=jt,$.splice(z++,0,ce)}return String.fromCodePoint.apply(String,$)},Y=function(O){var $=[];O=W(O);var K=O.length,z=b,ce=0,We=x,Et=!0,Bt=!1,wr=void 0;try{for(var vt=O[Symbol.iterator](),tr;!(Et=(tr=vt.next()).done);Et=!0){var Er=tr.value;Er<128&&$.push(j(Er))}}catch(Nu){Bt=!0,wr=Nu}finally{try{!Et&&vt.return&&vt.return()}finally{if(Bt)throw wr}}var Xt=$.length,Dt=Xt;for(Xt&&$.push(w);Dt<K;){var rr=p,jt=!0,$u=!1,Wn=void 0;try{for(var di=O[Symbol.iterator](),Lt;!(jt=(Lt=di.next()).done);jt=!0){var Jn=Lt.value;Jn>=z&&Jn<rr&&(rr=Jn)}}catch(Nu){$u=!0,Wn=Nu}finally{try{!jt&&di.return&&di.return()}finally{if($u)throw Wn}}var fi=Dt+1;rr-z>T((p-ce)/fi)&&L("overflow"),ce+=(rr-z)*fi,z=rr;var Ds=!0,ju=!1,bo=void 0;try{for(var Yf=O[Symbol.iterator](),wy;!(Ds=(wy=Yf.next()).done);Ds=!0){var Ey=wy.value;if(Ey<z&&++ce>p&&L("overflow"),Ey==z){for(var Sl=ce,Al=f;;Al+=f){var _o=Al<=We?h:Al>=We+y?y:Al-We;if(Sl<_o)break;var Dl=Sl-_o,z_=f-_o;$.push(j(U(_o+Dl%z_,0))),Sl=T(Dl/z_)}$.push(j(U(Sl,0))),We=q(ce,fi,Dt==Xt),ce=0,++Dt}}}catch(Nu){ju=!0,bo=Nu}finally{try{!Ds&&Yf.return&&Yf.return()}finally{if(ju)throw bo}}++ce,++z}return $.join("")},oe=function(O){return ne(O,function($){return D.test($)?N($.slice(4).toLowerCase()):$})},M=function(O){return ne(O,function($){return F.test($)?"xn--"+Y($):$})},V={version:"2.1.0",ucs2:{decode:W,encode:ee},decode:N,encode:Y,toASCII:M,toUnicode:oe},se={};function de(B){var O=B.charCodeAt(0),$=void 0;return O<16?$="%0"+O.toString(16).toUpperCase():O<128?$="%"+O.toString(16).toUpperCase():O<2048?$="%"+(O>>6|192).toString(16).toUpperCase()+"%"+(O&63|128).toString(16).toUpperCase():$="%"+(O>>12|224).toString(16).toUpperCase()+"%"+(O>>6&63|128).toString(16).toUpperCase()+"%"+(O&63|128).toString(16).toUpperCase(),$}function ye(B){for(var O="",$=0,K=B.length;$<K;){var z=parseInt(B.substr($+1,2),16);if(z<128)O+=String.fromCharCode(z),$+=3;else if(z>=194&&z<224){if(K-$>=6){var ce=parseInt(B.substr($+4,2),16);O+=String.fromCharCode((z&31)<<6|ce&63)}else O+=B.substr($,6);$+=6}else if(z>=224){if(K-$>=9){var We=parseInt(B.substr($+4,2),16),Et=parseInt(B.substr($+7,2),16);O+=String.fromCharCode((z&15)<<12|(We&63)<<6|Et&63)}else O+=B.substr($,9);$+=9}else O+=B.substr($,3),$+=3}return O}function we(B,O){function $(K){var z=ye(K);return z.match(O.UNRESERVED)?z:K}return B.scheme&&(B.scheme=String(B.scheme).replace(O.PCT_ENCODED,$).toLowerCase().replace(O.NOT_SCHEME,"")),B.userinfo!==void 0&&(B.userinfo=String(B.userinfo).replace(O.PCT_ENCODED,$).replace(O.NOT_USERINFO,de).replace(O.PCT_ENCODED,s)),B.host!==void 0&&(B.host=String(B.host).replace(O.PCT_ENCODED,$).toLowerCase().replace(O.NOT_HOST,de).replace(O.PCT_ENCODED,s)),B.path!==void 0&&(B.path=String(B.path).replace(O.PCT_ENCODED,$).replace(B.scheme?O.NOT_PATH:O.NOT_PATH_NOSCHEME,de).replace(O.PCT_ENCODED,s)),B.query!==void 0&&(B.query=String(B.query).replace(O.PCT_ENCODED,$).replace(O.NOT_QUERY,de).replace(O.PCT_ENCODED,s)),B.fragment!==void 0&&(B.fragment=String(B.fragment).replace(O.PCT_ENCODED,$).replace(O.NOT_FRAGMENT,de).replace(O.PCT_ENCODED,s)),B}function Oe(B){return B.replace(/^0*(.*)/,"$1")||"0"}function xe(B,O){var $=B.match(O.IPV4ADDRESS)||[],K=l($,2),z=K[1];return z?z.split(".").map(Oe).join("."):B}function Me(B,O){var $=B.match(O.IPV6ADDRESS)||[],K=l($,3),z=K[1],ce=K[2];if(z){for(var We=z.toLowerCase().split("::").reverse(),Et=l(We,2),Bt=Et[0],wr=Et[1],vt=wr?wr.split(":").map(Oe):[],tr=Bt.split(":").map(Oe),Er=O.IPV4ADDRESS.test(tr[tr.length-1]),Xt=Er?7:8,Dt=tr.length-Xt,rr=Array(Xt),jt=0;jt<Xt;++jt)rr[jt]=vt[jt]||tr[Dt+jt]||"";Er&&(rr[Xt-1]=xe(rr[Xt-1],O));var $u=rr.reduce(function(fi,Ds,ju){if(!Ds||Ds==="0"){var bo=fi[fi.length-1];bo&&bo.index+bo.length===ju?bo.length++:fi.push({index:ju,length:1})}return fi},[]),Wn=$u.sort(function(fi,Ds){return Ds.length-fi.length})[0],di=void 0;if(Wn&&Wn.length>1){var Lt=rr.slice(0,Wn.index),Jn=rr.slice(Wn.index+Wn.length);di=Lt.join(":")+"::"+Jn.join(":")}else di=rr.join(":");return ce&&(di+="%"+ce),di}else return B}var Re=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,_t="".match(/(){0}/)[1]===void 0;function pt(B){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$={},K=O.iri!==!1?u:c;O.reference==="suffix"&&(B=(O.scheme?O.scheme+":":"")+"//"+B);var z=B.match(Re);if(z){_t?($.scheme=z[1],$.userinfo=z[3],$.host=z[4],$.port=parseInt(z[5],10),$.path=z[6]||"",$.query=z[7],$.fragment=z[8],isNaN($.port)&&($.port=z[5])):($.scheme=z[1]||void 0,$.userinfo=B.indexOf("@")!==-1?z[3]:void 0,$.host=B.indexOf("//")!==-1?z[4]:void 0,$.port=parseInt(z[5],10),$.path=z[6]||"",$.query=B.indexOf("?")!==-1?z[7]:void 0,$.fragment=B.indexOf("#")!==-1?z[8]:void 0,isNaN($.port)&&($.port=B.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?z[4]:void 0)),$.host&&($.host=Me(xe($.host,K),K)),$.scheme===void 0&&$.userinfo===void 0&&$.host===void 0&&$.port===void 0&&!$.path&&$.query===void 0?$.reference="same-document":$.scheme===void 0?$.reference="relative":$.fragment===void 0?$.reference="absolute":$.reference="uri",O.reference&&O.reference!=="suffix"&&O.reference!==$.reference&&($.error=$.error||"URI is not a "+O.reference+" reference.");var ce=se[(O.scheme||$.scheme||"").toLowerCase()];if(!O.unicodeSupport&&(!ce||!ce.unicodeSupport)){if($.host&&(O.domainHost||ce&&ce.domainHost))try{$.host=V.toASCII($.host.replace(K.PCT_ENCODED,ye).toLowerCase())}catch(We){$.error=$.error||"Host's domain name can not be converted to ASCII via punycode: "+We}we($,c)}else we($,K);ce&&ce.parse&&ce.parse($,O)}else $.error=$.error||"URI can not be parsed.";return $}function on(B,O){var $=O.iri!==!1?u:c,K=[];return B.userinfo!==void 0&&(K.push(B.userinfo),K.push("@")),B.host!==void 0&&K.push(Me(xe(String(B.host),$),$).replace($.IPV6ADDRESS,function(z,ce,We){return"["+ce+(We?"%25"+We:"")+"]"})),(typeof B.port=="number"||typeof B.port=="string")&&(K.push(":"),K.push(String(B.port))),K.length?K.join(""):void 0}var hr=/^\.\.?\//,Es=/^\/\.(\/|$)/,Ki=/^\/\.\.(\/|$)/,vo=/^\/?(?:.|\n)*?(?=\/|$)/;function mr(B){for(var O=[];B.length;)if(B.match(hr))B=B.replace(hr,"");else if(B.match(Es))B=B.replace(Es,"/");else if(B.match(Ki))B=B.replace(Ki,"/"),O.pop();else if(B==="."||B==="..")B="";else{var $=B.match(vo);if($){var K=$[0];B=B.slice(K.length),O.push(K)}else throw new Error("Unexpected dot segment condition")}return O.join("")}function On(B){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=O.iri?u:c,K=[],z=se[(O.scheme||B.scheme||"").toLowerCase()];if(z&&z.serialize&&z.serialize(B,O),B.host&&!$.IPV6ADDRESS.test(B.host)){if(O.domainHost||z&&z.domainHost)try{B.host=O.iri?V.toUnicode(B.host):V.toASCII(B.host.replace($.PCT_ENCODED,ye).toLowerCase())}catch(Et){B.error=B.error||"Host's domain name can not be converted to "+(O.iri?"Unicode":"ASCII")+" via punycode: "+Et}}we(B,$),O.reference!=="suffix"&&B.scheme&&(K.push(B.scheme),K.push(":"));var ce=on(B,O);if(ce!==void 0&&(O.reference!=="suffix"&&K.push("//"),K.push(ce),B.path&&B.path.charAt(0)!=="/"&&K.push("/")),B.path!==void 0){var We=B.path;!O.absolutePath&&(!z||!z.absolutePath)&&(We=mr(We)),ce===void 0&&(We=We.replace(/^\/\//,"/%2F")),K.push(We)}return B.query!==void 0&&(K.push("?"),K.push(B.query)),B.fragment!==void 0&&(K.push("#"),K.push(B.fragment)),K.join("")}function Ea(B,O){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},K=arguments[3],z={};return K||(B=pt(On(B,$),$),O=pt(On(O,$),$)),$=$||{},!$.tolerant&&O.scheme?(z.scheme=O.scheme,z.userinfo=O.userinfo,z.host=O.host,z.port=O.port,z.path=mr(O.path||""),z.query=O.query):(O.userinfo!==void 0||O.host!==void 0||O.port!==void 0?(z.userinfo=O.userinfo,z.host=O.host,z.port=O.port,z.path=mr(O.path||""),z.query=O.query):(O.path?(O.path.charAt(0)==="/"?z.path=mr(O.path):((B.userinfo!==void 0||B.host!==void 0||B.port!==void 0)&&!B.path?z.path="/"+O.path:B.path?z.path=B.path.slice(0,B.path.lastIndexOf("/")+1)+O.path:z.path=O.path,z.path=mr(z.path)),z.query=O.query):(z.path=B.path,O.query!==void 0?z.query=O.query:z.query=B.query),z.userinfo=B.userinfo,z.host=B.host,z.port=B.port),z.scheme=B.scheme),z.fragment=O.fragment,z}function ht(B,O,$){var K=o({scheme:"null"},$);return On(Ea(pt(B,K),pt(O,K),K,!0),K)}function er(B,O){return typeof B=="string"?B=On(pt(B,O),O):n(B)==="object"&&(B=pt(On(B,O),O)),B}function Be(B,O,$){return typeof B=="string"?B=On(pt(B,$),$):n(B)==="object"&&(B=On(B,$)),typeof O=="string"?O=On(pt(O,$),$):n(O)==="object"&&(O=On(O,$)),B===O}function yr(B,O){return B&&B.toString().replace(!O||!O.iri?c.ESCAPE:u.ESCAPE,de)}function wt(B,O){return B&&B.toString().replace(!O||!O.iri?c.PCT_ENCODED:u.PCT_ENCODED,ye)}var Ss={scheme:"http",domainHost:!0,parse:function(O,$){return O.host||(O.error=O.error||"HTTP URIs must have a host."),O},serialize:function(O,$){var K=String(O.scheme).toLowerCase()==="https";return(O.port===(K?443:80)||O.port==="")&&(O.port=void 0),O.path||(O.path="/"),O}},ku={scheme:"https",domainHost:Ss.domainHost,parse:Ss.parse,serialize:Ss.serialize};function Fn(B){return typeof B.secure=="boolean"?B.secure:String(B.scheme).toLowerCase()==="wss"}var As={scheme:"ws",domainHost:!0,parse:function(O,$){var K=O;return K.secure=Fn(K),K.resourceName=(K.path||"/")+(K.query?"?"+K.query:""),K.path=void 0,K.query=void 0,K},serialize:function(O,$){if((O.port===(Fn(O)?443:80)||O.port==="")&&(O.port=void 0),typeof O.secure=="boolean"&&(O.scheme=O.secure?"wss":"ws",O.secure=void 0),O.resourceName){var K=O.resourceName.split("?"),z=l(K,2),ce=z[0],We=z[1];O.path=ce&&ce!=="/"?ce:void 0,O.query=We,O.resourceName=void 0}return O.fragment=void 0,O}},zi={scheme:"wss",domainHost:As.domainHost,parse:As.parse,serialize:As.serialize},cr={},vy=!0,by="[A-Za-z0-9\\-\\.\\_\\~"+(vy?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Pt="[0-9A-Fa-f]",bn=r(r("%[EFef]"+Pt+"%"+Pt+Pt+"%"+Pt+Pt)+"|"+r("%[89A-Fa-f]"+Pt+"%"+Pt+Pt)+"|"+r("%"+Pt+Pt)),Ru="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",El="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",_y=e(El,'[\\"\\\\]'),V_="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",K_=new RegExp(by,"g"),m=new RegExp(bn,"g"),E=new RegExp(e("[^]",Ru,"[\\.]",'[\\"]',_y),"g"),_=new RegExp(e("[^]",by,V_),"g"),S=_;function P(B){var O=ye(B);return O.match(K_)?O:B}var H={scheme:"mailto",parse:function(O,$){var K=O,z=K.to=K.path?K.path.split(","):[];if(K.path=void 0,K.query){for(var ce=!1,We={},Et=K.query.split("&"),Bt=0,wr=Et.length;Bt<wr;++Bt){var vt=Et[Bt].split("=");switch(vt[0]){case"to":for(var tr=vt[1].split(","),Er=0,Xt=tr.length;Er<Xt;++Er)z.push(tr[Er]);break;case"subject":K.subject=wt(vt[1],$);break;case"body":K.body=wt(vt[1],$);break;default:ce=!0,We[wt(vt[0],$)]=wt(vt[1],$);break}}ce&&(K.headers=We)}K.query=void 0;for(var Dt=0,rr=z.length;Dt<rr;++Dt){var jt=z[Dt].split("@");if(jt[0]=wt(jt[0]),$.unicodeSupport)jt[1]=wt(jt[1],$).toLowerCase();else try{jt[1]=V.toASCII(wt(jt[1],$).toLowerCase())}catch($u){K.error=K.error||"Email address's domain name can not be converted to ASCII via punycode: "+$u}z[Dt]=jt.join("@")}return K},serialize:function(O,$){var K=O,z=i(O.to);if(z){for(var ce=0,We=z.length;ce<We;++ce){var Et=String(z[ce]),Bt=Et.lastIndexOf("@"),wr=Et.slice(0,Bt).replace(m,P).replace(m,s).replace(E,de),vt=Et.slice(Bt+1);try{vt=$.iri?V.toUnicode(vt):V.toASCII(wt(vt,$).toLowerCase())}catch(Dt){K.error=K.error||"Email address's domain name can not be converted to "+($.iri?"Unicode":"ASCII")+" via punycode: "+Dt}z[ce]=wr+"@"+vt}K.path=z.join(",")}var tr=O.headers=O.headers||{};O.subject&&(tr.subject=O.subject),O.body&&(tr.body=O.body);var Er=[];for(var Xt in tr)tr[Xt]!==cr[Xt]&&Er.push(Xt.replace(m,P).replace(m,s).replace(_,de)+"="+tr[Xt].replace(m,P).replace(m,s).replace(S,de));return Er.length&&(K.query=Er.join("&")),K}},X=/^([^\:]+)\:(.*)/,te={scheme:"urn",parse:function(O,$){var K=O.path&&O.path.match(X),z=O;if(K){var ce=$.scheme||z.scheme||"urn",We=K[1].toLowerCase(),Et=K[2],Bt=ce+":"+($.nid||We),wr=se[Bt];z.nid=We,z.nss=Et,z.path=void 0,wr&&(z=wr.parse(z,$))}else z.error=z.error||"URN can not be parsed.";return z},serialize:function(O,$){var K=$.scheme||O.scheme||"urn",z=O.nid,ce=K+":"+($.nid||z),We=se[ce];We&&(O=We.serialize(O,$));var Et=O,Bt=O.nss;return Et.path=(z||$.nid)+":"+Bt,Et}},me=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ot={scheme:"urn:uuid",parse:function(O,$){var K=O;return K.uuid=K.nss,K.nss=void 0,!$.tolerant&&(!K.uuid||!K.uuid.match(me))&&(K.error=K.error||"UUID is not valid."),K},serialize:function(O,$){var K=O;return K.nss=(O.uuid||"").toLowerCase(),K}};se[Ss.scheme]=Ss,se[ku.scheme]=ku,se[As.scheme]=As,se[zi.scheme]=zi,se[H.scheme]=H,se[te.scheme]=te,se[ot.scheme]=ot,t.SCHEMES=se,t.pctEncChar=de,t.pctDecChars=ye,t.parse=pt,t.removeDotSegments=mr,t.serialize=On,t.resolveComponents=Ea,t.resolve=ht,t.normalize=er,t.equal=Be,t.escapeComponent=yr,t.unescapeComponent=wt,Object.defineProperty(t,"__esModule",{value:!0})})});var W3=v((zCe,H3)=>{"use strict";H3.exports=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((s,i,o)=>`${s}${o===0?"":","}${t(i===void 0||typeof i=="symbol"?null:i)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,s)=>{if(e[s]===void 0||typeof e[s]=="symbol")return n;let i=n.length===0?"":",";return`${n}${i}${t(s)}:${t(e[s])}`},"")}}`}});var o5=v((COe,s5)=>{var Pd=1e3,Od=Pd*60,Fd=Od*60,Dc=Fd*24,nre=Dc*7,ire=Dc*365.25;s5.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return sre(t);if(r==="number"&&isFinite(t))return e.long?are(t):ore(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function sre(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ire;case"weeks":case"week":case"w":return r*nre;case"days":case"day":case"d":return r*Dc;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Fd;case"minutes":case"minute":case"mins":case"min":case"m":return r*Od;case"seconds":case"second":case"secs":case"sec":case"s":return r*Pd;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function ore(t){var e=Math.abs(t);return e>=Dc?Math.round(t/Dc)+"d":e>=Fd?Math.round(t/Fd)+"h":e>=Od?Math.round(t/Od)+"m":e>=Pd?Math.round(t/Pd)+"s":t+"ms"}function are(t){var e=Math.abs(t);return e>=Dc?Tg(t,e,Dc,"day"):e>=Fd?Tg(t,e,Fd,"hour"):e>=Od?Tg(t,e,Od,"minute"):e>=Pd?Tg(t,e,Pd,"second"):t+" ms"}function Tg(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var Br=v(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.hasErrors=Jo.Checked=Jo.Status=void 0;Jo.Status={INFO:"info",WARN:"warn",ERROR:"error"};var dre=class{constructor(t,e,r){this.tag=t,this.status=e,this.message=r}};Jo.Checked=dre;var fre=t=>{function e(r){return r.status===Jo.Status.ERROR}return t.filter(r=>e(r)).length>0};Jo.hasErrors=fre});var d5=v(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.parseDid=Qa.IProofType=Qa.IProofPurpose=void 0;var c5;(function(t){t.verificationMethod="verificationMethod",t.assertionMethod="assertionMethod",t.authentication="authentication",t.keyAgreement="keyAgreement",t.contractAgreement="contactAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(c5||(Qa.IProofPurpose=c5={}));var l5;(function(t){t.Ed25519Signature2018="Ed25519Signature2018",t.Ed25519Signature2020="Ed25519Signature2020",t.EcdsaSecp256k1Signature2019="EcdsaSecp256k1Signature2019",t.EcdsaSecp256k1RecoverySignature2020="EcdsaSecp256k1RecoverySignature2020",t.JsonWebSignature2020="JsonWebSignature2020",t.RsaSignature2018="RsaSignature2018",t.GpgSignature2020="GpgSignature2020",t.JcsEd25519Signature2020="JcsEd25519Signature2020",t.BbsBlsSignatureProof2020="BbsBlsSignatureProof2020",t.BbsBlsBoundSignatureProof2020="BbsBlsBoundSignatureProof2020",t.JwtProof2020="JwtProof2020"})(l5||(Qa.IProofType=l5={}));var pre=t=>{let e=hre(t);if(e===null)throw new Error("invalid did");return e};Qa.parseDid=pre;var hre=t=>{let r="(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))",n="([a-z0-9]+)",s=`((?:${r}*:)*(${r}+))`,i="[a-zA-Z0-9_.:%-]",a=`((${`;${i}+=${i}*`})*)`,c="(/[^#?]*)?",u="([?][^#]*)?",l="(#.*)?",d=new RegExp(`^did:${n}:${s}${a}${c}${u}${l}$`);if(t===""||!t)return null;let p=t.match(d);if(p){let f={did:`did:${p[1]}:${p[2]}`,method:p[1],id:p[2],didUrl:t};if(p[4]){let h=p[4].slice(1).split(";");f.params={};for(let y of h){let g=y.split("=");f.params[g[0]]=g[1]}}return p[6]&&(f.path=p[6]),p[7]&&(f.query=p[7].slice(1)),p[8]&&(f.fragment=p[8].slice(1)),f}return null}});var p5=v(f5=>{"use strict";Object.defineProperty(f5,"__esModule",{value:!0})});var y5=v(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});Td.DocumentFormat=Td.OriginalType=void 0;var h5;(function(t){t.JSONLD="json-ld",t.JWT_ENCODED="jwt-encoded",t.JWT_DECODED="jwt-decoded",t.SD_JWT_VC_ENCODED="sd-jwt-vc-encoded",t.SD_JWT_VC_DECODED="sd-jwt-vc-decoded"})(h5||(Td.OriginalType=h5={}));var m5;(function(t){t[t.JWT=0]="JWT",t[t.JSONLD=1]="JSONLD",t[t.SD_JWT_VC=2]="SD_JWT_VC",t[t.EIP712=3]="EIP712"})(m5||(Td.DocumentFormat=m5={}))});var v5=v(g5=>{"use strict";Object.defineProperty(g5,"__esModule",{value:!0})});var b5=v((IS,BS)=>{(function(t,e){typeof IS=="object"&&typeof BS<"u"?BS.exports=e():typeof define=="function"&&define.amd?define(e):function(){var r=t.Base64,n=e();n.noConflict=function(){return t.Base64=r,n},t.Meteor&&(Base64=n),t.Base64=n}()})(typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:IS,function(){"use strict";var t="3.7.7",e=t,r=typeof Buffer=="function",n=typeof TextDecoder=="function"?new TextDecoder:void 0,s=typeof TextEncoder=="function"?new TextEncoder:void 0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=Array.prototype.slice.call(i),a=function(M){var V={};return M.forEach(function(se,de){return V[se]=de}),V}(o),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,u=String.fromCharCode.bind(String),l=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(M){return new Uint8Array(Array.prototype.slice.call(M,0))},d=function(M){return M.replace(/=/g,"").replace(/[+\/]/g,function(V){return V=="+"?"-":"_"})},p=function(M){return M.replace(/[^A-Za-z0-9\+\/]/g,"")},f=function(M){for(var V,se,de,ye,we="",Oe=M.length%3,xe=0;xe<M.length;){if((se=M.charCodeAt(xe++))>255||(de=M.charCodeAt(xe++))>255||(ye=M.charCodeAt(xe++))>255)throw new TypeError("invalid character found");V=se<<16|de<<8|ye,we+=o[V>>18&63]+o[V>>12&63]+o[V>>6&63]+o[V&63]}return Oe?we.slice(0,Oe-3)+"===".substring(Oe):we},h=typeof btoa=="function"?function(M){return btoa(M)}:r?function(M){return Buffer.from(M,"binary").toString("base64")}:f,y=r?function(M){return Buffer.from(M).toString("base64")}:function(M){for(var V=4096,se=[],de=0,ye=M.length;de<ye;de+=V)se.push(u.apply(null,M.subarray(de,de+V)));return h(se.join(""))},g=function(M,V){return V===void 0&&(V=!1),V?d(y(M)):y(M)},A=function(M){if(M.length<2){var V=M.charCodeAt(0);return V<128?M:V<2048?u(192|V>>>6)+u(128|V&63):u(224|V>>>12&15)+u(128|V>>>6&63)+u(128|V&63)}else{var V=65536+(M.charCodeAt(0)-55296)*1024+(M.charCodeAt(1)-56320);return u(240|V>>>18&7)+u(128|V>>>12&63)+u(128|V>>>6&63)+u(128|V&63)}},x=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,b=function(M){return M.replace(x,A)},w=r?function(M){return Buffer.from(M,"utf8").toString("base64")}:s?function(M){return y(s.encode(M))}:function(M){return h(b(M))},D=function(M,V){return V===void 0&&(V=!1),V?d(w(M)):w(M)},F=function(M){return D(M,!0)},C=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,I=function(M){switch(M.length){case 4:var V=(7&M.charCodeAt(0))<<18|(63&M.charCodeAt(1))<<12|(63&M.charCodeAt(2))<<6|63&M.charCodeAt(3),se=V-65536;return u((se>>>10)+55296)+u((se&1023)+56320);case 3:return u((15&M.charCodeAt(0))<<12|(63&M.charCodeAt(1))<<6|63&M.charCodeAt(2));default:return u((31&M.charCodeAt(0))<<6|63&M.charCodeAt(1))}},k=function(M){return M.replace(C,I)},T=function(M){if(M=M.replace(/\s+/g,""),!c.test(M))throw new TypeError("malformed base64.");M+="==".slice(2-(M.length&3));for(var V,se="",de,ye,we=0;we<M.length;)V=a[M.charAt(we++)]<<18|a[M.charAt(we++)]<<12|(de=a[M.charAt(we++)])<<6|(ye=a[M.charAt(we++)]),se+=de===64?u(V>>16&255):ye===64?u(V>>16&255,V>>8&255):u(V>>16&255,V>>8&255,V&255);return se},j=typeof atob=="function"?function(M){return atob(p(M))}:r?function(M){return Buffer.from(M,"base64").toString("binary")}:T,L=r?function(M){return l(Buffer.from(M,"base64"))}:function(M){return l(j(M).split("").map(function(V){return V.charCodeAt(0)}))},Q=function(M){return L(W(M))},ne=r?function(M){return Buffer.from(M,"base64").toString("utf8")}:n?function(M){return n.decode(L(M))}:function(M){return k(j(M))},W=function(M){return p(M.replace(/[-_]/g,function(V){return V=="-"?"+":"/"}))},ee=function(M){return ne(W(M))},ue=function(M){if(typeof M!="string")return!1;var V=M.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(V)||!/[^\s0-9a-zA-Z\-_]/.test(V)},U=function(M){return{value:M,enumerable:!1,writable:!0,configurable:!0}},q=function(){var M=function(V,se){return Object.defineProperty(String.prototype,V,U(se))};M("fromBase64",function(){return ee(this)}),M("toBase64",function(V){return D(this,V)}),M("toBase64URI",function(){return D(this,!0)}),M("toBase64URL",function(){return D(this,!0)}),M("toUint8Array",function(){return Q(this)})},N=function(){var M=function(V,se){return Object.defineProperty(Uint8Array.prototype,V,U(se))};M("toBase64",function(V){return g(this,V)}),M("toBase64URI",function(){return g(this,!0)}),M("toBase64URL",function(){return g(this,!0)})},Y=function(){q(),N()},oe={version:t,VERSION:e,atob:j,atobPolyfill:T,btoa:h,btoaPolyfill:f,fromBase64:ee,toBase64:D,encode:D,encodeURI:F,encodeURL:F,utob:b,btou:k,decode:ee,isValid:ue,fromUint8Array:g,toUint8Array:Q,extendString:q,extendUint8Array:N,extendBuiltins:Y};return oe.Base64={},Object.keys(oe).forEach(function(M){return oe.Base64[M]=oe[M]}),oe})});var jS=v((oFe,D5)=>{"use strict";var RS=Object.defineProperty,mre=Object.getOwnPropertyDescriptor,yre=Object.getOwnPropertyNames,gre=Object.prototype.hasOwnProperty,vre=(t,e)=>{for(var r in e)RS(t,r,{get:e[r],enumerable:!0})},bre=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of yre(e))!gre.call(t,s)&&s!==r&&RS(t,s,{get:()=>e[s],enumerable:!(n=mre(e,s))||n.enumerable});return t},_re=t=>bre(RS({},"__esModule",{value:!0}),t),_5=(t,e,r)=>new Promise((n,s)=>{var i=c=>{try{a(r.next(c))}catch(u){s(u)}},o=c=>{try{a(r.throw(c))}catch(u){s(u)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,o);a((r=r.apply(t,e)).next())}),w5={};vre(w5,{Disclosure:()=>wre,SDJWTException:()=>S5,base64urlDecode:()=>kS,base64urlEncode:()=>E5,uint8ArrayToBase64Url:()=>_h});D5.exports=_re(w5);var $S=b5(),E5=$S.Base64.encodeURI,kS=$S.Base64.decode,_h=t=>$S.Base64.fromUint8Array(t,!0),S5=class A5 extends Error{constructor(e,r){super(e),Object.setPrototypeOf(this,A5.prototype),this.name="SDJWTException",this.details=r}getFullMessage(){return`${this.name}: ${this.message} ${this.details?`- ${JSON.stringify(this.details)}`:""}`}},wre=class Bg{constructor(e,r){if(this._digest=r?.digest,this._encoded=r?.encoded,e.length===2){this.salt=e[0],this.value=e[1];return}if(e.length===3){this.salt=e[0],this.key=e[1],this.value=e[2];return}throw new S5("Invalid disclosure data")}static fromEncode(e,r){return _5(this,null,function*(){let{hasher:n,alg:s}=r,i=yield n(e,s),o=_h(i),a=JSON.parse(kS(e));return Bg.fromArray(a,{digest:o,encoded:e})})}static fromEncodeSync(e,r){let{hasher:n,alg:s}=r,i=n(e,s),o=_h(i),a=JSON.parse(kS(e));return Bg.fromArray(a,{digest:o,encoded:e})}static fromArray(e,r){return new Bg(e,r)}encode(){return this._encoded||(this._encoded=E5(JSON.stringify(this.decode()))),this._encoded}decode(){return this.key?[this.salt,this.key,this.value]:[this.salt,this.value]}digest(e){return _5(this,null,function*(){let{hasher:r,alg:n}=e;if(!this._digest){let s=yield r(this.encode(),n);this._digest=_h(s)}return this._digest})}digestSync(e){let{hasher:r,alg:n}=e;if(!this._digest){let s=r(this.encode(),n);this._digest=_h(s)}return this._digest}}});var MS=v((aFe,C5)=>{"use strict";var NS=Object.defineProperty,Ere=Object.getOwnPropertyDescriptor,Sre=Object.getOwnPropertyNames,Are=Object.prototype.hasOwnProperty,Dre=(t,e)=>{for(var r in e)NS(t,r,{get:e[r],enumerable:!0})},xre=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Sre(e))!Are.call(t,s)&&s!==r&&NS(t,s,{get:()=>e[s],enumerable:!(n=Ere(e,s))||n.enumerable});return t},Cre=t=>xre(NS({},"__esModule",{value:!0}),t),x5={};Dre(x5,{KB_JWT_TYP:()=>Ire,SD_DECOY:()=>Tre,SD_DIGEST:()=>Fre,SD_LIST_KEY:()=>Ore,SD_SEPARATOR:()=>Pre});C5.exports=Cre(x5);var Pre="~",Ore="...",Fre="_sd",Tre="_sd_decoy",Ire="kb+jwt"});var Rg=v((uFe,j5)=>{"use strict";var qS=Object.defineProperty,Bre=Object.getOwnPropertyDescriptor,kre=Object.getOwnPropertyNames,P5=Object.getOwnPropertySymbols,O5=Object.prototype.hasOwnProperty,Rre=Object.prototype.propertyIsEnumerable,F5=(t,e)=>{var r={};for(var n in t)O5.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&P5)for(var n of P5(t))e.indexOf(n)<0&&Rre.call(t,n)&&(r[n]=t[n]);return r},$re=(t,e)=>{for(var r in e)qS(t,r,{get:e[r],enumerable:!0})},jre=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of kre(e))!O5.call(t,s)&&s!==r&&qS(t,s,{get:()=>e[s],enumerable:!(n=Bre(e,s))||n.enumerable});return t},Nre=t=>jre(qS({},"__esModule",{value:!0}),t),kg=(t,e,r)=>new Promise((n,s)=>{var i=c=>{try{a(r.next(c))}catch(u){s(u)}},o=c=>{try{a(r.throw(c))}catch(u){s(u)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,o);a((r=r.apply(t,e)).next())}),T5={};$re(T5,{createHashMapping:()=>B5,createHashMappingSync:()=>k5,decodeJwt:()=>Eh,decodeSdJwt:()=>qre,decodeSdJwtSync:()=>Lre,getClaims:()=>Ure,getClaimsSync:()=>Vre,getSDAlgAndPayload:()=>Sh,splitSdJwt:()=>Mre,unpack:()=>R5,unpackArray:()=>I5,unpackObj:()=>xc,unpackSync:()=>$5});j5.exports=Nre(T5);var wh=jS(),Id=MS(),Eh=t=>{let{0:e,1:r,2:n,length:s}=t.split(".");if(s!==3)throw new wh.SDJWTException("Invalid JWT as input");return{header:JSON.parse((0,wh.base64urlDecode)(e)),payload:JSON.parse((0,wh.base64urlDecode)(r)),signature:n}},Mre=t=>{let[e,...r]=t.split(Id.SD_SEPARATOR);if(r.length===0)return{jwt:e,disclosures:[]};let n=r.pop();return{jwt:e,disclosures:r,kbJwt:n||void 0}},qre=(t,e)=>kg(void 0,null,function*(){let[r,...n]=t.split(Id.SD_SEPARATOR),s=Eh(r);if(n.length===0)return{jwt:s,disclosures:[]};let i=n.pop(),o=i?Eh(i):void 0,{_sd_alg:a}=Sh(s.payload),c=yield Promise.all(n.map(u=>wh.Disclosure.fromEncode(u,{alg:a,hasher:e})));return{jwt:s,disclosures:c,kbJwt:o}}),Lre=(t,e)=>{let[r,...n]=t.split(Id.SD_SEPARATOR),s=Eh(r);if(n.length===0)return{jwt:s,disclosures:[]};let i=n.pop(),o=i?Eh(i):void 0,{_sd_alg:a}=Sh(s.payload),c=n.map(u=>wh.Disclosure.fromEncodeSync(u,{alg:a,hasher:e}));return{jwt:s,disclosures:c,kbJwt:o}},Ure=(t,e,r)=>kg(void 0,null,function*(){let{unpackedObj:n}=yield R5(t,e,r);return n}),Vre=(t,e,r)=>{let{unpackedObj:n}=$5(t,e,r);return n},I5=(t,e,r="")=>{let n={},s=[];return t.forEach((i,o)=>{if(typeof i=="object"&&i!==null){let a=i[Id.SD_LIST_KEY];if(a){let c=e[a];if(c){let u=r?`${r}.${o}`:`${o}`;n[u]=a;let{unpackedObj:l,disclosureKeymap:d}=xc(c.value,e,u);s.push(l),Object.assign(n,d)}}else{let c=r?`${r}.${o}`:`${o}`,{unpackedObj:u,disclosureKeymap:l}=xc(i,e,c);s.push(u),Object.assign(n,l)}}else s.push(i)}),{unpackedObj:s,disclosureKeymap:n}},xc=(t,e,r="")=>{let n={};if(typeof t=="object"&&t!==null){if(Array.isArray(t))return I5(t,e,r);for(let u in t)if(u!==Id.SD_DIGEST&&u!==Id.SD_LIST_KEY&&typeof t[u]=="object"){let l=r?`${r}.${u}`:u,{unpackedObj:d,disclosureKeymap:p}=xc(t[u],e,l);t[u]=d,Object.assign(n,p)}let s=t,{_sd:i}=s,o=F5(s,["_sd"]),a={};if(i)for(let u of i){let l=e[u];if(l?.key){let d=r?`${r}.${l.key}`:l.key;n[d]=u;let{unpackedObj:p,disclosureKeymap:f}=xc(l.value,e,d);a[l.key]=p,Object.assign(n,f)}}return{unpackedObj:Object.assign(o,a),disclosureKeymap:n}}return{unpackedObj:t,disclosureKeymap:n}},B5=(t,e)=>kg(void 0,null,function*(){let r={};for(let n=0;n<t.length;n++){let s=t[n],i=yield s.digest(e);r[i]=s}return r}),k5=(t,e)=>{let r={};for(let n=0;n<t.length;n++){let s=t[n],i=s.digestSync(e);r[i]=s}return r},Sh=t=>{let e=t,{_sd_alg:r}=e,n=F5(e,["_sd_alg"]);return typeof r!="string"?{_sd_alg:"sha-256",payload:n}:{_sd_alg:r,payload:n}},R5=(t,e,r)=>kg(void 0,null,function*(){let{_sd_alg:n,payload:s}=Sh(t),o=yield B5(e,{hasher:r,alg:n});return xc(s,o)}),$5=(t,e,r)=>{let{_sd_alg:n,payload:s}=Sh(t),o=k5(e,{hasher:r,alg:n});return xc(s,o)}});var N5=v(xi=>{"use strict";var Kre=xi&&xi.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(xi,"__esModule",{value:!0});xi.decodeSdJwtVcAsync=xi.decodeSdJwtVc=xi.isWrappedSdJwtVerifiablePresentation=xi.isWrappedSdJwtVerifiableCredential=void 0;var $g=Rg();function zre(t){return t.format==="vc+sd-jwt"}xi.isWrappedSdJwtVerifiableCredential=zre;function Hre(t){return t.format==="vc+sd-jwt"}xi.isWrappedSdJwtVerifiablePresentation=Hre;function Wre(t,e){let{jwt:r,disclosures:n}=(0,$g.decodeSdJwtSync)(t,e),s=r.payload,i=(0,$g.getClaimsSync)(s,n,e);return{compactSdJwtVc:t,decodedPayload:i,disclosures:n.map(o=>{let a=o.key?[o.salt,o.key,o.value]:[o.salt,o.value];if(!o._digest)throw new Error("Implementation error: digest not present in disclosure");return{decoded:a,digest:o._digest,encoded:o.encode()}}),signedPayload:s}}xi.decodeSdJwtVc=Wre;function Jre(t,e){return Kre(this,void 0,void 0,function*(){let{jwt:r,disclosures:n}=yield(0,$g.decodeSdJwt)(t,e),s=r.payload,i=yield(0,$g.getClaims)(s,n,e);return{compactSdJwtVc:t,decodedPayload:i,disclosures:n.map(o=>{let a=o.key?[o.salt,o.key,o.value]:[o.salt,o.value];if(!o._digest)throw new Error("Implementation error: digest not present in disclosure");return{decoded:a,digest:o._digest,encoded:o.encode()}}),signedPayload:s}})}xi.decodeSdJwtVcAsync=Jre});var U5=v(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.isWrappedW3CVerifiablePresentation=Ln.isWrappedW3CVerifiableCredential=Ln.StatusListDriverType=Ln.StatusListCredentialIdMode=Ln.StatusListType=Ln.JWT_PROOF_TYPE_2020=void 0;Ln.JWT_PROOF_TYPE_2020="JwtProof2020";var M5;(function(t){t.StatusList2021="StatusList2021"})(M5||(Ln.StatusListType=M5={}));var q5;(function(t){t.ISSUANCE="ISSUANCE",t.PERSISTENCE="PERSISTENCE",t.NEVER="NEVER"})(q5||(Ln.StatusListCredentialIdMode=q5={}));var L5;(function(t){t.AGENT_TYPEORM="agent_typeorm",t.AGENT_KV_STORE="agent_kv_store",t.GITHUB="github",t.AGENT_FILESYSTEM="agent_filesystem"})(L5||(Ln.StatusListDriverType=L5={}));function Gre(t){return t.format==="jwt_vc"||t.format==="ldp_vc"}Ln.isWrappedW3CVerifiableCredential=Gre;function Zre(t){return t.format==="jwt_vp"||t.format==="ldp_vp"}Ln.isWrappedW3CVerifiablePresentation=Zre});var LS=v(Ci=>{"use strict";var Xre=Ci&&Ci.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Bd=Ci&&Ci.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xre(e,t,r)};Object.defineProperty(Ci,"__esModule",{value:!0});Bd(d5(),Ci);Bd(p5(),Ci);Bd(y5(),Ci);Bd(v5(),Ci);Bd(N5(),Ci);Bd(U5(),Ci)});var V5=v(jg=>{"use strict";Object.defineProperty(jg,"__esModule",{value:!0});jg.ObjectUtils=void 0;var US=class t{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return typeof e=="object"||Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){let r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;t.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}};jg.ObjectUtils=US});var Ng=v(Cc=>{"use strict";var Yre=Cc&&Cc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qre=Cc&&Cc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Yre(e,t,r)};Object.defineProperty(Cc,"__esModule",{value:!0});Qre(V5(),Cc)});var W5=v((hFe,H5)=>{"use strict";function KS(t){this.message=t}KS.prototype=new Error,KS.prototype.name="InvalidCharacterError";var K5=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new KS("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,s=0,i=0,o="";n=e.charAt(i++);~n&&(r=s%4?64*r+n:n,s++%4)?o+=String.fromCharCode(255&r>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function ene(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(K5(r).replace(/(.)/g,function(n,s){var i=s.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}(e)}catch{return K5(e)}}function Ah(t){this.message=t}function z5(t,e){if(typeof t!="string")throw new Ah("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(ene(t.split(".")[r]))}catch(n){throw new Ah("Invalid token specified: "+n.message)}}Ah.prototype=new Error,Ah.prototype.name="InvalidTokenError";var VS=z5;VS.default=z5,VS.InvalidTokenError=Ah,H5.exports=VS});var G5=v(eu=>{"use strict";var J5=eu&&eu.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},tne=eu&&eu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eu,"__esModule",{value:!0});eu.CredentialMapper=void 0;var kd=tne(W5()),or=LS(),zS=Ng(),Pc=class t{static decodeSdJwtVcAsync(e,r){return(0,or.decodeSdJwtVcAsync)(e,r)}static decodeVerifiablePresentation(e,r){var n;if(t.isJwtEncoded(e)){let s=(0,kd.default)(e),i=(0,kd.default)(e,{header:!0});return s.vp.proof={type:or.IProofType.JwtProof2020,created:s.nbf,proofPurpose:or.IProofPurpose.authentication,verificationMethod:(n=i.kid)!==null&&n!==void 0?n:s.iss,jwt:e},s}else{if(t.isJwtDecodedPresentation(e))return e;if(t.isSdJwtEncoded(e)){if(!r)throw new Error("Hasher implementation is required to decode SD-JWT");return(0,or.decodeSdJwtVc)(e,r)}else return t.isSdJwtDecodedCredential(e)?e:t.isJsonLdAsString(e)?JSON.parse(e):e}}static decodeVerifiableCredential(e,r){var n;if(t.isJwtEncoded(e)){let s=(0,kd.default)(e),i=(0,kd.default)(e,{header:!0});return s.vc.proof={type:or.IProofType.JwtProof2020,created:s.nbf,proofPurpose:or.IProofPurpose.authentication,verificationMethod:(n=i.kid)!==null&&n!==void 0?n:s.iss,jwt:e},s}else{if(t.isJwtDecodedCredential(e))return e;if(t.isJsonLdAsString(e))return JSON.parse(e);if(t.isSdJwtEncoded(e)){if(!r)throw new Error("Hasher implementation is required to decode SD-JWT");return(0,or.decodeSdJwtVc)(e,r)}else return t.isSdJwtDecodedCredential(e),e}}static toWrappedVerifiablePresentation(e,r){if(t.isSdJwtDecodedCredential(e)||t.isSdJwtEncoded(e)){let f;if(t.isSdJwtEncoded(e)){if(!r?.hasher)throw new Error("Hasher implementation is required to decode SD-JWT");f=(0,or.decodeSdJwtVc)(e,r.hasher)}else f=e;return{type:t.isSdJwtDecodedCredential(e)?or.OriginalType.SD_JWT_VC_DECODED:or.OriginalType.SD_JWT_VC_ENCODED,format:"vc+sd-jwt",original:e,presentation:f,decoded:f.decodedPayload,vcs:[t.toWrappedVerifiableCredential(e,r)]}}let n=t.getFirstProof(e),s=typeof e!="string"&&t.hasJWTProofType(e)?n?.jwt:e;if(!s)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");let i=t.decodeVerifiablePresentation(s),o=t.isJwtEncoded(s),a=t.isJwtDecodedPresentation(s),c=o?or.OriginalType.JWT_ENCODED:a?or.OriginalType.JWT_DECODED:or.OriginalType.JSONLD,u=a||o?"jwt_vp":"ldp_vp",l;if(o||a?l=t.jwtDecodedPresentationToUniformPresentation(i,!1,r):l=i,!l||!("verifiableCredential"in l)||!l.verifiableCredential||l.verifiableCredential.length===0)throw Error("VP needs to have at least one verifiable credential at this point");let d=t.toWrappedVerifiableCredentials(l.verifiableCredential,r),p=Object.assign(Object.assign({},l),{verifiableCredential:d});return{type:c,format:u,original:s,decoded:i,presentation:p,vcs:d}}static toWrappedVerifiableCredentials(e,r){return e.map(n=>t.toWrappedVerifiableCredential(n,r))}static toWrappedVerifiableCredential(e,r){var n;if(t.isSdJwtDecodedCredential(e)||t.isSdJwtEncoded(e)){let p;if(t.isSdJwtEncoded(e)){if(!r?.hasher)throw new Error("Hasher implementation is required to decode SD-JWT");p=(0,or.decodeSdJwtVc)(e,r.hasher)}else p=e;return{type:t.isSdJwtDecodedCredential(e)?or.OriginalType.SD_JWT_VC_DECODED:or.OriginalType.SD_JWT_VC_ENCODED,format:"vc+sd-jwt",original:e,credential:p,decoded:p.decodedPayload}}let s=t.getFirstProof(e),i=t.hasJWTProofType(e)&&s&&(n=s.jwt)!==null&&n!==void 0?n:e;if(!i)throw Error("Could not determine original credential, probably it was a converted JWT credential, that is now missing the JWT value in the proof");let o=t.decodeVerifiableCredential(i),a=t.isJwtEncoded(i),c=t.isJwtDecodedCredential(i),u=a?or.OriginalType.JWT_ENCODED:c?or.OriginalType.JWT_DECODED:or.OriginalType.JSONLD,l=a||c?t.jwtDecodedCredentialToUniformCredential(o,r):o;return{original:i,decoded:o,format:a||c?"jwt_vc":"ldp_vc",type:u,credential:l}}static isJwtEncoded(e){return zS.ObjectUtils.isString(e)&&e.startsWith("ey")&&!e.includes("~")}static isSdJwtEncoded(e){return zS.ObjectUtils.isString(e)&&e.startsWith("ey")&&e.includes("~")}static isW3cCredential(e){var r;return"@context"in e&&(((r=e.type)===null||r===void 0?void 0:r.includes("VerifiableCredential"))||!1)}static isCredential(e){try{if(t.isJwtEncoded(e)){let r=t.toUniformCredential(e);return t.isW3cCredential(r)}else if(t.isSdJwtEncoded(e))return!0;return t.isW3cCredential(e)||t.isSdJwtDecodedCredentialPayload(e)||t.isJwtDecodedCredential(e)||t.isSdJwtDecodedCredential(e)}catch{return!1}}static isPresentation(e){try{if(t.isJwtEncoded(e)){let r=t.toUniformPresentation(e);return t.isW3cPresentation(r)}else if(t.isSdJwtEncoded(e))return!1;return t.isW3cPresentation(e)||t.isSdJwtDecodedCredentialPayload(e)||t.isJwtDecodedPresentation(e)||t.isSdJwtDecodedCredential(e)}catch{return!1}}static hasProof(e){try{return t.isJwtEncoded(e)||t.isJwtDecodedCredential(e)||t.isSdJwtEncoded(e)||t.isSdJwtDecodedCredential(e)||"vc"in e&&e.vc.proof||"vp"in e&&e.vp.proof?!0:!!e.proof}catch{return!1}}static isW3cPresentation(e){var r;return"@context"in e&&(((r=e.type)===null||r===void 0?void 0:r.includes("VerifiablePresentation"))||!1)}static isSdJwtDecodedCredentialPayload(e){return"vct"in e}static areOriginalVerifiableCredentialsEqual(e,r){return typeof e=="string"||typeof r=="string"?e===r:t.isSdJwtDecodedCredential(e)||t.isSdJwtDecodedCredential(r)?e.compactSdJwtVc===r.compactSdJwtVc:JSON.stringify(r.proof)===JSON.stringify(e.proof)}static isJsonLdAsString(e){return zS.ObjectUtils.isString(e)&&e.includes("@context")}static isSdJwtDecodedCredential(e){return e.compactSdJwtVc!==void 0}static isJwtDecodedCredential(e){return e.vc!==void 0&&e.iss!==void 0}static isJwtDecodedPresentation(e){return e.vp!==void 0&&e.iss!==void 0}static jwtEncodedPresentationToUniformPresentation(e,r=!0,n){return t.jwtDecodedPresentationToUniformPresentation((0,kd.default)(e),r,n)}static jwtDecodedPresentationToUniformPresentation(e,r=!0,n){let{iss:s,aud:i,jti:o,vp:a}=e,c=J5(e,["iss","aud","jti","vp"]),u=Object.assign(Object.assign({},c),a);if(r){if(!a.verifiableCredential)throw Error("Verifiable Presentation should have a verifiable credential at this point");u.verifiableCredential=a.verifiableCredential.map(l=>t.toUniformCredential(l,n))}if(s){let l=u.holder;if(l&&l!==s)throw new Error(`Inconsistent holders between JWT claim (${s}) and VC value (${l})`);u.holder=s}if(i){let l=u.verifier;if(l&&l!==i)throw new Error(`Inconsistent holders between JWT claim (${i}) and VC value (${l})`);u.verifier=i}if(o){let l=u.id;if(l&&l!==o)throw new Error(`Inconsistent VP ids between JWT claim (${o}) and VP value (${l})`);u.id=o}return u}static toUniformCredential(e,r){var n;if(t.isSdJwtDecodedCredential(e))throw new Error("Converting SD-JWT VC to uniform VC is not supported.");let s=typeof e!="string"&&t.hasJWTProofType(e)?(n=t.getFirstProof(e))===null||n===void 0?void 0:n.jwt:e;if(!s)throw Error("Could not determine original credential from passed in credential. Probably because a JWT proof type was present, but now is not available anymore");let i=t.decodeVerifiableCredential(s),o=t.isJwtEncoded(s);return t.isJwtDecodedCredential(s)||o?t.jwtDecodedCredentialToUniformCredential(i,r):i}static toUniformPresentation(e,r){var n;if(t.isSdJwtDecodedCredential(e))throw new Error("Converting SD-JWT VC to uniform VP is not supported.");let s=t.getFirstProof(e),i=typeof e!="string"&&t.hasJWTProofType(e)?s?.jwt:e;if(!i)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");let o=t.decodeVerifiablePresentation(i),a=t.isJwtEncoded(i),c=t.isJwtDecodedPresentation(i),u=a||c?t.jwtDecodedPresentationToUniformPresentation(o,!1):o;return r?.addContextIfMissing&&!u["@context"]&&(u["@context"]=["https://www.w3.org/2018/credentials/v1"]),u.verifiableCredential=(n=u.verifiableCredential)===null||n===void 0?void 0:n.map(l=>t.toUniformCredential(l,r)),u}static jwtEncodedCredentialToUniformCredential(e,r){return t.jwtDecodedCredentialToUniformCredential((0,kd.default)(e),r)}static jwtDecodedCredentialToUniformCredential(e,r){var n;let{exp:s,nbf:i,iss:o,vc:a,sub:c,jti:u}=e,l=J5(e,["exp","nbf","iss","vc","sub","jti"]),d=Object.assign(Object.assign({},l),a),p=(n=r?.maxTimeSkewInMS)!==null&&n!==void 0?n:1500;if(s){let f=d.expirationDate,h=parseInt(s.toString()),y=h<9999999999?new Date(h*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(h).toISOString();if(f&&f!==y){let g=Math.abs(new Date(y).getTime()-new Date(f).getTime());if(!p||g>p)throw new Error(`Inconsistent expiration dates between JWT claim (${y}) and VC value (${f})`)}d.expirationDate=y}if(i){let f=d.issuanceDate,h=parseInt(i.toString()),y=h<9999999999?new Date(h*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(h).toISOString();if(f&&f!==y){let g=Math.abs(new Date(y).getTime()-new Date(f).getTime());if(!p||g>p)throw new Error(`Inconsistent issuance dates between JWT claim (${y}) and VC value (${f})`)}d.issuanceDate=y}if(o){let f=d.issuer;if(f){if(typeof f=="string"){if(f!==o)throw new Error(`Inconsistent issuers between JWT claim (${o}) and VC value (${f})`)}else if(!f.id&&Object.keys(f).length>0&&(f.id=o),f.id!==o)throw new Error(`Inconsistent issuers between JWT claim (${o}) and VC value (${f.id})`)}else d.issuer=o}if(c){let f=Array.isArray(d.credentialSubject)?d.credentialSubject:[d.credentialSubject];for(let h=0;h<f.length;h++){let y=f[h].id;if(y&&y!==c)throw new Error(`Inconsistent credential subject ids between JWT claim (${c}) and VC value (${y})`);Array.isArray(d.credentialSubject)?d.credentialSubject[h].id=c:d.credentialSubject.id=c}}if(u){let f=d.id;if(f&&f!==u)throw new Error(`Inconsistent credential ids between JWT claim (${u}) and VC value (${f})`);d.id=u}return d}static toExternalVerifiableCredential(e){let r;if(e.proof){if(!e.proof.type)throw new Error("Verifiable credential proof is missing a type");if(!e.proof.created)throw new Error("Verifiable credential proof is missing a created date");if(!e.proof.proofPurpose)throw new Error("Verifiable credential proof is missing a proof purpose");if(!e.proof.verificationMethod)throw new Error("Verifiable credential proof is missing a verification method");r=Object.assign(Object.assign({},e.proof),{type:e.proof.type,created:e.proof.created,proofPurpose:e.proof.proofPurpose,verificationMethod:e.proof.verificationMethod})}return Object.assign(Object.assign({},e),{type:e.type?typeof e.type=="string"?[e.type]:e.type:["VerifiableCredential"],proof:r})}static storedCredentialToOriginalFormat(e){let r=t.detectDocumentType(e);if(typeof e=="string"){if(r===0)return t.toCompactJWT(e);if(r===1)return JSON.parse(e)}else{if(r===0&&"vc"in e)return t.toCompactJWT(e);if("proof"in e&&e.proof.type==="JwtProof2020"&&e.proof.jwt)return e.proof.jwt}return e}static storedPresentationToOriginalFormat(e){let r=t.detectDocumentType(e);if(typeof e=="string"){if(r===0)return t.toCompactJWT(e);if(r===1)return JSON.parse(e)}else{if(r===0&&"vp"in e)return t.toCompactJWT(e);if("proof"in e&&e.proof.type==="JwtProof2020"&&e.proof.jwt)return e.proof.jwt}return e}static toCompactJWT(e){if(!e||t.detectDocumentType(e)!==0)throw Error("Cannot convert non JWT credential to JWT");if(typeof e=="string")return e;let r;if("vp"in e?r="jwt"in e.vp.proof?e.vp.proof.jwt:e.vp.proof:"vc"in e?r="jwt"in e.vc.proof?e.vc.proof.jwt:e.vc.proof:r=Array.isArray(e.proof)?e.proof[0].jwt:e.proof.jwt,!r)throw Error("Could not get JWT from supplied document");return r}static detectDocumentType(e){if(this.isJsonLdAsString(e))return 1;if(this.isJwtEncoded(e))return 0;if(this.isSdJwtEncoded(e)||this.isSdJwtDecodedCredential(e))return 2;let r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof,n=Array.isArray(r)?r[0]:r;return n?.jwt?0:n?.type==="EthereumEip712Signature2021"?3:1}static hasJWTProofType(e){var r;return typeof e=="string"?!1:!!(!((r=t.getFirstProof(e))===null||r===void 0)&&r.jwt)}static getFirstProof(e){if(!e||typeof e=="string")return;let r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof;return Array.isArray(r)?r[0]:r}};eu.CredentialMapper=Pc;Pc.isWrappedSdJwtVerifiableCredential=or.isWrappedSdJwtVerifiableCredential;Pc.isWrappedSdJwtVerifiablePresentation=or.isWrappedSdJwtVerifiablePresentation;Pc.isWrappedW3CVerifiableCredential=or.isWrappedW3CVerifiableCredential;Pc.isWrappedW3CVerifiablePresentation=or.isWrappedW3CVerifiablePresentation});var Z5=v(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.mapLanguageValues=lr.mapLanguageValue=lr.toLanguageValueObjects=lr.toLanguageValueObject=lr.isLanguageValueObjects=lr.isLanguageValueObject=void 0;var HS=Ng(),rne=t=>{if(!t||!HS.ObjectUtils.isObject(t)||Array.isArray(t)||Object.keys(t).length!==2)return!1;if("language"in t&&t.language){if(!("value"in t&&t.value))return!1}else return!1;return!0};lr.isLanguageValueObject=rne;var nne=t=>!t||!Array.isArray(t)?!1:t.every(e=>(0,lr.isLanguageValueObject)(e));lr.isLanguageValueObjects=nne;var ine=t=>(0,lr.isLanguageValueObject)(t)?t:void 0;lr.toLanguageValueObject=ine;var sne=t=>{if((0,lr.isLanguageValueObject)(t))return HS.ObjectUtils.asArray((0,lr.toLanguageValueObject)(t));if((0,lr.isLanguageValueObjects)(t))return t};lr.toLanguageValueObjects=sne;var one=(t,e)=>{let r=(0,lr.toLanguageValueObjects)(t);if(Array.isArray(r)){if(r.length===0)return t;let n=r.filter(i=>e?.language?i.language.toLowerCase().includes(e.language.toLowerCase()):!0),s;if(n.length>0)s=n[0];else{if(e?.fallbackToFirstObject===!1)return t;s=r[0]}return s.value}return t};lr.mapLanguageValue=one;var ane=(t,e)=>{let r=e?.noDeepClone?t:JSON.parse(JSON.stringify(t));return Object.keys(t).forEach(n=>{r[n]=(0,lr.mapLanguageValue)(r[n],e),(HS.ObjectUtils.isObject(r[n])||Array.isArray(r[n]))&&(r[n]=(0,lr.mapLanguageValues)(r[n],Object.assign(Object.assign({},e),{noDeepClone:!0})))}),r};lr.mapLanguageValues=ane});var Y5=v(tu=>{"use strict";var une=tu&&tu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),X5=tu&&tu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&une(e,t,r)};Object.defineProperty(tu,"__esModule",{value:!0});X5(G5(),tu);X5(Z5(),tu)});var os=v(Go=>{"use strict";var cne=Go&&Go.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),WS=Go&&Go.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&cne(e,t,r)};Object.defineProperty(Go,"__esModule",{value:!0});WS(LS(),Go);WS(Ng(),Go);WS(Y5(),Go)});var ek=v(Q5=>{"use strict";Object.defineProperty(Q5,"__esModule",{value:!0})});var tk=v(Mg=>{"use strict";Object.defineProperty(Mg,"__esModule",{value:!0});Mg.HandlerCheckResult=void 0;var lne=class{constructor(t,e,r,n,s,i){this.input_descriptor_path=t,this.verifiable_credential_path=e,this.evaluator=r,this.status=n,this.message=s,this.payload=i}};Mg.HandlerCheckResult=lne});var nk=v(rk=>{"use strict";Object.defineProperty(rk,"__esModule",{value:!0})});var sk=v(ik=>{"use strict";Object.defineProperty(ik,"__esModule",{value:!0})});var ok=v(Js=>{"use strict";var dne=Js&&Js.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qg=Js&&Js.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&dne(e,t,r)};Object.defineProperty(Js,"__esModule",{value:!0});qg(ek(),Js);qg(tk(),Js);qg(nk(),Js);qg(sk(),Js)});var as=v(GS=>{"use strict";Object.defineProperty(GS,"__esModule",{value:!0});var JS;(function(t){t.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY="Input candidate does not contain property",t.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION="Input candidate failed filter evaluation",t.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is eligible for submission",t.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is not eligible for submission",t.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED="Input descriptor contains hashlink. This version doesn't support hashlink verification.",t.LIMIT_DISCLOSURE_APPLIED="added variable in the limit_disclosure to the verifiableCredential",t.LIMIT_DISCLOSURE_NOT_SUPPORTED="Limit disclosure not supported",t.SUBJECT_IS_NOT_ISSUER="subject is not issuer",t.SUBJECT_IS_ISSUER="subject is issuer",t.FORMAT_RESTRICTION_PASSED="the Credential format of the candidate inputs matches the required formats",t.FORMAT_RESTRICTION_DIDNT_PASS="the Credential format of the candidate inputs didn't match the required formats",t.URI_EVALUATION_PASSED="@context URI(s) for the schema of the candidate input is equal to one of the input_descriptors object uri values.",t.URI_EVALUATION_DIDNT_PASS="@context URI for the of the candidate input MUST be equal to one of the input_descriptors object uri values exactly.",t.UNKNOWN_EXCEPTION="unknown exception occurred: ",t.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT="mandatory field not present in the verifiableCredential"})(JS||(JS={}));GS.default=JS});var Ak=v(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.version=Se.parse=Se.tokenize=Se.Syntax=void 0;var pe,cs,dk,ru,he,QS,eA,ae,kt,R,He,nt,$t,G,fe,De,Z;pe={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};cs={};cs[pe.BooleanLiteral]="Boolean";cs[pe.EOF]="<end>";cs[pe.Identifier]="Identifier";cs[pe.Keyword]="Keyword";cs[pe.NullLiteral]="Null";cs[pe.NumericLiteral]="Numeric";cs[pe.Punctuator]="Punctuator";cs[pe.StringLiteral]="String";cs[pe.RegularExpression]="RegularExpression";dk=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];Se.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};ru={Data:1,Get:2,Set:4};he={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};QS={NonAsciiIdentifierStart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]"),NonAsciiIdentifierPart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]")};function Ch(t,e){if(!t)throw new Error("ASSERT: "+e)}function Zo(t){return t>=48&&t<=57}function fk(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function Dh(t){return"01234567".indexOf(t)>=0}function fne(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function Fc(t){return t===10||t===13||t===8232||t===8233}function $d(t){return t==64||t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&QS.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function Ug(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&QS.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function pne(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function Ph(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function Pi(t){return t==="eval"||t==="arguments"}function hne(t){if(kt&&Ph(t))return!0;switch(t.length){case 2:return t==="if"||t==="in"||t==="do";case 3:return t==="var"||t==="for"||t==="new"||t==="try"||t==="let";case 4:return t==="this"||t==="else"||t==="case"||t==="void"||t==="with"||t==="enum";case 5:return t==="while"||t==="break"||t==="catch"||t==="throw"||t==="const"||t==="yield"||t==="class"||t==="super";case 6:return t==="return"||t==="typeof"||t==="delete"||t==="switch"||t==="export"||t==="import";case 7:return t==="default"||t==="finally"||t==="extends";case 8:return t==="function"||t==="continue"||t==="debugger";case 10:return t==="instanceof";default:return!1}}function YS(t,e,r,n,s){var i,o;Ch(typeof r=="number","Comment must have valid position"),!(De.lastCommentStart>=r)&&(De.lastCommentStart=r,i={type:t,value:e},Z.range&&(i.range=[r,n]),Z.loc&&(i.loc=s),Z.comments.push(i),Z.attachComment&&(Z.leadingComments.push(i),Z.trailingComments.push(i)))}function ZS(t){var e,r,n,s;for(e=R-t,r={start:{line:He,column:R-nt-t}};R<$t;)if(n=ae.charCodeAt(R),++R,Fc(n)){Z.comments&&(s=ae.slice(e+t,R-1),r.end={line:He,column:R-nt-1},YS("Line",s,e,R-1,r)),n===13&&ae.charCodeAt(R)===10&&++R,++He,nt=R;return}Z.comments&&(s=ae.slice(e+t,R),r.end={line:He,column:R-nt},YS("Line",s,e,R,r))}function mne(){var t,e,r,n;for(Z.comments&&(t=R-2,e={start:{line:He,column:R-nt-2}});R<$t;)if(r=ae.charCodeAt(R),Fc(r))r===13&&ae.charCodeAt(R+1)===10&&++R,++He,++R,nt=R,R>=$t&&et({},he.UnexpectedToken,"ILLEGAL");else if(r===42){if(ae.charCodeAt(R+1)===47){++R,++R,Z.comments&&(n=ae.slice(t+2,R-2),e.end={line:He,column:R-nt},YS("Block",n,t,R,e));return}++R}else++R;et({},he.UnexpectedToken,"ILLEGAL")}function nu(){var t,e;for(e=R===0;R<$t;)if(t=ae.charCodeAt(R),fne(t))++R;else if(Fc(t))++R,t===13&&ae.charCodeAt(R)===10&&++R,++He,nt=R,e=!0;else if(t===47)if(t=ae.charCodeAt(R+1),t===47)++R,++R,ZS(2),e=!0;else if(t===42)++R,++R,mne();else break;else if(e&&t===45)if(ae.charCodeAt(R+1)===45&&ae.charCodeAt(R+2)===62)R+=3,ZS(3);else break;else if(t===60)if(ae.slice(R+1,R+4)==="!--")++R,++R,++R,++R,ZS(4);else break;else break}function Vg(t){var e,r,n,s=0;for(r=t==="u"?4:2,e=0;e<r;++e)if(R<$t&&fk(ae[R]))n=ae[R++],s=s*16+"0123456789abcdef".indexOf(n.toLowerCase());else return"";return String.fromCharCode(s)}function pk(){var t,e;for(t=ae.charCodeAt(R++),e=String.fromCharCode(t),t===92&&(ae.charCodeAt(R)!==117&&et({},he.UnexpectedToken,"ILLEGAL"),++R,t=Vg("u"),(!t||t==="\\"||!$d(t.charCodeAt(0)))&&et({},he.UnexpectedToken,"ILLEGAL"),e=t);R<$t&&(t=ae.charCodeAt(R),!!Ug(t));)++R,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),ae.charCodeAt(R)!==117&&et({},he.UnexpectedToken,"ILLEGAL"),++R,t=Vg("u"),(!t||t==="\\"||!Ug(t.charCodeAt(0)))&&et({},he.UnexpectedToken,"ILLEGAL"),e+=t);return e}function yne(){var t,e;for(t=R++;R<$t;){if(e=ae.charCodeAt(R),e===92)return R=t,pk();if(Ug(e))++R;else break}return ae.slice(t,R)}function gne(){var t,e,r;return t=R,e=ae.charCodeAt(R)===92?pk():yne(),e.length===1?r=pe.Identifier:hne(e)?r=pe.Keyword:e==="null"?r=pe.NullLiteral:e==="true"||e==="false"?r=pe.BooleanLiteral:r=pe.Identifier,{type:r,value:e,lineNumber:He,lineStart:nt,start:t,end:R}}function Xo(){var t=R,e=ae.charCodeAt(R),r,n=ae[R],s,i,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++R,Z.tokenize&&(e===40?Z.openParenToken=Z.tokens.length:e===123&&(Z.openCurlyToken=Z.tokens.length)),{type:pe.Punctuator,value:String.fromCharCode(e),lineNumber:He,lineStart:nt,start:t,end:R};default:if(r=ae.charCodeAt(R+1),r===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return R+=2,{type:pe.Punctuator,value:String.fromCharCode(e)+String.fromCharCode(r),lineNumber:He,lineStart:nt,start:t,end:R};case 33:case 61:return R+=2,ae.charCodeAt(R)===61&&++R,{type:pe.Punctuator,value:ae.slice(t,R),lineNumber:He,lineStart:nt,start:t,end:R}}}if(o=ae.substr(R,4),o===">>>=")return R+=4,{type:pe.Punctuator,value:o,lineNumber:He,lineStart:nt,start:t,end:R};if(i=o.substr(0,3),i===">>>"||i==="<<="||i===">>=")return R+=3,{type:pe.Punctuator,value:i,lineNumber:He,lineStart:nt,start:t,end:R};if(s=i.substr(0,2),n===s[1]&&"+-<>&|".indexOf(n)>=0||s==="=>")return R+=2,{type:pe.Punctuator,value:s,lineNumber:He,lineStart:nt,start:t,end:R};if("<>=!+-*%&|^/".indexOf(n)>=0)return++R,{type:pe.Punctuator,value:n,lineNumber:He,lineStart:nt,start:t,end:R};et({},he.UnexpectedToken,"ILLEGAL")}function vne(t){for(var e="";R<$t&&fk(ae[R]);)e+=ae[R++];return e.length===0&&et({},he.UnexpectedToken,"ILLEGAL"),$d(ae.charCodeAt(R))&&et({},he.UnexpectedToken,"ILLEGAL"),{type:pe.NumericLiteral,value:parseInt("0x"+e,16),lineNumber:He,lineStart:nt,start:t,end:R}}function bne(t){for(var e="0"+ae[R++];R<$t&&Dh(ae[R]);)e+=ae[R++];return($d(ae.charCodeAt(R))||Zo(ae.charCodeAt(R)))&&et({},he.UnexpectedToken,"ILLEGAL"),{type:pe.NumericLiteral,value:parseInt(e,8),octal:!0,lineNumber:He,lineStart:nt,start:t,end:R}}function ak(){var t,e,r;if(r=ae[R],Ch(Zo(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"),e=R,t="",r!=="."){if(t=ae[R++],r=ae[R],t==="0"){if(r==="x"||r==="X")return++R,vne(e);if(Dh(r))return bne(e);r&&Zo(r.charCodeAt(0))&&et({},he.UnexpectedToken,"ILLEGAL")}for(;Zo(ae.charCodeAt(R));)t+=ae[R++];r=ae[R]}if(r==="."){for(t+=ae[R++];Zo(ae.charCodeAt(R));)t+=ae[R++];r=ae[R]}if(r==="e"||r==="E")if(t+=ae[R++],r=ae[R],(r==="+"||r==="-")&&(t+=ae[R++]),Zo(ae.charCodeAt(R)))for(;Zo(ae.charCodeAt(R));)t+=ae[R++];else et({},he.UnexpectedToken,"ILLEGAL");return $d(ae.charCodeAt(R))&&et({},he.UnexpectedToken,"ILLEGAL"),{type:pe.NumericLiteral,value:parseFloat(t),lineNumber:He,lineStart:nt,start:e,end:R}}function _ne(){var t="",e,r,n,s,i,o,a=!1,c,u;for(c=He,u=nt,e=ae[R],Ch(e==="'"||e==='"',"String literal must starts with a quote"),r=R,++R;R<$t;)if(n=ae[R++],n===e){e="";break}else if(n==="\\")if(n=ae[R++],!n||!Fc(n.charCodeAt(0)))switch(n){case"u":case"x":o=R,i=Vg(n),i?t+=i:(R=o,t+=n);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:Dh(n)?(s="01234567".indexOf(n),s!==0&&(a=!0),R<$t&&Dh(ae[R])&&(a=!0,s=s*8+"01234567".indexOf(ae[R++]),"0123".indexOf(n)>=0&&R<$t&&Dh(ae[R])&&(s=s*8+"01234567".indexOf(ae[R++]))),t+=String.fromCharCode(s)):t+=n;break}else++He,n==="\r"&&ae[R]===`
`&&++R,nt=R;else{if(Fc(n.charCodeAt(0)))break;t+=n}return e!==""&&et({},he.UnexpectedToken,"ILLEGAL"),{type:pe.StringLiteral,value:t,octal:a,startLineNumber:c,startLineStart:u,lineNumber:He,lineStart:nt,start:r,end:R}}function wne(t,e){var r;try{r=new RegExp(t,e)}catch{et({},he.InvalidRegExp)}return r}function Ene(){var t,e,r,n,s;for(t=ae[R],Ch(t==="/","Regular expression literal must start with a slash"),e=ae[R++],r=!1,n=!1;R<$t;)if(t=ae[R++],e+=t,t==="\\")t=ae[R++],Fc(t.charCodeAt(0))&&et({},he.UnterminatedRegExp),e+=t;else if(Fc(t.charCodeAt(0)))et({},he.UnterminatedRegExp);else if(r)t==="]"&&(r=!1);else if(t==="/"){n=!0;break}else t==="["&&(r=!0);return n||et({},he.UnterminatedRegExp),s=e.substr(1,e.length-2),{value:s,literal:e}}function Sne(){var t,e,r,n;for(e="",r="";R<$t&&(t=ae[R],!!Ug(t.charCodeAt(0)));)if(++R,t==="\\"&&R<$t)if(t=ae[R],t==="u"){if(++R,n=R,t=Vg("u"),t)for(r+=t,e+="\\u";n<R;++n)e+=ae[n];else R=n,r+="u",e+="\\u";Rt({},he.UnexpectedToken,"ILLEGAL")}else e+="\\",Rt({},he.UnexpectedToken,"ILLEGAL");else r+=t,e+=t;return{value:r,literal:e}}function hk(){var t,e,r,n,s;return fe=null,nu(),t=R,e=Ene(),r=Sne(),s=wne(e.value,r.value),Z.tokenize?{type:pe.RegularExpression,value:s,lineNumber:He,lineStart:nt,start:t,end:R}:{literal:e.literal+r.literal,value:s,start:t,end:R}}function Oc(){var t,e,r,n;return nu(),t=R,e={start:{line:He,column:R-nt}},r=hk(),e.end={line:He,column:R-nt},Z.tokenize||(Z.tokens.length>0&&(n=Z.tokens[Z.tokens.length-1],n.range[0]===t&&n.type==="Punctuator"&&(n.value==="/"||n.value==="/=")&&Z.tokens.pop()),Z.tokens.push({type:"RegularExpression",value:r.literal,range:[t,R],loc:e})),r}function Ane(t){return t.type===pe.Identifier||t.type===pe.Keyword||t.type===pe.BooleanLiteral||t.type===pe.NullLiteral}function Dne(){var t,e;if(t=Z.tokens[Z.tokens.length-1],!t)return Oc();if(t.type==="Punctuator"){if(t.value==="]")return Xo();if(t.value===")")return e=Z.tokens[Z.openParenToken-1],e&&e.type==="Keyword"&&(e.value==="if"||e.value==="while"||e.value==="for"||e.value==="with")?Oc():Xo();if(t.value==="}"){if(Z.tokens[Z.openCurlyToken-3]&&Z.tokens[Z.openCurlyToken-3].type==="Keyword"){if(e=Z.tokens[Z.openCurlyToken-4],!e)return Xo()}else if(Z.tokens[Z.openCurlyToken-4]&&Z.tokens[Z.openCurlyToken-4].type==="Keyword"){if(e=Z.tokens[Z.openCurlyToken-5],!e)return Oc()}else return Xo();return dk.indexOf(e.value)>=0?Xo():Oc()}return Oc()}return t.type==="Keyword"?Oc():Xo()}function tA(){var t;return nu(),R>=$t?{type:pe.EOF,lineNumber:He,lineStart:nt,start:R,end:R}:(t=ae.charCodeAt(R),$d(t)?gne():t===40||t===41||t===59?Xo():t===39||t===34?_ne():t===46?Zo(ae.charCodeAt(R+1))?ak():Xo():Zo(t)?ak():Z.tokenize&&t===47?Dne():Xo())}function mk(){var t,e,r,n;return nu(),t={start:{line:He,column:R-nt}},e=tA(),t.end={line:He,column:R-nt},e.type!==pe.EOF&&(n=ae.slice(e.start,e.end),Z.tokens.push({type:cs[e.type],value:n,range:[e.start,e.end],loc:t})),e}function Qe(){var t;return t=fe,R=t.end,He=t.lineNumber,nt=t.lineStart,fe=typeof Z.tokens<"u"?mk():tA(),R=t.end,He=t.lineNumber,nt=t.lineStart,t}function rA(){var t,e,r;t=R,e=He,r=nt,fe=typeof Z.tokens<"u"?mk():tA(),R=t,He=e,nt=r}function uk(t,e){this.line=t,this.column=e}function xne(t,e,r,n){this.start=new uk(t,e),this.end=new uk(r,n)}eA={name:"SyntaxTree",processComment:function(t){var e,r;if(!(t.type===Se.Syntax.Program&&t.body.length>0)){for(Z.trailingComments.length>0?Z.trailingComments[0].range[0]>=t.range[1]?(r=Z.trailingComments,Z.trailingComments=[]):Z.trailingComments.length=0:Z.bottomRightStack.length>0&&Z.bottomRightStack[Z.bottomRightStack.length-1].trailingComments&&Z.bottomRightStack[Z.bottomRightStack.length-1].trailingComments[0].range[0]>=t.range[1]&&(r=Z.bottomRightStack[Z.bottomRightStack.length-1].trailingComments,delete Z.bottomRightStack[Z.bottomRightStack.length-1].trailingComments);Z.bottomRightStack.length>0&&Z.bottomRightStack[Z.bottomRightStack.length-1].range[0]>=t.range[0];)e=Z.bottomRightStack.pop();e?e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=e.leadingComments,delete e.leadingComments):Z.leadingComments.length>0&&Z.leadingComments[Z.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=Z.leadingComments,Z.leadingComments=[]),r&&(t.trailingComments=r),Z.bottomRightStack.push(t)}},markEnd:function(t,e){return Z.range&&(t.range=[e.start,R]),Z.loc&&(t.loc=new xne(e.startLineNumber===void 0?e.lineNumber:e.startLineNumber,e.start-(e.startLineStart===void 0?e.lineStart:e.startLineStart),He,R-nt),this.postProcess(t)),Z.attachComment&&this.processComment(t),t},postProcess:function(t){return Z.source&&(t.loc.source=Z.source),t},createArrayExpression:function(t){return{type:Se.Syntax.ArrayExpression,elements:t}},createAssignmentExpression:function(t,e,r){return{type:Se.Syntax.AssignmentExpression,operator:t,left:e,right:r}},createBinaryExpression:function(t,e,r){var n=t==="||"||t==="&&"?Se.Syntax.LogicalExpression:Se.Syntax.BinaryExpression;return{type:n,operator:t,left:e,right:r}},createBlockStatement:function(t){return{type:Se.Syntax.BlockStatement,body:t}},createBreakStatement:function(t){return{type:Se.Syntax.BreakStatement,label:t}},createCallExpression:function(t,e){return{type:Se.Syntax.CallExpression,callee:t,arguments:e}},createCatchClause:function(t,e){return{type:Se.Syntax.CatchClause,param:t,body:e}},createConditionalExpression:function(t,e,r){return{type:Se.Syntax.ConditionalExpression,test:t,consequent:e,alternate:r}},createContinueStatement:function(t){return{type:Se.Syntax.ContinueStatement,label:t}},createDebuggerStatement:function(){return{type:Se.Syntax.DebuggerStatement}},createDoWhileStatement:function(t,e){return{type:Se.Syntax.DoWhileStatement,body:t,test:e}},createEmptyStatement:function(){return{type:Se.Syntax.EmptyStatement}},createExpressionStatement:function(t){return{type:Se.Syntax.ExpressionStatement,expression:t}},createForStatement:function(t,e,r,n){return{type:Se.Syntax.ForStatement,init:t,test:e,update:r,body:n}},createForInStatement:function(t,e,r){return{type:Se.Syntax.ForInStatement,left:t,right:e,body:r,each:!1}},createFunctionDeclaration:function(t,e,r,n){return{type:Se.Syntax.FunctionDeclaration,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(t,e,r,n){return{type:Se.Syntax.FunctionExpression,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(t){return{type:Se.Syntax.Identifier,name:t}},createIfStatement:function(t,e,r){return{type:Se.Syntax.IfStatement,test:t,consequent:e,alternate:r}},createLabeledStatement:function(t,e){return{type:Se.Syntax.LabeledStatement,label:t,body:e}},createLiteral:function(t){return{type:Se.Syntax.Literal,value:t.value,raw:ae.slice(t.start,t.end)}},createMemberExpression:function(t,e,r){return{type:Se.Syntax.MemberExpression,computed:t==="[",object:e,property:r}},createNewExpression:function(t,e){return{type:Se.Syntax.NewExpression,callee:t,arguments:e}},createObjectExpression:function(t){return{type:Se.Syntax.ObjectExpression,properties:t}},createPostfixExpression:function(t,e){return{type:Se.Syntax.UpdateExpression,operator:t,argument:e,prefix:!1}},createProgram:function(t){return{type:Se.Syntax.Program,body:t}},createProperty:function(t,e,r){return{type:Se.Syntax.Property,key:e,value:r,kind:t}},createReturnStatement:function(t){return{type:Se.Syntax.ReturnStatement,argument:t}},createSequenceExpression:function(t){return{type:Se.Syntax.SequenceExpression,expressions:t}},createSwitchCase:function(t,e){return{type:Se.Syntax.SwitchCase,test:t,consequent:e}},createSwitchStatement:function(t,e){return{type:Se.Syntax.SwitchStatement,discriminant:t,cases:e}},createThisExpression:function(){return{type:Se.Syntax.ThisExpression}},createThrowStatement:function(t){return{type:Se.Syntax.ThrowStatement,argument:t}},createTryStatement:function(t,e,r,n){return{type:Se.Syntax.TryStatement,block:t,guardedHandlers:e,handlers:r,finalizer:n}},createUnaryExpression:function(t,e){return t==="++"||t==="--"?{type:Se.Syntax.UpdateExpression,operator:t,argument:e,prefix:!0}:{type:Se.Syntax.UnaryExpression,operator:t,argument:e,prefix:!0}},createVariableDeclaration:function(t,e){return{type:Se.Syntax.VariableDeclaration,declarations:t,kind:e}},createVariableDeclarator:function(t,e){return{type:Se.Syntax.VariableDeclarator,id:t,init:e}},createWhileStatement:function(t,e){return{type:Se.Syntax.WhileStatement,test:t,body:e}},createWithStatement:function(t,e){return{type:Se.Syntax.WithStatement,object:t,body:e}}};function Oh(){var t,e,r,n;return t=R,e=He,r=nt,nu(),n=He!==e,R=t,He=e,nt=r,n}function et(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var s,i=e.replace(/%(\d)/g,function(o,a){return Ch(a<r.length,"Message reference must be in range"),r[a]});throw typeof t.lineNumber=="number"?(s=new Error("Line "+t.lineNumber+": "+i),s.index=t.start,s.lineNumber=t.lineNumber,s.column=t.start-nt+1):(s=new Error("Line "+He+": "+i),s.index=R,s.lineNumber=He,s.column=R-nt+1),s.description=i,s}function Rt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{et.apply(null,t)}catch(r){if(Z.errors)Z.errors.push(r);else throw r}}function Gs(t){if(t.type===pe.EOF&&et(t,he.UnexpectedEOS),t.type===pe.NumericLiteral&&et(t,he.UnexpectedNumber),t.type===pe.StringLiteral&&et(t,he.UnexpectedString),t.type===pe.Identifier&&et(t,he.UnexpectedIdentifier),t.type===pe.Keyword){if(pne(t.value))et(t,he.UnexpectedReserved);else if(kt&&Ph(t.value)){Rt(t,he.StrictReservedWord);return}et(t,he.UnexpectedToken,t.value)}et(t,he.UnexpectedToken,t.value)}function je(t){var e=Qe();(e.type!==pe.Punctuator||e.value!==t)&&Gs(e)}function Sr(t){var e=Qe();(e.type!==pe.Keyword||e.value!==t)&&Gs(e)}function ke(t){return fe.type===pe.Punctuator&&fe.value===t}function Qr(t){return fe.type===pe.Keyword&&fe.value===t}function Cne(){var t;return fe.type!==pe.Punctuator?!1:(t=fe.value,t==="="||t==="*="||t==="/="||t==="%="||t==="+="||t==="-="||t==="<<="||t===">>="||t===">>>="||t==="&="||t==="^="||t==="|=")}function Zs(){var t;if(ae.charCodeAt(R)===59||ke(";")){Qe();return}t=He,nu(),He===t&&fe.type!==pe.EOF&&!ke("}")&&Gs(fe)}function zg(t){return t.type===Se.Syntax.Identifier||t.type===Se.Syntax.MemberExpression}function Pne(){var t=[],e;for(e=fe,je("[");!ke("]");)ke(",")?(Qe(),t.push(null)):(t.push(us()),ke("]")||je(","));return Qe(),G.markEnd(G.createArrayExpression(t),e)}function XS(t,e){var r,n,s;return r=kt,s=fe,n=iA(),e&&kt&&Pi(t[0].name)&&Rt(e,he.StrictParamName),kt=r,G.markEnd(G.createFunctionExpression(null,t,[],n),s)}function Lg(){var t,e;return e=fe,t=Qe(),t.type===pe.StringLiteral||t.type===pe.NumericLiteral?(kt&&t.octal&&Rt(t,he.StrictOctalLiteral),G.markEnd(G.createLiteral(t),e)):G.markEnd(G.createIdentifier(t.value),e)}function One(){var t,e,r,n,s,i;if(t=fe,i=fe,t.type===pe.Identifier)return r=Lg(),t.value==="get"&&!ke(":")?(e=Lg(),je("("),je(")"),n=XS([]),G.markEnd(G.createProperty("get",e,n),i)):t.value==="set"&&!ke(":")?(e=Lg(),je("("),t=fe,t.type!==pe.Identifier?(je(")"),Rt(t,he.UnexpectedToken,t.value),n=XS([])):(s=[iu()],je(")"),n=XS(s,t)),G.markEnd(G.createProperty("set",e,n),i)):(je(":"),n=us(),G.markEnd(G.createProperty("init",r,n),i));if(t.type===pe.EOF||t.type===pe.Punctuator)Gs(t);else return e=Lg(),je(":"),n=us(),G.markEnd(G.createProperty("init",e,n),i)}function Fne(){var t=[],e,r,n,s,i={},o=String,a;for(a=fe,je("{");!ke("}");)e=One(),e.key.type===Se.Syntax.Identifier?r=e.key.name:r=o(e.key.value),s=e.kind==="init"?ru.Data:e.kind==="get"?ru.Get:ru.Set,n="$"+r,Object.prototype.hasOwnProperty.call(i,n)?(i[n]===ru.Data?kt&&s===ru.Data?Rt({},he.StrictDuplicateProperty):s!==ru.Data&&Rt({},he.AccessorDataProperty):s===ru.Data?Rt({},he.AccessorDataProperty):i[n]&s&&Rt({},he.AccessorGetSet),i[n]|=s):i[n]=s,t.push(e),ke("}")||je(",");return je("}"),G.markEnd(G.createObjectExpression(t),a)}function Tne(){var t;return je("("),t=Ur(),je(")"),t}function yk(){var t,e,r,n;if(ke("("))return Tne();if(ke("["))return Pne();if(ke("{"))return Fne();if(t=fe.type,n=fe,t===pe.Identifier)r=G.createIdentifier(Qe().value);else if(t===pe.StringLiteral||t===pe.NumericLiteral)kt&&fe.octal&&Rt(fe,he.StrictOctalLiteral),r=G.createLiteral(Qe());else if(t===pe.Keyword){if(Qr("function"))return iie();Qr("this")?(Qe(),r=G.createThisExpression()):Gs(Qe())}else t===pe.BooleanLiteral?(e=Qe(),e.value=e.value==="true",r=G.createLiteral(e)):t===pe.NullLiteral?(e=Qe(),e.value=null,r=G.createLiteral(e)):ke("/")||ke("/=")?(typeof Z.tokens<"u"?r=G.createLiteral(Oc()):r=G.createLiteral(hk()),rA()):Gs(Qe());return G.markEnd(r,n)}function gk(){var t=[];if(je("("),!ke(")"))for(;R<$t&&(t.push(us()),!ke(")"));)je(",");return je(")"),t}function Ine(){var t,e;return e=fe,t=Qe(),Ane(t)||Gs(t),G.markEnd(G.createIdentifier(t.value),e)}function vk(){return je("."),Ine()}function bk(){var t;return je("["),t=Ur(),je("]"),t}function _k(){var t,e,r;return r=fe,Sr("new"),t=kne(),e=ke("(")?gk():[],G.markEnd(G.createNewExpression(t,e),r)}function Bne(){var t,e,r,n,s;for(s=fe,t=De.allowIn,De.allowIn=!0,e=Qr("new")?_k():yk(),De.allowIn=t;;){if(ke("."))n=vk(),e=G.createMemberExpression(".",e,n);else if(ke("("))r=gk(),e=G.createCallExpression(e,r);else if(ke("["))n=bk(),e=G.createMemberExpression("[",e,n);else break;G.markEnd(e,s)}return e}function kne(){var t,e,r,n;for(n=fe,t=De.allowIn,e=Qr("new")?_k():yk(),De.allowIn=t;ke(".")||ke("[");)ke("[")?(r=bk(),e=G.createMemberExpression("[",e,r)):(r=vk(),e=G.createMemberExpression(".",e,r)),G.markEnd(e,n);return e}function ck(){var t,e,r=fe;return t=Bne(),fe.type===pe.Punctuator&&(ke("++")||ke("--"))&&!Oh()&&(kt&&t.type===Se.Syntax.Identifier&&Pi(t.name)&&Rt({},he.StrictLHSPostfix),zg(t)||Rt({},he.InvalidLHSInAssignment),e=Qe(),t=G.markEnd(G.createPostfixExpression(e.value,t),r)),t}function Rd(){var t,e,r;return fe.type!==pe.Punctuator&&fe.type!==pe.Keyword?e=ck():ke("++")||ke("--")?(r=fe,t=Qe(),e=Rd(),kt&&e.type===Se.Syntax.Identifier&&Pi(e.name)&&Rt({},he.StrictLHSPrefix),zg(e)||Rt({},he.InvalidLHSInAssignment),e=G.createUnaryExpression(t.value,e),e=G.markEnd(e,r)):ke("+")||ke("-")||ke("~")||ke("!")?(r=fe,t=Qe(),e=Rd(),e=G.createUnaryExpression(t.value,e),e=G.markEnd(e,r)):Qr("delete")||Qr("void")||Qr("typeof")?(r=fe,t=Qe(),e=Rd(),e=G.createUnaryExpression(t.value,e),e=G.markEnd(e,r),kt&&e.operator==="delete"&&e.argument.type===Se.Syntax.Identifier&&Rt({},he.StrictDelete)):e=ck(),e}function lk(t,e){var r=0;if(t.type!==pe.Punctuator&&t.type!==pe.Keyword)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=e?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:break}return r}function Rne(){var t,e,r,n,s,i,o,a,c,u;if(t=fe,c=Rd(),n=fe,s=lk(n,De.allowIn),s===0)return c;for(n.prec=s,Qe(),e=[t,fe],o=Rd(),i=[c,n,o];(s=lk(fe,De.allowIn))>0;){for(;i.length>2&&s<=i[i.length-2].prec;)o=i.pop(),a=i.pop().value,c=i.pop(),r=G.createBinaryExpression(a,c,o),e.pop(),t=e[e.length-1],G.markEnd(r,t),i.push(r);n=Qe(),n.prec=s,i.push(n),e.push(fe),r=Rd(),i.push(r)}for(u=i.length-1,r=i[u],e.pop();u>1;)r=G.createBinaryExpression(i[u-1].value,i[u-2],r),u-=2,t=e.pop(),G.markEnd(r,t);return r}function $ne(){var t,e,r,n,s;return s=fe,t=Rne(),ke("?")&&(Qe(),e=De.allowIn,De.allowIn=!0,r=us(),De.allowIn=e,je(":"),n=us(),t=G.createConditionalExpression(t,r,n),G.markEnd(t,s)),t}function us(){var t,e,r,n,s;return t=fe,s=fe,n=e=$ne(),Cne()&&(zg(e)||Rt({},he.InvalidLHSInAssignment),kt&&e.type===Se.Syntax.Identifier&&Pi(e.name)&&Rt(t,he.StrictLHSAssignment),t=Qe(),r=us(),n=G.markEnd(G.createAssignmentExpression(t.value,e,r),s)),n}function Ur(){var t,e=fe;if(t=us(),ke(",")){for(t=G.createSequenceExpression([t]);R<$t&&ke(",");)Qe(),t.expressions.push(us());G.markEnd(t,e)}return t}function jne(){for(var t=[],e;R<$t&&!(ke("}")||(e=xh(),typeof e>"u"));)t.push(e);return t}function Kg(){var t,e;return e=fe,je("{"),t=jne(),je("}"),G.markEnd(G.createBlockStatement(t),e)}function iu(){var t,e;return e=fe,t=Qe(),t.type!==pe.Identifier&&Gs(t),G.markEnd(G.createIdentifier(t.value),e)}function Nne(t){var e=null,r,n;return n=fe,r=iu(),kt&&Pi(r.name)&&Rt({},he.StrictVarName),t==="const"?(je("="),e=us()):ke("=")&&(Qe(),e=us()),G.markEnd(G.createVariableDeclarator(r,e),n)}function nA(t){var e=[];do{if(e.push(Nne(t)),!ke(","))break;Qe()}while(R<$t);return e}function Mne(){var t;return Sr("var"),t=nA(),Zs(),G.createVariableDeclaration(t,"var")}function qne(t){var e,r;return r=fe,Sr(t),e=nA(t),Zs(),G.markEnd(G.createVariableDeclaration(e,t),r)}function Lne(){return je(";"),G.createEmptyStatement()}function Une(){var t=Ur();return Zs(),G.createExpressionStatement(t)}function Vne(){var t,e,r;return Sr("if"),je("("),t=Ur(),je(")"),e=Xs(),Qr("else")?(Qe(),r=Xs()):r=null,G.createIfStatement(t,e,r)}function Kne(){var t,e,r;return Sr("do"),r=De.inIteration,De.inIteration=!0,t=Xs(),De.inIteration=r,Sr("while"),je("("),e=Ur(),je(")"),ke(";")&&Qe(),G.createDoWhileStatement(t,e)}function zne(){var t,e,r;return Sr("while"),je("("),t=Ur(),je(")"),r=De.inIteration,De.inIteration=!0,e=Xs(),De.inIteration=r,G.createWhileStatement(t,e)}function Hne(){var t,e,r;return r=fe,t=Qe(),e=nA(),G.markEnd(G.createVariableDeclaration(e,t.value),r)}function Wne(){var t,e,r,n,s,i,o;return t=e=r=null,Sr("for"),je("("),ke(";")?Qe():(Qr("var")||Qr("let")?(De.allowIn=!1,t=Hne(),De.allowIn=!0,t.declarations.length===1&&Qr("in")&&(Qe(),n=t,s=Ur(),t=null)):(De.allowIn=!1,t=Ur(),De.allowIn=!0,Qr("in")&&(zg(t)||Rt({},he.InvalidLHSInForIn),Qe(),n=t,s=Ur(),t=null)),typeof n>"u"&&je(";")),typeof n>"u"&&(ke(";")||(e=Ur()),je(";"),ke(")")||(r=Ur())),je(")"),o=De.inIteration,De.inIteration=!0,i=Xs(),De.inIteration=o,typeof n>"u"?G.createForStatement(t,e,r,i):G.createForInStatement(n,s,i)}function Jne(){var t=null,e;return Sr("continue"),ae.charCodeAt(R)===59?(Qe(),De.inIteration||et({},he.IllegalContinue),G.createContinueStatement(null)):Oh()?(De.inIteration||et({},he.IllegalContinue),G.createContinueStatement(null)):(fe.type===pe.Identifier&&(t=iu(),e="$"+t.name,Object.prototype.hasOwnProperty.call(De.labelSet,e)||et({},he.UnknownLabel,t.name)),Zs(),t===null&&!De.inIteration&&et({},he.IllegalContinue),G.createContinueStatement(t))}function Gne(){var t=null,e;return Sr("break"),ae.charCodeAt(R)===59?(Qe(),De.inIteration||De.inSwitch||et({},he.IllegalBreak),G.createBreakStatement(null)):Oh()?(De.inIteration||De.inSwitch||et({},he.IllegalBreak),G.createBreakStatement(null)):(fe.type===pe.Identifier&&(t=iu(),e="$"+t.name,Object.prototype.hasOwnProperty.call(De.labelSet,e)||et({},he.UnknownLabel,t.name)),Zs(),t===null&&!(De.inIteration||De.inSwitch)&&et({},he.IllegalBreak),G.createBreakStatement(t))}function Zne(){var t=null;return Sr("return"),De.inFunctionBody||Rt({},he.IllegalReturn),ae.charCodeAt(R)===32&&$d(ae.charCodeAt(R+1))?(t=Ur(),Zs(),G.createReturnStatement(t)):Oh()?G.createReturnStatement(null):(ke(";")||!ke("}")&&fe.type!==pe.EOF&&(t=Ur()),Zs(),G.createReturnStatement(t))}function Xne(){var t,e;return kt&&(nu(),Rt({},he.StrictModeWith)),Sr("with"),je("("),t=Ur(),je(")"),e=Xs(),G.createWithStatement(t,e)}function Yne(){var t,e=[],r,n;for(n=fe,Qr("default")?(Qe(),t=null):(Sr("case"),t=Ur()),je(":");R<$t&&!(ke("}")||Qr("default")||Qr("case"));)r=Xs(),e.push(r);return G.markEnd(G.createSwitchCase(t,e),n)}function Qne(){var t,e,r,n,s;if(Sr("switch"),je("("),t=Ur(),je(")"),je("{"),e=[],ke("}"))return Qe(),G.createSwitchStatement(t,e);for(n=De.inSwitch,De.inSwitch=!0,s=!1;R<$t&&!ke("}");)r=Yne(),r.test===null&&(s&&et({},he.MultipleDefaultsInSwitch),s=!0),e.push(r);return De.inSwitch=n,je("}"),G.createSwitchStatement(t,e)}function eie(){var t;return Sr("throw"),Oh()&&et({},he.NewlineAfterThrow),t=Ur(),Zs(),G.createThrowStatement(t)}function tie(){var t,e,r;return r=fe,Sr("catch"),je("("),ke(")")&&Gs(fe),t=iu(),kt&&Pi(t.name)&&Rt({},he.StrictCatchVariable),je(")"),e=Kg(),G.markEnd(G.createCatchClause(t,e),r)}function rie(){var t,e=[],r=null;return Sr("try"),t=Kg(),Qr("catch")&&e.push(tie()),Qr("finally")&&(Qe(),r=Kg()),e.length===0&&!r&&et({},he.NoCatchOrFinally),G.createTryStatement(t,[],e,r)}function nie(){return Sr("debugger"),Zs(),G.createDebuggerStatement()}function Xs(){var t=fe.type,e,r,n,s;if(t===pe.EOF&&Gs(fe),t===pe.Punctuator&&fe.value==="{")return Kg();if(s=fe,t===pe.Punctuator)switch(fe.value){case";":return G.markEnd(Lne(),s);case"(":return G.markEnd(Une(),s);default:break}if(t===pe.Keyword)switch(fe.value){case"break":return G.markEnd(Gne(),s);case"continue":return G.markEnd(Jne(),s);case"debugger":return G.markEnd(nie(),s);case"do":return G.markEnd(Kne(),s);case"for":return G.markEnd(Wne(),s);case"function":return G.markEnd(Ek(),s);case"if":return G.markEnd(Vne(),s);case"return":return G.markEnd(Zne(),s);case"switch":return G.markEnd(Qne(),s);case"throw":return G.markEnd(eie(),s);case"try":return G.markEnd(rie(),s);case"var":return G.markEnd(Mne(),s);case"while":return G.markEnd(zne(),s);case"with":return G.markEnd(Xne(),s);default:break}return e=Ur(),e.type===Se.Syntax.Identifier&&ke(":")?(Qe(),n="$"+e.name,Object.prototype.hasOwnProperty.call(De.labelSet,n)&&et({},he.Redeclaration,"Label",e.name),De.labelSet[n]=!0,r=Xs(),delete De.labelSet[n],G.markEnd(G.createLabeledStatement(e,r),s)):(Zs(),G.markEnd(G.createExpressionStatement(e),s))}function iA(){var t,e=[],r,n,s,i,o,a,c,u;for(u=fe,je("{");R<$t&&!(fe.type!==pe.StringLiteral||(r=fe,t=xh(),e.push(t),t.expression.type!==Se.Syntax.Literal));)n=ae.slice(r.start+1,r.end-1),n==="use strict"?(kt=!0,s&&Rt(s,he.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(i=De.labelSet,o=De.inIteration,a=De.inSwitch,c=De.inFunctionBody,De.labelSet={},De.inIteration=!1,De.inSwitch=!1,De.inFunctionBody=!0;R<$t&&!(ke("}")||(t=xh(),typeof t>"u"));)e.push(t);return je("}"),De.labelSet=i,De.inIteration=o,De.inSwitch=a,De.inFunctionBody=c,G.markEnd(G.createBlockStatement(e),u)}function wk(t){var e,r=[],n,s,i,o,a;if(je("("),!ke(")"))for(i={};R<$t&&(n=fe,e=iu(),o="$"+n.value,kt?(Pi(n.value)&&(s=n,a=he.StrictParamName),Object.prototype.hasOwnProperty.call(i,o)&&(s=n,a=he.StrictParamDupe)):t||(Pi(n.value)?(t=n,a=he.StrictParamName):Ph(n.value)?(t=n,a=he.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,o)&&(t=n,a=he.StrictParamDupe)),r.push(e),i[o]=!0,!ke(")"));)je(",");return je(")"),{params:r,stricted:s,firstRestricted:t,message:a}}function Ek(){var t,e=[],r,n,s,i,o,a,c,u;return u=fe,Sr("function"),n=fe,t=iu(),kt?Pi(n.value)&&Rt(n,he.StrictFunctionName):Pi(n.value)?(o=n,a=he.StrictFunctionName):Ph(n.value)&&(o=n,a=he.StrictReservedWord),i=wk(o),e=i.params,s=i.stricted,o=i.firstRestricted,i.message&&(a=i.message),c=kt,r=iA(),kt&&o&&et(o,a),kt&&s&&Rt(s,a),kt=c,G.markEnd(G.createFunctionDeclaration(t,e,[],r),u)}function iie(){var t,e=null,r,n,s,i,o=[],a,c,u;return u=fe,Sr("function"),ke("(")||(t=fe,e=iu(),kt?Pi(t.value)&&Rt(t,he.StrictFunctionName):Pi(t.value)?(n=t,s=he.StrictFunctionName):Ph(t.value)&&(n=t,s=he.StrictReservedWord)),i=wk(n),o=i.params,r=i.stricted,n=i.firstRestricted,i.message&&(s=i.message),c=kt,a=iA(),kt&&n&&et(n,s),kt&&r&&Rt(r,s),kt=c,G.markEnd(G.createFunctionExpression(e,o,[],a),u)}function xh(){if(fe.type===pe.Keyword)switch(fe.value){case"const":case"let":return qne(fe.value);case"function":return Ek();default:return Xs()}if(fe.type!==pe.EOF)return Xs()}function sie(){for(var t,e=[],r,n,s;R<$t&&(r=fe,!(r.type!==pe.StringLiteral||(t=xh(),e.push(t),t.expression.type!==Se.Syntax.Literal)));)n=ae.slice(r.start+1,r.end-1),n==="use strict"?(kt=!0,s&&Rt(s,he.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(;R<$t&&(t=xh(),!(typeof t>"u"));)e.push(t);return e}function oie(){var t,e;return nu(),rA(),e=fe,kt=!1,t=sie(),G.markEnd(G.createProgram(t),e)}function Sk(){var t,e,r,n=[];for(t=0;t<Z.tokens.length;++t)e=Z.tokens[t],r={type:e.type,value:e.value},Z.range&&(r.range=e.range),Z.loc&&(r.loc=e.loc),n.push(r);Z.tokens=n}function aie(t,e){var r,n,s;r=String,typeof t!="string"&&!(t instanceof String)&&(t=r(t)),G=eA,ae=t,R=0,He=ae.length>0?1:0,nt=0,$t=ae.length,fe=null,De={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Z={},e=e||{},e.tokens=!0,Z.tokens=[],Z.tokenize=!0,Z.openParenToken=-1,Z.openCurlyToken=-1,Z.range=typeof e.range=="boolean"&&e.range,Z.loc=typeof e.loc=="boolean"&&e.loc,typeof e.comment=="boolean"&&e.comment&&(Z.comments=[]),typeof e.tolerant=="boolean"&&e.tolerant&&(Z.errors=[]);try{if(rA(),fe.type===pe.EOF)return Z.tokens;for(n=Qe();fe.type!==pe.EOF;)try{n=Qe()}catch(i){if(n=fe,Z.errors){Z.errors.push(i);break}else throw i}Sk(),s=Z.tokens,typeof Z.comments<"u"&&(s.comments=Z.comments),typeof Z.errors<"u"&&(s.errors=Z.errors)}catch(i){throw i}finally{Z={}}return s}Se.tokenize=aie;function uie(t,e){var r,n;n=String,typeof t!="string"&&!(t instanceof String)&&(t=n(t)),G=eA,ae=t,R=0,He=ae.length>0?1:0,nt=0,$t=ae.length,fe=null,De={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Z={},typeof e<"u"&&(Z.range=typeof e.range=="boolean"&&e.range,Z.loc=typeof e.loc=="boolean"&&e.loc,Z.attachComment=typeof e.attachComment=="boolean"&&e.attachComment,Z.loc&&e.source!==null&&e.source!==void 0&&(Z.source=n(e.source)),typeof e.tokens=="boolean"&&e.tokens&&(Z.tokens=[]),typeof e.comment=="boolean"&&e.comment&&(Z.comments=[]),typeof e.tolerant=="boolean"&&e.tolerant&&(Z.errors=[]),Z.attachComment&&(Z.range=!0,Z.comments=[],Z.bottomRightStack=[],Z.trailingComments=[],Z.leadingComments=[]));try{r=oie(),typeof Z.comments<"u"&&(r.comments=Z.comments),typeof Z.tokens<"u"&&(Sk(),r.tokens=Z.tokens),typeof Z.errors<"u"&&(r.errors=Z.errors)}catch(s){throw s}finally{Z={}}return r}Se.parse=uie;Se.version="1.2.2"});var Dk=v(Hg=>{"use strict";Object.defineProperty(Hg,"__esModule",{value:!0});Hg.slice=void 0;function cie(t,e,r,n){function s(c){return String(c).match(/^[0-9]+$/)?parseInt(c):Number.isFinite(c)?parseInt(c,10):0}if(typeof e=="string")throw new Error("start cannot be a string");if(typeof r=="string")throw new Error("end cannot be a string");if(typeof n=="string")throw new Error("step cannot be a string");var i=t.length;if(n===0)throw new Error("step cannot be zero");if(n=n?s(n):1,e=e<0?i+e:e,r=r<0?i+r:r,e=s(e===0?0:e||(n>0?0:i-1)),r=s(r===0?0:r||(n>0?i:-1)),e=n>0?Math.max(0,e):Math.min(i,e),r=n>0?Math.min(r,i):Math.max(-1,r),n>0&&r<=e)return[];if(n<0&&e<=r)return[];for(var o=[],a=e;a!=r&&!(n<0&&a<=r||n>0&&a>=r);a+=n)o.push(t[a]);return o}Hg.slice=cie});var xk=v((PFe,lie)=>{lie.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"4.3.0",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/estraverse.git"},devDependencies:{"babel-preset-env":"^1.6.1","babel-register":"^6.3.13",chai:"^2.1.1",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.3.0",jshint:"^2.5.6",mocha:"^2.1.0"},license:"BSD-2-Clause",scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers js:babel-register"}}});var Pk=v(Ck=>{(function t(e){"use strict";var r,n,s,i,o,a;function c(b){var w={},D,F;for(D in b)b.hasOwnProperty(D)&&(F=b[D],typeof F=="object"&&F!==null?w[D]=c(F):w[D]=F);return w}function u(b,w){var D,F,C,I;for(F=b.length,C=0;F;)D=F>>>1,I=C+D,w(b[I])?F=D:(C=I+1,F-=D+1);return C}r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},s={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},i={},o={},a={},n={Break:i,Skip:o,Remove:a};function l(b,w){this.parent=b,this.key=w}l.prototype.replace=function(w){this.parent[this.key]=w},l.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function d(b,w,D,F){this.node=b,this.path=w,this.wrap=D,this.ref=F}function p(){}p.prototype.path=function(){var w,D,F,C,I,k;function T(j,L){if(Array.isArray(L))for(F=0,C=L.length;F<C;++F)j.push(L[F]);else j.push(L)}if(!this.__current.path)return null;for(I=[],w=2,D=this.__leavelist.length;w<D;++w)k=this.__leavelist[w],T(I,k.path);return T(I,this.__current.path),I},p.prototype.type=function(){var b=this.current();return b.type||this.__current.wrap},p.prototype.parents=function(){var w,D,F;for(F=[],w=1,D=this.__leavelist.length;w<D;++w)F.push(this.__leavelist[w].node);return F},p.prototype.current=function(){return this.__current.node},p.prototype.__execute=function(w,D){var F,C;return C=void 0,F=this.__current,this.__current=D,this.__state=null,w&&(C=w.call(this,D.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=F,C},p.prototype.notify=function(w){this.__state=w},p.prototype.skip=function(){this.notify(o)},p.prototype.break=function(){this.notify(i)},p.prototype.remove=function(){this.notify(a)},p.prototype.__initialize=function(b,w){this.visitor=w,this.root=b,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,w.fallback==="iteration"?this.__fallback=Object.keys:typeof w.fallback=="function"&&(this.__fallback=w.fallback),this.__keys=s,w.keys&&(this.__keys=Object.assign(Object.create(this.__keys),w.keys))};function f(b){return b==null?!1:typeof b=="object"&&typeof b.type=="string"}function h(b,w){return(b===r.ObjectExpression||b===r.ObjectPattern)&&w==="properties"}p.prototype.traverse=function(w,D){var F,C,I,k,T,j,L,Q,ne,W,ee,ue;for(this.__initialize(w,D),ue={},F=this.__worklist,C=this.__leavelist,F.push(new d(w,null,null,null)),C.push(new d(null,null,null,null));F.length;){if(I=F.pop(),I===ue){if(I=C.pop(),j=this.__execute(D.leave,I),this.__state===i||j===i)return;continue}if(I.node){if(j=this.__execute(D.enter,I),this.__state===i||j===i)return;if(F.push(ue),C.push(I),this.__state===o||j===o)continue;if(k=I.node,T=k.type||I.wrap,W=this.__keys[T],!W)if(this.__fallback)W=this.__fallback(k);else throw new Error("Unknown node type "+T+".");for(Q=W.length;(Q-=1)>=0;)if(L=W[Q],ee=k[L],!!ee)if(Array.isArray(ee)){for(ne=ee.length;(ne-=1)>=0;)if(ee[ne]){if(h(T,W[Q]))I=new d(ee[ne],[L,ne],"Property",null);else if(f(ee[ne]))I=new d(ee[ne],[L,ne],null,null);else continue;F.push(I)}}else f(ee)&&F.push(new d(ee,L,null,null))}}},p.prototype.replace=function(w,D){var F,C,I,k,T,j,L,Q,ne,W,ee,ue,U;function q(N){var Y,oe,M,V;if(N.ref.remove()){for(oe=N.ref.key,V=N.ref.parent,Y=F.length;Y--;)if(M=F[Y],M.ref&&M.ref.parent===V){if(M.ref.key<oe)break;--M.ref.key}}}for(this.__initialize(w,D),ee={},F=this.__worklist,C=this.__leavelist,ue={root:w},j=new d(w,null,null,new l(ue,"root")),F.push(j),C.push(j);F.length;){if(j=F.pop(),j===ee){if(j=C.pop(),T=this.__execute(D.leave,j),T!==void 0&&T!==i&&T!==o&&T!==a&&j.ref.replace(T),(this.__state===a||T===a)&&q(j),this.__state===i||T===i)return ue.root;continue}if(T=this.__execute(D.enter,j),T!==void 0&&T!==i&&T!==o&&T!==a&&(j.ref.replace(T),j.node=T),(this.__state===a||T===a)&&(q(j),j.node=null),this.__state===i||T===i)return ue.root;if(I=j.node,!!I&&(F.push(ee),C.push(j),!(this.__state===o||T===o))){if(k=I.type||j.wrap,ne=this.__keys[k],!ne)if(this.__fallback)ne=this.__fallback(I);else throw new Error("Unknown node type "+k+".");for(L=ne.length;(L-=1)>=0;)if(U=ne[L],W=I[U],!!W)if(Array.isArray(W)){for(Q=W.length;(Q-=1)>=0;)if(W[Q]){if(h(k,ne[L]))j=new d(W[Q],[U,Q],"Property",new l(W,Q));else if(f(W[Q]))j=new d(W[Q],[U,Q],null,new l(W,Q));else continue;F.push(j)}}else f(W)&&F.push(new d(W,U,null,new l(I,U)))}}return ue.root};function y(b,w){var D=new p;return D.traverse(b,w)}function g(b,w){var D=new p;return D.replace(b,w)}function A(b,w){var D;return D=u(w,function(C){return C.range[0]>b.range[0]}),b.extendedRange=[b.range[0],b.range[1]],D!==w.length&&(b.extendedRange[1]=w[D].range[0]),D-=1,D>=0&&(b.extendedRange[0]=w[D].range[1]),b}function x(b,w,D){var F=[],C,I,k,T;if(!b.range)throw new Error("attachComments needs range information");if(!D.length){if(w.length){for(k=0,I=w.length;k<I;k+=1)C=c(w[k]),C.extendedRange=[0,b.range[0]],F.push(C);b.leadingComments=F}return b}for(k=0,I=w.length;k<I;k+=1)F.push(A(c(w[k]),D));return T=0,y(b,{enter:function(j){for(var L;T<F.length&&(L=F[T],!(L.extendedRange[1]>j.range[0]));)L.extendedRange[1]===j.range[0]?(j.leadingComments||(j.leadingComments=[]),j.leadingComments.push(L),F.splice(T,1)):T+=1;if(T===F.length)return n.Break;if(F[T].extendedRange[0]>j.range[1])return n.Skip}}),T=0,y(b,{leave:function(j){for(var L;T<F.length&&(L=F[T],!(j.range[1]<L.extendedRange[0]));)j.range[1]===L.extendedRange[0]?(j.trailingComments||(j.trailingComments=[]),j.trailingComments.push(L),F.splice(T,1)):T+=1;if(T===F.length)return n.Break;if(F[T].extendedRange[0]>j.range[1])return n.Skip}}),b}return e.version=xk().version,e.Syntax=r,e.traverse=y,e.replace=g,e.attachComments=x,e.VisitorKeys=s,e.VisitorOption=n,e.Controller=p,e.cloneEnvironment=function(){return t({})},e})(Ck)});var Fk=v((FFe,Ok)=>{(function(){"use strict";function t(o){if(o==null)return!1;switch(o.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function e(o){if(o==null)return!1;switch(o.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function r(o){if(o==null)return!1;switch(o.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function n(o){return r(o)||o!=null&&o.type==="FunctionDeclaration"}function s(o){switch(o.type){case"IfStatement":return o.alternate!=null?o.alternate:o.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return o.body}return null}function i(o){var a;if(o.type!=="IfStatement"||o.alternate==null)return!1;a=o.consequent;do{if(a.type==="IfStatement"&&a.alternate==null)return!0;a=s(a)}while(a);return!1}Ok.exports={isExpression:t,isStatement:r,isIterationStatement:e,isSourceElement:n,isProblematicIfStatement:i,trailingStatement:s}})()});var sA=v((TFe,Tk)=>{(function(){"use strict";var t,e,r,n,s,i;e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function o(g){return 48<=g&&g<=57}function a(g){return 48<=g&&g<=57||97<=g&&g<=102||65<=g&&g<=70}function c(g){return g>=48&&g<=55}r=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function u(g){return g===32||g===9||g===11||g===12||g===160||g>=5760&&r.indexOf(g)>=0}function l(g){return g===10||g===13||g===8232||g===8233}function d(g){if(g<=65535)return String.fromCharCode(g);var A=String.fromCharCode(Math.floor((g-65536)/1024)+55296),x=String.fromCharCode((g-65536)%1024+56320);return A+x}for(n=new Array(128),i=0;i<128;++i)n[i]=i>=97&&i<=122||i>=65&&i<=90||i===36||i===95;for(s=new Array(128),i=0;i<128;++i)s[i]=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i===36||i===95;function p(g){return g<128?n[g]:e.NonAsciiIdentifierStart.test(d(g))}function f(g){return g<128?s[g]:e.NonAsciiIdentifierPart.test(d(g))}function h(g){return g<128?n[g]:t.NonAsciiIdentifierStart.test(d(g))}function y(g){return g<128?s[g]:t.NonAsciiIdentifierPart.test(d(g))}Tk.exports={isDecimalDigit:o,isHexDigit:a,isOctalDigit:c,isWhiteSpace:u,isLineTerminator:l,isIdentifierStartES5:p,isIdentifierPartES5:f,isIdentifierStartES6:h,isIdentifierPartES6:y}})()});var Bk=v((IFe,Ik)=>{(function(){"use strict";var t=sA();function e(p){switch(p){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function r(p,f){return!f&&p==="yield"?!1:n(p,f)}function n(p,f){if(f&&e(p))return!0;switch(p.length){case 2:return p==="if"||p==="in"||p==="do";case 3:return p==="var"||p==="for"||p==="new"||p==="try";case 4:return p==="this"||p==="else"||p==="case"||p==="void"||p==="with"||p==="enum";case 5:return p==="while"||p==="break"||p==="catch"||p==="throw"||p==="const"||p==="yield"||p==="class"||p==="super";case 6:return p==="return"||p==="typeof"||p==="delete"||p==="switch"||p==="export"||p==="import";case 7:return p==="default"||p==="finally"||p==="extends";case 8:return p==="function"||p==="continue"||p==="debugger";case 10:return p==="instanceof";default:return!1}}function s(p,f){return p==="null"||p==="true"||p==="false"||r(p,f)}function i(p,f){return p==="null"||p==="true"||p==="false"||n(p,f)}function o(p){return p==="eval"||p==="arguments"}function a(p){var f,h,y;if(p.length===0||(y=p.charCodeAt(0),!t.isIdentifierStartES5(y)))return!1;for(f=1,h=p.length;f<h;++f)if(y=p.charCodeAt(f),!t.isIdentifierPartES5(y))return!1;return!0}function c(p,f){return(p-55296)*1024+(f-56320)+65536}function u(p){var f,h,y,g,A;if(p.length===0)return!1;for(A=t.isIdentifierStartES6,f=0,h=p.length;f<h;++f){if(y=p.charCodeAt(f),55296<=y&&y<=56319){if(++f,f>=h||(g=p.charCodeAt(f),!(56320<=g&&g<=57343)))return!1;y=c(y,g)}if(!A(y))return!1;A=t.isIdentifierPartES6}return!0}function l(p,f){return a(p)&&!s(p,f)}function d(p,f){return u(p)&&!i(p,f)}Ik.exports={isKeywordES5:r,isKeywordES6:n,isReservedWordES5:s,isReservedWordES6:i,isRestrictedWord:o,isIdentifierNameES5:a,isIdentifierNameES6:u,isIdentifierES5:l,isIdentifierES6:d}})()});var kk=v(Wg=>{(function(){"use strict";Wg.ast=Fk(),Wg.code=sA(),Wg.keyword=Bk()})()});var $k=v(oA=>{var Rk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");oA.encode=function(t){if(0<=t&&t<Rk.length)return Rk[t];throw new TypeError("Must be between 0 and 63: "+t)};oA.decode=function(t){var e=65,r=90,n=97,s=122,i=48,o=57,a=43,c=47,u=26,l=52;return e<=t&&t<=r?t-e:n<=t&&t<=s?t-n+u:i<=t&&t<=o?t-i+l:t==a?62:t==c?63:-1}});var cA=v(uA=>{var jk=$k(),aA=5,Nk=1<<aA,Mk=Nk-1,qk=Nk;function die(t){return t<0?(-t<<1)+1:(t<<1)+0}function fie(t){var e=(t&1)===1,r=t>>1;return e?-r:r}uA.encode=function(e){var r="",n,s=die(e);do n=s&Mk,s>>>=aA,s>0&&(n|=qk),r+=jk.encode(n);while(s>0);return r};uA.decode=function(e,r,n){var s=e.length,i=0,o=0,a,c;do{if(r>=s)throw new Error("Expected more digits in base 64 VLQ value.");if(c=jk.decode(e.charCodeAt(r++)),c===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(c&qk),c&=Mk,i=i+(c<<o),o+=aA}while(a);n.value=fie(i),n.rest=r}});var Md=v(dn=>{function pie(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}dn.getArg=pie;var Lk=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,hie=/^data:.+\,.+$/;function Fh(t){var e=t.match(Lk);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}dn.urlParse=Fh;function jd(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}dn.urlGenerate=jd;function lA(t){var e=t,r=Fh(t);if(r){if(!r.path)return t;e=r.path}for(var n=dn.isAbsolute(e),s=e.split(/\/+/),i,o=0,a=s.length-1;a>=0;a--)i=s[a],i==="."?s.splice(a,1):i===".."?o++:o>0&&(i===""?(s.splice(a+1,o),o=0):(s.splice(a,2),o--));return e=s.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,jd(r)):e}dn.normalize=lA;function Uk(t,e){t===""&&(t="."),e===""&&(e=".");var r=Fh(e),n=Fh(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),jd(r);if(r||e.match(hie))return e;if(n&&!n.host&&!n.path)return n.host=e,jd(n);var s=e.charAt(0)==="/"?e:lA(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=s,jd(n)):s}dn.join=Uk;dn.isAbsolute=function(t){return t.charAt(0)==="/"||Lk.test(t)};function mie(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}dn.relative=mie;var Vk=function(){var t=Object.create(null);return!("__proto__"in t)}();function Kk(t){return t}function yie(t){return zk(t)?"$"+t:t}dn.toSetString=Vk?Kk:yie;function gie(t){return zk(t)?t.slice(1):t}dn.fromSetString=Vk?Kk:gie;function zk(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function vie(t,e,r){var n=Nd(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:Nd(t.name,e.name)}dn.compareByOriginalPositions=vie;function bie(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=Nd(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:Nd(t.name,e.name)}dn.compareByGeneratedPositionsDeflated=bie;function Nd(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function _ie(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=Nd(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Nd(t.name,e.name)}dn.compareByGeneratedPositionsInflated=_ie;function wie(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}dn.parseSourceMapInput=wie;function Eie(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=Fh(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var s=n.path.lastIndexOf("/");s>=0&&(n.path=n.path.substring(0,s+1))}e=Uk(jd(n),e)}return lA(e)}dn.computeSourceURL=Eie});var pA=v(Hk=>{var dA=Md(),fA=Object.prototype.hasOwnProperty,Tc=typeof Map<"u";function Yo(){this._array=[],this._set=Tc?new Map:Object.create(null)}Yo.fromArray=function(e,r){for(var n=new Yo,s=0,i=e.length;s<i;s++)n.add(e[s],r);return n};Yo.prototype.size=function(){return Tc?this._set.size:Object.getOwnPropertyNames(this._set).length};Yo.prototype.add=function(e,r){var n=Tc?e:dA.toSetString(e),s=Tc?this.has(e):fA.call(this._set,n),i=this._array.length;(!s||r)&&this._array.push(e),s||(Tc?this._set.set(e,i):this._set[n]=i)};Yo.prototype.has=function(e){if(Tc)return this._set.has(e);var r=dA.toSetString(e);return fA.call(this._set,r)};Yo.prototype.indexOf=function(e){if(Tc){var r=this._set.get(e);if(r>=0)return r}else{var n=dA.toSetString(e);if(fA.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};Yo.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};Yo.prototype.toArray=function(){return this._array.slice()};Hk.ArraySet=Yo});var Gk=v(Jk=>{var Wk=Md();function Sie(t,e){var r=t.generatedLine,n=e.generatedLine,s=t.generatedColumn,i=e.generatedColumn;return n>r||n==r&&i>=s||Wk.compareByGeneratedPositionsInflated(t,e)<=0}function Jg(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}Jg.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};Jg.prototype.add=function(e){Sie(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};Jg.prototype.toArray=function(){return this._sorted||(this._array.sort(Wk.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Jk.MappingList=Jg});var hA=v(Zk=>{var Th=cA(),Ar=Md(),Gg=pA().ArraySet,Aie=Gk().MappingList;function Oi(t){t||(t={}),this._file=Ar.getArg(t,"file",null),this._sourceRoot=Ar.getArg(t,"sourceRoot",null),this._skipValidation=Ar.getArg(t,"skipValidation",!1),this._sources=new Gg,this._names=new Gg,this._mappings=new Aie,this._sourcesContents=null}Oi.prototype._version=3;Oi.fromSourceMap=function(e){var r=e.sourceRoot,n=new Oi({file:e.file,sourceRoot:r});return e.eachMapping(function(s){var i={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(i.source=s.source,r!=null&&(i.source=Ar.relative(r,i.source)),i.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(i.name=s.name)),n.addMapping(i)}),e.sources.forEach(function(s){var i=s;r!==null&&(i=Ar.relative(r,s)),n._sources.has(i)||n._sources.add(i);var o=e.sourceContentFor(s);o!=null&&n.setSourceContent(s,o)}),n};Oi.prototype.addMapping=function(e){var r=Ar.getArg(e,"generated"),n=Ar.getArg(e,"original",null),s=Ar.getArg(e,"source",null),i=Ar.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,s,i),s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:s,name:i})};Oi.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=Ar.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Ar.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Ar.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Oi.prototype.applySourceMap=function(e,r,n){var s=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=e.file}var i=this._sourceRoot;i!=null&&(s=Ar.relative(i,s));var o=new Gg,a=new Gg;this._mappings.unsortedForEach(function(c){if(c.source===s&&c.originalLine!=null){var u=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});u.source!=null&&(c.source=u.source,n!=null&&(c.source=Ar.join(n,c.source)),i!=null&&(c.source=Ar.relative(i,c.source)),c.originalLine=u.line,c.originalColumn=u.column,u.name!=null&&(c.name=u.name))}var l=c.source;l!=null&&!o.has(l)&&o.add(l);var d=c.name;d!=null&&!a.has(d)&&a.add(d)},this),this._sources=o,this._names=a,e.sources.forEach(function(c){var u=e.sourceContentFor(c);u!=null&&(n!=null&&(c=Ar.join(n,c)),i!=null&&(c=Ar.relative(i,c)),this.setSourceContent(c,u))},this)};Oi.prototype._validateMapping=function(e,r,n,s){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!s)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:s}))}};Oi.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,s=0,i=0,o=0,a="",c,u,l,d,p=this._mappings.toArray(),f=0,h=p.length;f<h;f++){if(u=p[f],c="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)c+=";",r++;else if(f>0){if(!Ar.compareByGeneratedPositionsInflated(u,p[f-1]))continue;c+=","}c+=Th.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(d=this._sources.indexOf(u.source),c+=Th.encode(d-o),o=d,c+=Th.encode(u.originalLine-1-s),s=u.originalLine-1,c+=Th.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(l=this._names.indexOf(u.name),c+=Th.encode(l-i),i=l)),a+=c}return a};Oi.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Ar.relative(r,n));var s=Ar.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)};Oi.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Oi.prototype.toString=function(){return JSON.stringify(this.toJSON())};Zk.SourceMapGenerator=Oi});var Xk=v(Ic=>{Ic.GREATEST_LOWER_BOUND=1;Ic.LEAST_UPPER_BOUND=2;function mA(t,e,r,n,s,i){var o=Math.floor((e-t)/2)+t,a=s(r,n[o],!0);return a===0?o:a>0?e-o>1?mA(o,e,r,n,s,i):i==Ic.LEAST_UPPER_BOUND?e<n.length?e:-1:o:o-t>1?mA(t,o,r,n,s,i):i==Ic.LEAST_UPPER_BOUND?o:t<0?-1:t}Ic.search=function(e,r,n,s){if(r.length===0)return-1;var i=mA(-1,r.length,e,r,n,s||Ic.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&n(r[i],r[i-1],!0)===0;)--i;return i}});var Qk=v(Yk=>{function yA(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Die(t,e){return Math.round(t+Math.random()*(e-t))}function gA(t,e,r,n){if(r<n){var s=Die(r,n),i=r-1;yA(t,s,n);for(var o=t[n],a=r;a<n;a++)e(t[a],o)<=0&&(i+=1,yA(t,i,a));yA(t,i+1,a);var c=i+1;gA(t,e,r,c-1),gA(t,e,c+1,n)}}Yk.quickSort=function(t,e){gA(t,e,0,t.length-1)}});var t6=v(Zg=>{var _e=Md(),vA=Xk(),qd=pA().ArraySet,xie=cA(),Ih=Qk().quickSort;function Jt(t,e){var r=t;return typeof t=="string"&&(r=_e.parseSourceMapInput(t)),r.sections!=null?new ls(r,e):new en(r,e)}Jt.fromSourceMap=function(t,e){return en.fromSourceMap(t,e)};Jt.prototype._version=3;Jt.prototype.__generatedMappings=null;Object.defineProperty(Jt.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Jt.prototype.__originalMappings=null;Object.defineProperty(Jt.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Jt.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};Jt.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};Jt.GENERATED_ORDER=1;Jt.ORIGINAL_ORDER=2;Jt.GREATEST_LOWER_BOUND=1;Jt.LEAST_UPPER_BOUND=2;Jt.prototype.eachMapping=function(e,r,n){var s=r||null,i=n||Jt.GENERATED_ORDER,o;switch(i){case Jt.GENERATED_ORDER:o=this._generatedMappings;break;case Jt.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map(function(c){var u=c.source===null?null:this._sources.at(c.source);return u=_e.computeSourceURL(a,u,this._sourceMapURL),{source:u,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,s)};Jt.prototype.allGeneratedPositionsFor=function(e){var r=_e.getArg(e,"line"),n={source:_e.getArg(e,"source"),originalLine:r,originalColumn:_e.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var s=[],i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",_e.compareByOriginalPositions,vA.LEAST_UPPER_BOUND);if(i>=0){var o=this._originalMappings[i];if(e.column===void 0)for(var a=o.originalLine;o&&o.originalLine===a;)s.push({line:_e.getArg(o,"generatedLine",null),column:_e.getArg(o,"generatedColumn",null),lastColumn:_e.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++i];else for(var c=o.originalColumn;o&&o.originalLine===r&&o.originalColumn==c;)s.push({line:_e.getArg(o,"generatedLine",null),column:_e.getArg(o,"generatedColumn",null),lastColumn:_e.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++i]}return s};Zg.SourceMapConsumer=Jt;function en(t,e){var r=t;typeof t=="string"&&(r=_e.parseSourceMapInput(t));var n=_e.getArg(r,"version"),s=_e.getArg(r,"sources"),i=_e.getArg(r,"names",[]),o=_e.getArg(r,"sourceRoot",null),a=_e.getArg(r,"sourcesContent",null),c=_e.getArg(r,"mappings"),u=_e.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);o&&(o=_e.normalize(o)),s=s.map(String).map(_e.normalize).map(function(l){return o&&_e.isAbsolute(o)&&_e.isAbsolute(l)?_e.relative(o,l):l}),this._names=qd.fromArray(i.map(String),!0),this._sources=qd.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(l){return _e.computeSourceURL(o,l,e)}),this.sourceRoot=o,this.sourcesContent=a,this._mappings=c,this._sourceMapURL=e,this.file=u}en.prototype=Object.create(Jt.prototype);en.prototype.consumer=Jt;en.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=_e.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};en.fromSourceMap=function(e,r){var n=Object.create(en.prototype),s=n._names=qd.fromArray(e._names.toArray(),!0),i=n._sources=qd.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(f){return _e.computeSourceURL(n.sourceRoot,f,r)});for(var o=e._mappings.toArray().slice(),a=n.__generatedMappings=[],c=n.__originalMappings=[],u=0,l=o.length;u<l;u++){var d=o[u],p=new e6;p.generatedLine=d.generatedLine,p.generatedColumn=d.generatedColumn,d.source&&(p.source=i.indexOf(d.source),p.originalLine=d.originalLine,p.originalColumn=d.originalColumn,d.name&&(p.name=s.indexOf(d.name)),c.push(p)),a.push(p)}return Ih(n.__originalMappings,_e.compareByOriginalPositions),n};en.prototype._version=3;Object.defineProperty(en.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function e6(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}en.prototype._parseMappings=function(e,r){for(var n=1,s=0,i=0,o=0,a=0,c=0,u=e.length,l=0,d={},p={},f=[],h=[],y,g,A,x,b;l<u;)if(e.charAt(l)===";")n++,l++,s=0;else if(e.charAt(l)===",")l++;else{for(y=new e6,y.generatedLine=n,x=l;x<u&&!this._charIsMappingSeparator(e,x);x++);if(g=e.slice(l,x),A=d[g],A)l+=g.length;else{for(A=[];l<x;)xie.decode(e,l,p),b=p.value,l=p.rest,A.push(b);if(A.length===2)throw new Error("Found a source, but no line and column");if(A.length===3)throw new Error("Found a source and line, but no column");d[g]=A}y.generatedColumn=s+A[0],s=y.generatedColumn,A.length>1&&(y.source=a+A[1],a+=A[1],y.originalLine=i+A[2],i=y.originalLine,y.originalLine+=1,y.originalColumn=o+A[3],o=y.originalColumn,A.length>4&&(y.name=c+A[4],c+=A[4])),h.push(y),typeof y.originalLine=="number"&&f.push(y)}Ih(h,_e.compareByGeneratedPositionsDeflated),this.__generatedMappings=h,Ih(f,_e.compareByOriginalPositions),this.__originalMappings=f};en.prototype._findMapping=function(e,r,n,s,i,o){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[s]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[s]);return vA.search(e,r,i,o)};en.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};en.prototype.originalPositionFor=function(e){var r={generatedLine:_e.getArg(e,"line"),generatedColumn:_e.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",_e.compareByGeneratedPositionsDeflated,_e.getArg(e,"bias",Jt.GREATEST_LOWER_BOUND));if(n>=0){var s=this._generatedMappings[n];if(s.generatedLine===r.generatedLine){var i=_e.getArg(s,"source",null);i!==null&&(i=this._sources.at(i),i=_e.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var o=_e.getArg(s,"name",null);return o!==null&&(o=this._names.at(o)),{source:i,line:_e.getArg(s,"originalLine",null),column:_e.getArg(s,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}};en.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};en.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var s=e;this.sourceRoot!=null&&(s=_e.relative(this.sourceRoot,s));var i;if(this.sourceRoot!=null&&(i=_e.urlParse(this.sourceRoot))){var o=s.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!i.path||i.path=="/")&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(r)return null;throw new Error('"'+s+'" is not in the SourceMap.')};en.prototype.generatedPositionFor=function(e){var r=_e.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:_e.getArg(e,"line"),originalColumn:_e.getArg(e,"column")},s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",_e.compareByOriginalPositions,_e.getArg(e,"bias",Jt.GREATEST_LOWER_BOUND));if(s>=0){var i=this._originalMappings[s];if(i.source===n.source)return{line:_e.getArg(i,"generatedLine",null),column:_e.getArg(i,"generatedColumn",null),lastColumn:_e.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};Zg.BasicSourceMapConsumer=en;function ls(t,e){var r=t;typeof t=="string"&&(r=_e.parseSourceMapInput(t));var n=_e.getArg(r,"version"),s=_e.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new qd,this._names=new qd;var i={line:-1,column:0};this._sections=s.map(function(o){if(o.url)throw new Error("Support for url field in sections not implemented.");var a=_e.getArg(o,"offset"),c=_e.getArg(a,"line"),u=_e.getArg(a,"column");if(c<i.line||c===i.line&&u<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=a,{generatedOffset:{generatedLine:c+1,generatedColumn:u+1},consumer:new Jt(_e.getArg(o,"map"),e)}})}ls.prototype=Object.create(Jt.prototype);ls.prototype.constructor=Jt;ls.prototype._version=3;Object.defineProperty(ls.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});ls.prototype.originalPositionFor=function(e){var r={generatedLine:_e.getArg(e,"line"),generatedColumn:_e.getArg(e,"column")},n=vA.search(r,this._sections,function(i,o){var a=i.generatedLine-o.generatedOffset.generatedLine;return a||i.generatedColumn-o.generatedOffset.generatedColumn}),s=this._sections[n];return s?s.consumer.originalPositionFor({line:r.generatedLine-(s.generatedOffset.generatedLine-1),column:r.generatedColumn-(s.generatedOffset.generatedLine===r.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};ls.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};ls.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var s=this._sections[n],i=s.consumer.sourceContentFor(e,!0);if(i)return i}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};ls.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(_e.getArg(e,"source"))!==-1){var s=n.consumer.generatedPositionFor(e);if(s){var i={line:s.line+(n.generatedOffset.generatedLine-1),column:s.column+(n.generatedOffset.generatedLine===s.line?n.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};ls.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var s=this._sections[n],i=s.consumer._generatedMappings,o=0;o<i.length;o++){var a=i[o],c=s.consumer._sources.at(a.source);c=_e.computeSourceURL(s.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;a.name&&(u=s.consumer._names.at(a.name),this._names.add(u),u=this._names.indexOf(u));var l={source:c,generatedLine:a.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(s.generatedOffset.generatedLine===a.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:u};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}Ih(this.__generatedMappings,_e.compareByGeneratedPositionsDeflated),Ih(this.__originalMappings,_e.compareByOriginalPositions)};Zg.IndexedSourceMapConsumer=ls});var n6=v(r6=>{var Cie=hA().SourceMapGenerator,Xg=Md(),Pie=/(\r?\n)/,Oie=10,Ld="$$$isSourceNode$$$";function ri(t,e,r,n,s){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=s??null,this[Ld]=!0,n!=null&&this.add(n)}ri.fromStringWithSourceMap=function(e,r,n){var s=new ri,i=e.split(Pie),o=0,a=function(){var p=h(),f=h()||"";return p+f;function h(){return o<i.length?i[o++]:void 0}},c=1,u=0,l=null;return r.eachMapping(function(p){if(l!==null)if(c<p.generatedLine)d(l,a()),c++,u=0;else{var f=i[o]||"",h=f.substr(0,p.generatedColumn-u);i[o]=f.substr(p.generatedColumn-u),u=p.generatedColumn,d(l,h),l=p;return}for(;c<p.generatedLine;)s.add(a()),c++;if(u<p.generatedColumn){var f=i[o]||"";s.add(f.substr(0,p.generatedColumn)),i[o]=f.substr(p.generatedColumn),u=p.generatedColumn}l=p},this),o<i.length&&(l&&d(l,a()),s.add(i.splice(o).join(""))),r.sources.forEach(function(p){var f=r.sourceContentFor(p);f!=null&&(n!=null&&(p=Xg.join(n,p)),s.setSourceContent(p,f))}),s;function d(p,f){if(p===null||p.source===void 0)s.add(f);else{var h=n?Xg.join(n,p.source):p.source;s.add(new ri(p.originalLine,p.originalColumn,h,f,p.name))}}};ri.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Ld]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};ri.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Ld]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};ri.prototype.walk=function(e){for(var r,n=0,s=this.children.length;n<s;n++)r=this.children[n],r[Ld]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};ri.prototype.join=function(e){var r,n,s=this.children.length;if(s>0){for(r=[],n=0;n<s-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};ri.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[Ld]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};ri.prototype.setSourceContent=function(e,r){this.sourceContents[Xg.toSetString(e)]=r};ri.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][Ld]&&this.children[r].walkSourceContents(e);for(var s=Object.keys(this.sourceContents),r=0,n=s.length;r<n;r++)e(Xg.fromSetString(s[r]),this.sourceContents[s[r]])};ri.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};ri.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new Cie(e),s=!1,i=null,o=null,a=null,c=null;return this.walk(function(u,l){r.code+=u,l.source!==null&&l.line!==null&&l.column!==null?((i!==l.source||o!==l.line||a!==l.column||c!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),i=l.source,o=l.line,a=l.column,c=l.name,s=!0):s&&(n.addMapping({generated:{line:r.line,column:r.column}}),i=null,s=!1);for(var d=0,p=u.length;d<p;d++)u.charCodeAt(d)===Oie?(r.line++,r.column=0,d+1===p?(i=null,s=!1):s&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(u,l){n.setSourceContent(u,l)}),{code:r.code,map:n}};r6.SourceNode=ri});var i6=v(Yg=>{Yg.SourceMapGenerator=hA().SourceMapGenerator;Yg.SourceMapConsumer=t6().SourceMapConsumer;Yg.SourceNode=n6().SourceNode});var s6=v((zFe,Fie)=>{Fie.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version:"1.14.3",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:{estraverse:"^4.2.0",esutils:"^2.0.2",esprima:"^4.0.1",optionator:"^0.8.1"},optionalDependencies:{"source-map":"~0.6.1"},devDependencies:{acorn:"^7.1.0",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^3.5.0","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"}}});var o6=v(Qo=>{(function(){"use strict";var t,e,r,n,s,i,o,a,c,u,l,d,p,f,h,y,g,A,x,b,w,D,F,C,I,k;s=Pk(),i=kk(),t=s.Syntax;function T(m){return Pt.Expression.hasOwnProperty(m.type)}function j(m){return Pt.Statement.hasOwnProperty(m.type)}e={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,Call:16,New:17,TaggedTemplate:18,Member:19,Primary:20},r={"||":e.LogicalOR,"&&":e.LogicalAND,"|":e.BitwiseOR,"^":e.BitwiseXOR,"&":e.BitwiseAND,"==":e.Equality,"!=":e.Equality,"===":e.Equality,"!==":e.Equality,is:e.Equality,isnt:e.Equality,"<":e.Relational,">":e.Relational,"<=":e.Relational,">=":e.Relational,in:e.Relational,instanceof:e.Relational,"<<":e.BitwiseSHIFT,">>":e.BitwiseSHIFT,">>>":e.BitwiseSHIFT,"+":e.Additive,"-":e.Additive,"*":e.Multiplicative,"%":e.Multiplicative,"/":e.Multiplicative,"**":e.Exponentiation};var L=1,Q=2,ne=4,W=8,ee=16,ue=32,U=Q|ne,q=L|Q,N=L|Q|ne,Y=L,oe=ne,M=L|ne,V=L,se=L|ue,de=0,ye=L|ee,we=L|W;function Oe(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function xe(m,E){var _="";for(E|=0;E>0;E>>>=1,m+=m)E&1&&(_+=m);return _}function Me(m){return/[\r\n]/g.test(m)}function Re(m){var E=m.length;return E&&i.code.isLineTerminator(m.charCodeAt(E-1))}function _t(m,E){var _;for(_ in E)E.hasOwnProperty(_)&&(m[_]=E[_]);return m}function pt(m,E){var _,S;function P(H){return typeof H=="object"&&H instanceof Object&&!(H instanceof RegExp)}for(_ in E)E.hasOwnProperty(_)&&(S=E[_],P(S)?P(m[_])?pt(m[_],S):m[_]=pt({},S):m[_]=S);return m}function on(m){var E,_,S,P,H;if(m!==m)throw new Error("Numeric literal whose value is NaN");if(m<0||m===0&&1/m<0)throw new Error("Numeric literal whose value is negative");if(m===1/0)return c?"null":u?"1e400":"1e+400";if(E=""+m,!u||E.length<3)return E;for(_=E.indexOf("."),!c&&E.charCodeAt(0)===48&&_===1&&(_=0,E=E.slice(1)),S=E,E=E.replace("e+","e"),P=0,(H=S.indexOf("e"))>0&&(P=+S.slice(H+1),S=S.slice(0,H)),_>=0&&(P-=S.length-_-1,S=+(S.slice(0,_)+S.slice(_+1))+""),H=0;S.charCodeAt(S.length+H-1)===48;)--H;return H!==0&&(P-=H,S=S.slice(0,H)),P!==0&&(S+="e"+P),(S.length<E.length||l&&m>1e12&&Math.floor(m)===m&&(S="0x"+m.toString(16)).length<E.length)&&+S===m&&(E=S),E}function hr(m,E){return(m&-2)===8232?(E?"u":"\\u")+(m===8232?"2028":"2029"):m===10||m===13?(E?"":"\\")+(m===10?"n":"r"):String.fromCharCode(m)}function Es(m){var E,_,S,P,H,X,te,me;if(_=m.toString(),m.source){if(E=_.match(/\/([^/]*)$/),!E)return _;for(S=E[1],_="",te=!1,me=!1,P=0,H=m.source.length;P<H;++P)X=m.source.charCodeAt(P),me?(_+=hr(X,me),me=!1):(te?X===93&&(te=!1):X===47?_+="\\":X===91&&(te=!0),_+=hr(X,me),me=X===92);return"/"+_+"/"+S}return _}function Ki(m,E){var _;return m===8?"\\b":m===12?"\\f":m===9?"\\t":(_=m.toString(16).toUpperCase(),c||m>255?"\\u"+"0000".slice(_.length)+_:m===0&&!i.code.isDecimalDigit(E)?"\\0":m===11?"\\x0B":"\\x"+"00".slice(_.length)+_)}function vo(m){if(m===92)return"\\\\";if(m===10)return"\\n";if(m===13)return"\\r";if(m===8232)return"\\u2028";if(m===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function mr(m){var E,_,S,P;for(P=d==="double"?'"':"'",E=0,_=m.length;E<_;++E)if(S=m.charCodeAt(E),S===39){P='"';break}else if(S===34){P="'";break}else S===92&&++E;return P+m+P}function On(m){var E="",_,S,P,H=0,X=0,te,me;for(_=0,S=m.length;_<S;++_){if(P=m.charCodeAt(_),P===39)++H;else if(P===34)++X;else if(P===47&&c)E+="\\";else if(i.code.isLineTerminator(P)||P===92){E+=vo(P);continue}else if(!i.code.isIdentifierPartES5(P)&&(c&&P<32||!c&&!p&&(P<32||P>126))){E+=Ki(P,m.charCodeAt(_+1));continue}E+=String.fromCharCode(P)}if(te=!(d==="double"||d==="auto"&&X<H),me=te?"'":'"',!(te?H:X))return me+E+me;for(m=E,E=me,_=0,S=m.length;_<S;++_)P=m.charCodeAt(_),(P===39&&te||P===34&&!te)&&(E+="\\"),E+=String.fromCharCode(P);return E+me}function Ea(m){var E,_,S,P="";for(E=0,_=m.length;E<_;++E)S=m[E],P+=Array.isArray(S)?Ea(S):S;return P}function ht(m,E){if(!D)return Array.isArray(m)?Ea(m):m;if(E==null){if(m instanceof n)return m;E={}}return E.loc==null?new n(null,null,D,m,E.name||null):new n(E.loc.start.line,E.loc.start.column,D===!0?E.loc.source||null:D,m,E.name||null)}function er(){return h||" "}function Be(m,E){var _,S,P,H;return _=ht(m).toString(),_.length===0?[E]:(S=ht(E).toString(),S.length===0?[m]:(P=_.charCodeAt(_.length-1),H=S.charCodeAt(0),(P===43||P===45)&&P===H||i.code.isIdentifierPartES5(P)&&i.code.isIdentifierPartES5(H)||P===47&&H===105?[m,er(),E]:i.code.isWhiteSpace(P)||i.code.isLineTerminator(P)||i.code.isWhiteSpace(H)||i.code.isLineTerminator(H)?[m,E]:[m,h,E]))}function yr(m){return[o,m]}function wt(m){var E;E=o,o+=a,m(o),o=E}function Ss(m){var E;for(E=m.length-1;E>=0&&!i.code.isLineTerminator(m.charCodeAt(E));--E);return m.length-1-E}function ku(m,E){var _,S,P,H,X,te,me,ot;for(_=m.split(/\r\n|[\r\n]/),te=Number.MAX_VALUE,S=1,P=_.length;S<P;++S){for(H=_[S],X=0;X<H.length&&i.code.isWhiteSpace(H.charCodeAt(X));)++X;te>X&&(te=X)}for(typeof E<"u"?(me=o,_[1][te]==="*"&&(E+=" "),o=E):(te&1&&--te,me=o),S=1,P=_.length;S<P;++S)ot=ht(yr(_[S].slice(te))),_[S]=D?ot.join(""):ot;return o=me,_.join(`
`)}function Fn(m,E){if(m.type==="Line"){if(Re(m.value))return"//"+m.value;var _="//"+m.value;return C||(_+=`
`),_}return b.format.indent.adjustMultilineComment&&/[\n\r]/.test(m.value)?ku("/*"+m.value+"*/",E):"/*"+m.value+"*/"}function As(m,E){var _,S,P,H,X,te,me,ot,B,O,$,K,z,ce;if(m.leadingComments&&m.leadingComments.length>0){if(H=E,C){for(P=m.leadingComments[0],E=[],ot=P.extendedRange,B=P.range,$=F.substring(ot[0],B[0]),ce=($.match(/\n/g)||[]).length,ce>0?(E.push(xe(`
`,ce)),E.push(yr(Fn(P)))):(E.push($),E.push(Fn(P))),O=B,_=1,S=m.leadingComments.length;_<S;_++)P=m.leadingComments[_],B=P.range,K=F.substring(O[1],B[0]),ce=(K.match(/\n/g)||[]).length,E.push(xe(`
`,ce)),E.push(yr(Fn(P))),O=B;z=F.substring(B[1],ot[1]),ce=(z.match(/\n/g)||[]).length,E.push(xe(`
`,ce))}else for(P=m.leadingComments[0],E=[],A&&m.type===t.Program&&m.body.length===0&&E.push(`
`),E.push(Fn(P)),Re(ht(E).toString())||E.push(`
`),_=1,S=m.leadingComments.length;_<S;++_)P=m.leadingComments[_],me=[Fn(P)],Re(ht(me).toString())||me.push(`
`),E.push(yr(me));E.push(yr(H))}if(m.trailingComments)if(C)P=m.trailingComments[0],ot=P.extendedRange,B=P.range,$=F.substring(ot[0],B[0]),ce=($.match(/\n/g)||[]).length,ce>0?(E.push(xe(`
`,ce)),E.push(yr(Fn(P)))):(E.push($),E.push(Fn(P)));else for(X=!Re(ht(E).toString()),te=xe(" ",Ss(ht([o,E,a]).toString())),_=0,S=m.trailingComments.length;_<S;++_)P=m.trailingComments[_],X?(_===0?E=[E,a]:E=[E,te],E.push(Fn(P,te))):E=[E,yr(Fn(P))],_!==S-1&&!Re(ht(E).toString())&&(E=[E,`
`]);return E}function zi(m,E,_){var S,P=0;for(S=m;S<E;S++)F[S]===`
`&&P++;for(S=1;S<P;S++)_.push(f)}function cr(m,E,_){return E<_?["(",m,")"]:m}function vy(m){var E,_,S;for(S=m.split(/\r\n|\n/),E=1,_=S.length;E<_;E++)S[E]=f+o+S[E];return S}function by(m,E){var _,S,P;return _=m[b.verbatim],typeof _=="string"?S=cr(vy(_),e.Sequence,E):(S=vy(_.content),P=_.precedence!=null?_.precedence:e.Sequence,S=cr(S,P,E)),ht(S,m)}function Pt(){}Pt.prototype.maybeBlock=function(m,E){var _,S,P=this;return S=!b.comment||!m.leadingComments,m.type===t.BlockStatement&&S?[h,this.generateStatement(m,E)]:m.type===t.EmptyStatement&&S?";":(wt(function(){_=[f,yr(P.generateStatement(m,E))]}),_)},Pt.prototype.maybeBlockSuffix=function(m,E){var _=Re(ht(E).toString());return m.type===t.BlockStatement&&(!b.comment||!m.leadingComments)&&!_?[E,h]:_?[E,o]:[E,f,o]};function bn(m){return ht(m.name,m)}function Ru(m,E){return m.async?"async"+(E?er():h):""}function El(m){var E=m.generator&&!b.moz.starlessGenerator;return E?"*"+h:""}function _y(m){var E=m.value,_="";return E.async&&(_+=Ru(E,!m.computed)),E.generator&&(_+=El(E)?"*":""),_}Pt.prototype.generatePattern=function(m,E,_){return m.type===t.Identifier?bn(m):this.generateExpression(m,E,_)},Pt.prototype.generateFunctionParams=function(m){var E,_,S,P;if(P=!1,m.type===t.ArrowFunctionExpression&&!m.rest&&(!m.defaults||m.defaults.length===0)&&m.params.length===1&&m.params[0].type===t.Identifier)S=[Ru(m,!0),bn(m.params[0])];else{for(S=m.type===t.ArrowFunctionExpression?[Ru(m,!1)]:[],S.push("("),m.defaults&&(P=!0),E=0,_=m.params.length;E<_;++E)P&&m.defaults[E]?S.push(this.generateAssignment(m.params[E],m.defaults[E],"=",e.Assignment,N)):S.push(this.generatePattern(m.params[E],e.Assignment,N)),E+1<_&&S.push(","+h);m.rest&&(m.params.length&&S.push(","+h),S.push("..."),S.push(bn(m.rest))),S.push(")")}return S},Pt.prototype.generateFunctionBody=function(m){var E,_;return E=this.generateFunctionParams(m),m.type===t.ArrowFunctionExpression&&(E.push(h),E.push("=>")),m.expression?(E.push(h),_=this.generateExpression(m.body,e.Assignment,N),_.toString().charAt(0)==="{"&&(_=["(",_,")"]),E.push(_)):E.push(this.maybeBlock(m.body,we)),E},Pt.prototype.generateIterationForStatement=function(m,E,_){var S=["for"+(E.await?er()+"await":"")+h+"("],P=this;return wt(function(){E.left.type===t.VariableDeclaration?wt(function(){S.push(E.left.kind+er()),S.push(P.generateStatement(E.left.declarations[0],de))}):S.push(P.generateExpression(E.left,e.Call,N)),S=Be(S,m),S=[Be(S,P.generateExpression(E.right,e.Assignment,N)),")"]}),S.push(this.maybeBlock(E.body,_)),S},Pt.prototype.generatePropertyKey=function(m,E){var _=[];return E&&_.push("["),_.push(this.generateExpression(m,e.Assignment,N)),E&&_.push("]"),_},Pt.prototype.generateAssignment=function(m,E,_,S,P){return e.Assignment<S&&(P|=L),cr([this.generateExpression(m,e.Call,P),h+_+h,this.generateExpression(E,e.Assignment,P)],e.Assignment,S)},Pt.prototype.semicolon=function(m){return!g&&m&ue?"":";"},Pt.Statement={BlockStatement:function(m,E){var _,S,P=["{",f],H=this;return wt(function(){m.body.length===0&&C&&(_=m.range,_[1]-_[0]>2&&(S=F.substring(_[0]+1,_[1]-1),S[0]===`
`&&(P=["{"]),P.push(S)));var X,te,me,ot;for(ot=V,E&W&&(ot|=ee),X=0,te=m.body.length;X<te;++X)C&&(X===0&&(m.body[0].leadingComments&&(_=m.body[0].leadingComments[0].extendedRange,S=F.substring(_[0],_[1]),S[0]===`
`&&(P=["{"])),m.body[0].leadingComments||zi(m.range[0],m.body[0].range[0],P)),X>0&&!m.body[X-1].trailingComments&&!m.body[X].leadingComments&&zi(m.body[X-1].range[1],m.body[X].range[0],P)),X===te-1&&(ot|=ue),m.body[X].leadingComments&&C?me=H.generateStatement(m.body[X],ot):me=yr(H.generateStatement(m.body[X],ot)),P.push(me),Re(ht(me).toString())||C&&X<te-1&&m.body[X+1].leadingComments||P.push(f),C&&X===te-1&&(m.body[X].trailingComments||zi(m.body[X].range[1],m.range[1],P))}),P.push(yr("}")),P},BreakStatement:function(m,E){return m.label?"break "+m.label.name+this.semicolon(E):"break"+this.semicolon(E)},ContinueStatement:function(m,E){return m.label?"continue "+m.label.name+this.semicolon(E):"continue"+this.semicolon(E)},ClassBody:function(m,E){var _=["{",f],S=this;return wt(function(P){var H,X;for(H=0,X=m.body.length;H<X;++H)_.push(P),_.push(S.generateExpression(m.body[H],e.Sequence,N)),H+1<X&&_.push(f)}),Re(ht(_).toString())||_.push(f),_.push(o),_.push("}"),_},ClassDeclaration:function(m,E){var _,S;return _=["class"],m.id&&(_=Be(_,this.generateExpression(m.id,e.Sequence,N))),m.superClass&&(S=Be("extends",this.generateExpression(m.superClass,e.Unary,N)),_=Be(_,S)),_.push(h),_.push(this.generateStatement(m.body,se)),_},DirectiveStatement:function(m,E){return b.raw&&m.raw?m.raw+this.semicolon(E):mr(m.directive)+this.semicolon(E)},DoWhileStatement:function(m,E){var _=Be("do",this.maybeBlock(m.body,V));return _=this.maybeBlockSuffix(m.body,_),Be(_,["while"+h+"(",this.generateExpression(m.test,e.Sequence,N),")"+this.semicolon(E)])},CatchClause:function(m,E){var _,S=this;return wt(function(){var P;m.param?(_=["catch"+h+"(",S.generateExpression(m.param,e.Sequence,N),")"],m.guard&&(P=S.generateExpression(m.guard,e.Sequence,N),_.splice(2,0," if ",P))):_=["catch"]}),_.push(this.maybeBlock(m.body,V)),_},DebuggerStatement:function(m,E){return"debugger"+this.semicolon(E)},EmptyStatement:function(m,E){return";"},ExportDefaultDeclaration:function(m,E){var _=["export"],S;return S=E&ue?se:V,_=Be(_,"default"),j(m.declaration)?_=Be(_,this.generateStatement(m.declaration,S)):_=Be(_,this.generateExpression(m.declaration,e.Assignment,N)+this.semicolon(E)),_},ExportNamedDeclaration:function(m,E){var _=["export"],S,P=this;return S=E&ue?se:V,m.declaration?Be(_,this.generateStatement(m.declaration,S)):(m.specifiers&&(m.specifiers.length===0?_=Be(_,"{"+h+"}"):m.specifiers[0].type===t.ExportBatchSpecifier?_=Be(_,this.generateExpression(m.specifiers[0],e.Sequence,N)):(_=Be(_,"{"),wt(function(H){var X,te;for(_.push(f),X=0,te=m.specifiers.length;X<te;++X)_.push(H),_.push(P.generateExpression(m.specifiers[X],e.Sequence,N)),X+1<te&&_.push(","+f)}),Re(ht(_).toString())||_.push(f),_.push(o+"}")),m.source?_=Be(_,["from"+h,this.generateExpression(m.source,e.Sequence,N),this.semicolon(E)]):_.push(this.semicolon(E))),_)},ExportAllDeclaration:function(m,E){return["export"+h,"*"+h,"from"+h,this.generateExpression(m.source,e.Sequence,N),this.semicolon(E)]},ExpressionStatement:function(m,E){var _,S;function P(te){var me;return te.slice(0,5)!=="class"?!1:(me=te.charCodeAt(5),me===123||i.code.isWhiteSpace(me)||i.code.isLineTerminator(me))}function H(te){var me;return te.slice(0,8)!=="function"?!1:(me=te.charCodeAt(8),me===40||i.code.isWhiteSpace(me)||me===42||i.code.isLineTerminator(me))}function X(te){var me,ot,B;if(te.slice(0,5)!=="async"||!i.code.isWhiteSpace(te.charCodeAt(5)))return!1;for(ot=6,B=te.length;ot<B&&i.code.isWhiteSpace(te.charCodeAt(ot));++ot);return ot===B||te.slice(ot,ot+8)!=="function"?!1:(me=te.charCodeAt(ot+8),me===40||i.code.isWhiteSpace(me)||me===42||i.code.isLineTerminator(me))}return _=[this.generateExpression(m.expression,e.Sequence,N)],S=ht(_).toString(),S.charCodeAt(0)===123||P(S)||H(S)||X(S)||x&&E&ee&&m.expression.type===t.Literal&&typeof m.expression.value=="string"?_=["(",_,")"+this.semicolon(E)]:_.push(this.semicolon(E)),_},ImportDeclaration:function(m,E){var _,S,P=this;return m.specifiers.length===0?["import",h,this.generateExpression(m.source,e.Sequence,N),this.semicolon(E)]:(_=["import"],S=0,m.specifiers[S].type===t.ImportDefaultSpecifier&&(_=Be(_,[this.generateExpression(m.specifiers[S],e.Sequence,N)]),++S),m.specifiers[S]&&(S!==0&&_.push(","),m.specifiers[S].type===t.ImportNamespaceSpecifier?_=Be(_,[h,this.generateExpression(m.specifiers[S],e.Sequence,N)]):(_.push(h+"{"),m.specifiers.length-S===1?(_.push(h),_.push(this.generateExpression(m.specifiers[S],e.Sequence,N)),_.push(h+"}"+h)):(wt(function(H){var X,te;for(_.push(f),X=S,te=m.specifiers.length;X<te;++X)_.push(H),_.push(P.generateExpression(m.specifiers[X],e.Sequence,N)),X+1<te&&_.push(","+f)}),Re(ht(_).toString())||_.push(f),_.push(o+"}"+h)))),_=Be(_,["from"+h,this.generateExpression(m.source,e.Sequence,N),this.semicolon(E)]),_)},VariableDeclarator:function(m,E){var _=E&L?N:U;return m.init?[this.generateExpression(m.id,e.Assignment,_),h,"=",h,this.generateExpression(m.init,e.Assignment,_)]:this.generatePattern(m.id,e.Assignment,_)},VariableDeclaration:function(m,E){var _,S,P,H,X,te=this;_=[m.kind],X=E&L?V:de;function me(){for(H=m.declarations[0],b.comment&&H.leadingComments?(_.push(`
`),_.push(yr(te.generateStatement(H,X)))):(_.push(er()),_.push(te.generateStatement(H,X))),S=1,P=m.declarations.length;S<P;++S)H=m.declarations[S],b.comment&&H.leadingComments?(_.push(","+f),_.push(yr(te.generateStatement(H,X)))):(_.push(","+h),_.push(te.generateStatement(H,X)))}return m.declarations.length>1?wt(me):me(),_.push(this.semicolon(E)),_},ThrowStatement:function(m,E){return[Be("throw",this.generateExpression(m.argument,e.Sequence,N)),this.semicolon(E)]},TryStatement:function(m,E){var _,S,P,H;if(_=["try",this.maybeBlock(m.block,V)],_=this.maybeBlockSuffix(m.block,_),m.handlers)for(S=0,P=m.handlers.length;S<P;++S)_=Be(_,this.generateStatement(m.handlers[S],V)),(m.finalizer||S+1!==P)&&(_=this.maybeBlockSuffix(m.handlers[S].body,_));else{for(H=m.guardedHandlers||[],S=0,P=H.length;S<P;++S)_=Be(_,this.generateStatement(H[S],V)),(m.finalizer||S+1!==P)&&(_=this.maybeBlockSuffix(H[S].body,_));if(m.handler)if(Array.isArray(m.handler))for(S=0,P=m.handler.length;S<P;++S)_=Be(_,this.generateStatement(m.handler[S],V)),(m.finalizer||S+1!==P)&&(_=this.maybeBlockSuffix(m.handler[S].body,_));else _=Be(_,this.generateStatement(m.handler,V)),m.finalizer&&(_=this.maybeBlockSuffix(m.handler.body,_))}return m.finalizer&&(_=Be(_,["finally",this.maybeBlock(m.finalizer,V)])),_},SwitchStatement:function(m,E){var _,S,P,H,X,te=this;if(wt(function(){_=["switch"+h+"(",te.generateExpression(m.discriminant,e.Sequence,N),")"+h+"{"+f]}),m.cases)for(X=V,P=0,H=m.cases.length;P<H;++P)P===H-1&&(X|=ue),S=yr(this.generateStatement(m.cases[P],X)),_.push(S),Re(ht(S).toString())||_.push(f);return _.push(yr("}")),_},SwitchCase:function(m,E){var _,S,P,H,X,te=this;return wt(function(){for(m.test?_=[Be("case",te.generateExpression(m.test,e.Sequence,N)),":"]:_=["default:"],P=0,H=m.consequent.length,H&&m.consequent[0].type===t.BlockStatement&&(S=te.maybeBlock(m.consequent[0],V),_.push(S),P=1),P!==H&&!Re(ht(_).toString())&&_.push(f),X=V;P<H;++P)P===H-1&&E&ue&&(X|=ue),S=yr(te.generateStatement(m.consequent[P],X)),_.push(S),P+1!==H&&!Re(ht(S).toString())&&_.push(f)}),_},IfStatement:function(m,E){var _,S,P,H=this;return wt(function(){_=["if"+h+"(",H.generateExpression(m.test,e.Sequence,N),")"]}),P=E&ue,S=V,P&&(S|=ue),m.alternate?(_.push(this.maybeBlock(m.consequent,V)),_=this.maybeBlockSuffix(m.consequent,_),m.alternate.type===t.IfStatement?_=Be(_,["else ",this.generateStatement(m.alternate,S)]):_=Be(_,Be("else",this.maybeBlock(m.alternate,S)))):_.push(this.maybeBlock(m.consequent,S)),_},ForStatement:function(m,E){var _,S=this;return wt(function(){_=["for"+h+"("],m.init?m.init.type===t.VariableDeclaration?_.push(S.generateStatement(m.init,de)):(_.push(S.generateExpression(m.init,e.Sequence,U)),_.push(";")):_.push(";"),m.test&&(_.push(h),_.push(S.generateExpression(m.test,e.Sequence,N))),_.push(";"),m.update&&(_.push(h),_.push(S.generateExpression(m.update,e.Sequence,N))),_.push(")")}),_.push(this.maybeBlock(m.body,E&ue?se:V)),_},ForInStatement:function(m,E){return this.generateIterationForStatement("in",m,E&ue?se:V)},ForOfStatement:function(m,E){return this.generateIterationForStatement("of",m,E&ue?se:V)},LabeledStatement:function(m,E){return[m.label.name+":",this.maybeBlock(m.body,E&ue?se:V)]},Program:function(m,E){var _,S,P,H,X;for(H=m.body.length,_=[A&&H>0?`
`:""],X=ye,P=0;P<H;++P)!A&&P===H-1&&(X|=ue),C&&(P===0&&(m.body[0].leadingComments||zi(m.range[0],m.body[P].range[0],_)),P>0&&!m.body[P-1].trailingComments&&!m.body[P].leadingComments&&zi(m.body[P-1].range[1],m.body[P].range[0],_)),S=yr(this.generateStatement(m.body[P],X)),_.push(S),P+1<H&&!Re(ht(S).toString())&&(C&&m.body[P+1].leadingComments||_.push(f)),C&&P===H-1&&(m.body[P].trailingComments||zi(m.body[P].range[1],m.range[1],_));return _},FunctionDeclaration:function(m,E){return[Ru(m,!0),"function",El(m)||er(),m.id?bn(m.id):"",this.generateFunctionBody(m)]},ReturnStatement:function(m,E){return m.argument?[Be("return",this.generateExpression(m.argument,e.Sequence,N)),this.semicolon(E)]:["return"+this.semicolon(E)]},WhileStatement:function(m,E){var _,S=this;return wt(function(){_=["while"+h+"(",S.generateExpression(m.test,e.Sequence,N),")"]}),_.push(this.maybeBlock(m.body,E&ue?se:V)),_},WithStatement:function(m,E){var _,S=this;return wt(function(){_=["with"+h+"(",S.generateExpression(m.object,e.Sequence,N),")"]}),_.push(this.maybeBlock(m.body,E&ue?se:V)),_}},_t(Pt.prototype,Pt.Statement),Pt.Expression={SequenceExpression:function(m,E,_){var S,P,H;for(e.Sequence<E&&(_|=L),S=[],P=0,H=m.expressions.length;P<H;++P)S.push(this.generateExpression(m.expressions[P],e.Assignment,_)),P+1<H&&S.push(","+h);return cr(S,e.Sequence,E)},AssignmentExpression:function(m,E,_){return this.generateAssignment(m.left,m.right,m.operator,E,_)},ArrowFunctionExpression:function(m,E,_){return cr(this.generateFunctionBody(m),e.ArrowFunction,E)},ConditionalExpression:function(m,E,_){return e.Conditional<E&&(_|=L),cr([this.generateExpression(m.test,e.LogicalOR,_),h+"?"+h,this.generateExpression(m.consequent,e.Assignment,_),h+":"+h,this.generateExpression(m.alternate,e.Assignment,_)],e.Conditional,E)},LogicalExpression:function(m,E,_){return this.BinaryExpression(m,E,_)},BinaryExpression:function(m,E,_){var S,P,H,X,te,me;return X=r[m.operator],P=m.operator==="**"?e.Postfix:X,H=m.operator==="**"?X:X+1,X<E&&(_|=L),te=this.generateExpression(m.left,P,_),me=te.toString(),me.charCodeAt(me.length-1)===47&&i.code.isIdentifierPartES5(m.operator.charCodeAt(0))?S=[te,er(),m.operator]:S=Be(te,m.operator),te=this.generateExpression(m.right,H,_),m.operator==="/"&&te.toString().charAt(0)==="/"||m.operator.slice(-1)==="<"&&te.toString().slice(0,3)==="!--"?(S.push(er()),S.push(te)):S=Be(S,te),m.operator==="in"&&!(_&L)?["(",S,")"]:cr(S,X,E)},CallExpression:function(m,E,_){var S,P,H;for(S=[this.generateExpression(m.callee,e.Call,q)],S.push("("),P=0,H=m.arguments.length;P<H;++P)S.push(this.generateExpression(m.arguments[P],e.Assignment,N)),P+1<H&&S.push(","+h);return S.push(")"),_&Q?cr(S,e.Call,E):["(",S,")"]},NewExpression:function(m,E,_){var S,P,H,X,te;if(P=m.arguments.length,te=_&ne&&!y&&P===0?M:Y,S=Be("new",this.generateExpression(m.callee,e.New,te)),!(_&ne)||y||P>0){for(S.push("("),H=0,X=P;H<X;++H)S.push(this.generateExpression(m.arguments[H],e.Assignment,N)),H+1<X&&S.push(","+h);S.push(")")}return cr(S,e.New,E)},MemberExpression:function(m,E,_){var S,P;return S=[this.generateExpression(m.object,e.Call,_&Q?q:Y)],m.computed?(S.push("["),S.push(this.generateExpression(m.property,e.Sequence,_&Q?N:M)),S.push("]")):(m.object.type===t.Literal&&typeof m.object.value=="number"&&(P=ht(S).toString(),P.indexOf(".")<0&&!/[eExX]/.test(P)&&i.code.isDecimalDigit(P.charCodeAt(P.length-1))&&!(P.length>=2&&P.charCodeAt(0)===48)&&S.push(" ")),S.push("."),S.push(bn(m.property))),cr(S,e.Member,E)},MetaProperty:function(m,E,_){var S;return S=[],S.push(typeof m.meta=="string"?m.meta:bn(m.meta)),S.push("."),S.push(typeof m.property=="string"?m.property:bn(m.property)),cr(S,e.Member,E)},UnaryExpression:function(m,E,_){var S,P,H,X,te;return P=this.generateExpression(m.argument,e.Unary,N),h===""?S=Be(m.operator,P):(S=[m.operator],m.operator.length>2?S=Be(S,P):(X=ht(S).toString(),te=X.charCodeAt(X.length-1),H=P.toString().charCodeAt(0),((te===43||te===45)&&te===H||i.code.isIdentifierPartES5(te)&&i.code.isIdentifierPartES5(H))&&S.push(er()),S.push(P))),cr(S,e.Unary,E)},YieldExpression:function(m,E,_){var S;return m.delegate?S="yield*":S="yield",m.argument&&(S=Be(S,this.generateExpression(m.argument,e.Yield,N))),cr(S,e.Yield,E)},AwaitExpression:function(m,E,_){var S=Be(m.all?"await*":"await",this.generateExpression(m.argument,e.Await,N));return cr(S,e.Await,E)},UpdateExpression:function(m,E,_){return m.prefix?cr([m.operator,this.generateExpression(m.argument,e.Unary,N)],e.Unary,E):cr([this.generateExpression(m.argument,e.Postfix,N),m.operator],e.Postfix,E)},FunctionExpression:function(m,E,_){var S=[Ru(m,!0),"function"];return m.id?(S.push(El(m)||er()),S.push(bn(m.id))):S.push(El(m)||h),S.push(this.generateFunctionBody(m)),S},ArrayPattern:function(m,E,_){return this.ArrayExpression(m,E,_,!0)},ArrayExpression:function(m,E,_,S){var P,H,X=this;return m.elements.length?(H=S?!1:m.elements.length>1,P=["[",H?f:""],wt(function(te){var me,ot;for(me=0,ot=m.elements.length;me<ot;++me)m.elements[me]?(P.push(H?te:""),P.push(X.generateExpression(m.elements[me],e.Assignment,N))):(H&&P.push(te),me+1===ot&&P.push(",")),me+1<ot&&P.push(","+(H?f:h))}),H&&!Re(ht(P).toString())&&P.push(f),P.push(H?o:""),P.push("]"),P):"[]"},RestElement:function(m,E,_){return"..."+this.generatePattern(m.argument)},ClassExpression:function(m,E,_){var S,P;return S=["class"],m.id&&(S=Be(S,this.generateExpression(m.id,e.Sequence,N))),m.superClass&&(P=Be("extends",this.generateExpression(m.superClass,e.Unary,N)),S=Be(S,P)),S.push(h),S.push(this.generateStatement(m.body,se)),S},MethodDefinition:function(m,E,_){var S,P;return m.static?S=["static"+h]:S=[],m.kind==="get"||m.kind==="set"?P=[Be(m.kind,this.generatePropertyKey(m.key,m.computed)),this.generateFunctionBody(m.value)]:P=[_y(m),this.generatePropertyKey(m.key,m.computed),this.generateFunctionBody(m.value)],Be(S,P)},Property:function(m,E,_){return m.kind==="get"||m.kind==="set"?[m.kind,er(),this.generatePropertyKey(m.key,m.computed),this.generateFunctionBody(m.value)]:m.shorthand?m.value.type==="AssignmentPattern"?this.AssignmentPattern(m.value,e.Sequence,N):this.generatePropertyKey(m.key,m.computed):m.method?[_y(m),this.generatePropertyKey(m.key,m.computed),this.generateFunctionBody(m.value)]:[this.generatePropertyKey(m.key,m.computed),":"+h,this.generateExpression(m.value,e.Assignment,N)]},ObjectExpression:function(m,E,_){var S,P,H,X=this;return m.properties.length?(S=m.properties.length>1,wt(function(){H=X.generateExpression(m.properties[0],e.Sequence,N)}),!S&&!Me(ht(H).toString())?["{",h,H,h,"}"]:(wt(function(te){var me,ot;if(P=["{",f,te,H],S)for(P.push(","+f),me=1,ot=m.properties.length;me<ot;++me)P.push(te),P.push(X.generateExpression(m.properties[me],e.Sequence,N)),me+1<ot&&P.push(","+f)}),Re(ht(P).toString())||P.push(f),P.push(o),P.push("}"),P)):"{}"},AssignmentPattern:function(m,E,_){return this.generateAssignment(m.left,m.right,"=",E,_)},ObjectPattern:function(m,E,_){var S,P,H,X,te,me=this;if(!m.properties.length)return"{}";if(X=!1,m.properties.length===1)te=m.properties[0],te.type===t.Property&&te.value.type!==t.Identifier&&(X=!0);else for(P=0,H=m.properties.length;P<H;++P)if(te=m.properties[P],te.type===t.Property&&!te.shorthand){X=!0;break}return S=["{",X?f:""],wt(function(ot){var B,O;for(B=0,O=m.properties.length;B<O;++B)S.push(X?ot:""),S.push(me.generateExpression(m.properties[B],e.Sequence,N)),B+1<O&&S.push(","+(X?f:h))}),X&&!Re(ht(S).toString())&&S.push(f),S.push(X?o:""),S.push("}"),S},ThisExpression:function(m,E,_){return"this"},Super:function(m,E,_){return"super"},Identifier:function(m,E,_){return bn(m)},ImportDefaultSpecifier:function(m,E,_){return bn(m.id||m.local)},ImportNamespaceSpecifier:function(m,E,_){var S=["*"],P=m.id||m.local;return P&&S.push(h+"as"+er()+bn(P)),S},ImportSpecifier:function(m,E,_){var S=m.imported,P=[S.name],H=m.local;return H&&H.name!==S.name&&P.push(er()+"as"+er()+bn(H)),P},ExportSpecifier:function(m,E,_){var S=m.local,P=[S.name],H=m.exported;return H&&H.name!==S.name&&P.push(er()+"as"+er()+bn(H)),P},Literal:function(m,E,_){var S;if(m.hasOwnProperty("raw")&&w&&b.raw)try{if(S=w(m.raw).body[0].expression,S.type===t.Literal&&S.value===m.value)return m.raw}catch{}return m.regex?"/"+m.regex.pattern+"/"+m.regex.flags:m.value===null?"null":typeof m.value=="string"?On(m.value):typeof m.value=="number"?on(m.value):typeof m.value=="boolean"?m.value?"true":"false":Es(m.value)},GeneratorExpression:function(m,E,_){return this.ComprehensionExpression(m,E,_)},ComprehensionExpression:function(m,E,_){var S,P,H,X,te=this;return S=m.type===t.GeneratorExpression?["("]:["["],b.moz.comprehensionExpressionStartsWithAssignment&&(X=this.generateExpression(m.body,e.Assignment,N),S.push(X)),m.blocks&&wt(function(){for(P=0,H=m.blocks.length;P<H;++P)X=te.generateExpression(m.blocks[P],e.Sequence,N),P>0||b.moz.comprehensionExpressionStartsWithAssignment?S=Be(S,X):S.push(X)}),m.filter&&(S=Be(S,"if"+h),X=this.generateExpression(m.filter,e.Sequence,N),S=Be(S,["(",X,")"])),b.moz.comprehensionExpressionStartsWithAssignment||(X=this.generateExpression(m.body,e.Assignment,N),S=Be(S,X)),S.push(m.type===t.GeneratorExpression?")":"]"),S},ComprehensionBlock:function(m,E,_){var S;return m.left.type===t.VariableDeclaration?S=[m.left.kind,er(),this.generateStatement(m.left.declarations[0],de)]:S=this.generateExpression(m.left,e.Call,N),S=Be(S,m.of?"of":"in"),S=Be(S,this.generateExpression(m.right,e.Sequence,N)),["for"+h+"(",S,")"]},SpreadElement:function(m,E,_){return["...",this.generateExpression(m.argument,e.Assignment,N)]},TaggedTemplateExpression:function(m,E,_){var S=q;_&Q||(S=Y);var P=[this.generateExpression(m.tag,e.Call,S),this.generateExpression(m.quasi,e.Primary,oe)];return cr(P,e.TaggedTemplate,E)},TemplateElement:function(m,E,_){return m.value.raw},TemplateLiteral:function(m,E,_){var S,P,H;for(S=["`"],P=0,H=m.quasis.length;P<H;++P)S.push(this.generateExpression(m.quasis[P],e.Primary,N)),P+1<H&&(S.push("${"+h),S.push(this.generateExpression(m.expressions[P],e.Sequence,N)),S.push(h+"}"));return S.push("`"),S},ModuleSpecifier:function(m,E,_){return this.Literal(m,E,_)},ImportExpression:function(m,E,_){return cr(["import(",this.generateExpression(m.source,e.Assignment,N),")"],e.Call,E)}},_t(Pt.prototype,Pt.Expression),Pt.prototype.generateExpression=function(m,E,_){var S,P;return P=m.type||t.Property,b.verbatim&&m.hasOwnProperty(b.verbatim)?by(m,E):(S=this[P](m,E,_),b.comment&&(S=As(m,S)),ht(S,m))},Pt.prototype.generateStatement=function(m,E){var _,S;return _=this[m.type](m,E),b.comment&&(_=As(m,_)),S=ht(_).toString(),m.type===t.Program&&!A&&f===""&&S.charAt(S.length-1)===`
`&&(_=D?ht(_).replaceRight(/\s+$/,""):S.replace(/\s+$/,"")),ht(_,m)};function V_(m){var E;if(E=new Pt,j(m))return E.generateStatement(m,V);if(T(m))return E.generateExpression(m,e.Sequence,N);throw new Error("Unknown node type: "+m.type)}function K_(m,E){var _=Oe(),S,P;return E!=null?(typeof E.indent=="string"&&(_.format.indent.style=E.indent),typeof E.base=="number"&&(_.format.indent.base=E.base),E=pt(_,E),a=E.format.indent.style,typeof E.base=="string"?o=E.base:o=xe(a,E.format.indent.base)):(E=_,a=E.format.indent.style,o=xe(a,E.format.indent.base)),c=E.format.json,u=E.format.renumber,l=c?!1:E.format.hexadecimal,d=c?"double":E.format.quotes,p=E.format.escapeless,f=E.format.newline,h=E.format.space,E.format.compact&&(f=h=a=o=""),y=E.format.parentheses,g=E.format.semicolons,A=E.format.safeConcatenation,x=E.directive,w=c?null:E.parse,D=E.sourceMap,F=E.sourceCode,C=E.format.preserveBlankLines&&F!==null,b=E,D&&(Qo.browser?n=globalThis.sourceMap.SourceNode:n=i6().SourceNode),S=V_(m),D?(P=S.toStringWithSourceMap({file:E.file,sourceRoot:E.sourceMapRoot}),E.sourceContent&&P.map.setSourceContent(E.sourceMap,E.sourceContent),E.sourceMapWithCode?P:P.map.toString()):(P={code:S.toString(),map:null},E.sourceMapWithCode?P:P.code)}I={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},k=Oe().format,Qo.version=s6().version,Qo.generate=K_,Qo.attachComments=s.attachComments,Qo.Precedence=pt({},e),Qo.browser=!1,Qo.FORMAT_MINIFY=I,Qo.FORMAT_DEFAULTS=k})()});var u6=v((WFe,a6)=>{var Tie=o6().generate;a6.exports=function(t,e){e||(e={});var r={},n=function s(i,o){if(i.type==="Literal")return i.value;if(i.type==="UnaryExpression"){var a=s(i.argument);return i.operator==="+"?+a:i.operator==="-"?-a:i.operator==="~"?~a:i.operator==="!"?!a:r}else if(i.type==="ArrayExpression"){for(var c=[],u=0,l=i.elements.length;u<l;u++){var d=s(i.elements[u]);if(d===r)return r;c.push(d)}return c}else if(i.type==="ObjectExpression"){for(var p={},u=0;u<i.properties.length;u++){var f=i.properties[u],h=f.value===null?f.value:s(f.value);if(h===r)return r;p[f.key.value||f.key.name]=h}return p}else if(i.type==="BinaryExpression"||i.type==="LogicalExpression"){var l=s(i.left);if(l===r)return r;var y=s(i.right);if(y===r)return r;var g=i.operator;return g==="=="?l==y:g==="==="?l===y:g==="!="?l!=y:g==="!=="?l!==y:g==="+"?l+y:g==="-"?l-y:g==="*"?l*y:g==="/"?l/y:g==="%"?l%y:g==="<"?l<y:g==="<="?l<=y:g===">"?l>y:g===">="?l>=y:g==="|"?l|y:g==="&"?l&y:g==="^"?l^y:g==="&&"?l&&y:g==="||"?l||y:r}else{if(i.type==="Identifier")return{}.hasOwnProperty.call(e,i.name)?e[i.name]:r;if(i.type==="ThisExpression")return{}.hasOwnProperty.call(e,"this")?e.this:r;if(i.type==="CallExpression"){var A=s(i.callee);if(A===r||typeof A!="function")return r;var x=i.callee.object?s(i.callee.object):r;x===r&&(x=null);for(var b=[],u=0,l=i.arguments.length;u<l;u++){var d=s(i.arguments[u]);if(d===r)return r;b.push(d)}return A.apply(x,b)}else if(i.type==="MemberExpression"){var p=s(i.object);if(p===r||typeof p=="function")return r;if(i.property.type==="Identifier")return p[i.property.name];var f=s(i.property);return f===r?r:p[f]}else if(i.type==="ConditionalExpression"){var a=s(i.test);return a===r?r:s(a?i.consequent:i.alternate)}else if(i.type==="ExpressionStatement"){var a=s(i.expression);return a===r?r:a}else{if(i.type==="ReturnStatement")return s(i.argument);if(i.type==="FunctionExpression"){var w=i.body.body,D={};Object.keys(e).forEach(function(ne){D[ne]=e[ne]});for(var u=0;u<i.params.length;u++){var F=i.params[u];if(F.type=="Identifier")e[F.name]=null;else return r}for(var u in w)if(s(w[u])===r)return r;e=D;var C=Object.keys(e),I=C.map(function(ne){return e[ne]});return Function(C.join(", "),"return "+Tie(i)).apply(null,I)}else if(i.type==="TemplateLiteral"){for(var k="",u=0;u<i.expressions.length;u++)k+=s(i.quasis[u]),k+=s(i.expressions[u]);return k+=s(i.quasis[u]),k}else if(i.type==="TaggedTemplateExpression"){var T=s(i.tag),j=i.quasi,L=j.quasis.map(s),Q=j.expressions.map(s);return T.apply(null,[L].concat(Q))}else return i.type==="TemplateElement"?i.value.cooked:r}}}(t);return n===r?void 0:n}});var p6=v(Fi=>{"use strict";var Iie=Fi&&Fi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Bie=Fi&&Fi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kie=Fi&&Fi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Iie(e,t,r);return Bie(e,t),e},Rie=Fi&&Fi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.Handlers=void 0;var _A=kie(Ak()),$ie=Dk(),d6=Ti(),jie=Rie(u6());function c6(t){return function(e,r,n,s){var i=e.value,o=e.path,a=[],c=(function(u,l){f6(u)?(u.forEach(function(d,p){a.length>=s||n(p,d,r)&&a.push({path:l.concat(p),value:d})}),u.forEach(function(d,p){a.length>=s||t&&c(d,l.concat(p))})):Mie(u)&&(Object.keys(u).forEach(function(d){a.length>=s||n(d,u[d],r)&&a.push({path:l.concat(d),value:u[d]})}),Object.keys(u).forEach(function(d){a.length>=s||t&&c(u[d],l.concat(d))}))}).bind(this);return c(i,o),a}}function wA(t,e){try{return(0,jie.default)(t,e)}catch{}}function Qg(t){return function(e,r,n){return this.descend(r,e.expression.value,t,n)}}function ev(t){return function(e,r,n){return this.traverse(r,e.expression.value,t,n)}}function l6(t){return t=t.filter(function(e){return e}),Lie(t,function(e){return e.path.map(function(r){return String(r).replace("-","--")}).join("-")})}function Nie(t){var e=String(t);return e.match(/^-?[0-9]+$/)?parseInt(e):null}function f6(t){return Array.isArray(t)}function Mie(t){return t&&!(t instanceof Array)&&t instanceof Object}function bA(t,e,r){var n=_A.parse(e).body[0].expression,s=wA(n,{"@":t.value}),i=r.replace(/\{\{\s*value\s*\}\}/g,s),o=d6.JSONPath.nodes(t.value,i);return o.forEach(function(a){a.path=t.path.concat(a.path.slice(1))}),o}var qie=function(){function t(){this._fns={"member-child-identifier":function(e,r){var n=e.expression.value,s=r.value;if(s instanceof Object&&n in s)return[{value:s[n],path:r.path.concat(n)}]},"member-descendant-identifier":ev(function(e,r,n){return e==n}),"subscript-child-numeric_literal":Qg(function(e,r,n){return e===n}),"member-child-numeric_literal":Qg(function(e,r,n){return String(e)===String(n)}),"subscript-descendant-numeric_literal":ev(function(e,r,n){return e===n}),"member-child-wildcard":Qg(function(){return!0}),"member-descendant-wildcard":ev(function(){return!0}),"subscript-descendant-wildcard":ev(function(){return!0}),"subscript-child-wildcard":Qg(function(){return!0}),"subscript-child-slice":function(e,r){if(f6(r.value)){var n=e.expression.value.split(":").map(Nie),s=r.value.map(function(i,o){return{value:i,path:r.path.concat(o)}});return $ie.slice.apply(null,[s].concat(n))}},"subscript-child-union":function(e,r){var n=[];return e.expression.value.forEach(function(s){var i={operation:"subscript",scope:"child",expression:s.expression},o=this.resolve(i),a=o(i,r);a&&(n=n.concat(a))},this),l6(n)},"subscript-descendant-union":function(e,r,n){var s=this,i=[],o=d6.JSONPath.nodes(r,"$..*").slice(1);return o.forEach(function(a){i.length>=n||e.expression.value.forEach(function(c){var u={operation:"subscript",scope:"child",expression:c.expression},l=s.resolve(u),d=l(u,a);i=i.concat(d)})}),l6(i)},"subscript-child-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=_A.parse(s).body[0].expression,o=function(a,c){return wA(i,{"@":c})};return this.descend(r,null,o,n)},"subscript-descendant-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=_A.parse(s).body[0].expression,o=function(a,c){return wA(i,{"@":c})};return this.traverse(r,null,o,n)},"subscript-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return bA(r,n,"$[{{value}}]")},"member-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return bA(r,n,"$.{{value}}")},"member-descendant-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return bA(r,n,"$..value")}},this.initialize()}return t.prototype.initialize=function(){this.traverse=c6(!0),this.descend=c6(),this._fns["subscript-child-string_literal"]=this._fns["member-child-identifier"],this._fns["member-descendant-numeric_literal"]=this._fns["subscript-descendant-string_literal"]=this._fns["member-descendant-identifier"]},t.prototype.resolve=function(e){var r=[e.operation,e.scope,e.expression.type].join("-"),n=this._fns[r];if(!n)throw new Error("couldn't resolve key: "+r);return n.bind(this)},t.prototype.register=function(e,r){if(!(r instanceof Function))throw new Error("handler must be a function");this._fns[e]=r},t}();Fi.Handlers=qie;function Lie(t,e){for(var r=[],n=[],s=0,i=t?.length;s<i;s++){var o=t[s],a=e?e(o,s):o;n.includes(a)||(n.push(a),r.push(o))}return r}});var h6=v(tv=>{"use strict";Object.defineProperty(tv,"__esModule",{value:!0});tv.TOKENS=void 0;tv.TOKENS={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}});var m6=v(Bh=>{var rv=function(){var t=function(F,C,I,k){for(I=I||{},k=F.length;k--;I[F[k]]=C);return I},e=[1,5],r=[1,6],n=[1,7],s=[1,8],i=[1,9],o=[1,18],a=[1,19],c=[1,20],u=[1,12,14,22],l=[1,29],d=[1,30],p=[1,33],f=[1,35],h=[1,31],y=[1,36],g=[1,37],A=[24,28],x={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(C,I,k,T,j,L,Q){T.ast||(T.ast=b,b.initialize());var ne=L.length-1;switch(j){case 1:return T.ast.set({expression:{type:"root",value:L[ne]}}),T.ast.unshift(),T.ast.yield();break;case 2:return T.ast.set({expression:{type:"root",value:L[ne-1]}}),T.ast.unshift(),T.ast.yield();break;case 3:return T.ast.unshift(),T.ast.yield();break;case 4:return T.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:L[ne-1]}}),T.ast.unshift(),T.ast.yield();break;case 5:case 6:case 11:case 13:case 18:case 21:case 22:case 23:break;case 7:T.ast.set({operation:"member"}),T.ast.push();break;case 8:T.ast.set({operation:"subscript"}),T.ast.push();break;case 9:case 19:T.ast.set({scope:"child"});break;case 10:case 20:T.ast.set({scope:"descendant"});break;case 12:T.ast.set({scope:"child",operation:"member"});break;case 14:T.ast.set({expression:{type:"wildcard",value:L[ne]}});break;case 15:T.ast.set({expression:{type:"identifier",value:L[ne]}});break;case 16:T.ast.set({expression:{type:"script_expression",value:L[ne]}});break;case 17:T.ast.set({expression:{type:"numeric_literal",value:parseInt(L[ne])}});break;case 24:L[ne].length>1?T.ast.set({expression:{type:"union",value:L[ne]}}):this.$=L[ne];break;case 25:this.$=[L[ne]];break;case 26:this.$=L[ne-2].concat(L[ne]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(L[ne])}},T.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:L[ne]}},T.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:L[ne]}},T.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:L[ne]}},T.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:L[ne]}},T.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:L[ne]}},T.ast.set(this.$);break;case 33:case 34:this.$=L[ne];break}},table:[{3:1,4:[1,2],6:3,13:4,15:e,16:r,17:n,18:s,19:i},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:c},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:c},t(u,[2,12]),t(u,[2,14]),t(u,[2,15]),t(u,[2,16]),t(u,[2,17]),t(u,[2,18]),{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:c},t(u,[2,5]),t(u,[2,7]),t(u,[2,8]),t(u,[2,9]),t(u,[2,10]),t(u,[2,19]),t(u,[2,20]),{13:23,15:e,16:r,17:n,18:s,19:i},{13:24,15:e,16:r,17:n,18:s,19:i,22:[1,25]},{15:l,17:d,18:p,23:26,25:27,26:28,27:32,29:34,30:f,31:h,32:y,33:g},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:c},t(u,[2,6]),t(u,[2,11]),t(u,[2,13]),{15:l,17:d,18:p,23:38,25:27,26:28,27:32,29:34,30:f,31:h,32:y,33:g},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},t(A,[2,25]),t(A,[2,27]),t(A,[2,28]),t(A,[2,29]),t(A,[2,33]),t(A,[2,34]),{24:[1,41]},t(u,[2,21]),{18:p,27:42,29:34,30:f,32:y,33:g},t(u,[2,22]),t(A,[2,26])],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(C,I){if(I.recoverable)this.trace(C);else{var k=new Error(C);throw k.hash=I,k}},parse:function(C){var I=this,k=[0],T=[],j=[null],L=[],Q=this.table,ne="",W=0,ee=0,ue=0,U=2,q=1,N=L.slice.call(arguments,1),Y=Object.create(this.lexer),oe={yy:{}};for(var M in this.yy)Object.prototype.hasOwnProperty.call(this.yy,M)&&(oe.yy[M]=this.yy[M]);Y.setInput(C,oe.yy),oe.yy.lexer=Y,oe.yy.parser=this,typeof Y.yylloc>"u"&&(Y.yylloc={});var V=Y.yylloc;L.push(V);var se=Y.options&&Y.options.ranges;typeof oe.yy.parseError=="function"?this.parseError=oe.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function de(mr){k.length=k.length-2*mr,j.length=j.length-mr,L.length=L.length-mr}for(var ye=function(){var mr;return mr=Y.lex()||q,typeof mr!="number"&&(mr=I.symbols_[mr]||mr),mr},we,Oe,xe,Me,Re,_t,pt={},on,hr,Es,Ki;;){if(xe=k[k.length-1],this.defaultActions[xe]?Me=this.defaultActions[xe]:((we===null||typeof we>"u")&&(we=ye()),Me=Q[xe]&&Q[xe][we]),typeof Me>"u"||!Me.length||!Me[0]){var vo="";Ki=[];for(on in Q[xe])this.terminals_[on]&&on>U&&Ki.push("'"+this.terminals_[on]+"'");Y.showPosition?vo="Parse error on line "+(W+1)+`:
`+Y.showPosition()+`
Expecting `+Ki.join(", ")+", got '"+(this.terminals_[we]||we)+"'":vo="Parse error on line "+(W+1)+": Unexpected "+(we==q?"end of input":"'"+(this.terminals_[we]||we)+"'"),this.parseError(vo,{text:Y.match,token:this.terminals_[we]||we,line:Y.yylineno,loc:V,expected:Ki})}if(Me[0]instanceof Array&&Me.length>1)throw new Error("Parse Error: multiple actions possible at state: "+xe+", token: "+we);switch(Me[0]){case 1:k.push(we),j.push(Y.yytext),L.push(Y.yylloc),k.push(Me[1]),we=null,Oe?(we=Oe,Oe=null):(ee=Y.yyleng,ne=Y.yytext,W=Y.yylineno,V=Y.yylloc,ue>0&&ue--);break;case 2:if(hr=this.productions_[Me[1]][1],pt.$=j[j.length-hr],pt._$={first_line:L[L.length-(hr||1)].first_line,last_line:L[L.length-1].last_line,first_column:L[L.length-(hr||1)].first_column,last_column:L[L.length-1].last_column},se&&(pt._$.range=[L[L.length-(hr||1)].range[0],L[L.length-1].range[1]]),_t=this.performAction.apply(pt,[ne,ee,W,oe.yy,Me[1],j,L].concat(N)),typeof _t<"u")return _t;hr&&(k=k.slice(0,-1*hr*2),j=j.slice(0,-1*hr),L=L.slice(0,-1*hr)),k.push(this.productions_[Me[1]][0]),j.push(pt.$),L.push(pt._$),Es=Q[k[k.length-2]][k[k.length-1]],k.push(Es);break;case 3:return!0}}return!0}},b={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(F){for(var C in F)this._node[C]=F[C];return this._node},node:function(F){return arguments.length&&(this._node=F),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var F=this._nodes;return this.initialize(),F}},w=function(){var F={EOF:1,parseError:function(I,k){if(this.yy.parser)this.yy.parser.parseError(I,k);else throw new Error(I)},setInput:function(C,I){return this.yy=I||this.yy||{},this._input=C,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var C=this._input[0];this.yytext+=C,this.yyleng++,this.offset++,this.match+=C,this.matched+=C;var I=C.match(/(?:\r\n?|\n).*/g);return I?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),C},unput:function(C){var I=C.length,k=C.split(/(?:\r\n?|\n)/g);this._input=C+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-I),this.offset-=I;var T=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),k.length-1&&(this.yylineno-=k.length-1);var j=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:k?(k.length===T.length?this.yylloc.first_column:0)+T[T.length-k.length].length-k[0].length:this.yylloc.first_column-I},this.options.ranges&&(this.yylloc.range=[j[0],j[0]+this.yyleng-I]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(C){this.unput(this.match.slice(C))},pastInput:function(){var C=this.matched.substr(0,this.matched.length-this.match.length);return(C.length>20?"...":"")+C.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var C=this.match;return C.length<20&&(C+=this._input.substr(0,20-C.length)),(C.substr(0,20)+(C.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var C=this.pastInput(),I=new Array(C.length+1).join("-");return C+this.upcomingInput()+`
`+I+"^"},test_match:function(C,I){var k,T,j;if(this.options.backtrack_lexer&&(j={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(j.yylloc.range=this.yylloc.range.slice(0))),T=C[0].match(/(?:\r\n?|\n).*/g),T&&(this.yylineno+=T.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:T?T[T.length-1].length-T[T.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+C[0].length},this.yytext+=C[0],this.match+=C[0],this.matches=C,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(C[0].length),this.matched+=C[0],k=this.performAction.call(this,this.yy,this,I,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),k)return k;if(this._backtrack){for(var L in j)this[L]=j[L];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var C,I,k,T;this._more||(this.yytext="",this.match="");for(var j=this._currentRules(),L=0;L<j.length;L++)if(k=this._input.match(this.rules[j[L]]),k&&(!I||k[0].length>I[0].length)){if(I=k,T=L,this.options.backtrack_lexer){if(C=this.test_match(k,j[L]),C!==!1)return C;if(this._backtrack){I=!1;continue}else return!1}else if(!this.options.flex)break}return I?(C=this.test_match(I,j[T]),C!==!1?C:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var I=this.next();return I||this.lex()},begin:function(I){this.conditionStack.push(I)},popState:function(){var I=this.conditionStack.length-1;return I>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(I){return I=this.conditionStack.length-1-Math.abs(I||0),I>=0?this.conditionStack[I]:"INITIAL"},pushState:function(I){this.begin(I)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(I,k,T,j){var L=j;switch(T){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return k.yytext=k.yytext.substr(1,k.yyleng-2),32;break;case 11:return k.yytext=k.yytext.substr(1,k.yyleng-2),33;break;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return F}();x.lexer=w;function D(){this.yy={}}return D.prototype=x,x.Parser=D,new D}();typeof TO<"u"&&typeof Bh<"u"&&(Bh.parser=rv,Bh.Parser=rv.Parser,Bh.parse=function(){return rv.parse.apply(rv,arguments)})});var y6=v(Ys=>{"use strict";var Uie=Ys&&Ys.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Vie=Ys&&Ys.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Kie=Ys&&Ys.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Uie(e,t,r);return Vie(e,t),e};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Parser=void 0;var zie=Kie(m6());function Hie(){var t=new zie.Parser,e=t.parseError;return t.yy.parseError=function(){t.yy.ast&&t.yy.ast.initialize(),e.apply(t,arguments)},t}Ys.Parser=Hie});var g6=v(nv=>{"use strict";Object.defineProperty(nv,"__esModule",{value:!0});nv.assert=void 0;var Wie=function(){function t(){}return t.ok=function(e,r){if(!e)throw new Error(r)},t.equal=function(e,r,n){if(e!==r)throw new Error(n)},t}();nv.assert=Wie});var v6=v(sv=>{"use strict";Object.defineProperty(sv,"__esModule",{value:!0});sv.JSONPath=void 0;var Jie=p6(),Gie=h6(),iv=y6(),Vr=g6(),Zie=function(){function t(){}return t.parse=function(e){return Vr.assert.ok(typeof e=="string","we need a path"),new iv.Parser().parse(e)},t.parent=function(e,r){Vr.assert.ok(e instanceof Object,"obj needs to be an object"),Vr.assert.ok(r,"we need a path");var n=this.nodes(e,r)[0],s=n.path.pop();return this.value(e,n.path)},t.apply=function(e,r,n){Vr.assert.ok(e instanceof Object,"obj needs to be an object"),Vr.assert.ok(r,"we need a path"),Vr.assert.equal(typeof n,"function","fn needs to be function");var s=this.nodes(e,r).sort(function(i,o){return o.path.length-i.path.length});return s.forEach(function(i){var o=i.path.pop(),a=this.value(e,this.stringify(i.path)),c=i.value=n.call(e,a[o]);a[o]=c},this),s},t.value=function(e,r,n){if(Vr.assert.ok(e instanceof Object,"obj needs to be an object"),Vr.assert.ok(r,"we need a path"),n!==void 0){var s=this.nodes(e,r).shift();if(!s)return this._vivify(e,r,n);var i=s.path.slice(-1).shift(),o=this.parent(e,this.stringify(s.path));o[i]=n}return this.query(e,this.stringify(r),1).shift()},t._vivify=function(e,r,n){var s=this;Vr.assert.ok(e instanceof Object,"obj needs to be an object"),Vr.assert.ok(r,"we need a path");var i=new iv.Parser().parse(r).map(function(a){return a.expression.value}),o=function(a,c){var u=a.pop(),l=s.value(e,a);l||(o(a.concat(),typeof u=="string"?{}:[]),l=s.value(e,a)),l[u]=c};return o(i,n),this.query(e,r)[0]},t.query=function(e,r,n){Vr.assert.ok(e instanceof Object,"obj needs to be an object"),Vr.assert.ok(typeof r=="string","we need a path");var s=this.nodes(e,r,n).map(function(i){return i.value});return s},t.paths=function(e,r,n){Vr.assert.ok(e instanceof Object,"obj needs to be an object"),Vr.assert.ok(r,"we need a path");var s=this.nodes(e,r,n).map(function(i){return i.path});return s},t.nodes=function(e,r,n){if(Vr.assert.ok(e instanceof Object,"obj needs to be an object"),Vr.assert.ok(r,"we need a path"),n===0)return[];var s=new iv.Parser().parse(r),i=new Jie.Handlers,o=[{path:["$"],value:e}],a=[];return s.length&&s[0].expression.type=="root"&&s.shift(),s.length?(s.forEach(function(c,u){if(!(a.length>=n)){var l=i.resolve(c),d=[];o.forEach(function(p){if(!(a.length>=n)){var f=l(c,p,n);u==s.length-1?a=a.concat(f||[]):d=d.concat(f||[])}}),o=d}}),n?a.slice(0,n):a):o},t.stringify=function(e){Vr.assert.ok(e,"we need a path");var r="$",n={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return e=this._normalize(e),e.forEach(function(s){if(s.expression.type!="root"){var i=[s.scope,s.operation].join("-"),o=n[i],a;if(s.expression.type=="string_literal"?a=JSON.stringify(s.expression.value):a=s.expression.value,!o)throw new Error("couldn't find template "+i);r+=o.replace(/{{value}}/,a)}}),r},t._normalize=function(e){if(Vr.assert.ok(e,"we need a path"),typeof e=="string")return new iv.Parser().parse(e);if(Array.isArray(e)&&typeof e[0]=="string"){var r=[{expression:{type:"root",value:"$"}}];return e.forEach(function(n,s){if(!(n=="$"&&s===0))if(typeof n=="string"&&n.match("^"+Gie.TOKENS.identifier+"$"))r.push({operation:"member",scope:"child",expression:{value:n,type:"identifier"}});else{var i=typeof n=="number"?"numeric_literal":"string_literal";r.push({operation:"subscript",scope:"child",expression:{value:n,type:i}})}}),r}else if(Array.isArray(e)&&typeof e[0]=="object")return e;throw new Error("couldn't understand path "+e)},t}();sv.JSONPath=Zie});var Ti=v(Bc=>{"use strict";var Xie=Bc&&Bc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Yie=Bc&&Bc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xie(e,t,r)};Object.defineProperty(Bc,"__esModule",{value:!0});Yie(v6(),Bc)});var w6=v((rTe,_6)=>{"use strict";var Qie="Function.prototype.bind called on incompatible ",ese=Object.prototype.toString,tse=Math.max,rse="[object Function]",b6=function(e,r){for(var n=[],s=0;s<e.length;s+=1)n[s]=e[s];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},nse=function(e,r){for(var n=[],s=r||0,i=0;s<e.length;s+=1,i+=1)n[i]=e[s];return n},ise=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};_6.exports=function(e){var r=this;if(typeof r!="function"||ese.apply(r)!==rse)throw new TypeError(Qie+r);for(var n=nse(arguments,1),s,i=function(){if(this instanceof s){var l=r.apply(this,b6(n,arguments));return Object(l)===l?l:this}return r.apply(e,b6(n,arguments))},o=tse(0,r.length-n.length),a=[],c=0;c<o;c++)a[c]="$"+c;if(s=Function("binder","return function ("+ise(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var u=function(){};u.prototype=r.prototype,s.prototype=new u,u.prototype=null}return s}});var ov=v((nTe,E6)=>{"use strict";var sse=w6();E6.exports=Function.prototype.bind||sse});var A6=v((iTe,S6)=>{"use strict";S6.exports=Error});var x6=v((sTe,D6)=>{"use strict";D6.exports=EvalError});var P6=v((oTe,C6)=>{"use strict";C6.exports=RangeError});var F6=v((aTe,O6)=>{"use strict";O6.exports=ReferenceError});var av=v((uTe,T6)=>{"use strict";T6.exports=SyntaxError});var dt=v((cTe,I6)=>{"use strict";I6.exports=TypeError});var k6=v((lTe,B6)=>{"use strict";B6.exports=URIError});var EA=v((dTe,R6)=>{"use strict";R6.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==s||o.enumerable!==!0)return!1}return!0}});var kc=v((fTe,j6)=>{"use strict";var $6=typeof Symbol<"u"&&Symbol,ose=EA();j6.exports=function(){return typeof $6!="function"||typeof Symbol!="function"||typeof $6("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:ose()}});var AA=v((pTe,N6)=>{"use strict";var SA={__proto__:null,foo:{}},ase=Object;N6.exports=function(){return{__proto__:SA}.foo===SA.foo&&!(SA instanceof ase)}});var Rc=v((hTe,M6)=>{"use strict";var use=Function.prototype.call,cse=Object.prototype.hasOwnProperty,lse=ov();M6.exports=lse.call(use,cse)});var ar=v((mTe,K6)=>{"use strict";var ft,dse=A6(),fse=x6(),pse=P6(),hse=F6(),zd=av(),Kd=dt(),mse=k6(),V6=Function,DA=function(t){try{return V6('"use strict"; return ('+t+").constructor;")()}catch{}},$c=Object.getOwnPropertyDescriptor;if($c)try{$c({},"")}catch{$c=null}var xA=function(){throw new Kd},yse=$c?function(){try{return arguments.callee,xA}catch{try{return $c(arguments,"callee").get}catch{return xA}}}():xA,Ud=kc()(),gse=AA()(),Kr=Object.getPrototypeOf||(gse?function(t){return t.__proto__}:null),Vd={},vse=typeof Uint8Array>"u"||!Kr?ft:Kr(Uint8Array),jc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?ft:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ft:ArrayBuffer,"%ArrayIteratorPrototype%":Ud&&Kr?Kr([][Symbol.iterator]()):ft,"%AsyncFromSyncIteratorPrototype%":ft,"%AsyncFunction%":Vd,"%AsyncGenerator%":Vd,"%AsyncGeneratorFunction%":Vd,"%AsyncIteratorPrototype%":Vd,"%Atomics%":typeof Atomics>"u"?ft:Atomics,"%BigInt%":typeof BigInt>"u"?ft:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ft:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ft:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ft:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":dse,"%eval%":eval,"%EvalError%":fse,"%Float32Array%":typeof Float32Array>"u"?ft:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ft:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ft:FinalizationRegistry,"%Function%":V6,"%GeneratorFunction%":Vd,"%Int8Array%":typeof Int8Array>"u"?ft:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ft:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ft:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ud&&Kr?Kr(Kr([][Symbol.iterator]())):ft,"%JSON%":typeof JSON=="object"?JSON:ft,"%Map%":typeof Map>"u"?ft:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ud||!Kr?ft:Kr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ft:Promise,"%Proxy%":typeof Proxy>"u"?ft:Proxy,"%RangeError%":pse,"%ReferenceError%":hse,"%Reflect%":typeof Reflect>"u"?ft:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ft:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ud||!Kr?ft:Kr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ft:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ud&&Kr?Kr(""[Symbol.iterator]()):ft,"%Symbol%":Ud?Symbol:ft,"%SyntaxError%":zd,"%ThrowTypeError%":yse,"%TypedArray%":vse,"%TypeError%":Kd,"%Uint8Array%":typeof Uint8Array>"u"?ft:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ft:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ft:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ft:Uint32Array,"%URIError%":mse,"%WeakMap%":typeof WeakMap>"u"?ft:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ft:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ft:WeakSet};if(Kr)try{null.error}catch(t){q6=Kr(Kr(t)),jc["%Error.prototype%"]=q6}var q6,bse=function t(e){var r;if(e==="%AsyncFunction%")r=DA("async function () {}");else if(e==="%GeneratorFunction%")r=DA("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=DA("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&Kr&&(r=Kr(s.prototype))}return jc[e]=r,r},L6={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},kh=ov(),uv=Rc(),_se=kh.call(Function.call,Array.prototype.concat),wse=kh.call(Function.apply,Array.prototype.splice),U6=kh.call(Function.call,String.prototype.replace),cv=kh.call(Function.call,String.prototype.slice),Ese=kh.call(Function.call,RegExp.prototype.exec),Sse=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ase=/\\(\\)?/g,Dse=function(e){var r=cv(e,0,1),n=cv(e,-1);if(r==="%"&&n!=="%")throw new zd("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new zd("invalid intrinsic syntax, expected opening `%`");var s=[];return U6(e,Sse,function(i,o,a,c){s[s.length]=a?U6(c,Ase,"$1"):o||i}),s},xse=function(e,r){var n=e,s;if(uv(L6,n)&&(s=L6[n],n="%"+s[0]+"%"),uv(jc,n)){var i=jc[n];if(i===Vd&&(i=bse(n)),typeof i>"u"&&!r)throw new Kd("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new zd("intrinsic "+e+" does not exist!")};K6.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Kd("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Kd('"allowMissing" argument must be a boolean');if(Ese(/^%?[^%]*%?$/,e)===null)throw new zd("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Dse(e),s=n.length>0?n[0]:"",i=xse("%"+s+"%",r),o=i.name,a=i.value,c=!1,u=i.alias;u&&(s=u[0],wse(n,_se([0,1],u)));for(var l=1,d=!0;l<n.length;l+=1){var p=n[l],f=cv(p,0,1),h=cv(p,-1);if((f==='"'||f==="'"||f==="`"||h==='"'||h==="'"||h==="`")&&f!==h)throw new zd("property names with quotes must have matching quotes");if((p==="constructor"||!d)&&(c=!0),s+="."+p,o="%"+s+"%",uv(jc,o))a=jc[o];else if(a!=null){if(!(p in a)){if(!r)throw new Kd("base intrinsic for "+e+" exists, but the property is not available.");return}if($c&&l+1>=n.length){var y=$c(a,p);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[p]}else d=uv(a,p),a=a[p];d&&!c&&(jc[o]=a)}}return a}});var Rh=v((yTe,z6)=>{"use strict";var Cse=ar(),lv=Cse("%Object.defineProperty%",!0)||!1;if(lv)try{lv({},"a",{value:1})}catch{lv=!1}z6.exports=lv});var fv=v((gTe,H6)=>{"use strict";var Pse=ar(),dv=Pse("%Object.getOwnPropertyDescriptor%",!0);if(dv)try{dv([],"length")}catch{dv=null}H6.exports=dv});var pv=v((vTe,G6)=>{"use strict";var W6=Rh(),Ose=av(),Hd=dt(),J6=fv();G6.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Hd("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Hd("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Hd("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Hd("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Hd("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Hd("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,c=!!J6&&J6(e,r);if(W6)W6(e,r,{configurable:o===null&&c?c.configurable:!o,enumerable:s===null&&c?c.enumerable:!s,value:n,writable:i===null&&c?c.writable:!i});else if(a||!s&&!i&&!o)e[r]=n;else throw new Ose("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var $h=v((bTe,X6)=>{"use strict";var CA=Rh(),Z6=function(){return!!CA};Z6.hasArrayLengthDefineBug=function(){if(!CA)return null;try{return CA([],"length",{value:1}).length!==1}catch{return!0}};X6.exports=Z6});var rR=v((_Te,tR)=>{"use strict";var Fse=ar(),Y6=pv(),Tse=$h()(),Q6=fv(),eR=dt(),Ise=Fse("%Math.floor%");tR.exports=function(e,r){if(typeof e!="function")throw new eR("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Ise(r)!==r)throw new eR("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],s=!0,i=!0;if("length"in e&&Q6){var o=Q6(e,"length");o&&!o.configurable&&(s=!1),o&&!o.writable&&(i=!1)}return(s||i||!n)&&(Tse?Y6(e,"length",r,!0,!0):Y6(e,"length",r)),e}});var jh=v((wTe,hv)=>{"use strict";var PA=ov(),mv=ar(),Bse=rR(),kse=dt(),sR=mv("%Function.prototype.apply%"),oR=mv("%Function.prototype.call%"),aR=mv("%Reflect.apply%",!0)||PA.call(oR,sR),nR=Rh(),Rse=mv("%Math.max%");hv.exports=function(e){if(typeof e!="function")throw new kse("a function is required");var r=aR(PA,oR,arguments);return Bse(r,1+Rse(0,e.length-(arguments.length-1)),!0)};var iR=function(){return aR(PA,sR,arguments)};nR?nR(hv.exports,"apply",{value:iR}):hv.exports.apply=iR});var OA=v((ETe,cR)=>{"use strict";var uR=Object.prototype.toString;cR.exports=function(e){var r=uR.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&uR.call(e.callee)==="[object Function]"),n}});var vR=v((STe,gR)=>{"use strict";var yR;Object.keys||(Nh=Object.prototype.hasOwnProperty,FA=Object.prototype.toString,lR=OA(),TA=Object.prototype.propertyIsEnumerable,dR=!TA.call({toString:null},"toString"),fR=TA.call(function(){},"prototype"),Mh=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],yv=function(t){var e=t.constructor;return e&&e.prototype===t},pR={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hR=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!pR["$"+t]&&Nh.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{yv(window[t])}catch{return!0}}catch{return!0}return!1}(),mR=function(t){if(typeof window>"u"||!hR)return yv(t);try{return yv(t)}catch{return!1}},yR=function(e){var r=e!==null&&typeof e=="object",n=FA.call(e)==="[object Function]",s=lR(e),i=r&&FA.call(e)==="[object String]",o=[];if(!r&&!n&&!s)throw new TypeError("Object.keys called on a non-object");var a=fR&&n;if(i&&e.length>0&&!Nh.call(e,0))for(var c=0;c<e.length;++c)o.push(String(c));if(s&&e.length>0)for(var u=0;u<e.length;++u)o.push(String(u));else for(var l in e)!(a&&l==="prototype")&&Nh.call(e,l)&&o.push(String(l));if(dR)for(var d=mR(e),p=0;p<Mh.length;++p)!(d&&Mh[p]==="constructor")&&Nh.call(e,Mh[p])&&o.push(Mh[p]);return o});var Nh,FA,lR,TA,dR,fR,Mh,yv,pR,hR,mR;gR.exports=yR});var ER=v((ATe,wR)=>{"use strict";var $se=Array.prototype.slice,jse=OA(),bR=Object.keys,gv=bR?function(e){return bR(e)}:vR(),_R=Object.keys;gv.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return jse(n)?_R($se.call(n)):_R(n)})}else Object.keys=gv;return Object.keys||gv};wR.exports=gv});var su=v((DTe,xR)=>{"use strict";var Nse=ER(),Mse=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",qse=Object.prototype.toString,Lse=Array.prototype.concat,SR=pv(),Use=function(t){return typeof t=="function"&&qse.call(t)==="[object Function]"},AR=$h()(),Vse=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!Use(n)||!n())return}AR?SR(t,e,r,!0):SR(t,e,r)},DR=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Nse(e);Mse&&(n=Lse.call(n,Object.getOwnPropertySymbols(e)));for(var s=0;s<n.length;s+=1)Vse(t,n[s],e[n[s]],r[n[s]])};DR.supportsDescriptors=!!AR;xR.exports=DR});var ni=v((xTe,OR)=>{"use strict";var CR=ar(),PR=jh(),Kse=PR(CR("String.prototype.indexOf"));OR.exports=function(e,r){var n=CR(e,!!r);return typeof n=="function"&&Kse(e,".prototype.")>-1?PR(n):n}});var IA=v((CTe,TR)=>{"use strict";var zse=ar(),FR=zse("%Array%"),Hse=!FR.isArray&&ni()("Object.prototype.toString");TR.exports=FR.isArray||function(e){return Hse(e)==="[object Array]"}});var BA=v((PTe,IR)=>{"use strict";IR.exports=IA()});var kA=v((OTe,BR)=>{"use strict";var Wse=ar(),Jse=ni(),Gse=dt(),Zse=BA(),Xse=Wse("%Reflect.apply%",!0)||Jse("Function.prototype.apply");BR.exports=function(e,r){var n=arguments.length>2?arguments[2]:[];if(!Zse(n))throw new Gse("Assertion failed: optional `argumentsList`, if provided, must be a List");return Xse(e,r,n)}});var kR=v(()=>{});var Vh=v((ITe,QR)=>{var KA=typeof Map=="function"&&Map.prototype,RA=Object.getOwnPropertyDescriptor&&KA?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,bv=KA&&RA&&typeof RA.get=="function"?RA.get:null,RR=KA&&Map.prototype.forEach,zA=typeof Set=="function"&&Set.prototype,$A=Object.getOwnPropertyDescriptor&&zA?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,_v=zA&&$A&&typeof $A.get=="function"?$A.get:null,$R=zA&&Set.prototype.forEach,Yse=typeof WeakMap=="function"&&WeakMap.prototype,Lh=Yse?WeakMap.prototype.has:null,Qse=typeof WeakSet=="function"&&WeakSet.prototype,Uh=Qse?WeakSet.prototype.has:null,eoe=typeof WeakRef=="function"&&WeakRef.prototype,jR=eoe?WeakRef.prototype.deref:null,toe=Boolean.prototype.valueOf,roe=Object.prototype.toString,noe=Function.prototype.toString,ioe=String.prototype.match,HA=String.prototype.slice,au=String.prototype.replace,soe=String.prototype.toUpperCase,NR=String.prototype.toLowerCase,WR=RegExp.prototype.test,MR=Array.prototype.concat,Qs=Array.prototype.join,ooe=Array.prototype.slice,qR=Math.floor,MA=typeof BigInt=="function"?BigInt.prototype.valueOf:null,jA=Object.getOwnPropertySymbols,qA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="object",fn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Wd||!0)?Symbol.toStringTag:null,JR=Object.prototype.propertyIsEnumerable,LR=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function UR(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||WR.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-qR(-t):qR(t);if(n!==t){var s=String(n),i=HA.call(e,s.length+1);return au.call(s,r,"$&_")+"."+au.call(au.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return au.call(e,r,"$&_")}var LA=kR(),VR=LA.custom,KR=ZR(VR)?VR:null;QR.exports=function t(e,r,n,s){var i=r||{};if(ou(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ou(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=ou(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ou(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ou(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return YR(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return a?UR(e,c):c}if(typeof e=="bigint"){var u=String(e)+"n";return a?UR(e,u):u}var l=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=l&&l>0&&typeof e=="object")return UA(e)?"[Array]":"[Object]";var d=Aoe(i,n);if(typeof s>"u")s=[];else if(XR(s,e)>=0)return"[Circular]";function p(Q,ne,W){if(ne&&(s=ooe.call(s),s.push(ne)),W){var ee={depth:i.depth};return ou(i,"quoteStyle")&&(ee.quoteStyle=i.quoteStyle),t(Q,ee,n+1,s)}return t(Q,i,n+1,s)}if(typeof e=="function"&&!zR(e)){var f=moe(e),h=vv(e,p);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(h.length>0?" { "+Qs.call(h,", ")+" }":"")}if(ZR(e)){var y=Wd?au.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):qA.call(e);return typeof e=="object"&&!Wd?qh(y):y}if(woe(e)){for(var g="<"+NR.call(String(e.nodeName)),A=e.attributes||[],x=0;x<A.length;x++)g+=" "+A[x].name+"="+GR(aoe(A[x].value),"double",i);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+NR.call(String(e.nodeName))+">",g}if(UA(e)){if(e.length===0)return"[]";var b=vv(e,p);return d&&!Soe(b)?"["+VA(b,d)+"]":"[ "+Qs.call(b,", ")+" ]"}if(coe(e)){var w=vv(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!JR.call(e,"cause")?"{ ["+String(e)+"] "+Qs.call(MR.call("[cause]: "+p(e.cause),w),", ")+" }":w.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Qs.call(w,", ")+" }"}if(typeof e=="object"&&o){if(KR&&typeof e[KR]=="function"&&LA)return LA(e,{depth:l-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(yoe(e)){var D=[];return RR&&RR.call(e,function(Q,ne){D.push(p(ne,e,!0)+" => "+p(Q,e))}),HR("Map",bv.call(e),D,d)}if(boe(e)){var F=[];return $R&&$R.call(e,function(Q){F.push(p(Q,e))}),HR("Set",_v.call(e),F,d)}if(goe(e))return NA("WeakMap");if(_oe(e))return NA("WeakSet");if(voe(e))return NA("WeakRef");if(doe(e))return qh(p(Number(e)));if(poe(e))return qh(p(MA.call(e)));if(foe(e))return qh(toe.call(e));if(loe(e))return qh(p(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof globalThis<"u"&&e===globalThis)return"{ [object globalThis] }";if(!uoe(e)&&!zR(e)){var C=vv(e,p),I=LR?LR(e)===Object.prototype:e instanceof Object||e.constructor===Object,k=e instanceof Object?"":"null prototype",T=!I&&fn&&Object(e)===e&&fn in e?HA.call(uu(e),8,-1):k?"Object":"",j=I||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",L=j+(T||k?"["+Qs.call(MR.call([],T||[],k||[]),": ")+"] ":"");return C.length===0?L+"{}":d?L+"{"+VA(C,d)+"}":L+"{ "+Qs.call(C,", ")+" }"}return String(e)};function GR(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function aoe(t){return au.call(String(t),/"/g,"&quot;")}function UA(t){return uu(t)==="[object Array]"&&(!fn||!(typeof t=="object"&&fn in t))}function uoe(t){return uu(t)==="[object Date]"&&(!fn||!(typeof t=="object"&&fn in t))}function zR(t){return uu(t)==="[object RegExp]"&&(!fn||!(typeof t=="object"&&fn in t))}function coe(t){return uu(t)==="[object Error]"&&(!fn||!(typeof t=="object"&&fn in t))}function loe(t){return uu(t)==="[object String]"&&(!fn||!(typeof t=="object"&&fn in t))}function doe(t){return uu(t)==="[object Number]"&&(!fn||!(typeof t=="object"&&fn in t))}function foe(t){return uu(t)==="[object Boolean]"&&(!fn||!(typeof t=="object"&&fn in t))}function ZR(t){if(Wd)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!qA)return!1;try{return qA.call(t),!0}catch{}return!1}function poe(t){if(!t||typeof t!="object"||!MA)return!1;try{return MA.call(t),!0}catch{}return!1}var hoe=Object.prototype.hasOwnProperty||function(t){return t in this};function ou(t,e){return hoe.call(t,e)}function uu(t){return roe.call(t)}function moe(t){if(t.name)return t.name;var e=ioe.call(noe.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function XR(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function yoe(t){if(!bv||!t||typeof t!="object")return!1;try{bv.call(t);try{_v.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function goe(t){if(!Lh||!t||typeof t!="object")return!1;try{Lh.call(t,Lh);try{Uh.call(t,Uh)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function voe(t){if(!jR||!t||typeof t!="object")return!1;try{return jR.call(t),!0}catch{}return!1}function boe(t){if(!_v||!t||typeof t!="object")return!1;try{_v.call(t);try{bv.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function _oe(t){if(!Uh||!t||typeof t!="object")return!1;try{Uh.call(t,Uh);try{Lh.call(t,Lh)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function woe(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function YR(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return YR(HA.call(t,0,e.maxStringLength),e)+n}var s=au.call(au.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Eoe);return GR(s,"single",e)}function Eoe(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+soe.call(e.toString(16))}function qh(t){return"Object("+t+")"}function NA(t){return t+" { ? }"}function HR(t,e,r,n){var s=n?VA(r,n):Qs.call(r,", ");return t+" ("+e+") {"+s+"}"}function Soe(t){for(var e=0;e<t.length;e++)if(XR(t[e],`
`)>=0)return!1;return!0}function Aoe(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Qs.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Qs.call(Array(e+1),r)}}function VA(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Qs.call(t,","+r)+`
`+e.prev}function vv(t,e){var r=UA(t),n=[];if(r){n.length=t.length;for(var s=0;s<t.length;s++)n[s]=ou(t,s)?e(t[s],t):""}var i=typeof jA=="function"?jA(t):[],o;if(Wd){o={};for(var a=0;a<i.length;a++)o["$"+i[a]]=i[a]}for(var c in t)ou(t,c)&&(r&&String(Number(c))===c&&c<t.length||Wd&&o["$"+c]instanceof Symbol||(WR.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if(typeof jA=="function")for(var u=0;u<i.length;u++)JR.call(t,i[u])&&n.push("["+e(i[u])+"]: "+e(t[i[u]],t));return n}});var Nc=v((BTe,e$)=>{"use strict";e$.exports=function(e){return typeof e=="string"||typeof e=="symbol"}});var r$=v((kTe,t$)=>{"use strict";t$.exports=function(e){if(e===null)return"Null";if(typeof e>"u")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"}});var ds=v((RTe,n$)=>{"use strict";var Doe=r$();n$.exports=function(e){return typeof e=="symbol"?"Symbol":typeof e=="bigint"?"BigInt":Doe(e)}});var Kh=v(($Te,s$)=>{"use strict";var i$=dt(),xoe=Vh(),Coe=Nc(),Poe=ds();s$.exports=function(e,r){if(Poe(e)!=="Object")throw new i$("Assertion failed: Type(O) is not Object");if(!Coe(r))throw new i$("Assertion failed: IsPropertyKey(P) is not true, got "+xoe(r));return e[r]}});var a$=v((jTe,o$)=>{"use strict";var Ooe=dt(),Foe=Vh(),Toe=Nc();o$.exports=function(e,r){if(!Toe(r))throw new Ooe("Assertion failed: IsPropertyKey(P) is not true, got "+Foe(r));return e[r]}});var XA=v((NTe,l$)=>{"use strict";var c$=Function.prototype.toString,Jd=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,JA,wv;if(typeof Jd=="function"&&typeof Object.defineProperty=="function")try{JA=Object.defineProperty({},"length",{get:function(){throw wv}}),wv={},Jd(function(){throw 42},null,JA)}catch(t){t!==wv&&(Jd=null)}else Jd=null;var Ioe=/^\s*class\b/,GA=function(e){try{var r=c$.call(e);return Ioe.test(r)}catch{return!1}},WA=function(e){try{return GA(e)?!1:(c$.call(e),!0)}catch{return!1}},Ev=Object.prototype.toString,Boe="[object Object]",koe="[object Function]",Roe="[object GeneratorFunction]",$oe="[object HTMLAllCollection]",joe="[object HTML document.all class]",Noe="[object HTMLCollection]",Moe=typeof Symbol=="function"&&!!Symbol.toStringTag,qoe=!(0 in[,]),ZA=function(){return!1};typeof document=="object"&&(u$=document.all,Ev.call(u$)===Ev.call(document.all)&&(ZA=function(e){if((qoe||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=Ev.call(e);return(r===$oe||r===joe||r===Noe||r===Boe)&&e("")==null}catch{}return!1}));var u$;l$.exports=Jd?function(e){if(ZA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Jd(e,null,JA)}catch(r){if(r!==wv)return!1}return!GA(e)&&WA(e)}:function(e){if(ZA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Moe)return WA(e);if(GA(e))return!1;var r=Ev.call(e);return r!==koe&&r!==Roe&&!/^\[object HTML/.test(r)?!1:WA(e)}});var Sv=v((MTe,d$)=>{"use strict";d$.exports=XA()});var m$=v((qTe,h$)=>{"use strict";var f$=dt(),Loe=a$(),Uoe=Sv(),Voe=Nc(),p$=Vh();h$.exports=function(e,r){if(!Voe(r))throw new f$("Assertion failed: IsPropertyKey(P) is not true");var n=Loe(e,r);if(n!=null){if(!Uoe(n))throw new f$(p$(r)+" is not a function: "+p$(n));return n}}});var Av=v((LTe,y$)=>{"use strict";var Koe=EA();y$.exports=function(){return Koe()&&!!Symbol.toStringTag}});var tD=v((UTe,_$)=>{"use strict";var YA=ni(),g$=Av()(),v$,b$,QA,eD;g$&&(v$=YA("Object.prototype.hasOwnProperty"),b$=YA("RegExp.prototype.exec"),QA={},Dv=function(){throw QA},eD={toString:Dv,valueOf:Dv},typeof Symbol.toPrimitive=="symbol"&&(eD[Symbol.toPrimitive]=Dv));var Dv,zoe=YA("Object.prototype.toString"),Hoe=Object.getOwnPropertyDescriptor,Woe="[object RegExp]";_$.exports=g$?function(e){if(!e||typeof e!="object")return!1;var r=Hoe(e,"lastIndex"),n=r&&v$(r,"value");if(!n)return!1;try{b$(e,eD)}catch(s){return s===QA}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:zoe(e)===Woe}});var rD=v((VTe,w$)=>{"use strict";w$.exports=function(e){return!!e}});var A$=v((KTe,S$)=>{"use strict";var Joe=ar(),E$=Joe("%Symbol.match%",!0),Goe=tD(),Zoe=rD();S$.exports=function(e){if(!e||typeof e!="object")return!1;if(E$){var r=e[E$];if(typeof r<"u")return Zoe(r)}return Goe(e)}});var zh=v((zTe,D$)=>{"use strict";var Xoe=ar(),Yoe=Xoe("%String%"),Qoe=dt();D$.exports=function(e){if(typeof e=="symbol")throw new Qoe("Cannot convert a Symbol value to a string");return Yoe(e)}});var xv=v((HTe,x$)=>{"use strict";var eae=dt();x$.exports=function(e){if(e==null)throw new eae(arguments.length>0&&arguments[1]||"Cannot call method on "+e);return e}});var P$=v((WTe,C$)=>{"use strict";var Wh=function(){return typeof(function(){}).name=="string"},Hh=Object.getOwnPropertyDescriptor;if(Hh)try{Hh([],"length")}catch{Hh=null}Wh.functionsHaveConfigurableNames=function(){if(!Wh()||!Hh)return!1;var e=Hh(function(){},"name");return!!e&&!!e.configurable};var tae=Function.prototype.bind;Wh.boundFunctionsHaveNames=function(){return Wh()&&typeof tae=="function"&&(function(){}).bind().name!==""};C$.exports=Wh});var nD=v((JTe,F$)=>{"use strict";var O$=pv(),rae=$h()(),nae=P$().functionsHaveConfigurableNames(),iae=dt();F$.exports=function(e,r){if(typeof e!="function")throw new iae("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||nae)&&(rae?O$(e,"name",r,!0,!0):O$(e,"name",r)),e}});var iD=v((GTe,T$)=>{"use strict";var sae=nD(),oae=dt(),aae=Object;T$.exports=sae(function(){if(this==null||this!==aae(this))throw new oae("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0)});var sD=v((ZTe,I$)=>{"use strict";var uae=iD(),cae=su().supportsDescriptors,lae=Object.getOwnPropertyDescriptor;I$.exports=function(){if(cae&&/a/mig.flags==="gim"){var e=lae(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return uae}});var R$=v((XTe,k$)=>{"use strict";var dae=su().supportsDescriptors,fae=sD(),pae=Object.getOwnPropertyDescriptor,hae=Object.defineProperty,mae=TypeError,B$=Object.getPrototypeOf,yae=/a/;k$.exports=function(){if(!dae||!B$)throw new mae("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=fae(),r=B$(yae),n=pae(r,"flags");return(!n||n.get!==e)&&hae(r,"flags",{configurable:!0,enumerable:!1,get:e}),e}});var oD=v((YTe,N$)=>{"use strict";var gae=su(),vae=jh(),bae=iD(),$$=sD(),_ae=R$(),j$=vae($$());gae(j$,{getPolyfill:$$,implementation:bae,shim:_ae});N$.exports=j$});var aD=v((QTe,M$)=>{"use strict";M$.exports=function(e){return typeof e=="number"&&e>=55296&&e<=56319}});var uD=v((e8e,q$)=>{"use strict";q$.exports=function(e){return typeof e=="number"&&e>=56320&&e<=57343}});var V$=v((t8e,U$)=>{"use strict";var wae=ar(),Eae=dt(),L$=wae("%String.fromCharCode%"),Sae=aD(),Aae=uD();U$.exports=function(e,r){if(!Sae(e)||!Aae(r))throw new Eae("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return L$(e)+L$(r)}});var G$=v((r8e,J$)=>{"use strict";var K$=dt(),W$=ni(),Dae=aD(),z$=uD(),xae=V$(),Cae=W$("String.prototype.charAt"),H$=W$("String.prototype.charCodeAt");J$.exports=function(e,r){if(typeof e!="string")throw new K$("Assertion failed: `string` must be a String");var n=e.length;if(r<0||r>=n)throw new K$("Assertion failed: `position` must be >= 0, and < the length of `string`");var s=H$(e,r),i=Cae(e,r),o=Dae(s),a=z$(s);if(!o&&!a)return{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(a||r+1===n)return{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var c=H$(e,r+1);return z$(c)?{"[[CodePoint]]":xae(s,c),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}}});var Jh=v((n8e,Z$)=>{"use strict";Z$.exports=Number.isNaN||function(e){return e!==e}});var cD=v((i8e,X$)=>{"use strict";var Pae=Jh();X$.exports=function(t){return(typeof t=="number"||typeof t=="bigint")&&!Pae(t)&&t!==1/0&&t!==-1/0}});var ej=v((s8e,Q$)=>{"use strict";var Y$=ar(),Oae=Y$("%Math.abs%"),Fae=Y$("%Math.floor%"),Tae=Jh(),Iae=cD();Q$.exports=function(e){if(typeof e!="number"||Tae(e)||!Iae(e))return!1;var r=Oae(e);return Fae(r)===r}});var lD=v((o8e,tj)=>{"use strict";tj.exports=Number.MAX_SAFE_INTEGER||9007199254740991});var nj=v((a8e,rj)=>{"use strict";var Bae=G$(),kae=ej(),Rae=lD(),dD=dt();rj.exports=function(e,r,n){if(typeof e!="string")throw new dD("Assertion failed: `S` must be a String");if(!kae(r)||r<0||r>Rae)throw new dD("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if(typeof n!="boolean")throw new dD("Assertion failed: `unicode` must be a Boolean");if(!n)return r+1;var s=e.length;if(r+1>=s)return r+1;var i=Bae(e,r);return r+i["[[CodeUnitCount]]"]}});var sj=v((u8e,ij)=>{"use strict";var $ae=dt();ij.exports=function(e,r){if(typeof r!="boolean")throw new $ae("Assertion failed: Type(done) is not Boolean");return{value:e,done:r}}});var Cv=v((c8e,oj)=>{"use strict";var jae=dt(),Gh=Rc(),Nae={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};oj.exports=function(e){if(!e||typeof e!="object")return!1;for(var r in e)if(Gh(e,r)&&!Nae[r])return!1;var n=Gh(e,"[[Value]]")||Gh(e,"[[Writable]]"),s=Gh(e,"[[Get]]")||Gh(e,"[[Set]]");if(n&&s)throw new jae("Property Descriptors may not be both accessor and data descriptors");return!0}});var lj=v((l8e,cj)=>{"use strict";var Mae=$h(),aj=Rh(),uj=Mae.hasArrayLengthDefineBug(),qae=uj&&IA(),Lae=ni(),Uae=Lae("Object.prototype.propertyIsEnumerable");cj.exports=function(e,r,n,s,i,o){if(!aj){if(!e(o)||!o["[[Configurable]]"]||!o["[[Writable]]"]||i in s&&Uae(s,i)!==!!o["[[Enumerable]]"])return!1;var a=o["[[Value]]"];return s[i]=a,r(s[i],a)}return uj&&i==="length"&&"[[Value]]"in o&&qae(s)&&s.length!==o["[[Value]]"]?(s.length=o["[[Value]]"],s.length===o["[[Value]]"]):(aj(s,i,n(o)),!0)}});var fj=v((d8e,dj)=>{"use strict";dj.exports=function(e){if(typeof e>"u")return e;var r={};return"[[Value]]"in e&&(r.value=e["[[Value]]"]),"[[Writable]]"in e&&(r.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(r.get=e["[[Get]]"]),"[[Set]]"in e&&(r.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(r.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(r.configurable=!!e["[[Configurable]]"]),r}});var hj=v((f8e,pj)=>{"use strict";var Vae=dt(),Kae=Cv(),zae=fj();pj.exports=function(e){if(typeof e<"u"&&!Kae(e))throw new Vae("Assertion failed: `Desc` must be a Property Descriptor");return zae(e)}});var gj=v((p8e,yj)=>{"use strict";var Hae=dt(),mj=Rc(),Wae=Cv();yj.exports=function(e){if(typeof e>"u")return!1;if(!Wae(e))throw new Hae("Assertion failed: `Desc` must be a Property Descriptor");return!(!mj(e,"[[Value]]")&&!mj(e,"[[Writable]]"))}});var fD=v((h8e,bj)=>{"use strict";var vj=Jh();bj.exports=function(e,r){return e===r?e===0?1/e===1/r:!0:vj(e)&&vj(r)}});var Ej=v((m8e,wj)=>{"use strict";var eo=Rc(),Pv=dt(),Jae=ds(),pD=rD(),_j=Sv();wj.exports=function(e){if(Jae(e)!=="Object")throw new Pv("ToPropertyDescriptor requires an object");var r={};if(eo(e,"enumerable")&&(r["[[Enumerable]]"]=pD(e.enumerable)),eo(e,"configurable")&&(r["[[Configurable]]"]=pD(e.configurable)),eo(e,"value")&&(r["[[Value]]"]=e.value),eo(e,"writable")&&(r["[[Writable]]"]=pD(e.writable)),eo(e,"get")){var n=e.get;if(typeof n<"u"&&!_j(n))throw new Pv("getter must be a function");r["[[Get]]"]=n}if(eo(e,"set")){var s=e.set;if(typeof s<"u"&&!_j(s))throw new Pv("setter must be a function");r["[[Set]]"]=s}if((eo(r,"[[Get]]")||eo(r,"[[Set]]"))&&(eo(r,"[[Value]]")||eo(r,"[[Writable]]")))throw new Pv("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r}});var mD=v((y8e,Aj)=>{"use strict";var hD=dt(),Sj=Cv(),Gae=lj(),Zae=hj(),Xae=gj(),Yae=Nc(),Qae=fD(),eue=Ej(),tue=ds();Aj.exports=function(e,r,n){if(tue(e)!=="Object")throw new hD("Assertion failed: Type(O) is not Object");if(!Yae(r))throw new hD("Assertion failed: IsPropertyKey(P) is not true");var s=Sj(n)?n:eue(n);if(!Sj(s))throw new hD("Assertion failed: Desc is not a valid Property Descriptor");return Gae(Xae,Qae,Zae,e,r,s)}});var yD=v((g8e,Dj)=>{"use strict";Dj.exports=function(e){return e===null||typeof e!="function"&&typeof e!="object"}});var Oj=v((v8e,Pj)=>{"use strict";var Cj=ar(),rue=Cj("%Object.preventExtensions%",!0),nue=Cj("%Object.isExtensible%",!0),xj=yD();Pj.exports=rue?function(e){return!xj(e)&&nue(e)}:function(e){return!xj(e)}});var Tj=v((b8e,Fj)=>{"use strict";var Zh=dt(),iue=mD(),sue=Oj(),oue=Nc(),aue=ds();Fj.exports=function(e,r,n,s){if(aue(e)!=="Object")throw new Zh("Assertion failed: `homeObject` is not an Object");if(!oue(r))throw new Zh("Assertion failed: `key` is not a Property Key or a Private Name");if(typeof n!="function")throw new Zh("Assertion failed: `closure` is not a function");if(typeof s!="boolean")throw new Zh("Assertion failed: `enumerable` is not a Boolean");if(!sue(e))throw new Zh("Assertion failed: `homeObject` is not an ordinary, extensible object, with no non-configurable properties");var i={"[[Value]]":n,"[[Writable]]":!0,"[[Enumerable]]":s,"[[Configurable]]":!0};iue(e,r,i)}});var Bj=v((_8e,Ij)=>{"use strict";Ij.exports=function(e,r){for(var n=0;n<e.length;n+=1)r(e[n],n,e)}});var vD=v((w8e,Rj)=>{"use strict";var kj=ar(),Gd=ni(),uue=Vh(),cue=dt(),Ov=kj("%WeakMap%",!0),Fv=kj("%Map%",!0),lue=Gd("WeakMap.prototype.get",!0),due=Gd("WeakMap.prototype.set",!0),fue=Gd("WeakMap.prototype.has",!0),pue=Gd("Map.prototype.get",!0),hue=Gd("Map.prototype.set",!0),mue=Gd("Map.prototype.has",!0),gD=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},yue=function(t,e){var r=gD(t,e);return r&&r.value},gue=function(t,e,r){var n=gD(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},vue=function(t,e){return!!gD(t,e)};Rj.exports=function(){var e,r,n,s={assert:function(i){if(!s.has(i))throw new cue("Side channel does not contain "+uue(i))},get:function(i){if(Ov&&i&&(typeof i=="object"||typeof i=="function")){if(e)return lue(e,i)}else if(Fv){if(r)return pue(r,i)}else if(n)return yue(n,i)},has:function(i){if(Ov&&i&&(typeof i=="object"||typeof i=="function")){if(e)return fue(e,i)}else if(Fv){if(r)return mue(r,i)}else if(n)return vue(n,i);return!1},set:function(i,o){Ov&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new Ov),due(e,i,o)):Fv?(r||(r=new Fv),hue(r,i,o)):(n||(n={key:{},next:null}),gue(n,i,o))}};return s}});var _D=v((E8e,$j)=>{"use strict";var bue=Rc(),Xh=vD()(),ea=dt(),bD={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new ea("`O` is not an object");if(typeof e!="string")throw new ea("`slot` must be a string");if(Xh.assert(t),!bD.has(t,e))throw new ea("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new ea("`O` is not an object");if(typeof e!="string")throw new ea("`slot` must be a string");var r=Xh.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new ea("`O` is not an object");if(typeof e!="string")throw new ea("`slot` must be a string");var r=Xh.get(t);return!!r&&bue(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new ea("`O` is not an object");if(typeof e!="string")throw new ea("`slot` must be a string");var n=Xh.get(t);n||(n={},Xh.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(bD);$j.exports=bD});var qj=v((S8e,Mj)=>{"use strict";var _ue=ar(),jj=_ue("%Object.create%",!0),Nj=dt(),wue=av(),Eue=BA(),Sue=ds(),Aue=Bj(),Due=_D(),xue=AA()();Mj.exports=function(e){if(e!==null&&Sue(e)!=="Object")throw new Nj("Assertion failed: `proto` must be null or an object");var r=arguments.length<2?[]:arguments[1];if(!Eue(r))throw new Nj("Assertion failed: `additionalInternalSlotsList` must be an Array");var n;if(jj)n=jj(e);else if(xue)n={__proto__:e};else{if(e===null)throw new wue("native Object.create support is required to create null objects");var s=function(){};s.prototype=e,n=new s}return r.length>0&&Aue(r,function(i){Due.set(n,i,void 0)}),n}});var Uj=v((A8e,Lj)=>{"use strict";var wD=dt(),Cue=ni()("RegExp.prototype.exec"),Pue=kA(),Oue=Kh(),Fue=Sv(),Tue=ds();Lj.exports=function(e,r){if(Tue(e)!=="Object")throw new wD("Assertion failed: `R` must be an Object");if(typeof r!="string")throw new wD("Assertion failed: `S` must be a String");var n=Oue(e,"exec");if(Fue(n)){var s=Pue(n,e,[r]);if(typeof s=="object")return s;throw new wD('"exec" method must return `null` or an Object')}return Cue(e,r)}});var ED=v((D8e,zj)=>{"use strict";var Tv=dt(),Iue=Nc(),Vj=fD(),Bue=ds(),Kj=function(){try{return delete[].length,!0}catch{return!1}}();zj.exports=function(e,r,n,s){if(Bue(e)!=="Object")throw new Tv("Assertion failed: `O` must be an Object");if(!Iue(r))throw new Tv("Assertion failed: `P` must be a Property Key");if(typeof s!="boolean")throw new Tv("Assertion failed: `Throw` must be a Boolean");if(s){if(e[r]=n,Kj&&!Vj(e[r],n))throw new Tv("Attempted to assign to readonly property.");return!0}try{return e[r]=n,Kj?Vj(e[r],n):!0}catch{return!1}}});var Wj=v((x8e,Hj)=>{"use strict";Hj.exports=function(e){return e===null||typeof e!="function"&&typeof e!="object"}});var Gj=v((C8e,Jj)=>{"use strict";var kue=Date.prototype.getDay,Rue=function(e){try{return kue.call(e),!0}catch{return!1}},$ue=Object.prototype.toString,jue="[object Date]",Nue=Av()();Jj.exports=function(e){return typeof e!="object"||e===null?!1:Nue?Rue(e):$ue.call(e)===jue}});var Qj=v((P8e,SD)=>{"use strict";var Mue=Object.prototype.toString,que=kc()();que?(Zj=Symbol.prototype.toString,Xj=/^Symbol\(.*\)$/,Yj=function(e){return typeof e.valueOf()!="symbol"?!1:Xj.test(Zj.call(e))},SD.exports=function(e){if(typeof e=="symbol")return!0;if(Mue.call(e)!=="[object Symbol]")return!1;try{return Yj(e)}catch{return!1}}):SD.exports=function(e){return!1};var Zj,Xj,Yj});var n4=v((O8e,r4)=>{"use strict";var Lue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",AD=Wj(),t4=XA(),Uue=Gj(),e4=Qj(),Vue=function(e,r){if(typeof e>"u"||e===null)throw new TypeError("Cannot call method on "+e);if(typeof r!="string"||r!=="number"&&r!=="string")throw new TypeError('hint must be "string" or "number"');var n=r==="string"?["toString","valueOf"]:["valueOf","toString"],s,i,o;for(o=0;o<n.length;++o)if(s=e[n[o]],t4(s)&&(i=s.call(e),AD(i)))return i;throw new TypeError("No default value")},Kue=function(e,r){var n=e[r];if(n!==null&&typeof n<"u"){if(!t4(n))throw new TypeError(n+" returned for property "+r+" of object "+e+" is not a function");return n}};r4.exports=function(e){if(AD(e))return e;var r="default";arguments.length>1&&(arguments[1]===String?r="string":arguments[1]===Number&&(r="number"));var n;if(Lue&&(Symbol.toPrimitive?n=Kue(e,Symbol.toPrimitive):e4(e)&&(n=Symbol.prototype.valueOf)),typeof n<"u"){var s=n.call(e,r);if(AD(s))return s;throw new TypeError("unable to convert exotic object to primitive")}return r==="default"&&(Uue(e)||e4(e))&&(r="string"),Vue(e,r==="default"?"number":r)}});var o4=v((F8e,s4)=>{"use strict";var i4=n4();s4.exports=function(e){return arguments.length>1?i4(e,arguments[1]):i4(e)}});var u4=v((T8e,a4)=>{"use strict";var zue=ni(),Hue=tD(),Wue=zue("RegExp.prototype.exec"),Jue=dt();a4.exports=function(e){if(!Hue(e))throw new Jue("`regex` must be a RegExp");return function(n){return Wue(e,n)!==null}}});var DD=v((I8e,d4)=>{"use strict";var Gue=xv(),Zue=zh(),Xue=ni(),c4=Xue("String.prototype.replace"),l4=/^\s$/.test("\u180E"),Yue=l4?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,Que=l4?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;d4.exports=function(){var e=Zue(Gue(this));return c4(c4(e,Yue,""),Que,"")}});var xD=v((B8e,p4)=>{"use strict";var ece=DD(),f4="\u200B",Zd="\u180E";p4.exports=function(){return String.prototype.trim&&f4.trim()===f4&&Zd.trim()===Zd&&("_"+Zd).trim()==="_"+Zd&&(Zd+"_").trim()===Zd+"_"?String.prototype.trim:ece}});var m4=v((k8e,h4)=>{"use strict";var tce=su(),rce=xD();h4.exports=function(){var e=rce();return tce(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}});var b4=v((R8e,v4)=>{"use strict";var nce=jh(),ice=su(),sce=xv(),oce=DD(),y4=xD(),ace=m4(),uce=nce(y4()),g4=function(e){return sce(e),uce(e)};ice(g4,{getPolyfill:y4,implementation:oce,shim:ace});v4.exports=g4});var S4=v(($8e,E4)=>{"use strict";var PD=ar(),CD=PD("%Number%"),cce=PD("%RegExp%"),lce=dt(),_4=PD("%parseInt%"),dce=ni(),Iv=u4(),w4=dce("String.prototype.slice"),fce=Iv(/^0b[01]+$/i),pce=Iv(/^0o[0-7]+$/i),hce=Iv(/^[-+]0x[0-9a-f]+$/i),mce=["\x85","\u200B","\uFFFE"].join(""),yce=new cce("["+mce+"]","g"),gce=Iv(yce),vce=b4();E4.exports=function t(e){if(typeof e!="string")throw new lce("Assertion failed: `argument` is not a String");if(fce(e))return CD(_4(w4(e,2),2));if(pce(e))return CD(_4(w4(e,2),8));if(gce(e)||hce(e))return NaN;var r=vce(e);return r!==e?t(r):CD(e)}});var C4=v((j8e,x4)=>{"use strict";var bce=ar(),A4=dt(),D4=bce("%Number%"),_ce=yD(),wce=o4(),Ece=S4();x4.exports=function(e){var r=_ce(e)?e:wce(e,D4);if(typeof r=="symbol")throw new A4("Cannot convert a Symbol value to a number");if(typeof r=="bigint")throw new A4("Conversion from 'BigInt' to 'number' is not allowed.");return typeof r=="string"?Ece(r):D4(r)}});var O4=v((N8e,P4)=>{"use strict";var Sce=Math.floor;P4.exports=function(e){return typeof e=="bigint"?e:Sce(e)}});var I4=v((M8e,T4)=>{"use strict";var F4=O4(),Ace=dt();T4.exports=function(e){if(typeof e!="number"&&typeof e!="bigint")throw new Ace("argument must be a Number or a BigInt");var r=e<0?-F4(-e):F4(e);return r===0?0:r}});var k4=v((q8e,B4)=>{"use strict";var Dce=C4(),xce=I4(),Cce=Jh(),Pce=cD();B4.exports=function(e){var r=Dce(e);return Cce(r)||r===0?0:Pce(r)?xce(r):r}});var OD=v((L8e,$4)=>{"use strict";var R4=lD(),Oce=k4();$4.exports=function(e){var r=Oce(e);return r<=0?0:r>R4?R4:r}});var M4=v((U8e,N4)=>{"use strict";var Fce=ar(),j4=Fce("%Object.defineProperty%",!0),Tce=Av()(),Ice=Rc(),Bv=Tce?Symbol.toStringTag:null;N4.exports=function(e,r){var n=arguments.length>2&&arguments[2]&&arguments[2].force;Bv&&(n||!Ice(e,Bv))&&(j4?j4(e,Bv,{configurable:!0,enumerable:!1,value:r,writable:!1}):e[Bv]=r)}});var z4=v((V8e,K4)=>{"use strict";var Bce=ar(),kce=kc()(),Yh=dt(),q4=Bce("%IteratorPrototype%",!0),Rce=nj(),kv=sj(),V4=Tj(),L4=Kh(),$ce=qj(),jce=Uj(),Nce=ED(),Mce=OD(),qce=zh(),Lce=ds(),tn=_D(),Uce=M4(),Mc=function(e,r,n,s){if(typeof r!="string")throw new Yh("`S` must be a string");if(typeof n!="boolean")throw new Yh("`global` must be a boolean");if(typeof s!="boolean")throw new Yh("`fullUnicode` must be a boolean");tn.set(this,"[[IteratingRegExp]]",e),tn.set(this,"[[IteratedString]]",r),tn.set(this,"[[Global]]",n),tn.set(this,"[[Unicode]]",s),tn.set(this,"[[Done]]",!1)};q4&&(Mc.prototype=$ce(q4));var Vce=function(){var e=this;if(Lce(e)!=="Object")throw new Yh("receiver must be an object");if(!(e instanceof Mc)||!tn.has(e,"[[IteratingRegExp]]")||!tn.has(e,"[[IteratedString]]")||!tn.has(e,"[[Global]]")||!tn.has(e,"[[Unicode]]")||!tn.has(e,"[[Done]]"))throw new Yh('"this" value must be a RegExpStringIterator instance');if(tn.get(e,"[[Done]]"))return kv(void 0,!0);var r=tn.get(e,"[[IteratingRegExp]]"),n=tn.get(e,"[[IteratedString]]"),s=tn.get(e,"[[Global]]"),i=tn.get(e,"[[Unicode]]"),o=jce(r,n);if(o===null)return tn.set(e,"[[Done]]",!0),kv(void 0,!0);if(s){var a=qce(L4(o,"0"));if(a===""){var c=Mce(L4(r,"lastIndex")),u=Rce(n,c,i);Nce(r,"lastIndex",u,!0)}return kv(o,!1)}return tn.set(e,"[[Done]]",!0),kv(o,!1)};V4(Mc.prototype,"next",Vce,!1);kce&&(Uce(Mc.prototype,"RegExp String Iterator"),Symbol.iterator&&typeof Mc.prototype[Symbol.iterator]!="function"&&(U4=function(){return this},V4(Mc.prototype,Symbol.iterator,U4,!1)));var U4;K4.exports=function(e,r,n,s){return new Mc(e,r,n,s)}});var W4=v((K8e,H4)=>{"use strict";H4.exports=ar()});var G4=v((z8e,ID)=>{"use strict";var Kce=W4(),J4=Kce("%Reflect.construct%",!0),Rv=mD();try{Rv({},"",{"[[Get]]":function(){}})}catch{Rv=null}Rv&&J4?(FD={},TD={},Rv(TD,"length",{"[[Get]]":function(){throw FD},"[[Enumerable]]":!0}),ID.exports=function(e){try{J4(e,TD)}catch(r){return r===FD}}):ID.exports=function(e){return typeof e=="function"&&!!e.prototype};var FD,TD});var Q4=v((H8e,Y4)=>{"use strict";var zce=ar(),Z4=zce("%Symbol.species%",!0),BD=dt(),Hce=G4(),X4=ds();Y4.exports=function(e,r){if(X4(e)!=="Object")throw new BD("Assertion failed: Type(O) is not Object");var n=e.constructor;if(typeof n>"u")return r;if(X4(n)!=="Object")throw new BD("O.constructor is not an Object");var s=Z4?n[Z4]:void 0;if(s==null)return r;if(Hce(s))return s;throw new BD("no constructor found")}});var iN=v((W8e,nN)=>{"use strict";var Wce=z4(),tN=Kh(),Jce=ED(),Gce=Q4(),Zce=OD(),rN=zh(),Xce=ds(),Yce=oD(),Qce=nD(),ele=ni(),tle=ar(),rle=dt(),eN=ele("String.prototype.indexOf"),kD=tle("%RegExp%"),nle="flags"in kD.prototype,ile=function(e,r){var n,s="flags"in r?tN(r,"flags"):rN(Yce(r));return nle&&typeof s=="string"?n=new e(r,s):e===kD?n=new e(r.source,s):n=new e(r,s),{flags:s,matcher:n}},sle=Qce(function(e){var r=this;if(Xce(r)!=="Object")throw new rle('"this" value must be an Object');var n=rN(e),s=Gce(r,kD),i=ile(s,r),o=i.flags,a=i.matcher,c=Zce(tN(r,"lastIndex"));Jce(a,"lastIndex",c,!0);var u=eN(o,"g")>-1,l=eN(o,"u")>-1;return Wce(a,n,u,l)},"[Symbol.matchAll]",!0);nN.exports=sle});var RD=v((J8e,sN)=>{"use strict";var ole=kc()(),ale=iN();sN.exports=function(){return!ole||typeof Symbol.matchAll!="symbol"||typeof RegExp.prototype[Symbol.matchAll]!="function"?ale:RegExp.prototype[Symbol.matchAll]}});var $D=v((G8e,fN)=>{"use strict";var oN=kA(),ule=Kh(),cle=m$(),lN=A$(),aN=zh(),uN=xv(),lle=ni(),dle=kc()(),fle=oD(),ple=ar(),hle=dt(),dN=ple("%RegExp%"),mle=lle("String.prototype.indexOf"),yle=RD(),cN=function(e){var r=yle();if(dle&&typeof Symbol.matchAll=="symbol"){var n=cle(e,Symbol.matchAll);return n===dN.prototype[Symbol.matchAll]&&n!==r?r:n}if(lN(e))return r};fN.exports=function(e){var r=uN(this);if(typeof e<"u"&&e!==null){var n=lN(e);if(n){var s="flags"in e?ule(e,"flags"):fle(e);if(uN(s),mle(aN(s),"g")<0)throw new hle("matchAll requires a global regular expression")}var i=cN(e);if(typeof i<"u")return oN(i,e,[r])}var o=aN(r),a=new dN(e,"g");return oN(cN(a),a,[o])}});var jD=v((Z8e,pN)=>{"use strict";var gle=$D();pN.exports=function(){if(String.prototype.matchAll)try{"".matchAll(RegExp.prototype)}catch{return String.prototype.matchAll}return gle}});var gN=v((X8e,yN)=>{"use strict";var ND=su(),vle=kc()(),hN=fv(),ble=jD(),_le=RD(),mN=Object.defineProperty;yN.exports=function(){var e=ble();if(ND(String.prototype,{matchAll:e},{matchAll:function(){return String.prototype.matchAll!==e}}),vle){var r=Symbol.matchAll||(Symbol.for?Symbol.for("Symbol.matchAll"):Symbol("Symbol.matchAll"));if(ND(Symbol,{matchAll:r},{matchAll:function(){return Symbol.matchAll!==r}}),mN&&hN){var n=hN(Symbol,r);(!n||n.configurable)&&mN(Symbol,r,{configurable:!1,enumerable:!1,value:r,writable:!1})}var s=_le(),i={};i[r]=s;var o={};o[r]=function(){return RegExp.prototype[r]!==s},ND(RegExp.prototype,i,o)}return e}});var MD=v((Y8e,_N)=>{"use strict";var wle=jh(),Ele=su(),vN=$D(),Sle=jD(),Ale=gN(),bN=wle(vN);Ele(bN,{getPolyfill:Sle,implementation:vN,shim:Ale});_N.exports=bN});var LD=v($v=>{"use strict";Object.defineProperty($v,"__esModule",{value:!0});$v.JsonPathUtils=void 0;var qD=Ti(),Qh=class t{static extractInputField(e,r){let n=[];if(r){for(let s of r)if(n=qD.JSONPath.nodes(e,s),n.length)break}return n}static changePropertyNameRecursively(e,r,n){let s=t.extractInputField(e,["$.."+r]);for(let i of s)this.copyResultPathToDestinationDefinition(i.path,e,n)}static setValue(e,r,n){let s=typeof r=="string"?r:qD.JSONPath.stringify(r);return qD.JSONPath.value(e,s,n),e}static copyResultPathToDestinationDefinition(e,r,n){let s=r;for(let i=1;i<e.length;i++)if(i+1<e.length&&(s=s[e[i]]),e.length==i+1){s[n]=s[e[i]],delete s[e[i]];break}}static changeSpecialPathsRecursively(e){let r=t.extractInputField(e,["$..path"]);for(let n of r)this.modifyPathsWithSpecialCharacter(n.path,e)}static modifyPathsWithSpecialCharacter(e,r){let n=r;for(let s=1;s<e.length;s++)if(s+1<e.length&&(n=n[e[s]]),e.length==s+1){let i=n[e[s]],o=[];for(let a=0;a<i.length;a++)o.push(this.modifyPathWithSpecialCharacter(i[a]));n[e[s]]=o;break}}static modifyPathWithSpecialCharacter(e){let r=this.matchAll(e,this.REGEX_PATH);return e=this.modifyPathRecursive(r,e),e}static modifyPathRecursive(e,r){let n=e.next(),s=!1;for(;n&&!n.done&&!s;){let i=n.value.index;if(i&&i==1)r=r.charAt(0)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r);else if(i&&i>1&&r.substring(i-2,i)!=="['"&&r.substring(i-2,i)!=='["')if(r.substring(i-2,i)===".."){r=r.substring(0,i-2)+"..['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0;let o=this.matchAll(r,this.REGEX_PATH);this.modifyPathRecursive(o,r)}else r.charAt(i-1)==="."&&(r=r.substring(0,i-1)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r));n=e.next()}return r}};$v.JsonPathUtils=Qh;Qh.matchAll=MD();Qh.REGEX_PATH=/@\w+/g});var Nv=v(jv=>{"use strict";Object.defineProperty(jv,"__esModule",{value:!0});jv.ObjectUtils=void 0;var UD=class t{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){let r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;t.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}static getDistinctFieldInObject(e,r){let n=e.map(s=>s[r]);return Array.from(new Set(n))}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}};jv.ObjectUtils=UD});var wN=v(Mv=>{"use strict";Object.defineProperty(Mv,"__esModule",{value:!0});Mv.ObjectValidationUtils=void 0;var VD=class{static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static isValidDIDURI(e){let r="[a-zA-Z-\\._~]|%[0-9a-fA-F]{2}|[!$&'()*+,;=:@]",n="^did:([a-z0-9]+)(:([a-zA-Z0-9\\.\\-_]|%[0-9a-fA-F]{2})+)+(/("+r+")*)?";return""+r+r,new RegExp(n).test(e)}};Mv.ObjectValidationUtils=VD});var HD=v(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.PEVersion=cu.InternalPresentationDefinitionV2=cu.InternalPresentationDefinitionV1=void 0;var KD=class{constructor(e,r,n,s,i,o){this.id=e,this.input_descriptors=r,this.format=n,this.name=s,this.purpose=i,this.submission_requirements=o}getVersion(){return qv.v1}};cu.InternalPresentationDefinitionV1=KD;var zD=class{constructor(e,r,n,s,i,o,a){this.format=n,this.frame=s,this.id=e,this.input_descriptors=r,this.name=i,this.purpose=o,this.submission_requirements=a}getVersion(){return qv.v2}};cu.InternalPresentationDefinitionV2=zD;var qv;(function(t){t.v1="v1",t.v2="v2"})(qv||(cu.PEVersion=qv={}))});var SN=v(Uv=>{"use strict";Object.defineProperty(Uv,"__esModule",{value:!0});Uv.SSITypesBuilder=void 0;var EN=os(),Lv=Ii(),WD=HD(),JD=class t{static modelEntityToInternalPresentationDefinitionV1(e){let r=t.createCopyAndModifyPresentationDefinition(e);return new WD.InternalPresentationDefinitionV1(r.id,r.input_descriptors,r.format,r.name,r.purpose,r.submission_requirements)}static modelEntityInternalPresentationDefinitionV2(e){let r=t.createCopyAndModifyPresentationDefinition(e);return new WD.InternalPresentationDefinitionV2(r.id,r.input_descriptors,r.format,r.frame,r.name,r.purpose,r.submission_requirements)}static createCopyAndModifyPresentationDefinition(e){let r=JSON.parse(JSON.stringify(e));return Lv.JsonPathUtils.changePropertyNameRecursively(r,"_const","const"),Lv.JsonPathUtils.changePropertyNameRecursively(r,"_enum","enum"),Lv.JsonPathUtils.changeSpecialPathsRecursively(r),r}static mapExternalVerifiablePresentationToWrappedVP(e,r){return EN.CredentialMapper.toWrappedVerifiablePresentation(e,{hasher:r})}static mapExternalVerifiableCredentialsToWrappedVcs(e,r){return EN.CredentialMapper.toWrappedVerifiableCredentials(Array.isArray(e)?e:[e],{hasher:r})}static toInternalPresentationDefinition(e){let r=JSON.parse(JSON.stringify(e)),n=(0,Lv.definitionVersionDiscovery)(r);if(n.error)throw n.error;return n.version==WD.PEVersion.v1?t.modelEntityToInternalPresentationDefinitionV1(r):t.modelEntityInternalPresentationDefinitionV2(r)}};Uv.SSITypesBuilder=JD});var qc=v(ta=>{"use strict";var Dle=ta&&ta.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),GD=ta&&ta.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Dle(e,t,r)};Object.defineProperty(ta,"__esModule",{value:!0});GD(as(),ta);GD(HD(),ta);GD(SN(),ta)});var QD=v((sIe,YD)=>{"use strict";YD.exports=XD;YD.exports.default=XD;var kr={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{schema:{type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1},issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},filter:{type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},format:{type:"object",properties:{"vc+sd-jwt":{type:"object",properties:{"sd-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a SD-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented SD-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}},"kb-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a KB-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented KB-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}}},required:[],additionalProperties:!1}},patternProperties:{"^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},"^di_vc$|^di_vp$|^di$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}},cryptosuite:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type","cryptosuite"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},Fe={type:"object",properties:{"vc+sd-jwt":{type:"object",properties:{"sd-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a SD-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented SD-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}},"kb-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a KB-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented KB-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}}},required:[],additionalProperties:!1}},patternProperties:{"^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},"^di_vc$|^di_vp$|^di$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}},cryptosuite:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type","cryptosuite"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},AN=new RegExp("^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$","u"),DN=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),xN=new RegExp("^di_vc$|^di_vp$|^di$","u"),CN=new RegExp("additionalProperties","u");function Kv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let a in t)if(!(a==="vc+sd-jwt"||AN.test(a)||DN.test(a)||xN.test(a)||CN.test(a))){let c={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Fe,data:t};i===null?i=[c]:i.push(c),o++}if(t["vc+sd-jwt"]!==void 0){let a=t["vc+sd-jwt"];if(a&&typeof a=="object"&&!Array.isArray(a)){for(let c in a)if(!(c==="sd-jwt_alg_values"||c==="kb-jwt_alg_values")){let u={instancePath:e+"/vc+sd-jwt",schemaPath:"#/properties/vc%2Bsd-jwt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Fe.properties["vc+sd-jwt"],data:a};i===null?i=[u]:i.push(u),o++}if(a["sd-jwt_alg_values"]!==void 0){let c=a["sd-jwt_alg_values"];if(Array.isArray(c)){if(c.length<1){let l={instancePath:e+"/vc+sd-jwt/sd-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/sd-jwt_alg_values/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Fe.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"],data:c};i===null?i=[l]:i.push(l),o++}let u=c.length;for(let l=0;l<u;l++){let d=c[l];if(typeof d!="string"){let p={instancePath:e+"/vc+sd-jwt/sd-jwt_alg_values/"+l,schemaPath:"#/properties/vc%2Bsd-jwt/properties/sd-jwt_alg_values/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"].items.type,parentSchema:Fe.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"].items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let u={instancePath:e+"/vc+sd-jwt/sd-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/sd-jwt_alg_values/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"].type,parentSchema:Fe.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"],data:c};i===null?i=[u]:i.push(u),o++}}if(a["kb-jwt_alg_values"]!==void 0){let c=a["kb-jwt_alg_values"];if(Array.isArray(c)){if(c.length<1){let l={instancePath:e+"/vc+sd-jwt/kb-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/kb-jwt_alg_values/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Fe.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"],data:c};i===null?i=[l]:i.push(l),o++}let u=c.length;for(let l=0;l<u;l++){let d=c[l];if(typeof d!="string"){let p={instancePath:e+"/vc+sd-jwt/kb-jwt_alg_values/"+l,schemaPath:"#/properties/vc%2Bsd-jwt/properties/kb-jwt_alg_values/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"].items.type,parentSchema:Fe.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"].items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let u={instancePath:e+"/vc+sd-jwt/kb-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/kb-jwt_alg_values/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"].type,parentSchema:Fe.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"],data:c};i===null?i=[u]:i.push(u),o++}}}else{let c={instancePath:e+"/vc+sd-jwt",schemaPath:"#/properties/vc%2Bsd-jwt/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.properties["vc+sd-jwt"].type,parentSchema:Fe.properties["vc+sd-jwt"],data:a};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(AN.test(a)){let c=t[a];if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.alg===void 0){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].required,parentSchema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"],data:c};i===null?i=[u]:i.push(u),o++}for(let u in c)if(u!=="alg"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"],data:c};i===null?i=[l]:i.push(l),o++}if(c.alg!==void 0){let u=c.alg;if(Array.isArray(u)){if(u.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].properties.alg,data:u};i===null?i=[d]:i.push(d),o++}let l=u.length;for(let d=0;d<l;d++){let p=u[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].properties.alg.items.type,parentSchema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].properties.alg.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].properties.alg.type,parentSchema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].properties.alg,data:u};i===null?i=[l]:i.push(l),o++}}}else{let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"].type,parentSchema:Fe.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$"],data:c};i===null?i=[u]:i.push(u),o++}}for(let a in t)if(DN.test(a)){let c=t[a];if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.proof_type===void 0){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:c};i===null?i=[u]:i.push(u),o++}for(let u in c)if(u!=="proof_type"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:c};i===null?i=[l]:i.push(l),o++}if(c.proof_type!==void 0){let u=c.proof_type;if(Array.isArray(u)){if(u.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:u};i===null?i=[d]:i.push(d),o++}let l=u.length;for(let d=0;d<l;d++){let p=u[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:u};i===null?i=[l]:i.push(l),o++}}}else{let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:Fe.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:c};i===null?i=[u]:i.push(u),o++}}for(let a in t)if(xN.test(a)){let c=t[a];if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.proof_type===void 0){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].required,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"],data:c};i===null?i=[u]:i.push(u),o++}if(c.cryptosuite===void 0){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/required",keyword:"required",params:{missingProperty:"cryptosuite"},message:"must have required property 'cryptosuite'",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].required,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"],data:c};i===null?i=[u]:i.push(u),o++}for(let u in c)if(!(u==="proof_type"||u==="cryptosuite")){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"],data:c};i===null?i=[l]:i.push(l),o++}if(c.proof_type!==void 0){let u=c.proof_type;if(Array.isArray(u)){if(u.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type,data:u};i===null?i=[d]:i.push(d),o++}let l=u.length;for(let d=0;d<l;d++){let p=u[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type.items.type,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type.type,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type,data:u};i===null?i=[l]:i.push(l),o++}}if(c.cryptosuite!==void 0){let u=c.cryptosuite;if(Array.isArray(u)){if(u.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/cryptosuite",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/cryptosuite/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite,data:u};i===null?i=[d]:i.push(d),o++}let l=u.length;for(let d=0;d<l;d++){let p=u[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/cryptosuite/"+d,schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/cryptosuite/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite.items.type,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/cryptosuite",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/cryptosuite/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite.type,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite,data:u};i===null?i=[l]:i.push(l),o++}}}else{let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"].type,parentSchema:Fe.patternProperties["^di_vc$|^di_vp$|^di$"],data:c};i===null?i=[u]:i.push(u),o++}}for(let a in t)if(CN.test(a)){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:Fe.patternProperties.additionalProperties,data:t[a]};i===null?i=[c]:i.push(c),o++}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Fe.type,parentSchema:Fe,data:t};i===null?i=[a]:i.push(a),o++}return Kv.errors=i,o===0}var Ce={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},ZD={validate:em};function em(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ce.type,parentSchema:Ce,data:t};i===null?i=[f]:i.push(f),o++}let a=o,c=!1,u=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Ce.oneOf[0].required,parentSchema:Ce.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}if(t.from===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:Ce.oneOf[0].required,parentSchema:Ce.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Ce.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[0].properties.name.type,parentSchema:Ce.oneOf[0].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[0].properties.purpose.type,parentSchema:Ce.oneOf[0].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[0].properties.rule.type,parentSchema:Ce.oneOf[0].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="all"||f==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:Ce.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Ce.oneOf[0].properties.rule.enum,parentSchema:Ce.oneOf[0].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[0].properties.count.type,parentSchema:Ce.oneOf[0].properties.count,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Ce.oneOf[0].properties.count,data:f};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[0].properties.min.type,parentSchema:Ce.oneOf[0].properties.min,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ce.oneOf[0].properties.min,data:f};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[0].properties.max.type,parentSchema:Ce.oneOf[0].properties.max,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ce.oneOf[0].properties.max,data:f};i===null?i=[h]:i.push(h),o++}}if(t.from!==void 0){let f=t.from;if(typeof f!="string"){let h={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[0].properties.from.type,parentSchema:Ce.oneOf[0].properties.from,data:f};i===null?i=[h]:i.push(h),o++}}}var p=l===o;p&&(c=!0,u=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Ce.oneOf[1].required,parentSchema:Ce.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.from_nested===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:Ce.oneOf[1].required,parentSchema:Ce.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Ce.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[1].properties.name.type,parentSchema:Ce.oneOf[1].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[1].properties.purpose.type,parentSchema:Ce.oneOf[1].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[1].properties.rule.type,parentSchema:Ce.oneOf[1].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="all"||f==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:Ce.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Ce.oneOf[1].properties.rule.enum,parentSchema:Ce.oneOf[1].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[1].properties.count.type,parentSchema:Ce.oneOf[1].properties.count,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Ce.oneOf[1].properties.count,data:f};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[1].properties.min.type,parentSchema:Ce.oneOf[1].properties.min,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ce.oneOf[1].properties.min,data:f};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[1].properties.max.type,parentSchema:Ce.oneOf[1].properties.max,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ce.oneOf[1].properties.max,data:f};i===null?i=[h]:i.push(h),o++}}if(t.from_nested!==void 0){let f=t.from_nested;if(Array.isArray(f)){if(f.length<1){let y={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ce.oneOf[1].properties.from_nested,data:f};i===null?i=[y]:i.push(y),o++}let h=f.length;for(let y=0;y<h;y++)ZD.validate(f[y],{instancePath:e+"/from_nested/"+y,parentData:f,parentDataProperty:y,rootData:s})||(i=i===null?ZD.validate.errors:i.concat(ZD.validate.errors),o=i.length)}else{let h={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ce.oneOf[1].properties.from_nested.type,parentSchema:Ce.oneOf[1].properties.from_nested,data:f};i===null?i=[h]:i.push(h),o++}}}var p=d===o;if(p&&c?(c=!1,u=[u,1]):p&&(c=!0,u=1),c)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf",schema:Ce.oneOf,parentSchema:Ce,data:t};i===null?i=[f]:i.push(f),o++}return em.errors=i,o===0}var re={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},ra={type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1};function zv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.uri===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"uri"},message:"must have required property 'uri'",schema:ra.required,parentSchema:ra,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="uri"||a==="required")){let c={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:ra,data:t};i===null?i=[c]:i.push(c),o++}if(t.uri!==void 0){let a=t.uri;if(typeof a!="string"){let c={instancePath:e+"/uri",schemaPath:"#/properties/uri/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ra.properties.uri.type,parentSchema:ra.properties.uri,data:a};i===null?i=[c]:i.push(c),o++}}if(t.required!==void 0){let a=t.required;if(typeof a!="boolean"){let c={instancePath:e+"/required",schemaPath:"#/properties/required/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ra.properties.required.type,parentSchema:ra.properties.required,data:a};i===null?i=[c]:i.push(c),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ra.type,parentSchema:ra,data:t};i===null?i=[a]:i.push(a),o++}return zv.errors=i,o===0}var Vv={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function Hv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){let c={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Vv.properties.manifest.type,parentSchema:Vv.properties.manifest,data:a};i===null?i=[c]:i.push(c),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Vv.type,parentSchema:Vv,data:t};i===null?i=[a]:i.push(a),o++}return Hv.errors=i,o===0}var mt={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]},it={type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},xle=Object.prototype.hasOwnProperty;function Lc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:it.required,parentSchema:it,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!xle.call(it.properties,a)){let c={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:it,data:t};i===null?i=[c]:i.push(c),o++}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let c={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:it.properties.type.type,parentSchema:it.properties.type,data:a};i===null?i=[c]:i.push(c),o++}}if(t.format!==void 0){let a=t.format;if(typeof a!="string"){let c={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:it.properties.format.type,parentSchema:it.properties.format,data:a};i===null?i=[c]:i.push(c),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let c={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:it.properties.pattern.type,parentSchema:it.properties.pattern,data:a};i===null?i=[c]:i.push(c),o++}}if(t.minimum!==void 0){let a=t.minimum;if(typeof a!="number"&&typeof a!="string"){let c={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:it.properties.minimum.type},message:"must be number,string",schema:it.properties.minimum.type,parentSchema:it.properties.minimum,data:a};i===null?i=[c]:i.push(c),o++}}if(t.minLength!==void 0){let a=t.minLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){let c={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:it.properties.minLength.type,parentSchema:it.properties.minLength,data:a};i===null?i=[c]:i.push(c),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){let c={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:it.properties.maxLength.type,parentSchema:it.properties.maxLength,data:a};i===null?i=[c]:i.push(c),o++}}if(t.exclusiveMinimum!==void 0){let a=t.exclusiveMinimum;if(typeof a!="number"&&typeof a!="string"){let c={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:it.properties.exclusiveMinimum.type},message:"must be number,string",schema:it.properties.exclusiveMinimum.type,parentSchema:it.properties.exclusiveMinimum,data:a};i===null?i=[c]:i.push(c),o++}}if(t.exclusiveMaximum!==void 0){let a=t.exclusiveMaximum;if(typeof a!="number"&&typeof a!="string"){let c={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:it.properties.exclusiveMaximum.type},message:"must be number,string",schema:it.properties.exclusiveMaximum.type,parentSchema:it.properties.exclusiveMaximum,data:a};i===null?i=[c]:i.push(c),o++}}if(t.maximum!==void 0){let a=t.maximum;if(typeof a!="number"&&typeof a!="string"){let c={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:it.properties.maximum.type},message:"must be number,string",schema:it.properties.maximum.type,parentSchema:it.properties.maximum,data:a};i===null?i=[c]:i.push(c),o++}}if(t.const!==void 0){let a=t.const;if(typeof a!="number"&&typeof a!="string"){let c={instancePath:e+"/const",schemaPath:"#/properties/const/type",keyword:"type",params:{type:it.properties.const.type},message:"must be number,string",schema:it.properties.const.type,parentSchema:it.properties.const,data:a};i===null?i=[c]:i.push(c),o++}}if(t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let c=a.length;for(let u=0;u<c;u++){let l=a[u];if(typeof l!="number"&&typeof l!="string"){let d={instancePath:e+"/enum/"+u,schemaPath:"#/properties/enum/items/type",keyword:"type",params:{type:it.properties.enum.items.type},message:"must be number,string",schema:it.properties.enum.items.type,parentSchema:it.properties.enum.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let c={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:it.properties.enum.type,parentSchema:it.properties.enum,data:a};i===null?i=[c]:i.push(c),o++}}if(t.not!==void 0){let a=t.not;if(a&&typeof a=="object"&&!Array.isArray(a)){if(Object.keys(a).length<1){let c={instancePath:e+"/not",schemaPath:"#/properties/not/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties",schema:1,parentSchema:it.properties.not,data:a};i===null?i=[c]:i.push(c),o++}}else{let c={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:it.properties.not.type,parentSchema:it.properties.not,data:a};i===null?i=[c]:i.push(c),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:it.type,parentSchema:it,data:t};i===null?i=[a]:i.push(a),o++}return Lc.errors=i,o===0}function Wv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:mt.type,parentSchema:mt,data:t};i===null?i=[f]:i.push(f),o++}let a=o,c=!1,u=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:mt.oneOf[0].required,parentSchema:mt.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:mt.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:mt.oneOf[0].properties.id.type,parentSchema:mt.oneOf[0].properties.id,data:f};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let h=f.length;for(let y=0;y<h;y++){let g=f[y];if(typeof g!="string"){let A={instancePath:e+"/path/"+y,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:mt.oneOf[0].properties.path.items.type,parentSchema:mt.oneOf[0].properties.path.items,data:g};i===null?i=[A]:i.push(A),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:mt.oneOf[0].properties.path.type,parentSchema:mt.oneOf[0].properties.path,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:mt.oneOf[0].properties.purpose.type,parentSchema:mt.oneOf[0].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}t.filter!==void 0&&(Lc(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?Lc.errors:i.concat(Lc.errors),o=i.length))}var p=l===o;p&&(c=!0,u=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:mt.oneOf[1].required,parentSchema:mt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.filter===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:mt.oneOf[1].required,parentSchema:mt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.predicate===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:mt.oneOf[1].required,parentSchema:mt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter"||f==="predicate")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:mt.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:mt.oneOf[1].properties.id.type,parentSchema:mt.oneOf[1].properties.id,data:f};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let h=f.length;for(let y=0;y<h;y++){let g=f[y];if(typeof g!="string"){let A={instancePath:e+"/path/"+y,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:mt.oneOf[1].properties.path.items.type,parentSchema:mt.oneOf[1].properties.path.items,data:g};i===null?i=[A]:i.push(A),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:mt.oneOf[1].properties.path.type,parentSchema:mt.oneOf[1].properties.path,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:mt.oneOf[1].properties.purpose.type,parentSchema:mt.oneOf[1].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.filter!==void 0&&(Lc(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?Lc.errors:i.concat(Lc.errors),o=i.length)),t.predicate!==void 0){let f=t.predicate;if(typeof f!="string"){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:mt.oneOf[1].properties.predicate.type,parentSchema:mt.oneOf[1].properties.predicate,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="required"||f==="preferred")){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:mt.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:mt.oneOf[1].properties.predicate.enum,parentSchema:mt.oneOf[1].properties.predicate,data:f};i===null?i=[h]:i.push(h),o++}}}var p=d===o;if(p&&c?(c=!1,u=[u,1]):p&&(c=!0,u=1),c)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf",schema:mt.oneOf,parentSchema:mt,data:t};i===null?i=[f]:i.push(f),o++}return Wv.errors=i,o===0}function Jv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:re.required,parentSchema:re,data:t};i===null?i=[a]:i.push(a),o++}if(t.schema===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"schema"},message:"must have required property 'schema'",schema:re.required,parentSchema:re,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="group"||a==="schema"||a==="issuance"||a==="constraints")){let c={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:re,data:t};i===null?i=[c]:i.push(c),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){let c={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.id.type,parentSchema:re.properties.id,data:a};i===null?i=[c]:i.push(c),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){let c={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.name.type,parentSchema:re.properties.name,data:a};i===null?i=[c]:i.push(c),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){let c={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.purpose.type,parentSchema:re.properties.purpose,data:a};i===null?i=[c]:i.push(c),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){let c=a.length;for(let u=0;u<c;u++){let l=a[u];if(typeof l!="string"){let d={instancePath:e+"/group/"+u,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.group.items.type,parentSchema:re.properties.group.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let c={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.group.type,parentSchema:re.properties.group,data:a};i===null?i=[c]:i.push(c),o++}}if(t.schema!==void 0){let a=t.schema;if(Array.isArray(a)){let c=a.length;for(let u=0;u<c;u++)zv(a[u],{instancePath:e+"/schema/"+u,parentData:a,parentDataProperty:u,rootData:s})||(i=i===null?zv.errors:i.concat(zv.errors),o=i.length)}else{let c={instancePath:e+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.schema.type,parentSchema:re.properties.schema,data:a};i===null?i=[c]:i.push(c),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){let c=a.length;for(let u=0;u<c;u++)Hv(a[u],{instancePath:e+"/issuance/"+u,parentData:a,parentDataProperty:u,rootData:s})||(i=i===null?Hv.errors:i.concat(Hv.errors),o=i.length)}else{let c={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.issuance.type,parentSchema:re.properties.issuance,data:a};i===null?i=[c]:i.push(c),o++}}if(t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(let c in a)if(!(c==="limit_disclosure"||c==="statuses"||c==="fields"||c==="subject_is_issuer"||c==="is_holder"||c==="same_subject")){let u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:re.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}if(a.limit_disclosure!==void 0){let c=a.limit_disclosure;if(typeof c!="string"){let u={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.limit_disclosure.type,parentSchema:re.properties.constraints.properties.limit_disclosure,data:c};i===null?i=[u]:i.push(u),o++}if(!(c==="required"||c==="preferred")){let u={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.limit_disclosure.enum,parentSchema:re.properties.constraints.properties.limit_disclosure,data:c};i===null?i=[u]:i.push(u),o++}}if(a.statuses!==void 0){let c=a.statuses;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.active!==void 0){let u=c.active;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.directive!==void 0){let l=u.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:re.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:re.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.properties.statuses.properties.active.type,parentSchema:re.properties.constraints.properties.statuses.properties.active,data:u};i===null?i=[l]:i.push(l),o++}}if(c.suspended!==void 0){let u=c.suspended;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.directive!==void 0){let l=u.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:re.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:re.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:re.properties.constraints.properties.statuses.properties.suspended,data:u};i===null?i=[l]:i.push(l),o++}}if(c.revoked!==void 0){let u=c.revoked;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.directive!==void 0){let l=u.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:re.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:re.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:re.properties.constraints.properties.statuses.properties.revoked,data:u};i===null?i=[l]:i.push(l),o++}}}else{let u={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.properties.statuses.type,parentSchema:re.properties.constraints.properties.statuses,data:c};i===null?i=[u]:i.push(u),o++}}if(a.fields!==void 0){let c=a.fields;if(Array.isArray(c)){let u=c.length;for(let l=0;l<u;l++)Wv(c[l],{instancePath:e+"/constraints/fields/"+l,parentData:c,parentDataProperty:l,rootData:s})||(i=i===null?Wv.errors:i.concat(Wv.errors),o=i.length)}else{let u={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.constraints.properties.fields.type,parentSchema:re.properties.constraints.properties.fields,data:c};i===null?i=[u]:i.push(u),o++}}if(a.subject_is_issuer!==void 0){let c=a.subject_is_issuer;if(typeof c!="string"){let u={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.subject_is_issuer.type,parentSchema:re.properties.constraints.properties.subject_is_issuer,data:c};i===null?i=[u]:i.push(u),o++}if(!(c==="required"||c==="preferred")){let u={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.subject_is_issuer.enum,parentSchema:re.properties.constraints.properties.subject_is_issuer,data:c};i===null?i=[u]:i.push(u),o++}}if(a.is_holder!==void 0){let c=a.is_holder;if(Array.isArray(c)){let u=c.length;for(let l=0;l<u;l++){let d=c[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:re.properties.constraints.properties.is_holder.items.required,parentSchema:re.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}if(d.directive===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:re.properties.constraints.properties.is_holder.items.required,parentSchema:re.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}for(let p in d)if(!(p==="field_id"||p==="directive")){let f={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:re.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let p=d.field_id;if(Array.isArray(p)){let f=p.length;for(let h=0;h<f;h++){let y=p[h];if(typeof y!="string"){let g={instancePath:e+"/constraints/is_holder/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:re.properties.constraints.properties.is_holder.items.properties.field_id.items,data:y};i===null?i=[g]:i.push(g),o++}}}else{let f={instancePath:e+"/constraints/is_holder/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:re.properties.constraints.properties.is_holder.items.properties.field_id,data:p};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let p=d.directive;if(typeof p!="string"){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:re.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}if(!(p==="required"||p==="preferred")){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:re.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}}}else{let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.properties.is_holder.items.type,parentSchema:re.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let u={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.constraints.properties.is_holder.type,parentSchema:re.properties.constraints.properties.is_holder,data:c};i===null?i=[u]:i.push(u),o++}}if(a.same_subject!==void 0){let c=a.same_subject;if(Array.isArray(c)){let u=c.length;for(let l=0;l<u;l++){let d=c[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:re.properties.constraints.properties.same_subject.items.required,parentSchema:re.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}if(d.directive===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:re.properties.constraints.properties.same_subject.items.required,parentSchema:re.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}for(let p in d)if(!(p==="field_id"||p==="directive")){let f={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:re.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let p=d.field_id;if(Array.isArray(p)){let f=p.length;for(let h=0;h<f;h++){let y=p[h];if(typeof y!="string"){let g={instancePath:e+"/constraints/same_subject/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:re.properties.constraints.properties.same_subject.items.properties.field_id.items,data:y};i===null?i=[g]:i.push(g),o++}}}else{let f={instancePath:e+"/constraints/same_subject/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:re.properties.constraints.properties.same_subject.items.properties.field_id,data:p};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let p=d.directive;if(typeof p!="string"){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:re.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}if(!(p==="required"||p==="preferred")){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:re.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}}}else{let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.properties.same_subject.items.type,parentSchema:re.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let u={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.constraints.properties.same_subject.type,parentSchema:re.properties.constraints.properties.same_subject,data:c};i===null?i=[u]:i.push(u),o++}}}else{let c={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.type,parentSchema:re.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.type,parentSchema:re,data:t};i===null?i=[a]:i.push(a),o++}return Jv.errors=i,o===0}function XD(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:kr.properties.presentation_definition.required,parentSchema:kr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.input_descriptors===void 0){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:kr.properties.presentation_definition.required,parentSchema:kr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}for(let c in a)if(!(c==="id"||c==="name"||c==="purpose"||c==="format"||c==="submission_requirements"||c==="input_descriptors")){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:kr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.id!==void 0){let c=a.id;if(typeof c!="string"){let u={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:kr.properties.presentation_definition.properties.id.type,parentSchema:kr.properties.presentation_definition.properties.id,data:c};i===null?i=[u]:i.push(u),o++}}if(a.name!==void 0){let c=a.name;if(typeof c!="string"){let u={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:kr.properties.presentation_definition.properties.name.type,parentSchema:kr.properties.presentation_definition.properties.name,data:c};i===null?i=[u]:i.push(u),o++}}if(a.purpose!==void 0){let c=a.purpose;if(typeof c!="string"){let u={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:kr.properties.presentation_definition.properties.purpose.type,parentSchema:kr.properties.presentation_definition.properties.purpose,data:c};i===null?i=[u]:i.push(u),o++}}if(a.format!==void 0&&(Kv(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?Kv.errors:i.concat(Kv.errors),o=i.length)),a.submission_requirements!==void 0){let c=a.submission_requirements;if(Array.isArray(c)){let u=c.length;for(let l=0;l<u;l++)em(c[l],{instancePath:e+"/presentation_definition/submission_requirements/"+l,parentData:c,parentDataProperty:l,rootData:s})||(i=i===null?em.errors:i.concat(em.errors),o=i.length)}else{let u={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:kr.properties.presentation_definition.properties.submission_requirements.type,parentSchema:kr.properties.presentation_definition.properties.submission_requirements,data:c};i===null?i=[u]:i.push(u),o++}}if(a.input_descriptors!==void 0){let c=a.input_descriptors;if(Array.isArray(c)){let u=c.length;for(let l=0;l<u;l++)Jv(c[l],{instancePath:e+"/presentation_definition/input_descriptors/"+l,parentData:c,parentDataProperty:l,rootData:s})||(i=i===null?Jv.errors:i.concat(Jv.errors),o=i.length)}else{let u={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:kr.properties.presentation_definition.properties.input_descriptors.type,parentSchema:kr.properties.presentation_definition.properties.input_descriptors,data:c};i===null?i=[u]:i.push(u),o++}}}else{let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:kr.properties.presentation_definition.type,parentSchema:kr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:kr.type,parentSchema:kr,data:t};i===null?i=[a]:i.push(a),o++}return XD.errors=i,o===0}});var e2=v((oIe,PN)=>{"use strict";PN.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var tm=v(t2=>{"use strict";Object.defineProperty(t2,"__esModule",{value:!0});var ON=e2();ON.code='require("ajv/dist/runtime/equal").default';t2.default=ON});var c2=v((uIe,u2)=>{"use strict";u2.exports=a2;u2.exports.default=a2;var br={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},format:{type:"object",properties:{"vc+sd-jwt":{type:"object",properties:{"sd-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a SD-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented SD-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}},"kb-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a KB-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented KB-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}}},required:[],additionalProperties:!1}},patternProperties:{"^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},"^di_vc$|^di_vp$|^di$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}},cryptosuite:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type","cryptosuite"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},frame:{type:"object",additionalProperties:!0},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},Te={type:"object",properties:{"vc+sd-jwt":{type:"object",properties:{"sd-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a SD-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented SD-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}},"kb-jwt_alg_values":{type:"array",description:"A JSON array containing identifiers of cryptographic algorithms the verifier supports for protection of a KB-JWT. If present, the alg JOSE header (as defined in [RFC7515]) of the presented KB-JWT MUST match one of the array values.",minItems:1,items:{type:"string"}}},required:[],additionalProperties:!1}},patternProperties:{"^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},"^di_vc$|^di_vp$|^di$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}},cryptosuite:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type","cryptosuite"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},FN=new RegExp("^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$","u"),TN=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),IN=new RegExp("^di_vc$|^di_vp$|^di$","u"),BN=new RegExp("additionalProperties","u");function Kc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let a in t)if(!(a==="vc+sd-jwt"||FN.test(a)||TN.test(a)||IN.test(a)||BN.test(a))){let c={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Te,data:t};i===null?i=[c]:i.push(c),o++}if(t["vc+sd-jwt"]!==void 0){let a=t["vc+sd-jwt"];if(a&&typeof a=="object"&&!Array.isArray(a)){for(let c in a)if(!(c==="sd-jwt_alg_values"||c==="kb-jwt_alg_values")){let u={instancePath:e+"/vc+sd-jwt",schemaPath:"#/properties/vc%2Bsd-jwt/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Te.properties["vc+sd-jwt"],data:a};i===null?i=[u]:i.push(u),o++}if(a["sd-jwt_alg_values"]!==void 0){let c=a["sd-jwt_alg_values"];if(Array.isArray(c)){if(c.length<1){let l={instancePath:e+"/vc+sd-jwt/sd-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/sd-jwt_alg_values/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Te.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"],data:c};i===null?i=[l]:i.push(l),o++}let u=c.length;for(let l=0;l<u;l++){let d=c[l];if(typeof d!="string"){let p={instancePath:e+"/vc+sd-jwt/sd-jwt_alg_values/"+l,schemaPath:"#/properties/vc%2Bsd-jwt/properties/sd-jwt_alg_values/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"].items.type,parentSchema:Te.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"].items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let u={instancePath:e+"/vc+sd-jwt/sd-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/sd-jwt_alg_values/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Te.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"].type,parentSchema:Te.properties["vc+sd-jwt"].properties["sd-jwt_alg_values"],data:c};i===null?i=[u]:i.push(u),o++}}if(a["kb-jwt_alg_values"]!==void 0){let c=a["kb-jwt_alg_values"];if(Array.isArray(c)){if(c.length<1){let l={instancePath:e+"/vc+sd-jwt/kb-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/kb-jwt_alg_values/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Te.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"],data:c};i===null?i=[l]:i.push(l),o++}let u=c.length;for(let l=0;l<u;l++){let d=c[l];if(typeof d!="string"){let p={instancePath:e+"/vc+sd-jwt/kb-jwt_alg_values/"+l,schemaPath:"#/properties/vc%2Bsd-jwt/properties/kb-jwt_alg_values/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"].items.type,parentSchema:Te.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"].items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let u={instancePath:e+"/vc+sd-jwt/kb-jwt_alg_values",schemaPath:"#/properties/vc%2Bsd-jwt/properties/kb-jwt_alg_values/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Te.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"].type,parentSchema:Te.properties["vc+sd-jwt"].properties["kb-jwt_alg_values"],data:c};i===null?i=[u]:i.push(u),o++}}}else{let c={instancePath:e+"/vc+sd-jwt",schemaPath:"#/properties/vc%2Bsd-jwt/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Te.properties["vc+sd-jwt"].type,parentSchema:Te.properties["vc+sd-jwt"],data:a};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(FN.test(a)){let c=t[a];if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.alg===void 0){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24%7C%5Emso_mdoc%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:Te.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].required,parentSchema:Te.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"],data:c};i===null?i=[u]:i.push(u),o++}for(let u in c)if(u!=="alg"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24%7C%5Emso_mdoc%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Te.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"],data:c};i===null?i=[l]:i.push(l),o++}if(c.alg!==void 0){let u=c.alg;if(Array.isArray(u)){if(u.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24%7C%5Emso_mdoc%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Te.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].properties.alg,data:u};i===null?i=[d]:i.push(d),o++}let l=u.length;for(let d=0;d<l;d++){let p=u[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24%7C%5Emso_mdoc%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].properties.alg.items.type,parentSchema:Te.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].properties.alg.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24%7C%5Emso_mdoc%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Te.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].properties.alg.type,parentSchema:Te.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].properties.alg,data:u};i===null?i=[l]:i.push(l),o++}}}else{let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vc_json%24%7C%5Ejwt_vp%24%7C%5Ejwt_vp_json%24%7C%5Emso_mdoc%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Te.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"].type,parentSchema:Te.patternProperties["^jwt$|^jwt_vc$|^jwt_vc_json$|^jwt_vp$|^jwt_vp_json$|^mso_mdoc$"],data:c};i===null?i=[u]:i.push(u),o++}}for(let a in t)if(TN.test(a)){let c=t[a];if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.proof_type===void 0){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Te.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:Te.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:c};i===null?i=[u]:i.push(u),o++}for(let u in c)if(u!=="proof_type"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Te.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:c};i===null?i=[l]:i.push(l),o++}if(c.proof_type!==void 0){let u=c.proof_type;if(Array.isArray(u)){if(u.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Te.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:u};i===null?i=[d]:i.push(d),o++}let l=u.length;for(let d=0;d<l;d++){let p=u[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:Te.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Te.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:Te.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:u};i===null?i=[l]:i.push(l),o++}}}else{let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Te.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:Te.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:c};i===null?i=[u]:i.push(u),o++}}for(let a in t)if(IN.test(a)){let c=t[a];if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.proof_type===void 0){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].required,parentSchema:Te.patternProperties["^di_vc$|^di_vp$|^di$"],data:c};i===null?i=[u]:i.push(u),o++}if(c.cryptosuite===void 0){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/required",keyword:"required",params:{missingProperty:"cryptosuite"},message:"must have required property 'cryptosuite'",schema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].required,parentSchema:Te.patternProperties["^di_vc$|^di_vp$|^di$"],data:c};i===null?i=[u]:i.push(u),o++}for(let u in c)if(!(u==="proof_type"||u==="cryptosuite")){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Te.patternProperties["^di_vc$|^di_vp$|^di$"],data:c};i===null?i=[l]:i.push(l),o++}if(c.proof_type!==void 0){let u=c.proof_type;if(Array.isArray(u)){if(u.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type,data:u};i===null?i=[d]:i.push(d),o++}let l=u.length;for(let d=0;d<l;d++){let p=u[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type.items.type,parentSchema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type.type,parentSchema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].properties.proof_type,data:u};i===null?i=[l]:i.push(l),o++}}if(c.cryptosuite!==void 0){let u=c.cryptosuite;if(Array.isArray(u)){if(u.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/cryptosuite",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/cryptosuite/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite,data:u};i===null?i=[d]:i.push(d),o++}let l=u.length;for(let d=0;d<l;d++){let p=u[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/cryptosuite/"+d,schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/cryptosuite/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite.items.type,parentSchema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/cryptosuite",schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/properties/cryptosuite/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite.type,parentSchema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].properties.cryptosuite,data:u};i===null?i=[l]:i.push(l),o++}}}else{let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Edi_vc%24%7C%5Edi_vp%24%7C%5Edi%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Te.patternProperties["^di_vc$|^di_vp$|^di$"].type,parentSchema:Te.patternProperties["^di_vc$|^di_vp$|^di$"],data:c};i===null?i=[u]:i.push(u),o++}}for(let a in t)if(BN.test(a)){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:Te.patternProperties.additionalProperties,data:t[a]};i===null?i=[c]:i.push(c),o++}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Te.type,parentSchema:Te,data:t};i===null?i=[a]:i.push(a),o++}return Kc.errors=i,o===0}var Pe={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},r2={validate:nm};function nm(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pe.type,parentSchema:Pe,data:t};i===null?i=[f]:i.push(f),o++}let a=o,c=!1,u=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Pe.oneOf[0].required,parentSchema:Pe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}if(t.from===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:Pe.oneOf[0].required,parentSchema:Pe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Pe.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[0].properties.name.type,parentSchema:Pe.oneOf[0].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[0].properties.purpose.type,parentSchema:Pe.oneOf[0].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[0].properties.rule.type,parentSchema:Pe.oneOf[0].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="all"||f==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:Pe.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Pe.oneOf[0].properties.rule.enum,parentSchema:Pe.oneOf[0].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[0].properties.count.type,parentSchema:Pe.oneOf[0].properties.count,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Pe.oneOf[0].properties.count,data:f};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[0].properties.min.type,parentSchema:Pe.oneOf[0].properties.min,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Pe.oneOf[0].properties.min,data:f};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[0].properties.max.type,parentSchema:Pe.oneOf[0].properties.max,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Pe.oneOf[0].properties.max,data:f};i===null?i=[h]:i.push(h),o++}}if(t.from!==void 0){let f=t.from;if(typeof f!="string"){let h={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[0].properties.from.type,parentSchema:Pe.oneOf[0].properties.from,data:f};i===null?i=[h]:i.push(h),o++}}}var p=l===o;p&&(c=!0,u=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Pe.oneOf[1].required,parentSchema:Pe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.from_nested===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:Pe.oneOf[1].required,parentSchema:Pe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Pe.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[1].properties.name.type,parentSchema:Pe.oneOf[1].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[1].properties.purpose.type,parentSchema:Pe.oneOf[1].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[1].properties.rule.type,parentSchema:Pe.oneOf[1].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="all"||f==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:Pe.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Pe.oneOf[1].properties.rule.enum,parentSchema:Pe.oneOf[1].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[1].properties.count.type,parentSchema:Pe.oneOf[1].properties.count,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Pe.oneOf[1].properties.count,data:f};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[1].properties.min.type,parentSchema:Pe.oneOf[1].properties.min,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Pe.oneOf[1].properties.min,data:f};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[1].properties.max.type,parentSchema:Pe.oneOf[1].properties.max,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Pe.oneOf[1].properties.max,data:f};i===null?i=[h]:i.push(h),o++}}if(t.from_nested!==void 0){let f=t.from_nested;if(Array.isArray(f)){if(f.length<1){let y={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Pe.oneOf[1].properties.from_nested,data:f};i===null?i=[y]:i.push(y),o++}let h=f.length;for(let y=0;y<h;y++)r2.validate(f[y],{instancePath:e+"/from_nested/"+y,parentData:f,parentDataProperty:y,rootData:s})||(i=i===null?r2.validate.errors:i.concat(r2.validate.errors),o=i.length)}else{let h={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pe.oneOf[1].properties.from_nested.type,parentSchema:Pe.oneOf[1].properties.from_nested,data:f};i===null?i=[h]:i.push(h),o++}}}var p=d===o;if(p&&c?(c=!1,u=[u,1]):p&&(c=!0,u=1),c)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf",schema:Pe.oneOf,parentSchema:Pe,data:t};i===null?i=[f]:i.push(f),o++}return nm.errors=i,o===0}var ie={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},Gv={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function Zv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){let c={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Gv.properties.manifest.type,parentSchema:Gv.properties.manifest,data:a};i===null?i=[c]:i.push(c),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Gv.type,parentSchema:Gv,data:t};i===null?i=[a]:i.push(a),o++}return Zv.errors=i,o===0}var Ve={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]},ve={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},n2={type:"integer",minimum:0};function si(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(typeof t=="number"&&!(t%1)&&!isNaN(t))){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:n2.type,parentSchema:n2,data:t};i===null?i=[a]:i.push(a),o++}if(typeof t=="number"&&(t<0||isNaN(t))){let a={instancePath:e,schemaPath:"#/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:n2,data:t};i===null?i=[a]:i.push(a),o++}return si.errors=i,o===0}function to(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return si(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?si.errors:i.concat(si.errors),o=i.length),to.errors=i,o===0}var i2={type:"array",minItems:1,items:{$ref:"#"}},s2={validate:qe};function ii(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){if(t.length<1){let c={instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:i2,data:t};i===null?i=[c]:i.push(c),o++}let a=t.length;for(let c=0;c<a;c++)s2.validate(t[c],{instancePath:e+"/"+c,parentData:t,parentDataProperty:c,rootData:s})||(i=i===null?s2.validate.errors:i.concat(s2.validate.errors),o=i.length)}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:i2.type,parentSchema:i2,data:t};i===null?i=[a]:i.push(a),o++}return ii.errors=i,o===0}var rm={type:"array",items:{type:"string"},uniqueItems:!0,default:[]};function Uc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){let a=t.length;for(let l=0;l<a;l++){let d=t[l];if(typeof d!="string"){let p={instancePath:e+"/"+l,schemaPath:"#/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:rm.items.type,parentSchema:rm.items,data:d};i===null?i=[p]:i.push(p),o++}}let c=t.length,u;if(c>1){let l={};for(;c--;){let d=t[c];if(typeof d=="string"){if(typeof l[d]=="number"){u=l[d];let p={instancePath:e,schemaPath:"#/uniqueItems",keyword:"uniqueItems",params:{i:c,j:u},message:"must NOT have duplicate items (items ## "+u+" and "+c+" are identical)",schema:!0,parentSchema:rm,data:t};i===null?i=[p]:i.push(p),o++;break}l[d]=c}}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:rm.type,parentSchema:rm,data:t};i===null?i=[a]:i.push(a),o++}return Uc.errors=i,o===0}var o2={enum:["array","boolean","integer","null","number","object","string"]};function Vc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t==="array"||t==="boolean"||t==="integer"||t==="null"||t==="number"||t==="object"||t==="string")){let a={instancePath:e,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:o2.enum},message:"must be equal to one of the allowed values",schema:o2.enum,parentSchema:o2,data:t};i===null?i=[a]:i.push(a),o++}return Vc.errors=i,o===0}var kN=tm().default;function qe(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean"){let d={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:ve.type},message:"must be object,boolean",schema:ve.type,parentSchema:ve,data:t};i===null?i=[d]:i.push(d),o++}if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let d=t.$id;if(typeof d!="string"){let p={instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ve.properties.$id.type,parentSchema:ve.properties.$id,data:d};i===null?i=[p]:i.push(p),o++}}if(t.$schema!==void 0){let d=t.$schema;if(typeof d!="string"){let p={instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ve.properties.$schema.type,parentSchema:ve.properties.$schema,data:d};i===null?i=[p]:i.push(p),o++}}if(t.$ref!==void 0){let d=t.$ref;if(typeof d!="string"){let p={instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ve.properties.$ref.type,parentSchema:ve.properties.$ref,data:d};i===null?i=[p]:i.push(p),o++}}if(t.$comment!==void 0){let d=t.$comment;if(typeof d!="string"){let p={instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ve.properties.$comment.type,parentSchema:ve.properties.$comment,data:d};i===null?i=[p]:i.push(p),o++}}if(t.title!==void 0){let d=t.title;if(typeof d!="string"){let p={instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ve.properties.title.type,parentSchema:ve.properties.title,data:d};i===null?i=[p]:i.push(p),o++}}if(t.description!==void 0){let d=t.description;if(typeof d!="string"){let p={instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ve.properties.description.type,parentSchema:ve.properties.description,data:d};i===null?i=[p]:i.push(p),o++}}if(t.readOnly!==void 0){let d=t.readOnly;if(typeof d!="boolean"){let p={instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ve.properties.readOnly.type,parentSchema:ve.properties.readOnly,data:d};i===null?i=[p]:i.push(p),o++}}if(t.examples!==void 0){let d=t.examples;if(!Array.isArray(d)){let p={instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ve.properties.examples.type,parentSchema:ve.properties.examples,data:d};i===null?i=[p]:i.push(p),o++}}if(t.multipleOf!==void 0){let d=t.multipleOf;if(typeof d=="number"){if(d<=0||isNaN(d)){let p={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0",schema:0,parentSchema:ve.properties.multipleOf,data:d};i===null?i=[p]:i.push(p),o++}}else{let p={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ve.properties.multipleOf.type,parentSchema:ve.properties.multipleOf,data:d};i===null?i=[p]:i.push(p),o++}}if(t.maximum!==void 0){let d=t.maximum;if(typeof d!="number"){let p={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ve.properties.maximum.type,parentSchema:ve.properties.maximum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.exclusiveMaximum!==void 0){let d=t.exclusiveMaximum;if(typeof d!="number"){let p={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ve.properties.exclusiveMaximum.type,parentSchema:ve.properties.exclusiveMaximum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.minimum!==void 0){let d=t.minimum;if(typeof d!="number"){let p={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ve.properties.minimum.type,parentSchema:ve.properties.minimum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.exclusiveMinimum!==void 0){let d=t.exclusiveMinimum;if(typeof d!="number"){let p={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ve.properties.exclusiveMinimum.type,parentSchema:ve.properties.exclusiveMinimum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.maxLength!==void 0&&(si(t.maxLength,{instancePath:e+"/maxLength",parentData:t,parentDataProperty:"maxLength",rootData:s})||(i=i===null?si.errors:i.concat(si.errors),o=i.length)),t.minLength!==void 0&&(to(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?to.errors:i.concat(to.errors),o=i.length)),t.pattern!==void 0){let d=t.pattern;if(typeof d!="string"){let p={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ve.properties.pattern.type,parentSchema:ve.properties.pattern,data:d};i===null?i=[p]:i.push(p),o++}}if(t.additionalItems!==void 0&&(qe(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.items!==void 0){let d=t.items,p=o,f=!1,h=o;qe(d,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length);var a=h===o;if(f=f||a,!f){let y=o;ii(d,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?ii.errors:i.concat(ii.errors),o=i.length);var a=y===o;f=f||a}if(f)o=p,i!==null&&(p?i.length=p:i=null);else{let y={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:ve.properties.items.anyOf,parentSchema:ve.properties.items,data:d};i===null?i=[y]:i.push(y),o++}}if(t.maxItems!==void 0&&(si(t.maxItems,{instancePath:e+"/maxItems",parentData:t,parentDataProperty:"maxItems",rootData:s})||(i=i===null?si.errors:i.concat(si.errors),o=i.length)),t.minItems!==void 0&&(to(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?to.errors:i.concat(to.errors),o=i.length)),t.uniqueItems!==void 0){let d=t.uniqueItems;if(typeof d!="boolean"){let p={instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ve.properties.uniqueItems.type,parentSchema:ve.properties.uniqueItems,data:d};i===null?i=[p]:i.push(p),o++}}if(t.contains!==void 0&&(qe(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.maxProperties!==void 0&&(si(t.maxProperties,{instancePath:e+"/maxProperties",parentData:t,parentDataProperty:"maxProperties",rootData:s})||(i=i===null?si.errors:i.concat(si.errors),o=i.length)),t.minProperties!==void 0&&(to(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?to.errors:i.concat(to.errors),o=i.length)),t.required!==void 0&&(Uc(t.required,{instancePath:e+"/required",parentData:t,parentDataProperty:"required",rootData:s})||(i=i===null?Uc.errors:i.concat(Uc.errors),o=i.length)),t.additionalProperties!==void 0&&(qe(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.definitions!==void 0){let d=t.definitions;if(d&&typeof d=="object"&&!Array.isArray(d))for(let p in d)qe(d[p],{instancePath:e+"/definitions/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length);else{let p={instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ve.properties.definitions.type,parentSchema:ve.properties.definitions,data:d};i===null?i=[p]:i.push(p),o++}}if(t.properties!==void 0){let d=t.properties;if(d&&typeof d=="object"&&!Array.isArray(d))for(let p in d)qe(d[p],{instancePath:e+"/properties/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length);else{let p={instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ve.properties.properties.type,parentSchema:ve.properties.properties,data:d};i===null?i=[p]:i.push(p),o++}}if(t.patternProperties!==void 0){let d=t.patternProperties;if(d&&typeof d=="object"&&!Array.isArray(d)){for(let p in d){var c=o===o;if(!c){let h={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:p},message:"property name must be valid",schema:ve.properties.patternProperties.propertyNames,parentSchema:ve.properties.patternProperties,data:d};i===null?i=[h]:i.push(h),o++}}for(let p in d)qe(d[p],{instancePath:e+"/patternProperties/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)}else{let p={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ve.properties.patternProperties.type,parentSchema:ve.properties.patternProperties,data:d};i===null?i=[p]:i.push(p),o++}}if(t.dependencies!==void 0){let d=t.dependencies;if(d&&typeof d=="object"&&!Array.isArray(d))for(let p in d){let f=d[p],h=o,y=!1,g=o;qe(f,{instancePath:e+"/dependencies/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length);var u=g===o;if(y=y||u,!y){let A=o;Uc(f,{instancePath:e+"/dependencies/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?Uc.errors:i.concat(Uc.errors),o=i.length);var u=A===o;y=y||u}if(y)o=h,i!==null&&(h?i.length=h:i=null);else{let A={instancePath:e+"/dependencies/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:ve.properties.dependencies.additionalProperties.anyOf,parentSchema:ve.properties.dependencies.additionalProperties,data:f};i===null?i=[A]:i.push(A),o++}}else{let p={instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ve.properties.dependencies.type,parentSchema:ve.properties.dependencies,data:d};i===null?i=[p]:i.push(p),o++}}if(t.propertyNames!==void 0&&(qe(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.enum!==void 0){let d=t.enum;if(Array.isArray(d)){if(d.length<1){let h={instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:ve.properties.enum,data:d};i===null?i=[h]:i.push(h),o++}let p=d.length,f;if(p>1){e:for(;p--;)for(f=p;f--;)if(kN(d[p],d[f])){let h={instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:p,j:f},message:"must NOT have duplicate items (items ## "+f+" and "+p+" are identical)",schema:!0,parentSchema:ve.properties.enum,data:d};i===null?i=[h]:i.push(h),o++;break e}}}else{let p={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ve.properties.enum.type,parentSchema:ve.properties.enum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.type!==void 0){let d=t.type,p=o,f=!1,h=o;Vc(d,{instancePath:e+"/type",parentData:t,parentDataProperty:"type",rootData:s})||(i=i===null?Vc.errors:i.concat(Vc.errors),o=i.length);var l=h===o;if(f=f||l,!f){let y=o;if(Array.isArray(d)){if(d.length<1){let w={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:ve.properties.type.anyOf[1],data:d};i===null?i=[w]:i.push(w),o++}let A=d.length;for(let w=0;w<A;w++)Vc(d[w],{instancePath:e+"/type/"+w,parentData:d,parentDataProperty:w,rootData:s})||(i=i===null?Vc.errors:i.concat(Vc.errors),o=i.length);let x=d.length,b;if(x>1){e:for(;x--;)for(b=x;b--;)if(kN(d[x],d[b])){let w={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:x,j:b},message:"must NOT have duplicate items (items ## "+b+" and "+x+" are identical)",schema:!0,parentSchema:ve.properties.type.anyOf[1],data:d};i===null?i=[w]:i.push(w),o++;break e}}}else{let A={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ve.properties.type.anyOf[1].type,parentSchema:ve.properties.type.anyOf[1],data:d};i===null?i=[A]:i.push(A),o++}var l=y===o;f=f||l}if(f)o=p,i!==null&&(p?i.length=p:i=null);else{let y={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:ve.properties.type.anyOf,parentSchema:ve.properties.type,data:d};i===null?i=[y]:i.push(y),o++}}if(t.format!==void 0){let d=t.format;if(typeof d!="string"){let p={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ve.properties.format.type,parentSchema:ve.properties.format,data:d};i===null?i=[p]:i.push(p),o++}}if(t.contentMediaType!==void 0){let d=t.contentMediaType;if(typeof d!="string"){let p={instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ve.properties.contentMediaType.type,parentSchema:ve.properties.contentMediaType,data:d};i===null?i=[p]:i.push(p),o++}}if(t.contentEncoding!==void 0){let d=t.contentEncoding;if(typeof d!="string"){let p={instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ve.properties.contentEncoding.type,parentSchema:ve.properties.contentEncoding,data:d};i===null?i=[p]:i.push(p),o++}}t.if!==void 0&&(qe(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.then!==void 0&&(qe(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.else!==void 0&&(qe(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.allOf!==void 0&&(ii(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?ii.errors:i.concat(ii.errors),o=i.length)),t.anyOf!==void 0&&(ii(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?ii.errors:i.concat(ii.errors),o=i.length)),t.oneOf!==void 0&&(ii(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?ii.errors:i.concat(ii.errors),o=i.length)),t.not!==void 0&&(qe(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length))}return qe.errors=i,o===0}function Xv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ve.type,parentSchema:Ve,data:t};i===null?i=[f]:i.push(f),o++}let a=o,c=!1,u=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:Ve.oneOf[0].required,parentSchema:Ve.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="name")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Ve.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ve.oneOf[0].properties.id.type,parentSchema:Ve.oneOf[0].properties.id,data:f};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let h=f.length;for(let y=0;y<h;y++){let g=f[y];if(typeof g!="string"){let A={instancePath:e+"/path/"+y,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ve.oneOf[0].properties.path.items.type,parentSchema:Ve.oneOf[0].properties.path.items,data:g};i===null?i=[A]:i.push(A),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ve.oneOf[0].properties.path.type,parentSchema:Ve.oneOf[0].properties.path,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ve.oneOf[0].properties.purpose.type,parentSchema:Ve.oneOf[0].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.intent_to_retain!==void 0){let f=t.intent_to_retain;if(typeof f!="boolean"){let h={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/0/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:Ve.oneOf[0].properties.intent_to_retain.type,parentSchema:Ve.oneOf[0].properties.intent_to_retain,data:f};i===null?i=[h]:i.push(h),o++}}if(t.filter!==void 0&&(qe(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ve.oneOf[0].properties.name.type,parentSchema:Ve.oneOf[0].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}}var p=l===o;p&&(c=!0,u=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:Ve.oneOf[1].required,parentSchema:Ve.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.filter===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:Ve.oneOf[1].required,parentSchema:Ve.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.predicate===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:Ve.oneOf[1].required,parentSchema:Ve.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="predicate"||f==="name")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Ve.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ve.oneOf[1].properties.id.type,parentSchema:Ve.oneOf[1].properties.id,data:f};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let h=f.length;for(let y=0;y<h;y++){let g=f[y];if(typeof g!="string"){let A={instancePath:e+"/path/"+y,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ve.oneOf[1].properties.path.items.type,parentSchema:Ve.oneOf[1].properties.path.items,data:g};i===null?i=[A]:i.push(A),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ve.oneOf[1].properties.path.type,parentSchema:Ve.oneOf[1].properties.path,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ve.oneOf[1].properties.purpose.type,parentSchema:Ve.oneOf[1].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.intent_to_retain!==void 0){let f=t.intent_to_retain;if(typeof f!="boolean"){let h={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/1/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:Ve.oneOf[1].properties.intent_to_retain.type,parentSchema:Ve.oneOf[1].properties.intent_to_retain,data:f};i===null?i=[h]:i.push(h),o++}}if(t.filter!==void 0&&(qe(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.predicate!==void 0){let f=t.predicate;if(typeof f!="string"){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ve.oneOf[1].properties.predicate.type,parentSchema:Ve.oneOf[1].properties.predicate,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="required"||f==="preferred")){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:Ve.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:Ve.oneOf[1].properties.predicate.enum,parentSchema:Ve.oneOf[1].properties.predicate,data:f};i===null?i=[h]:i.push(h),o++}}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ve.oneOf[1].properties.name.type,parentSchema:Ve.oneOf[1].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}}var p=d===o;if(p&&c?(c=!1,u=[u,1]):p&&(c=!0,u=1),c)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:u},message:"must match exactly one schema in oneOf",schema:Ve.oneOf,parentSchema:Ve,data:t};i===null?i=[f]:i.push(f),o++}return Xv.errors=i,o===0}function Yv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:ie.required,parentSchema:ie,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="issuance"||a==="group"||a==="format"||a==="constraints")){let c={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:ie,data:t};i===null?i=[c]:i.push(c),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){let c={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.id.type,parentSchema:ie.properties.id,data:a};i===null?i=[c]:i.push(c),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){let c={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.name.type,parentSchema:ie.properties.name,data:a};i===null?i=[c]:i.push(c),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){let c={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.purpose.type,parentSchema:ie.properties.purpose,data:a};i===null?i=[c]:i.push(c),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){let c=a.length;for(let u=0;u<c;u++)Zv(a[u],{instancePath:e+"/issuance/"+u,parentData:a,parentDataProperty:u,rootData:s})||(i=i===null?Zv.errors:i.concat(Zv.errors),o=i.length)}else{let c={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.issuance.type,parentSchema:ie.properties.issuance,data:a};i===null?i=[c]:i.push(c),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){let c=a.length;for(let u=0;u<c;u++){let l=a[u];if(typeof l!="string"){let d={instancePath:e+"/group/"+u,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.group.items.type,parentSchema:ie.properties.group.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let c={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.group.type,parentSchema:ie.properties.group,data:a};i===null?i=[c]:i.push(c),o++}}if(t.format!==void 0&&(Kc(t.format,{instancePath:e+"/format",parentData:t,parentDataProperty:"format",rootData:s})||(i=i===null?Kc.errors:i.concat(Kc.errors),o=i.length)),t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(let c in a)if(!(c==="limit_disclosure"||c==="statuses"||c==="fields"||c==="subject_is_issuer"||c==="is_holder"||c==="same_subject")){let u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:ie.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}if(a.limit_disclosure!==void 0){let c=a.limit_disclosure;if(typeof c!="string"){let u={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.limit_disclosure.type,parentSchema:ie.properties.constraints.properties.limit_disclosure,data:c};i===null?i=[u]:i.push(u),o++}if(!(c==="required"||c==="preferred")){let u={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.limit_disclosure.enum,parentSchema:ie.properties.constraints.properties.limit_disclosure,data:c};i===null?i=[u]:i.push(u),o++}}if(a.statuses!==void 0){let c=a.statuses;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.active!==void 0){let u=c.active;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.directive!==void 0){let l=u.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:ie.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:ie.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.properties.statuses.properties.active.type,parentSchema:ie.properties.constraints.properties.statuses.properties.active,data:u};i===null?i=[l]:i.push(l),o++}}if(c.suspended!==void 0){let u=c.suspended;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.directive!==void 0){let l=u.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:ie.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:ie.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:ie.properties.constraints.properties.statuses.properties.suspended,data:u};i===null?i=[l]:i.push(l),o++}}if(c.revoked!==void 0){let u=c.revoked;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.directive!==void 0){let l=u.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:ie.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:ie.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:ie.properties.constraints.properties.statuses.properties.revoked,data:u};i===null?i=[l]:i.push(l),o++}}}else{let u={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.properties.statuses.type,parentSchema:ie.properties.constraints.properties.statuses,data:c};i===null?i=[u]:i.push(u),o++}}if(a.fields!==void 0){let c=a.fields;if(Array.isArray(c)){let u=c.length;for(let l=0;l<u;l++)Xv(c[l],{instancePath:e+"/constraints/fields/"+l,parentData:c,parentDataProperty:l,rootData:s})||(i=i===null?Xv.errors:i.concat(Xv.errors),o=i.length)}else{let u={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.constraints.properties.fields.type,parentSchema:ie.properties.constraints.properties.fields,data:c};i===null?i=[u]:i.push(u),o++}}if(a.subject_is_issuer!==void 0){let c=a.subject_is_issuer;if(typeof c!="string"){let u={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.subject_is_issuer.type,parentSchema:ie.properties.constraints.properties.subject_is_issuer,data:c};i===null?i=[u]:i.push(u),o++}if(!(c==="required"||c==="preferred")){let u={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.subject_is_issuer.enum,parentSchema:ie.properties.constraints.properties.subject_is_issuer,data:c};i===null?i=[u]:i.push(u),o++}}if(a.is_holder!==void 0){let c=a.is_holder;if(Array.isArray(c)){let u=c.length;for(let l=0;l<u;l++){let d=c[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ie.properties.constraints.properties.is_holder.items.required,parentSchema:ie.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}if(d.directive===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ie.properties.constraints.properties.is_holder.items.required,parentSchema:ie.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}for(let p in d)if(!(p==="field_id"||p==="directive")){let f={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:ie.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let p=d.field_id;if(Array.isArray(p)){let f=p.length;for(let h=0;h<f;h++){let y=p[h];if(typeof y!="string"){let g={instancePath:e+"/constraints/is_holder/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:ie.properties.constraints.properties.is_holder.items.properties.field_id.items,data:y};i===null?i=[g]:i.push(g),o++}}}else{let f={instancePath:e+"/constraints/is_holder/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:ie.properties.constraints.properties.is_holder.items.properties.field_id,data:p};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let p=d.directive;if(typeof p!="string"){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:ie.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}if(!(p==="required"||p==="preferred")){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:ie.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}}}else{let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.properties.is_holder.items.type,parentSchema:ie.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let u={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.constraints.properties.is_holder.type,parentSchema:ie.properties.constraints.properties.is_holder,data:c};i===null?i=[u]:i.push(u),o++}}if(a.same_subject!==void 0){let c=a.same_subject;if(Array.isArray(c)){let u=c.length;for(let l=0;l<u;l++){let d=c[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ie.properties.constraints.properties.same_subject.items.required,parentSchema:ie.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}if(d.directive===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ie.properties.constraints.properties.same_subject.items.required,parentSchema:ie.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}for(let p in d)if(!(p==="field_id"||p==="directive")){let f={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:ie.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let p=d.field_id;if(Array.isArray(p)){let f=p.length;for(let h=0;h<f;h++){let y=p[h];if(typeof y!="string"){let g={instancePath:e+"/constraints/same_subject/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:ie.properties.constraints.properties.same_subject.items.properties.field_id.items,data:y};i===null?i=[g]:i.push(g),o++}}}else{let f={instancePath:e+"/constraints/same_subject/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:ie.properties.constraints.properties.same_subject.items.properties.field_id,data:p};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let p=d.directive;if(typeof p!="string"){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ie.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:ie.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}if(!(p==="required"||p==="preferred")){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ie.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ie.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:ie.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}}}else{let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.properties.same_subject.items.type,parentSchema:ie.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let u={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ie.properties.constraints.properties.same_subject.type,parentSchema:ie.properties.constraints.properties.same_subject,data:c};i===null?i=[u]:i.push(u),o++}}}else{let c={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.properties.constraints.type,parentSchema:ie.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ie.type,parentSchema:ie,data:t};i===null?i=[a]:i.push(a),o++}return Yv.errors=i,o===0}function a2(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:br.properties.presentation_definition.required,parentSchema:br.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.input_descriptors===void 0){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:br.properties.presentation_definition.required,parentSchema:br.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}for(let c in a)if(!(c==="id"||c==="name"||c==="purpose"||c==="format"||c==="frame"||c==="submission_requirements"||c==="input_descriptors")){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:br.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.id!==void 0){let c=a.id;if(typeof c!="string"){let u={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:br.properties.presentation_definition.properties.id.type,parentSchema:br.properties.presentation_definition.properties.id,data:c};i===null?i=[u]:i.push(u),o++}}if(a.name!==void 0){let c=a.name;if(typeof c!="string"){let u={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:br.properties.presentation_definition.properties.name.type,parentSchema:br.properties.presentation_definition.properties.name,data:c};i===null?i=[u]:i.push(u),o++}}if(a.purpose!==void 0){let c=a.purpose;if(typeof c!="string"){let u={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:br.properties.presentation_definition.properties.purpose.type,parentSchema:br.properties.presentation_definition.properties.purpose,data:c};i===null?i=[u]:i.push(u),o++}}if(a.format!==void 0&&(Kc(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?Kc.errors:i.concat(Kc.errors),o=i.length)),a.frame!==void 0){let c=a.frame;if(!(c&&typeof c=="object"&&!Array.isArray(c))){let u={instancePath:e+"/presentation_definition/frame",schemaPath:"#/properties/presentation_definition/properties/frame/type",keyword:"type",params:{type:"object"},message:"must be object",schema:br.properties.presentation_definition.properties.frame.type,parentSchema:br.properties.presentation_definition.properties.frame,data:c};i===null?i=[u]:i.push(u),o++}}if(a.submission_requirements!==void 0){let c=a.submission_requirements;if(Array.isArray(c)){let u=c.length;for(let l=0;l<u;l++)nm(c[l],{instancePath:e+"/presentation_definition/submission_requirements/"+l,parentData:c,parentDataProperty:l,rootData:s})||(i=i===null?nm.errors:i.concat(nm.errors),o=i.length)}else{let u={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:br.properties.presentation_definition.properties.submission_requirements.type,parentSchema:br.properties.presentation_definition.properties.submission_requirements,data:c};i===null?i=[u]:i.push(u),o++}}if(a.input_descriptors!==void 0){let c=a.input_descriptors;if(Array.isArray(c)){let u=c.length;for(let l=0;l<u;l++)Yv(c[l],{instancePath:e+"/presentation_definition/input_descriptors/"+l,parentData:c,parentDataProperty:l,rootData:s})||(i=i===null?Yv.errors:i.concat(Yv.errors),o=i.length)}else{let u={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:br.properties.presentation_definition.properties.input_descriptors.type,parentSchema:br.properties.presentation_definition.properties.input_descriptors,data:c};i===null?i=[u]:i.push(u),o++}}}else{let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:br.properties.presentation_definition.type,parentSchema:br.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:br.type,parentSchema:br,data:t};i===null?i=[a]:i.push(a),o++}return a2.errors=i,o===0}});var NN=v(pn=>{"use strict";var jN=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pn,"__esModule",{value:!0});pn.filterToRestrictedDIDs=pn.isRestrictedDID=pn.uniformDIDMethods=pn.definitionVersionDiscovery=pn.getIssuerString=pn.getSubjectIdsAsString=void 0;var RN=qc(),Cle=jN(QD()),Ple=jN(c2()),Ole=Nv(),$N=LD();function Fle(t){return(Array.isArray(t.credentialSubject)?t.credentialSubject:[t.credentialSubject]).filter(r=>!!r.id).map(r=>r.id)}pn.getSubjectIdsAsString=Fle;function Tle(t){return Ole.ObjectUtils.isString(t.issuer)?t.issuer:t.issuer.id}pn.getIssuerString=Tle;function Ile(t){let e=JSON.parse(JSON.stringify(t));$N.JsonPathUtils.changePropertyNameRecursively(e,"_const","const"),$N.JsonPathUtils.changePropertyNameRecursively(e,"_enum","enum");let r={presentation_definition:e},n=(0,Ple.default)(r);return n?{version:RN.PEVersion.v2}:(n=(0,Cle.default)(r),n?{version:RN.PEVersion.v1}:{error:"This is not a valid PresentationDefinition"})}pn.definitionVersionDiscovery=Ile;function l2(t,e){var r;let n=(r=t?.map(s=>s.toLowerCase()).map(s=>s.startsWith("did:")?s:`did:${s}`))!==null&&r!==void 0?r:[];if(e?.removePrefix){let s=e.removePrefix.endsWith(":")?e.removePrefix.length:e.removePrefix.length+1;n=n.map(i=>i.startsWith(e.removePrefix)?i.substring(s):i)}return n.includes("did")?[]:n}pn.uniformDIDMethods=l2;function Ble(t,e){let r=l2(e);return r.length===0||r.some(n=>t.toLowerCase().startsWith(n))}pn.isRestrictedDID=Ble;function kle(t,e){let r=l2(e);return r.length===0?t:r.flatMap(n=>t.filter(s=>s.toLowerCase().startsWith(n)))}pn.filterToRestrictedDIDs=kle});var zN=v((lIe,KN)=>{"use strict";var d2=Object.defineProperty,Rle=Object.getOwnPropertyDescriptor,$le=Object.getOwnPropertyNames,jle=Object.prototype.hasOwnProperty,Nle=(t,e)=>{for(var r in e)d2(t,r,{get:e[r],enumerable:!0})},Mle=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of $le(e))!jle.call(t,s)&&s!==r&&d2(t,s,{get:()=>e[s],enumerable:!(n=Rle(e,s))||n.enumerable});return t},qle=t=>Mle(d2({},"__esModule",{value:!0}),t),MN=(t,e,r)=>new Promise((n,s)=>{var i=c=>{try{a(r.next(c))}catch(u){s(u)}},o=c=>{try{a(r.throw(c))}catch(u){s(u)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,o);a((r=r.apply(t,e)).next())}),qN={};Nle(qN,{createHashMappingForSerializedDisclosure:()=>VN,present:()=>Vle,presentSync:()=>Kle,presentableKeys:()=>Lle,presentableKeysSync:()=>Ule,selectDisclosures:()=>zle,transformPresentationFrame:()=>im});KN.exports=qle(qN);var LN=MS(),UN=jS(),oi=Rg(),Lle=(t,e,r)=>MN(void 0,null,function*(){let{disclosureKeymap:n}=yield(0,oi.unpack)(t,e,r);return Object.keys(n).sort()}),Ule=(t,e,r)=>{let{disclosureKeymap:n}=(0,oi.unpackSync)(t,e,r);return Object.keys(n).sort()},Vle=(t,e,r)=>MN(void 0,null,function*(){let{jwt:n,kbJwt:s}=(0,oi.splitSdJwt)(t),{jwt:{payload:i},disclosures:o}=yield(0,oi.decodeSdJwt)(t,r),{_sd_alg:a}=(0,oi.getSDAlgAndPayload)(i),c={alg:a,hasher:r},u=im(e),l=yield(0,oi.createHashMapping)(o,c),{disclosureKeymap:d}=yield(0,oi.unpack)(i,o,r),p=u.map(f=>l[d[f]]).filter(f=>f!==void 0);return[n,...p.map(f=>f.encode()),s??""].join(LN.SD_SEPARATOR)}),Kle=(t,e,r)=>{let{jwt:n,kbJwt:s}=(0,oi.splitSdJwt)(t),{jwt:{payload:i},disclosures:o}=(0,oi.decodeSdJwtSync)(t,r),{_sd_alg:a}=(0,oi.getSDAlgAndPayload)(i),c={alg:a,hasher:r},u=im(e),l=(0,oi.createHashMappingSync)(o,c),{disclosureKeymap:d}=(0,oi.unpackSync)(i,o,r),p=u.map(f=>l[d[f]]).filter(f=>f!==void 0);return[n,...p.map(f=>f.encode()),s??""].join(LN.SD_SEPARATOR)},im=(t,e="")=>Object.entries(t).reduce((r,[n,s])=>{let i=e?`${e}.${n}`:n;return typeof s=="boolean"?s&&r.push(i):r.push(i,...im(s,i)),r},[]),VN=t=>{let e={};for(let r=0;r<t.length;r++){let n=t[r],{digest:s,encoded:i,key:o,salt:a,value:c}=n;e[s]=UN.Disclosure.fromArray(o?[a,o,c]:[a,c],{digest:s,encoded:i})}return e},zle=(t,e,r)=>{if(e.length===0)return[];let n=VN(e),{disclosureKeymap:s}=(0,oi.unpackObj)(t,n);return im(r).map(c=>n[s[c]]).filter(c=>c!==void 0).map(c=>{let{salt:u,key:l,value:d,_digest:p}=c;if(!p)throw new UN.SDJWTException("Implementation error: _digest is not defined");return{digest:p,encoded:c.encode(),salt:u,key:l,value:d}})}});function HN(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}var WN=ct(()=>{});function lu(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}var sm=ct(()=>{});function Xd(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?lu(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}var Qv=ct(()=>{sm()});function JN(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));let r=Xd(e),n=0;for(let s of t)r.set(s,n),n+=s.length;return lu(r)}var GN=ct(()=>{Qv();sm()});function ZN(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var XN=ct(()=>{});function Hle(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var y=0,g=0,A=0,x=h.length;A!==x&&h[A]===0;)A++,y++;for(var b=(x-A)*l+1>>>0,w=new Uint8Array(b);A!==x;){for(var D=h[A],F=0,C=b-1;(D!==0||F<g)&&C!==-1;C--,F++)D+=256*w[C]>>>0,w[C]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");g=F,A++}for(var I=b-g;I!==b&&w[I]===0;)I++;for(var k=c.repeat(y);I<b;++I)k+=t.charAt(w[I]);return k}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var y=0;if(h[y]!==" "){for(var g=0,A=0;h[y]===c;)g++,y++;for(var x=(h.length-y)*u+1>>>0,b=new Uint8Array(x);h[y];){var w=r[h.charCodeAt(y)];if(w===255)return;for(var D=0,F=x-1;(w!==0||D<A)&&F!==-1;F--,D++)w+=a*b[F]>>>0,b[F]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");A=D,y++}if(h[y]!==" "){for(var C=x-A;C!==x&&b[C]===0;)C++;for(var I=new Uint8Array(g+(x-C)),k=g;C!==x;)I[k++]=b[C++];return I}}}function f(h){var y=p(h);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:f}}var Wle,Jle,YN,QN=ct(()=>{Wle=Hle,Jle=Wle,YN=Jle});var _Ie,e9,na,t9,r9,du=ct(()=>{_Ie=new Uint8Array(0),e9=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},na=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},t9=t=>new TextEncoder().encode(t),r9=t=>new TextDecoder().decode(t)});var f2,p2,h2,i9,m2,Yd,fu,Gle,Zle,dr,fs=ct(()=>{QN();du();f2=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},p2=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return i9(this,e)}},h2=class{constructor(e){this.decoders=e}or(e){return i9(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},i9=(t,e)=>new h2({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),m2=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new f2(e,r,n),this.decoder=new p2(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Yd=({name:t,prefix:e,encode:r,decode:n})=>new m2(t,e,r,n),fu=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:s}=YN(r,e);return Yd({prefix:t,name:e,encode:n,decode:i=>na(s(i))})},Gle=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,c=0,u=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Zle=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},dr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Yd({prefix:e,name:t,encode(s){return Zle(s,n,r)},decode(s){return Gle(s,n,r,t)}})});var y2={};xr(y2,{identity:()=>Xle});var Xle,s9=ct(()=>{fs();du();Xle=Yd({prefix:"\0",name:"identity",encode:t=>r9(t),decode:t=>t9(t)})});var g2={};xr(g2,{base2:()=>Yle});var Yle,o9=ct(()=>{fs();Yle=dr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var v2={};xr(v2,{base8:()=>Qle});var Qle,a9=ct(()=>{fs();Qle=dr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var b2={};xr(b2,{base10:()=>ede});var ede,u9=ct(()=>{fs();ede=fu({prefix:"9",name:"base10",alphabet:"0123456789"})});var _2={};xr(_2,{base16:()=>tde,base16upper:()=>rde});var tde,rde,c9=ct(()=>{fs();tde=dr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rde=dr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var w2={};xr(w2,{base32:()=>Qd,base32hex:()=>ode,base32hexpad:()=>ude,base32hexpadupper:()=>cde,base32hexupper:()=>ade,base32pad:()=>ide,base32padupper:()=>sde,base32upper:()=>nde,base32z:()=>lde});var Qd,nde,ide,sde,ode,ade,ude,cde,lde,E2=ct(()=>{fs();Qd=dr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nde=dr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ide=dr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sde=dr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ode=dr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ade=dr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ude=dr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cde=dr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),lde=dr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var S2={};xr(S2,{base36:()=>dde,base36upper:()=>fde});var dde,fde,l9=ct(()=>{fs();dde=fu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),fde=fu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var A2={};xr(A2,{base58btc:()=>ro,base58flickr:()=>pde});var ro,pde,D2=ct(()=>{fs();ro=fu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pde=fu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var x2={};xr(x2,{base64:()=>hde,base64pad:()=>mde,base64url:()=>yde,base64urlpad:()=>gde});var hde,mde,yde,gde,d9=ct(()=>{fs();hde=dr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mde=dr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yde=dr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gde=dr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var C2={};xr(C2,{base256emoji:()=>Ede});function _de(t){return t.reduce((e,r)=>(e+=vde[r],e),"")}function wde(t){let e=[];for(let r of t){let n=bde[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var f9,vde,bde,Ede,p9=ct(()=>{fs();f9=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),vde=f9.reduce((t,e,r)=>(t[r]=e,t),[]),bde=f9.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);Ede=Yd({prefix:"\u{1F680}",name:"base256emoji",encode:_de,decode:wde})});function y9(t,e,r){e=e||[],r=r||0;for(var n=r;t>=xde;)e[r++]=t&255|h9,t/=128;for(;t&Dde;)e[r++]=t&255|h9,t>>>=7;return e[r]=t|0,y9.bytes=r-n+1,e}function P2(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw P2.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&m9)<<s:(o&m9)*Math.pow(2,s),s+=7}while(o>=Pde);return P2.bytes=i-n,r}var Sde,h9,Ade,Dde,xde,Cde,Pde,m9,Ode,Fde,Tde,Ide,Bde,kde,Rde,$de,jde,Nde,Mde,qde,om,g9=ct(()=>{Sde=y9,h9=128,Ade=127,Dde=~Ade,xde=Math.pow(2,31);Cde=P2,Pde=128,m9=127;Ode=Math.pow(2,7),Fde=Math.pow(2,14),Tde=Math.pow(2,21),Ide=Math.pow(2,28),Bde=Math.pow(2,35),kde=Math.pow(2,42),Rde=Math.pow(2,49),$de=Math.pow(2,56),jde=Math.pow(2,63),Nde=function(t){return t<Ode?1:t<Fde?2:t<Tde?3:t<Ide?4:t<Bde?5:t<kde?6:t<Rde?7:t<$de?8:t<jde?9:10},Mde={encode:Sde,decode:Cde,encodingLength:Nde},qde=Mde,om=qde});var am,ef,tf,tb=ct(()=>{g9();am=(t,e=0)=>[om.decode(t,e),om.decode.bytes],ef=(t,e,r=0)=>(om.encode(t,e,r),e),tf=t=>om.encodingLength(t)});var zc,v9,b9,rf,cm=ct(()=>{du();tb();zc=(t,e)=>{let r=e.byteLength,n=tf(t),s=n+tf(r),i=new Uint8Array(s+r);return ef(t,i,0),ef(r,i,n),i.set(e,s),new rf(t,r,e,i)},v9=t=>{let e=na(t),[r,n]=am(e),[s,i]=am(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new rf(r,s,o,e)},b9=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&e9(t.bytes,e.bytes),rf=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}});var F2,O2,T2=ct(()=>{cm();F2=({name:t,code:e,encode:r})=>new O2(t,e,r),O2=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?zc(this.code,r):r.then(n=>zc(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var I2={};xr(I2,{sha256:()=>Lde,sha512:()=>Ude});var w9,Lde,Ude,E9=ct(()=>{T2();w9=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Lde=F2({name:"sha2-256",code:18,encode:w9("SHA-256")}),Ude=F2({name:"sha2-512",code:19,encode:w9("SHA-512")})});var B2={};xr(B2,{identity:()=>zde});var S9,Vde,A9,Kde,zde,D9=ct(()=>{du();cm();S9=0,Vde="identity",A9=na,Kde=t=>zc(S9,A9(t)),zde={code:S9,name:Vde,encode:A9,digest:Kde}});var x9=ct(()=>{du()});var LIe,UIe,C9=ct(()=>{LIe=new TextEncoder,UIe=new TextDecoder});var ib,Jde,Gde,Zde,lm,Xde,P9,O9,rb,nb,Yde,Qde,efe,F9=ct(()=>{tb();cm();D2();E2();du();ib=class t{constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this.byteOffset=s.byteOffset,this.byteLength=s.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:nb,byteLength:nb,code:rb,version:rb,multihash:rb,bytes:rb,_baseCache:nb,asCID:nb})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==lm)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Xde)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=zc(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&b9(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:s}=this;switch(n){case 0:return Gde(r,s,e||ro.encoder);default:return Zde(r,s,e||Qd.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Qde(/^0\.0/,efe),!!(e&&(e[O9]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof t)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:s,bytes:i}=e;return new t(r,n,s,i||P9(r,n,s.bytes))}else if(e!=null&&e[O9]===!0){let{version:r,multihash:n,code:s}=e,i=v9(n);return t.create(r,s,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==lm)throw new Error(`Version 0 CID must use dag-pb (code: ${lm}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let s=P9(e,r,n.bytes);return new t(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,lm,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,s=na(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new rf(r.multihashCode,r.digestSize,i,s);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,p]=am(e.subarray(r));return r+=p,d},s=n(),i=lm;if(s===18?(s=0,r=0):s===1&&(i=n()),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),c=n(),u=r+c,l=u-o;return{version:s,codec:i,multihashCode:a,digestSize:c,multihashSize:l,size:u}}static parse(e,r){let[n,s]=Jde(e,r),i=t.decode(s);return i._baseCache.set(n,e),i}},Jde=(t,e)=>{switch(t[0]){case"Q":{let r=e||ro;return[ro.prefix,r.decode(`${ro.prefix}${t}`)]}case ro.prefix:{let r=e||ro;return[ro.prefix,r.decode(t)]}case Qd.prefix:{let r=e||Qd;return[Qd.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Gde=(t,e,r)=>{let{prefix:n}=r;if(n!==ro.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s},Zde=(t,e,r)=>{let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s},lm=112,Xde=18,P9=(t,e,r)=>{let n=tf(t),s=n+tf(e),i=new Uint8Array(s+r.byteLength);return ef(t,i,0),ef(e,i,n),i.set(r,s),i},O9=Symbol.for("@ipld/js-cid/CID"),rb={writable:!1,configurable:!1,enumerable:!0},nb={writable:!1,enumerable:!1,configurable:!1},Yde="0.0.0-dev",Qde=(t,e)=>{if(t.test(Yde))console.warn(e);else throw new Error(e)},efe=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var T9=ct(()=>{F9();tb();du();T2();cm()});var k2,ZIe,I9=ct(()=>{s9();o9();a9();u9();c9();E2();l9();D2();d9();p9();E9();D9();x9();C9();T9();k2={...y2,...g2,...v2,...b2,..._2,...w2,...S2,...A2,...x2,...C2},ZIe={...I2,...B2}});function k9(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var B9,R2,tfe,sb,$2=ct(()=>{I9();Qv();B9=k9("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),R2=k9("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=Xd(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),tfe={utf8:B9,"utf-8":B9,hex:k2.base16,latin1:R2,ascii:R2,binary:R2,...k2},sb=tfe});function R9(t,e="utf8"){let r=sb[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?lu(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var $9=ct(()=>{$2();sm()});function j9(t,e="utf8"){let r=sb[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var N9=ct(()=>{$2()});function M9(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");let r=Xd(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return lu(r)}var q9=ct(()=>{Qv();sm()});var L9={};xr(L9,{compare:()=>HN,concat:()=>JN,equals:()=>ZN,fromString:()=>R9,toString:()=>j9,xor:()=>M9});var U9=ct(()=>{WN();GN();XN();$9();N9();q9()});var H9=v(Bi=>{"use strict";var rfe=Bi&&Bi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nfe=Bi&&Bi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ife=Bi&&Bi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&rfe(e,t,r);return nfe(e,t),e};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.applySdJwtLimitDisclosure=Bi.calculateSdHash=void 0;var V9=Rg(),K9=zN(),sfe=ife((U9(),W_(L9))),z9=Nv();function ofe(t,e,r){let n=r(t,e);return sfe.toString(n,"base64url")}Bi.calculateSdHash=ofe;function afe(t,e){let r=t.disclosures.map(u=>({digest:u.digest,encoded:u.encoded,salt:u.decoded[0],value:u.decoded.length===3?u.decoded[2]:u.decoded[1],key:u.decoded.length===3?u.decoded[1]:void 0})),n=(0,K9.selectDisclosures)(z9.ObjectUtils.cloneDeep(t.signedPayload),r,e);t.disclosures=n.map(u=>({encoded:u.encoded,decoded:u.key?[u.salt,u.key,u.value]:[u.salt,u.value],digest:u.digest}));let s=t.disclosures.map(u=>u.encoded),i=t.compactSdJwtVc.split("~");t.compactSdJwtVc=i.filter((u,l)=>l===0||l===i.length-1||s.includes(u)).join("~");let{payload:o}=(0,V9.getSDAlgAndPayload)(z9.ObjectUtils.cloneDeep(t.signedPayload)),a=(0,K9.createHashMappingForSerializedDisclosure)(n),{unpackedObj:c}=(0,V9.unpackObj)(o,a);t.decodedPayload=c}Bi.applySdJwtLimitDisclosure=afe});var Ii=v(ps=>{"use strict";var ufe=ps&&ps.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),dm=ps&&ps.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ufe(e,t,r)};Object.defineProperty(ps,"__esModule",{value:!0});dm(LD(),ps);dm(Nv(),ps);dm(wN(),ps);dm(NN(),ps);dm(H9(),ps)});var ki=v(ob=>{"use strict";Object.defineProperty(ob,"__esModule",{value:!0});ob.AbstractEvaluationHandler=void 0;var cfe=Ti(),lfe=Br(),j2=class{constructor(e){this._client=e}setNext(e){return this.nextHandler=e,e}getNext(){return this.nextHandler}hasNext(){return this.nextHandler!=null}get client(){return this._client}get wrappedVcs(){return this._client.wrappedVcs}set wrappedVcs(e){this._client.wrappedVcs=e}get presentationSubmission(){return this._client.presentationSubmission}set presentationSubmission(e){this._client.presentationSubmission=e}getResults(){return this._client.results}updatePresentationSubmission(e){this._client.assertPresentationSubmission(),this.presentationSubmission.descriptor_map.forEach((r,n,s)=>{let i;this.getResults().filter(a=>a.status===lfe.Status.ERROR&&a.evaluator===this.getName()).find(a=>(i=cfe.JSONPath.query(e,a.input_descriptor_path)[0],a.verifiable_credential_path===r.path&&i?.id===r.id))&&delete s[n]})}removeDuplicate(e){return e.reduce((r,n)=>r.find(i=>i.input_descriptor_path===n.input_descriptor_path&&i.verifiable_credential_path===n.verifiable_credential_path)?r:r.concat([n]),[])}};ob.AbstractEvaluationHandler=j2});var J9=v(W9=>{"use strict";Object.defineProperty(W9,"__esModule",{value:!0})});var hm=v(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.regexpCode=St.getEsmExportName=St.getProperty=St.safeStringify=St.stringify=St.strConcat=St.addCodeArg=St.str=St._=St.nil=St._Code=St.Name=St.IDENTIFIER=St._CodeOrName=void 0;var fm=class{};St._CodeOrName=fm;St.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Hc=class extends fm{constructor(e){if(super(),!St.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};St.Name=Hc;var Ri=class extends fm{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Hc&&(r[n.str]=(r[n.str]||0)+1),r),{})}};St._Code=Ri;St.nil=new Ri("");function G9(t,...e){let r=[t[0]],n=0;for(;n<e.length;)M2(r,e[n]),r.push(t[++n]);return new Ri(r)}St._=G9;var N2=new Ri("+");function Z9(t,...e){let r=[pm(t[0])],n=0;for(;n<e.length;)r.push(N2),M2(r,e[n]),r.push(N2,pm(t[++n]));return dfe(r),new Ri(r)}St.str=Z9;function M2(t,e){e instanceof Ri?t.push(...e._items):e instanceof Hc?t.push(e):t.push(hfe(e))}St.addCodeArg=M2;function dfe(t){let e=1;for(;e<t.length-1;){if(t[e]===N2){let r=ffe(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function ffe(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Hc||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Hc))return`"${t}${e.slice(1)}`}function pfe(t,e){return e.emptyStr()?t:t.emptyStr()?e:Z9`${t}${e}`}St.strConcat=pfe;function hfe(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:pm(Array.isArray(t)?t.join(","):t)}function mfe(t){return new Ri(pm(t))}St.stringify=mfe;function pm(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}St.safeStringify=pm;function yfe(t){return typeof t=="string"&&St.IDENTIFIER.test(t)?new Ri(`.${t}`):G9`[${t}]`}St.getProperty=yfe;function gfe(t){if(typeof t=="string"&&St.IDENTIFIER.test(t))return new Ri(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}St.getEsmExportName=gfe;function vfe(t){return new Ri(t.toString())}St.regexpCode=vfe});var U2=v(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.ValueScope=Vn.ValueScopeName=Vn.Scope=Vn.varKinds=Vn.UsedValueState=void 0;var Un=hm(),q2=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},ab;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(ab||(Vn.UsedValueState=ab={}));Vn.varKinds={const:new Un.Name("const"),let:new Un.Name("let"),var:new Un.Name("var")};var ub=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Un.Name?e:this.name(e)}name(e){return new Un.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Vn.Scope=ub;var cb=class extends Un.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,Un._)`.${new Un.Name(r)}[${n}]`}};Vn.ValueScopeName=cb;var bfe=(0,Un._)`\n`,L2=class extends ub{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?bfe:Un.nil}}get(){return this._scope}name(e){return new cb(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,s);let c=this._scope[i]||(this._scope[i]=[]),u=c.length;return c[u]=r.ref,s.setValue(r,{property:i,itemIndex:u}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Un._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=Un.nil;for(let o in e){let a=e[o];if(!a)continue;let c=n[o]=n[o]||new Map;a.forEach(u=>{if(c.has(u))return;c.set(u,ab.Started);let l=r(u);if(l){let d=this.opts.es5?Vn.varKinds.var:Vn.varKinds.const;i=(0,Un._)`${i}${d} ${u} = ${l};${this.opts._n}`}else if(l=s?.(u))i=(0,Un._)`${i}${l}${this.opts._n}`;else throw new q2(u);c.set(u,ab.Completed)})}return i}};Vn.ValueScope=L2});var tt=v(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.or=st.and=st.not=st.CodeGen=st.operators=st.varKinds=st.ValueScopeName=st.ValueScope=st.Scope=st.Name=st.regexpCode=st.stringify=st.getProperty=st.nil=st.strConcat=st.str=st._=void 0;var yt=hm(),hs=U2(),pu=hm();Object.defineProperty(st,"_",{enumerable:!0,get:function(){return pu._}});Object.defineProperty(st,"str",{enumerable:!0,get:function(){return pu.str}});Object.defineProperty(st,"strConcat",{enumerable:!0,get:function(){return pu.strConcat}});Object.defineProperty(st,"nil",{enumerable:!0,get:function(){return pu.nil}});Object.defineProperty(st,"getProperty",{enumerable:!0,get:function(){return pu.getProperty}});Object.defineProperty(st,"stringify",{enumerable:!0,get:function(){return pu.stringify}});Object.defineProperty(st,"regexpCode",{enumerable:!0,get:function(){return pu.regexpCode}});Object.defineProperty(st,"Name",{enumerable:!0,get:function(){return pu.Name}});var pb=U2();Object.defineProperty(st,"Scope",{enumerable:!0,get:function(){return pb.Scope}});Object.defineProperty(st,"ValueScope",{enumerable:!0,get:function(){return pb.ValueScope}});Object.defineProperty(st,"ValueScopeName",{enumerable:!0,get:function(){return pb.ValueScopeName}});Object.defineProperty(st,"varKinds",{enumerable:!0,get:function(){return pb.varKinds}});st.operators={GT:new yt._Code(">"),GTE:new yt._Code(">="),LT:new yt._Code("<"),LTE:new yt._Code("<="),EQ:new yt._Code("==="),NEQ:new yt._Code("!=="),NOT:new yt._Code("!"),OR:new yt._Code("||"),AND:new yt._Code("&&"),ADD:new yt._Code("+")};var ia=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},V2=class extends ia{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?hs.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=sf(this.rhs,e,r)),this}get names(){return this.rhs instanceof yt._CodeOrName?this.rhs.names:{}}},lb=class extends ia{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof yt.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=sf(this.rhs,e,r),this}get names(){let e=this.lhs instanceof yt.Name?{}:{...this.lhs.names};return fb(e,this.rhs)}},K2=class extends lb{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},z2=class extends ia{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},H2=class extends ia{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},W2=class extends ia{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},J2=class extends ia{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=sf(this.code,e,r),this}get names(){return this.code instanceof yt._CodeOrName?this.code.names:{}}},mm=class extends ia{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(_fe(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Gc(e,r.names),{})}},sa=class extends mm{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},G2=class extends mm{},nf=class extends sa{};nf.kind="else";var Wc=class t extends sa{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new nf(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(X9(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=sf(this.condition,e,r),this}get names(){let e=super.names;return fb(e,this.condition),this.else&&Gc(e,this.else.names),e}};Wc.kind="if";var Jc=class extends sa{};Jc.kind="for";var Z2=class extends Jc{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=sf(this.iteration,e,r),this}get names(){return Gc(super.names,this.iteration.names)}},X2=class extends Jc{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?hs.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=fb(super.names,this.from);return fb(e,this.to)}},db=class extends Jc{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=sf(this.iterable,e,r),this}get names(){return Gc(super.names,this.iterable.names)}},ym=class extends sa{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};ym.kind="func";var gm=class extends mm{render(e){return"return "+super.render(e)}};gm.kind="return";var Y2=class extends sa{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Gc(e,this.catch.names),this.finally&&Gc(e,this.finally.names),e}},vm=class extends sa{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};vm.kind="catch";var bm=class extends sa{render(e){return"finally"+super.render(e)}};bm.kind="finally";var Q2=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new hs.Scope({parent:e}),this._nodes=[new G2]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new V2(e,i,n)),i}const(e,r,n){return this._def(hs.varKinds.const,e,r,n)}let(e,r,n){return this._def(hs.varKinds.let,e,r,n)}var(e,r,n){return this._def(hs.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new lb(e,r,n))}add(e,r){return this._leafNode(new K2(e,st.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==yt.nil&&this._leafNode(new J2(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,yt.addCodeArg)(r,s));return r.push("}"),new yt._Code(r)}if(e,r,n){if(this._blockNode(new Wc(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Wc(e))}else(){return this._elseNode(new nf)}endIf(){return this._endBlockNode(Wc,nf)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Z2(e),r)}forRange(e,r,n,s,i=this.opts.es5?hs.varKinds.var:hs.varKinds.let){let o=this._scope.toName(e);return this._for(new X2(i,o,r,n),()=>s(o))}forOf(e,r,n,s=hs.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof yt.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,yt._)`${o}.length`,a=>{this.var(i,(0,yt._)`${o}[${a}]`),n(i)})}return this._for(new db("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?hs.varKinds.var:hs.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,yt._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new db("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(Jc)}label(e){return this._leafNode(new z2(e))}break(e){return this._leafNode(new H2(e))}return(e){let r=new gm;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(gm)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new Y2;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new vm(i),r(i)}return n&&(this._currNode=s.finally=new bm,this.code(n)),this._endBlockNode(vm,bm)}throw(e){return this._leafNode(new W2(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=yt.nil,n,s){return this._blockNode(new ym(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(ym)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Wc))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};st.CodeGen=Q2;function Gc(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function fb(t,e){return e instanceof yt._CodeOrName?Gc(t,e.names):t}function sf(t,e,r){if(t instanceof yt.Name)return n(t);if(!s(t))return t;return new yt._Code(t._items.reduce((i,o)=>(o instanceof yt.Name&&(o=n(o)),o instanceof yt._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof yt._Code&&i._items.some(o=>o instanceof yt.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function _fe(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function X9(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,yt._)`!${ex(t)}`}st.not=X9;var wfe=Y9(st.operators.AND);function Efe(...t){return t.reduce(wfe)}st.and=Efe;var Sfe=Y9(st.operators.OR);function Afe(...t){return t.reduce(Sfe)}st.or=Afe;function Y9(t){return(e,r)=>e===yt.nil?r:r===yt.nil?e:(0,yt._)`${ex(e)} ${t} ${ex(r)}`}function ex(t){return t instanceof yt.Name?t:(0,yt._)`(${t})`}});var At=v(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.checkStrictMode=at.getErrorPath=at.Type=at.useFunc=at.setEvaluated=at.evaluatedPropsToName=at.mergeEvaluated=at.eachItem=at.unescapeJsonPointer=at.escapeJsonPointer=at.escapeFragment=at.unescapeFragment=at.schemaRefOrVal=at.schemaHasRulesButRef=at.schemaHasRules=at.checkUnknownRules=at.alwaysValidSchema=at.toHash=void 0;var Vt=tt(),Dfe=hm();function xfe(t){let e={};for(let r of t)e[r]=!0;return e}at.toHash=xfe;function Cfe(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(tM(t,e),!rM(e,t.self.RULES.all))}at.alwaysValidSchema=Cfe;function tM(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||sM(t,`unknown keyword: "${i}"`)}at.checkUnknownRules=tM;function rM(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}at.schemaHasRules=rM;function Pfe(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}at.schemaHasRulesButRef=Pfe;function Ofe({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Vt._)`${r}`}return(0,Vt._)`${t}${e}${(0,Vt.getProperty)(n)}`}at.schemaRefOrVal=Ofe;function Ffe(t){return nM(decodeURIComponent(t))}at.unescapeFragment=Ffe;function Tfe(t){return encodeURIComponent(rx(t))}at.escapeFragment=Tfe;function rx(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}at.escapeJsonPointer=rx;function nM(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}at.unescapeJsonPointer=nM;function Ife(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}at.eachItem=Ife;function Q9({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let c=o===void 0?i:o instanceof Vt.Name?(i instanceof Vt.Name?t(s,i,o):e(s,i,o),o):i instanceof Vt.Name?(e(s,o,i),i):r(i,o);return a===Vt.Name&&!(c instanceof Vt.Name)?n(s,c):c}}at.mergeEvaluated={props:Q9({mergeNames:(t,e,r)=>t.if((0,Vt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Vt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Vt._)`${r} || {}`).code((0,Vt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Vt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Vt._)`${r} || {}`),nx(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:iM}),items:Q9({mergeNames:(t,e,r)=>t.if((0,Vt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Vt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Vt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Vt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function iM(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Vt._)`{}`);return e!==void 0&&nx(t,r,e),r}at.evaluatedPropsToName=iM;function nx(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Vt._)`${e}${(0,Vt.getProperty)(n)}`,!0))}at.setEvaluated=nx;var eM={};function Bfe(t,e){return t.scopeValue("func",{ref:e,code:eM[e.code]||(eM[e.code]=new Dfe._Code(e.code))})}at.useFunc=Bfe;var tx;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(tx||(at.Type=tx={}));function kfe(t,e,r){if(t instanceof Vt.Name){let n=e===tx.Num;return r?n?(0,Vt._)`"[" + ${t} + "]"`:(0,Vt._)`"['" + ${t} + "']"`:n?(0,Vt._)`"/" + ${t}`:(0,Vt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Vt.getProperty)(t).toString():"/"+rx(t)}at.getErrorPath=kfe;function sM(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}at.checkStrictMode=sM});var oa=v(ix=>{"use strict";Object.defineProperty(ix,"__esModule",{value:!0});var hn=tt(),Rfe={data:new hn.Name("data"),valCxt:new hn.Name("valCxt"),instancePath:new hn.Name("instancePath"),parentData:new hn.Name("parentData"),parentDataProperty:new hn.Name("parentDataProperty"),rootData:new hn.Name("rootData"),dynamicAnchors:new hn.Name("dynamicAnchors"),vErrors:new hn.Name("vErrors"),errors:new hn.Name("errors"),this:new hn.Name("this"),self:new hn.Name("self"),scope:new hn.Name("scope"),json:new hn.Name("json"),jsonPos:new hn.Name("jsonPos"),jsonLen:new hn.Name("jsonLen"),jsonPart:new hn.Name("jsonPart")};ix.default=Rfe});var _m=v(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.extendErrors=mn.resetErrorsCount=mn.reportExtraError=mn.reportError=mn.keyword$DataError=mn.keywordError=void 0;var bt=tt(),hb=At(),Dn=oa();mn.keywordError={message:({keyword:t})=>(0,bt.str)`must pass "${t}" keyword validation`};mn.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,bt.str)`"${t}" keyword must be ${e} ($data)`:(0,bt.str)`"${t}" keyword is invalid ($data)`};function $fe(t,e=mn.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,c=uM(t,e,r);n??(o||a)?oM(i,c):aM(s,(0,bt._)`[${c}]`)}mn.reportError=$fe;function jfe(t,e=mn.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=uM(t,e,r);oM(s,a),i||o||aM(n,Dn.default.vErrors)}mn.reportExtraError=jfe;function Nfe(t,e){t.assign(Dn.default.errors,e),t.if((0,bt._)`${Dn.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,bt._)`${Dn.default.vErrors}.length`,e),()=>t.assign(Dn.default.vErrors,null)))}mn.resetErrorsCount=Nfe;function Mfe({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,Dn.default.errors,a=>{t.const(o,(0,bt._)`${Dn.default.vErrors}[${a}]`),t.if((0,bt._)`${o}.instancePath === undefined`,()=>t.assign((0,bt._)`${o}.instancePath`,(0,bt.strConcat)(Dn.default.instancePath,i.errorPath))),t.assign((0,bt._)`${o}.schemaPath`,(0,bt.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,bt._)`${o}.schema`,r),t.assign((0,bt._)`${o}.data`,n))})}mn.extendErrors=Mfe;function oM(t,e){let r=t.const("err",e);t.if((0,bt._)`${Dn.default.vErrors} === null`,()=>t.assign(Dn.default.vErrors,(0,bt._)`[${r}]`),(0,bt._)`${Dn.default.vErrors}.push(${r})`),t.code((0,bt._)`${Dn.default.errors}++`)}function aM(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,bt._)`new ${t.ValidationError}(${e})`):(r.assign((0,bt._)`${n}.errors`,e),r.return(!1))}var Zc={keyword:new bt.Name("keyword"),schemaPath:new bt.Name("schemaPath"),params:new bt.Name("params"),propertyName:new bt.Name("propertyName"),message:new bt.Name("message"),schema:new bt.Name("schema"),parentSchema:new bt.Name("parentSchema")};function uM(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,bt._)`{}`:qfe(t,e,r)}function qfe(t,e,r={}){let{gen:n,it:s}=t,i=[Lfe(s,r),Ufe(t,r)];return Vfe(t,e,i),n.object(...i)}function Lfe({errorPath:t},{instancePath:e}){let r=e?(0,bt.str)`${t}${(0,hb.getErrorPath)(e,hb.Type.Str)}`:t;return[Dn.default.instancePath,(0,bt.strConcat)(Dn.default.instancePath,r)]}function Ufe({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,bt.str)`${e}/${t}`;return r&&(s=(0,bt.str)`${s}${(0,hb.getErrorPath)(r,hb.Type.Str)}`),[Zc.schemaPath,s]}function Vfe(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:c,propertyName:u,topSchemaRef:l,schemaPath:d}=a;n.push([Zc.keyword,s],[Zc.params,typeof e=="function"?e(t):e||(0,bt._)`{}`]),c.messages&&n.push([Zc.message,typeof r=="function"?r(t):r]),c.verbose&&n.push([Zc.schema,o],[Zc.parentSchema,(0,bt._)`${l}${d}`],[Dn.default.data,i]),u&&n.push([Zc.propertyName,u])}});var lM=v(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.boolOrEmptySchema=of.topBoolOrEmptySchema=void 0;var Kfe=_m(),zfe=tt(),Hfe=oa(),Wfe={message:"boolean schema is false"};function Jfe(t){let{gen:e,schema:r,validateName:n}=t;r===!1?cM(t,!1):typeof r=="object"&&r.$async===!0?e.return(Hfe.default.data):(e.assign((0,zfe._)`${n}.errors`,null),e.return(!0))}of.topBoolOrEmptySchema=Jfe;function Gfe(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),cM(t)):r.var(e,!0)}of.boolOrEmptySchema=Gfe;function cM(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Kfe.reportError)(s,Wfe,void 0,e)}});var sx=v(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.getRules=af.isJSONType=void 0;var Zfe=["string","number","integer","boolean","null","object","array"],Xfe=new Set(Zfe);function Yfe(t){return typeof t=="string"&&Xfe.has(t)}af.isJSONType=Yfe;function Qfe(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}af.getRules=Qfe});var ox=v(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.shouldUseRule=hu.shouldUseGroup=hu.schemaHasRulesForType=void 0;function epe({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&dM(t,n)}hu.schemaHasRulesForType=epe;function dM(t,e){return e.rules.some(r=>fM(t,r))}hu.shouldUseGroup=dM;function fM(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}hu.shouldUseRule=fM});var wm=v(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.reportTypeError=yn.checkDataTypes=yn.checkDataType=yn.coerceAndCheckDataType=yn.getJSONTypes=yn.getSchemaTypes=yn.DataType=void 0;var tpe=sx(),rpe=ox(),npe=_m(),Ze=tt(),pM=At(),uf;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(uf||(yn.DataType=uf={}));function ipe(t){let e=hM(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}yn.getSchemaTypes=ipe;function hM(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(tpe.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}yn.getJSONTypes=hM;function spe(t,e){let{gen:r,data:n,opts:s}=t,i=ope(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,rpe.schemaHasRulesForType)(t,e[0]));if(o){let a=ux(e,n,s.strictNumbers,uf.Wrong);r.if(a,()=>{i.length?ape(t,e,i):cx(t)})}return o}yn.coerceAndCheckDataType=spe;var mM=new Set(["string","number","integer","boolean","null"]);function ope(t,e){return e?t.filter(r=>mM.has(r)||e==="array"&&r==="array"):[]}function ape(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,Ze._)`typeof ${s}`),a=n.let("coerced",(0,Ze._)`undefined`);i.coerceTypes==="array"&&n.if((0,Ze._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,Ze._)`${s}[0]`).assign(o,(0,Ze._)`typeof ${s}`).if(ux(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,Ze._)`${a} !== undefined`);for(let u of r)(mM.has(u)||u==="array"&&i.coerceTypes==="array")&&c(u);n.else(),cx(t),n.endIf(),n.if((0,Ze._)`${a} !== undefined`,()=>{n.assign(s,a),upe(t,a)});function c(u){switch(u){case"string":n.elseIf((0,Ze._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Ze._)`"" + ${s}`).elseIf((0,Ze._)`${s} === null`).assign(a,(0,Ze._)`""`);return;case"number":n.elseIf((0,Ze._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,Ze._)`+${s}`);return;case"integer":n.elseIf((0,Ze._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,Ze._)`+${s}`);return;case"boolean":n.elseIf((0,Ze._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,Ze._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,Ze._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,Ze._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,Ze._)`[${s}]`)}}}function upe({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,Ze._)`${e} !== undefined`,()=>t.assign((0,Ze._)`${e}[${r}]`,n))}function ax(t,e,r,n=uf.Correct){let s=n===uf.Correct?Ze.operators.EQ:Ze.operators.NEQ,i;switch(t){case"null":return(0,Ze._)`${e} ${s} null`;case"array":i=(0,Ze._)`Array.isArray(${e})`;break;case"object":i=(0,Ze._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,Ze._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,Ze._)`typeof ${e} ${s} ${t}`}return n===uf.Correct?i:(0,Ze.not)(i);function o(a=Ze.nil){return(0,Ze.and)((0,Ze._)`typeof ${e} == "number"`,a,r?(0,Ze._)`isFinite(${e})`:Ze.nil)}}yn.checkDataType=ax;function ux(t,e,r,n){if(t.length===1)return ax(t[0],e,r,n);let s,i=(0,pM.toHash)(t);if(i.array&&i.object){let o=(0,Ze._)`typeof ${e} != "object"`;s=i.null?o:(0,Ze._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=Ze.nil;i.number&&delete i.integer;for(let o in i)s=(0,Ze.and)(s,ax(o,e,r,n));return s}yn.checkDataTypes=ux;var cpe={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Ze._)`{type: ${t}}`:(0,Ze._)`{type: ${e}}`};function cx(t){let e=lpe(t);(0,npe.reportError)(e,cpe)}yn.reportTypeError=cx;function lpe(t){let{gen:e,data:r,schema:n}=t,s=(0,pM.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var gM=v(mb=>{"use strict";Object.defineProperty(mb,"__esModule",{value:!0});mb.assignDefaults=void 0;var cf=tt(),dpe=At();function fpe(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)yM(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>yM(t,i,s.default))}mb.assignDefaults=fpe;function yM(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,cf._)`${i}${(0,cf.getProperty)(e)}`;if(s){(0,dpe.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,cf._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,cf._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,cf._)`${a} = ${(0,cf.stringify)(r)}`)}});var $i=v(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.validateUnion=qt.validateArray=qt.usePattern=qt.callValidateCode=qt.schemaProperties=qt.allSchemaProperties=qt.noPropertyInData=qt.propertyInData=qt.isOwnProperty=qt.hasPropFunc=qt.reportMissingProp=qt.checkMissingProp=qt.checkReportMissingProp=void 0;var Gt=tt(),lx=At(),mu=oa(),ppe=At();function hpe(t,e){let{gen:r,data:n,it:s}=t;r.if(fx(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Gt._)`${e}`},!0),t.error()})}qt.checkReportMissingProp=hpe;function mpe({gen:t,data:e,it:{opts:r}},n,s){return(0,Gt.or)(...n.map(i=>(0,Gt.and)(fx(t,e,i,r.ownProperties),(0,Gt._)`${s} = ${i}`)))}qt.checkMissingProp=mpe;function ype(t,e){t.setParams({missingProperty:e},!0),t.error()}qt.reportMissingProp=ype;function vM(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Gt._)`Object.prototype.hasOwnProperty`})}qt.hasPropFunc=vM;function dx(t,e,r){return(0,Gt._)`${vM(t)}.call(${e}, ${r})`}qt.isOwnProperty=dx;function gpe(t,e,r,n){let s=(0,Gt._)`${e}${(0,Gt.getProperty)(r)} !== undefined`;return n?(0,Gt._)`${s} && ${dx(t,e,r)}`:s}qt.propertyInData=gpe;function fx(t,e,r,n){let s=(0,Gt._)`${e}${(0,Gt.getProperty)(r)} === undefined`;return n?(0,Gt.or)(s,(0,Gt.not)(dx(t,e,r))):s}qt.noPropertyInData=fx;function bM(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}qt.allSchemaProperties=bM;function vpe(t,e){return bM(e).filter(r=>!(0,lx.alwaysValidSchema)(t,e[r]))}qt.schemaProperties=vpe;function bpe({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,c,u){let l=u?(0,Gt._)`${t}, ${e}, ${n}${s}`:e,d=[[mu.default.instancePath,(0,Gt.strConcat)(mu.default.instancePath,i)],[mu.default.parentData,o.parentData],[mu.default.parentDataProperty,o.parentDataProperty],[mu.default.rootData,mu.default.rootData]];o.opts.dynamicRef&&d.push([mu.default.dynamicAnchors,mu.default.dynamicAnchors]);let p=(0,Gt._)`${l}, ${r.object(...d)}`;return c!==Gt.nil?(0,Gt._)`${a}.call(${c}, ${p})`:(0,Gt._)`${a}(${p})`}qt.callValidateCode=bpe;var _pe=(0,Gt._)`new RegExp`;function wpe({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Gt._)`${s.code==="new RegExp"?_pe:(0,ppe.useFunc)(t,s)}(${r}, ${n})`})}qt.usePattern=wpe;function Epe(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let c=e.const("len",(0,Gt._)`${r}.length`);e.forRange("i",0,c,u=>{t.subschema({keyword:n,dataProp:u,dataPropType:lx.Type.Num},i),e.if((0,Gt.not)(i),a)})}}qt.validateArray=Epe;function Spe(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,lx.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,u)=>{let l=t.subschema({keyword:n,schemaProp:u,compositeRule:!0},a);e.assign(o,(0,Gt._)`${o} || ${a}`),t.mergeValidEvaluated(l,a)||e.if((0,Gt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}qt.validateUnion=Spe});var EM=v(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.validateKeywordUsage=no.validSchemaType=no.funcKeywordCode=no.macroKeywordCode=void 0;var xn=tt(),Xc=oa(),Ape=$i(),Dpe=_m();function xpe(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),c=wM(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let u=r.name("valid");t.subschema({schema:a,schemaPath:xn.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}no.macroKeywordCode=xpe;function Cpe(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=t;Ope(c,e);let u=!a&&e.compile?e.compile.call(c.self,i,o,c):e.validate,l=wM(n,s,u),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)y(),e.modifying&&_M(t),g(()=>t.error());else{let A=e.async?f():h();e.modifying&&_M(t),g(()=>Ppe(t,A))}}function f(){let A=n.let("ruleErrs",null);return n.try(()=>y((0,xn._)`await `),x=>n.assign(d,!1).if((0,xn._)`${x} instanceof ${c.ValidationError}`,()=>n.assign(A,(0,xn._)`${x}.errors`),()=>n.throw(x))),A}function h(){let A=(0,xn._)`${l}.errors`;return n.assign(A,null),y(xn.nil),A}function y(A=e.async?(0,xn._)`await `:xn.nil){let x=c.opts.passContext?Xc.default.this:Xc.default.self,b=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,xn._)`${A}${(0,Ape.callValidateCode)(t,l,x,b)}`,e.modifying)}function g(A){var x;n.if((0,xn.not)((x=e.valid)!==null&&x!==void 0?x:d),A)}}no.funcKeywordCode=Cpe;function _M(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,xn._)`${n.parentData}[${n.parentDataProperty}]`))}function Ppe(t,e){let{gen:r}=t;r.if((0,xn._)`Array.isArray(${e})`,()=>{r.assign(Xc.default.vErrors,(0,xn._)`${Xc.default.vErrors} === null ? ${e} : ${Xc.default.vErrors}.concat(${e})`).assign(Xc.default.errors,(0,xn._)`${Xc.default.vErrors}.length`),(0,Dpe.extendErrors)(t)},()=>t.error())}function Ope({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function wM(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,xn.stringify)(r)})}function Fpe(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}no.validSchemaType=Fpe;function Tpe({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let c=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}no.validateKeywordUsage=Tpe});var AM=v(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.extendSubschemaMode=yu.extendSubschemaData=yu.getSubschema=void 0;var io=tt(),SM=At();function Ipe(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,io._)`${t.schemaPath}${(0,io.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,io._)`${t.schemaPath}${(0,io.getProperty)(e)}${(0,io.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,SM.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}yu.getSubschema=Ipe;function Bpe(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:u,dataPathArr:l,opts:d}=e,p=a.let("data",(0,io._)`${e.data}${(0,io.getProperty)(r)}`,!0);c(p),t.errorPath=(0,io.str)`${u}${(0,SM.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,io._)`${r}`,t.dataPathArr=[...l,t.parentDataProperty]}if(s!==void 0){let u=s instanceof io.Name?s:a.let("data",s,!0);c(u),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function c(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}yu.extendSubschemaData=Bpe;function kpe(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}yu.extendSubschemaMode=kpe});var xM=v((BBe,DM)=>{"use strict";var gu=DM.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};yb(e,n,s,t,"",t)};gu.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};gu.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};gu.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};gu.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function yb(t,e,r,n,s,i,o,a,c,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,c,u);for(var l in n){var d=n[l];if(Array.isArray(d)){if(l in gu.arrayKeywords)for(var p=0;p<d.length;p++)yb(t,e,r,d[p],s+"/"+l+"/"+p,i,s,l,n,p)}else if(l in gu.propsKeywords){if(d&&typeof d=="object")for(var f in d)yb(t,e,r,d[f],s+"/"+l+"/"+Rpe(f),i,s,l,n,f)}else(l in gu.keywords||t.allKeys&&!(l in gu.skipKeywords))&&yb(t,e,r,d,s+"/"+l,i,s,l,n)}r(n,s,i,o,a,c,u)}}function Rpe(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Em=v(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.getSchemaRefs=Kn.resolveUrl=Kn.normalizeId=Kn._getFullPath=Kn.getFullPath=Kn.inlineRef=void 0;var $pe=At(),jpe=e2(),Npe=xM(),Mpe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function qpe(t,e=!0){return typeof t=="boolean"?!0:e===!0?!px(t):e?CM(t)<=e:!1}Kn.inlineRef=qpe;var Lpe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function px(t){for(let e in t){if(Lpe.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(px)||typeof r=="object"&&px(r))return!0}return!1}function CM(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Mpe.has(r)&&(typeof t[r]=="object"&&(0,$pe.eachItem)(t[r],n=>e+=CM(n)),e===1/0))return 1/0}return e}function PM(t,e="",r){r!==!1&&(e=lf(e));let n=t.parse(e);return OM(t,n)}Kn.getFullPath=PM;function OM(t,e){return t.serialize(e).split("#")[0]+"#"}Kn._getFullPath=OM;var Upe=/#\/?$/;function lf(t){return t?t.replace(Upe,""):""}Kn.normalizeId=lf;function Vpe(t,e,r){return r=lf(r),t.resolve(e,r)}Kn.resolveUrl=Vpe;var Kpe=/^[a-z_][-a-z0-9._]*$/i;function zpe(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=lf(t[r]||e),i={"":s},o=PM(n,s,!1),a={},c=new Set;return Npe(t,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let y=o+p,g=i[h];typeof d[r]=="string"&&(g=A.call(this,d[r])),x.call(this,d.$anchor),x.call(this,d.$dynamicAnchor),i[p]=g;function A(b){let w=this.opts.uriResolver.resolve;if(b=lf(g?w(g,b):b),c.has(b))throw l(b);c.add(b);let D=this.refs[b];return typeof D=="string"&&(D=this.refs[D]),typeof D=="object"?u(d,D.schema,b):b!==lf(y)&&(b[0]==="#"?(u(d,a[b],b),a[b]=d):this.refs[b]=y),b}function x(b){if(typeof b=="string"){if(!Kpe.test(b))throw new Error(`invalid anchor "${b}"`);A.call(this,`#${b}`)}}}),a;function u(d,p,f){if(p!==void 0&&!jpe(d,p))throw l(f)}function l(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Kn.getSchemaRefs=zpe});var Dm=v(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.getData=vu.KeywordCxt=vu.validateFunctionCode=void 0;var kM=lM(),FM=wm(),mx=ox(),gb=wm(),Hpe=gM(),Am=EM(),hx=AM(),Ae=tt(),Le=oa(),Wpe=Em(),aa=At(),Sm=_m();function Jpe(t){if(jM(t)&&(NM(t),$M(t))){Xpe(t);return}RM(t,()=>(0,kM.topBoolOrEmptySchema)(t))}vu.validateFunctionCode=Jpe;function RM({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,Ae._)`${Le.default.data}, ${Le.default.valCxt}`,n.$async,()=>{t.code((0,Ae._)`"use strict"; ${TM(r,s)}`),Zpe(t,s),t.code(i)}):t.func(e,(0,Ae._)`${Le.default.data}, ${Gpe(s)}`,n.$async,()=>t.code(TM(r,s)).code(i))}function Gpe(t){return(0,Ae._)`{${Le.default.instancePath}="", ${Le.default.parentData}, ${Le.default.parentDataProperty}, ${Le.default.rootData}=${Le.default.data}${t.dynamicRef?(0,Ae._)`, ${Le.default.dynamicAnchors}={}`:Ae.nil}}={}`}function Zpe(t,e){t.if(Le.default.valCxt,()=>{t.var(Le.default.instancePath,(0,Ae._)`${Le.default.valCxt}.${Le.default.instancePath}`),t.var(Le.default.parentData,(0,Ae._)`${Le.default.valCxt}.${Le.default.parentData}`),t.var(Le.default.parentDataProperty,(0,Ae._)`${Le.default.valCxt}.${Le.default.parentDataProperty}`),t.var(Le.default.rootData,(0,Ae._)`${Le.default.valCxt}.${Le.default.rootData}`),e.dynamicRef&&t.var(Le.default.dynamicAnchors,(0,Ae._)`${Le.default.valCxt}.${Le.default.dynamicAnchors}`)},()=>{t.var(Le.default.instancePath,(0,Ae._)`""`),t.var(Le.default.parentData,(0,Ae._)`undefined`),t.var(Le.default.parentDataProperty,(0,Ae._)`undefined`),t.var(Le.default.rootData,Le.default.data),e.dynamicRef&&t.var(Le.default.dynamicAnchors,(0,Ae._)`{}`)})}function Xpe(t){let{schema:e,opts:r,gen:n}=t;RM(t,()=>{r.$comment&&e.$comment&&qM(t),rhe(t),n.let(Le.default.vErrors,null),n.let(Le.default.errors,0),r.unevaluated&&Ype(t),MM(t),she(t)})}function Ype(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Ae._)`${r}.evaluated`),e.if((0,Ae._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Ae._)`${t.evaluated}.props`,(0,Ae._)`undefined`)),e.if((0,Ae._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Ae._)`${t.evaluated}.items`,(0,Ae._)`undefined`))}function TM(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Ae._)`/*# sourceURL=${r} */`:Ae.nil}function Qpe(t,e){if(jM(t)&&(NM(t),$M(t))){ehe(t,e);return}(0,kM.boolOrEmptySchema)(t,e)}function $M({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function jM(t){return typeof t.schema!="boolean"}function ehe(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&qM(t),nhe(t),ihe(t);let i=n.const("_errs",Le.default.errors);MM(t,i),n.var(e,(0,Ae._)`${i} === ${Le.default.errors}`)}function NM(t){(0,aa.checkUnknownRules)(t),the(t)}function MM(t,e){if(t.opts.jtd)return IM(t,[],!1,e);let r=(0,FM.getSchemaTypes)(t.schema),n=(0,FM.coerceAndCheckDataType)(t,r);IM(t,r,!n,e)}function the(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,aa.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function rhe(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,aa.checkStrictMode)(t,"default is ignored in the schema root")}function nhe(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Wpe.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function ihe(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function qM({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,Ae._)`${Le.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,Ae.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Ae._)`${Le.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function she(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,Ae._)`${Le.default.errors} === 0`,()=>e.return(Le.default.data),()=>e.throw((0,Ae._)`new ${s}(${Le.default.vErrors})`)):(e.assign((0,Ae._)`${n}.errors`,Le.default.vErrors),i.unevaluated&&ohe(t),e.return((0,Ae._)`${Le.default.errors} === 0`))}function ohe({gen:t,evaluated:e,props:r,items:n}){r instanceof Ae.Name&&t.assign((0,Ae._)`${e}.props`,r),n instanceof Ae.Name&&t.assign((0,Ae._)`${e}.items`,n)}function IM(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:c,self:u}=t,{RULES:l}=u;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,aa.schemaHasRulesButRef)(i,l))){s.block(()=>UM(t,"$ref",l.all.$ref.definition));return}c.jtd||ahe(t,e),s.block(()=>{for(let p of l.rules)d(p);d(l.post)});function d(p){(0,mx.shouldUseGroup)(i,p)&&(p.type?(s.if((0,gb.checkDataType)(p.type,o,c.strictNumbers)),BM(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,gb.reportTypeError)(t)),s.endIf()):BM(t,p),a||s.if((0,Ae._)`${Le.default.errors} === ${n||0}`))}}function BM(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,Hpe.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,mx.shouldUseRule)(n,i)&&UM(t,i.keyword,i.definition,e.type)})}function ahe(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(uhe(t,e),t.opts.allowUnionTypes||che(t,e),lhe(t,t.dataTypes))}function uhe(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{LM(t.dataTypes,r)||yx(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),fhe(t,e)}}function che(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&yx(t,"use allowUnionTypes to allow union type keyword")}function lhe(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,mx.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>dhe(e,o))&&yx(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function dhe(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function LM(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function fhe(t,e){let r=[];for(let n of t.dataTypes)LM(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function yx(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,aa.checkStrictMode)(t,e,t.opts.strictTypes)}var vb=class{constructor(e,r,n){if((0,Am.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,aa.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",VM(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Am.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Le.default.errors))}result(e,r,n){this.failResult((0,Ae.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Ae.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,Ae._)`${r} !== undefined && (${(0,Ae.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Sm.reportExtraError:Sm.reportError)(this,this.def.error,r)}$dataError(){(0,Sm.reportError)(this,this.def.$dataError||Sm.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Sm.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Ae.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Ae.nil,r=Ae.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,Ae.or)((0,Ae._)`${s} === undefined`,r)),e!==Ae.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Ae.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,Ae.or)(o(),a());function o(){if(n.length){if(!(r instanceof Ae.Name))throw new Error("ajv implementation error");let c=Array.isArray(n)?n:[n];return(0,Ae._)`${(0,gb.checkDataTypes)(c,r,i.opts.strictNumbers,gb.DataType.Wrong)}`}return Ae.nil}function a(){if(s.validateSchema){let c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Ae._)`!${c}(${r})`}return Ae.nil}}subschema(e,r){let n=(0,hx.getSubschema)(this.it,e);(0,hx.extendSubschemaData)(n,this.it,e),(0,hx.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return Qpe(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=aa.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=aa.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,Ae.Name)),!0}};vu.KeywordCxt=vb;function UM(t,e,r,n){let s=new vb(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Am.funcKeywordCode)(s,r):"macro"in r?(0,Am.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Am.funcKeywordCode)(s,r)}var phe=/^\/(?:[^~]|~0|~1)*$/,hhe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function VM(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return Le.default.rootData;if(t[0]==="/"){if(!phe.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=Le.default.rootData}else{let u=hhe.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);let l=+u[1];if(s=u[2],s==="#"){if(l>=e)throw new Error(c("property/index",l));return n[e-l]}if(l>e)throw new Error(c("data",l));if(i=r[e-l],!s)return i}let o=i,a=s.split("/");for(let u of a)u&&(i=(0,Ae._)`${i}${(0,Ae.getProperty)((0,aa.unescapeJsonPointer)(u))}`,o=(0,Ae._)`${o} && ${i}`);return o;function c(u,l){return`Cannot access ${u} ${l} levels up, current level is ${e}`}}vu.getData=VM});var bb=v(vx=>{"use strict";Object.defineProperty(vx,"__esModule",{value:!0});var gx=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};vx.default=gx});var xm=v(wx=>{"use strict";Object.defineProperty(wx,"__esModule",{value:!0});var bx=Em(),_x=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,bx.resolveUrl)(e,r,n),this.missingSchema=(0,bx.normalizeId)((0,bx.getFullPath)(e,this.missingRef))}};wx.default=_x});var wb=v(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.resolveSchema=ji.getCompilingSchema=ji.resolveRef=ji.compileSchema=ji.SchemaEnv=void 0;var ms=tt(),mhe=bb(),Yc=oa(),ys=Em(),KM=At(),yhe=Dm(),df=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,ys.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};ji.SchemaEnv=df;function Sx(t){let e=zM.call(this,t);if(e)return e;let r=(0,ys.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ms.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:mhe.default,code:(0,ms._)`require("ajv/dist/runtime/validation_error").default`}));let c=o.scopeName("validate");t.validateName=c;let u={gen:o,allErrors:this.opts.allErrors,data:Yc.default.data,parentData:Yc.default.parentData,parentDataProperty:Yc.default.parentDataProperty,dataNames:[Yc.default.data],dataPathArr:[ms.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ms.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ms.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ms._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(t),(0,yhe.validateFunctionCode)(u),o.optimize(this.opts.code.optimize);let d=o.toString();l=`${o.scopeRefs(Yc.default.scope)}return ${d}`,this.opts.code.process&&(l=this.opts.code.process(l,t));let f=new Function(`${Yc.default.self}`,`${Yc.default.scope}`,l)(this,this.scope.get());if(this.scope.value(c,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:c,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:y}=u;f.evaluated={props:h instanceof ms.Name?void 0:h,items:y instanceof ms.Name?void 0:y,dynamicProps:h instanceof ms.Name,dynamicItems:y instanceof ms.Name},f.source&&(f.source.evaluated=(0,ms.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,l&&this.logger.error("Error compiling schema, function code:",l),d}finally{this._compilations.delete(t)}}ji.compileSchema=Sx;function ghe(t,e,r){var n;r=(0,ys.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=_he.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new df({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=vhe.call(this,i)}ji.resolveRef=ghe;function vhe(t){return(0,ys.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Sx.call(this,t)}function zM(t){for(let e of this._compilations)if(bhe(e,t))return e}ji.getCompilingSchema=zM;function bhe(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function _he(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||_b.call(this,t,e)}function _b(t,e){let r=this.opts.uriResolver.parse(e),n=(0,ys._getFullPath)(this.opts.uriResolver,r),s=(0,ys.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return Ex.call(this,r,t);let i=(0,ys.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=_b.call(this,t,o);return typeof a?.schema!="object"?void 0:Ex.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||Sx.call(this,o),i===(0,ys.normalizeId)(e)){let{schema:a}=o,{schemaId:c}=this.opts,u=a[c];return u&&(s=(0,ys.resolveUrl)(this.opts.uriResolver,s,u)),new df({schema:a,schemaId:c,root:t,baseId:s})}return Ex.call(this,r,o)}}ji.resolveSchema=_b;var whe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Ex(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,KM.unescapeFragment)(a)];if(c===void 0)return;r=c;let u=typeof r=="object"&&r[this.opts.schemaId];!whe.has(a)&&u&&(e=(0,ys.resolveUrl)(this.opts.uriResolver,e,u))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,KM.schemaHasRulesButRef)(r,this.RULES)){let a=(0,ys.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=_b.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new df({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var HM=v((MBe,Ehe)=>{Ehe.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var JM=v((qBe,WM)=>{"use strict";var She={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};WM.exports={HEX:She}});var rq=v((LBe,tq)=>{"use strict";var{HEX:Ahe}=JM();function YM(t){if(eq(t,".")<3)return{host:t,isIPV4:!1};let e=t.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=e;return r?{host:xhe(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function Ax(t,e=!1){let r="",n=!0;for(let s of t){if(Ahe[s]===void 0)return;s!=="0"&&n===!0&&(n=!1),n||(r+=s)}return e&&r.length===0&&(r="0"),r}function Dhe(t){let e=0,r={error:!1,address:"",zone:""},n=[],s=[],i=!1,o=!1,a=!1;function c(){if(s.length){if(i===!1){let u=Ax(s);if(u!==void 0)n.push(u);else return r.error=!0,!1}s.length=0}return!0}for(let u=0;u<t.length;u++){let l=t[u];if(!(l==="["||l==="]"))if(l===":"){if(o===!0&&(a=!0),!c())break;if(e++,n.push(":"),e>7){r.error=!0;break}u-1>=0&&t[u-1]===":"&&(o=!0);continue}else if(l==="%"){if(!c())break;i=!0}else{s.push(l);continue}}return s.length&&(i?r.zone=s.join(""):a?n.push(s.join("")):n.push(Ax(s))),r.address=n.join(""),r}function QM(t,e={}){if(eq(t,":")<2)return{host:t,isIPV6:!1};let r=Dhe(t);if(r.error)return{host:t,isIPV6:!1};{let n=r.address,s=r.address;return r.zone&&(n+="%"+r.zone,s+="%25"+r.zone),{host:n,escapedHost:s,isIPV6:!0}}}function xhe(t,e){let r="",n=!0,s=t.length;for(let i=0;i<s;i++){let o=t[i];o==="0"&&n?(i+1<=s&&t[i+1]===e||i+1===s)&&(r+=o,n=!1):(o===e?n=!0:n=!1,r+=o)}return r}function eq(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}var GM=/^\.\.?\//u,ZM=/^\/\.(?:\/|$)/u,XM=/^\/\.\.(?:\/|$)/u,Che=/^\/?(?:.|\n)*?(?=\/|$)/u;function Phe(t){let e=[];for(;t.length;)if(t.match(GM))t=t.replace(GM,"");else if(t.match(ZM))t=t.replace(ZM,"/");else if(t.match(XM))t=t.replace(XM,"/"),e.pop();else if(t==="."||t==="..")t="";else{let r=t.match(Che);if(r){let n=r[0];t=t.slice(n.length),e.push(n)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function Ohe(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function Fhe(t,e){let r=[];if(t.userinfo!==void 0&&(r.push(t.userinfo),r.push("@")),t.host!==void 0){let n=unescape(t.host),s=YM(n);if(s.isIPV4)n=s.host;else{let i=QM(s.host,{isIPV4:!1});i.isIPV6===!0?n=`[${i.escapedHost}]`:n=t.host}r.push(n)}return(typeof t.port=="number"||typeof t.port=="string")&&(r.push(":"),r.push(String(t.port))),r.length?r.join(""):void 0}tq.exports={recomposeAuthority:Fhe,normalizeComponentEncoding:Ohe,removeDotSegments:Phe,normalizeIPv4:YM,normalizeIPv6:QM,stringArrayToHexStripped:Ax}});var uq=v((UBe,aq)=>{"use strict";var The=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,Ihe=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function nq(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function iq(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function sq(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function Bhe(t){return t.secure=nq(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function khe(t){if((t.port===(nq(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function Rhe(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(Ihe);if(r){let n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let s=`${n}:${e.nid||t.nid}`,i=Dx[s];t.path=void 0,i&&(t=i.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function $he(t,e){let r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),s=`${r}:${e.nid||n}`,i=Dx[s];i&&(t=i.serialize(t,e));let o=t,a=t.nss;return o.path=`${n||e.nid}:${a}`,e.skipEscape=!0,o}function jhe(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!The.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Nhe(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var oq={scheme:"http",domainHost:!0,parse:iq,serialize:sq},Mhe={scheme:"https",domainHost:oq.domainHost,parse:iq,serialize:sq},Eb={scheme:"ws",domainHost:!0,parse:Bhe,serialize:khe},qhe={scheme:"wss",domainHost:Eb.domainHost,parse:Eb.parse,serialize:Eb.serialize},Lhe={scheme:"urn",parse:Rhe,serialize:$he,skipNormalize:!0},Uhe={scheme:"urn:uuid",parse:jhe,serialize:Nhe,skipNormalize:!0},Dx={http:oq,https:Mhe,ws:Eb,wss:qhe,urn:Lhe,"urn:uuid":Uhe};aq.exports=Dx});var lq=v((VBe,Ab)=>{"use strict";var{normalizeIPv6:Vhe,normalizeIPv4:Khe,removeDotSegments:Cm,recomposeAuthority:zhe,normalizeComponentEncoding:Sb}=rq(),xx=uq();function Hhe(t,e){return typeof t=="string"?t=so(ua(t,e),e):typeof t=="object"&&(t=ua(so(t,e),e)),t}function Whe(t,e,r){let n=Object.assign({scheme:"null"},r),s=cq(ua(t,n),ua(e,n),n,!0);return so(s,{...n,skipEscape:!0})}function cq(t,e,r,n){let s={};return n||(t=ua(so(t,r),r),e=ua(so(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Cm(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Cm(e.path||""),s.query=e.query):(e.path?(e.path.charAt(0)==="/"?s.path=Cm(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=Cm(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function Jhe(t,e,r){return typeof t=="string"?(t=unescape(t),t=so(Sb(ua(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=so(Sb(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=so(Sb(ua(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=so(Sb(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function so(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),s=[],i=xx[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(s.push(r.scheme),s.push(":"));let o=zhe(r,n);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=Cm(a)),o===void 0&&(a=a.replace(/^\/\//u,"/%2F")),s.push(a)}return r.query!==void 0&&(s.push("?"),s.push(r.query)),r.fragment!==void 0&&(s.push("#"),s.push(r.fragment)),s.join("")}var Ghe=Array.from({length:127},(t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function Zhe(t){let e=0;for(let r=0,n=t.length;r<n;++r)if(e=t.charCodeAt(r),e>126||Ghe[e])return!0;return!1}var Xhe=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function ua(t,e){let r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=t.indexOf("%")!==-1,i=!1;r.reference==="suffix"&&(t=(r.scheme?r.scheme+":":"")+"//"+t);let o=t.match(Xhe);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host){let c=Khe(n.host);if(c.isIPV4===!1){let u=Vhe(c.host,{isIPV4:!1});n.host=u.host.toLowerCase(),i=u.isIPV6}else n.host=c.host,i=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let a=xx[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&n.host&&(r.domainHost||a&&a.domainHost)&&i===!1&&Zhe(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(c){n.error=n.error||"Host's domain name can not be converted to ASCII: "+c}(!a||a&&!a.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=escape(unescape(n.path))),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),a&&a.parse&&a.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var Cx={SCHEMES:xx,normalize:Hhe,resolve:Whe,resolveComponents:cq,equal:Jhe,serialize:so,parse:ua};Ab.exports=Cx;Ab.exports.default=Cx;Ab.exports.fastUri=Cx});var fq=v(Px=>{"use strict";Object.defineProperty(Px,"__esModule",{value:!0});var dq=lq();dq.code='require("ajv/dist/runtime/uri").default';Px.default=dq});var _q=v(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.CodeGen=rn.Name=rn.nil=rn.stringify=rn.str=rn._=rn.KeywordCxt=void 0;var Yhe=Dm();Object.defineProperty(rn,"KeywordCxt",{enumerable:!0,get:function(){return Yhe.KeywordCxt}});var ff=tt();Object.defineProperty(rn,"_",{enumerable:!0,get:function(){return ff._}});Object.defineProperty(rn,"str",{enumerable:!0,get:function(){return ff.str}});Object.defineProperty(rn,"stringify",{enumerable:!0,get:function(){return ff.stringify}});Object.defineProperty(rn,"nil",{enumerable:!0,get:function(){return ff.nil}});Object.defineProperty(rn,"Name",{enumerable:!0,get:function(){return ff.Name}});Object.defineProperty(rn,"CodeGen",{enumerable:!0,get:function(){return ff.CodeGen}});var Qhe=bb(),gq=xm(),eme=sx(),Pm=wb(),tme=tt(),Om=Em(),Db=wm(),Fx=At(),pq=HM(),rme=fq(),vq=(t,e)=>new RegExp(t,e);vq.code="new RegExp";var nme=["removeAdditional","useDefaults","coerceTypes"],ime=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),sme={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},ome={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},hq=200;function ame(t){var e,r,n,s,i,o,a,c,u,l,d,p,f,h,y,g,A,x,b,w,D,F,C,I,k;let T=t.strict,j=(e=t.code)===null||e===void 0?void 0:e.optimize,L=j===!0||j===void 0?1:j||0,Q=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:vq,ne=(s=t.uriResolver)!==null&&s!==void 0?s:rme.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:T)!==null&&o!==void 0?o:!0,strictNumbers:(c=(a=t.strictNumbers)!==null&&a!==void 0?a:T)!==null&&c!==void 0?c:!0,strictTypes:(l=(u=t.strictTypes)!==null&&u!==void 0?u:T)!==null&&l!==void 0?l:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:T)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=t.strictRequired)!==null&&f!==void 0?f:T)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:L,regExp:Q}:{optimize:L,regExp:Q},loopRequired:(y=t.loopRequired)!==null&&y!==void 0?y:hq,loopEnum:(g=t.loopEnum)!==null&&g!==void 0?g:hq,meta:(A=t.meta)!==null&&A!==void 0?A:!0,messages:(x=t.messages)!==null&&x!==void 0?x:!0,inlineRefs:(b=t.inlineRefs)!==null&&b!==void 0?b:!0,schemaId:(w=t.schemaId)!==null&&w!==void 0?w:"$id",addUsedSchema:(D=t.addUsedSchema)!==null&&D!==void 0?D:!0,validateSchema:(F=t.validateSchema)!==null&&F!==void 0?F:!0,validateFormats:(C=t.validateFormats)!==null&&C!==void 0?C:!0,unicodeRegExp:(I=t.unicodeRegExp)!==null&&I!==void 0?I:!0,int32range:(k=t.int32range)!==null&&k!==void 0?k:!0,uriResolver:ne}}var Fm=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...ame(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new tme.ValueScope({scope:{},prefixes:ime,es5:r,lines:n}),this.logger=pme(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,eme.getRules)(),mq.call(this,sme,e,"NOT SUPPORTED"),mq.call(this,ome,e,"DEPRECATED","warn"),this._metaOpts=dme.call(this),e.formats&&cme.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&lme.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),ume.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=pq;n==="id"&&(s={...pq},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(l,d){await i.call(this,l.$schema);let p=this._addSchema(l,d);return p.validate||o.call(this,p)}async function i(l){l&&!this.getSchema(l)&&await s.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(d){if(!(d instanceof gq.default))throw d;return a.call(this,d),await c.call(this,d.missingSchema),o.call(this,l)}}function a({missingSchema:l,missingRef:d}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${d} cannot be resolved`)}async function c(l){let d=await u.call(this,l);this.refs[l]||await i.call(this,d.$schema),this.refs[l]||this.addSchema(d,l,r)}async function u(l){let d=this._loading[l];if(d)return d;try{return await(this._loading[l]=n(l))}finally{delete this._loading[l]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Om.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=yq.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Pm.SchemaEnv({schema:{},schemaId:n});if(r=Pm.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=yq.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Om.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(mme.call(this,n,r),!r)return(0,Fx.eachItem)(n,i=>Ox.call(this,i)),this;gme.call(this,r);let s={...r,type:(0,Db.getJSONTypes)(r.type),schemaType:(0,Db.getJSONTypes)(r.schemaType)};return(0,Fx.eachItem)(n,s.type.length===0?i=>Ox.call(this,i,s):i=>s.type.forEach(o=>Ox.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let c=n[a];if(typeof c!="object")continue;let{$data:u}=c.definition,l=o[a];u&&l&&(o[a]=bq(l))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;n=(0,Om.normalizeId)(o||n);let u=Om.getSchemaRefs.call(this,e,n);return c=new Pm.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:u}),this._cache.set(c.schema,c),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),s&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Pm.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Pm.compileSchema.call(this,e)}finally{this.opts=r}}};Fm.ValidationError=Qhe.default;Fm.MissingRefError=gq.default;rn.default=Fm;function mq(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function yq(t){return t=(0,Om.normalizeId)(t),this.schemas[t]||this.refs[t]}function ume(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function cme(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function lme(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function dme(){let t={...this.opts};for(let e of nme)delete t[e];return t}var fme={log(){},warn(){},error(){}};function pme(t){if(t===!1)return fme;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var hme=/^[a-z_$][a-z0-9_$:-]*$/i;function mme(t,e){let{RULES:r}=this;if((0,Fx.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!hme.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function Ox(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:c})=>c===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Db.getJSONTypes)(e.type),schemaType:(0,Db.getJSONTypes)(e.schemaType)}};e.before?yme.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(c=>this.addKeyword(c))}function yme(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function gme(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=bq(e)),t.validateSchema=this.compile(e,!0))}var vme={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function bq(t){return{anyOf:[t,vme]}}});var wq=v(Tx=>{"use strict";Object.defineProperty(Tx,"__esModule",{value:!0});var bme={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Tx.default=bme});var Dq=v(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.callRef=Qc.getValidate=void 0;var _me=xm(),Eq=$i(),zn=tt(),pf=oa(),Sq=wb(),xb=At(),wme={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=n,{root:u}=i;if((r==="#"||r==="#/")&&s===u.baseId)return d();let l=Sq.resolveRef.call(c,u,s,r);if(l===void 0)throw new _me.default(n.opts.uriResolver,s,r);if(l instanceof Sq.SchemaEnv)return p(l);return f(l);function d(){if(i===u)return Cb(t,o,i,i.$async);let h=e.scopeValue("root",{ref:u});return Cb(t,(0,zn._)`${h}.validate`,u,u.$async)}function p(h){let y=Aq(t,h);Cb(t,y,h,h.$async)}function f(h){let y=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,zn.stringify)(h)}:{ref:h}),g=e.name("valid"),A=t.subschema({schema:h,dataTypes:[],schemaPath:zn.nil,topSchemaRef:y,errSchemaPath:r},g);t.mergeEvaluated(A),t.ok(g)}}};function Aq(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,zn._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Qc.getValidate=Aq;function Cb(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:c}=i,u=c.passContext?pf.default.this:zn.nil;n?l():d();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,zn._)`await ${(0,Eq.callValidateCode)(t,e,u)}`),f(e),o||s.assign(h,!0)},y=>{s.if((0,zn._)`!(${y} instanceof ${i.ValidationError})`,()=>s.throw(y)),p(y),o||s.assign(h,!1)}),t.ok(h)}function d(){t.result((0,Eq.callValidateCode)(t,e,u),()=>f(e),()=>p(e))}function p(h){let y=(0,zn._)`${h}.errors`;s.assign(pf.default.vErrors,(0,zn._)`${pf.default.vErrors} === null ? ${y} : ${pf.default.vErrors}.concat(${y})`),s.assign(pf.default.errors,(0,zn._)`${pf.default.vErrors}.length`)}function f(h){var y;if(!i.opts.unevaluated)return;let g=(y=r?.validate)===null||y===void 0?void 0:y.evaluated;if(i.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(i.props=xb.mergeEvaluated.props(s,g.props,i.props));else{let A=s.var("props",(0,zn._)`${h}.evaluated.props`);i.props=xb.mergeEvaluated.props(s,A,i.props,zn.Name)}if(i.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(i.items=xb.mergeEvaluated.items(s,g.items,i.items));else{let A=s.var("items",(0,zn._)`${h}.evaluated.items`);i.items=xb.mergeEvaluated.items(s,A,i.items,zn.Name)}}}Qc.callRef=Cb;Qc.default=wme});var xq=v(Ix=>{"use strict";Object.defineProperty(Ix,"__esModule",{value:!0});var Eme=wq(),Sme=Dq(),Ame=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Eme.default,Sme.default];Ix.default=Ame});var Cq=v(Bx=>{"use strict";Object.defineProperty(Bx,"__esModule",{value:!0});var Pb=tt(),bu=Pb.operators,Ob={maximum:{okStr:"<=",ok:bu.LTE,fail:bu.GT},minimum:{okStr:">=",ok:bu.GTE,fail:bu.LT},exclusiveMaximum:{okStr:"<",ok:bu.LT,fail:bu.GTE},exclusiveMinimum:{okStr:">",ok:bu.GT,fail:bu.LTE}},Dme={message:({keyword:t,schemaCode:e})=>(0,Pb.str)`must be ${Ob[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Pb._)`{comparison: ${Ob[t].okStr}, limit: ${e}}`},xme={keyword:Object.keys(Ob),type:"number",schemaType:"number",$data:!0,error:Dme,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Pb._)`${r} ${Ob[e].fail} ${n} || isNaN(${r})`)}};Bx.default=xme});var Pq=v(kx=>{"use strict";Object.defineProperty(kx,"__esModule",{value:!0});var Tm=tt(),Cme={message:({schemaCode:t})=>(0,Tm.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Tm._)`{multipleOf: ${t}}`},Pme={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Cme,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Tm._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Tm._)`${o} !== parseInt(${o})`;t.fail$data((0,Tm._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};kx.default=Pme});var Fq=v(Rx=>{"use strict";Object.defineProperty(Rx,"__esModule",{value:!0});function Oq(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}Rx.default=Oq;Oq.code='require("ajv/dist/runtime/ucs2length").default'});var Tq=v($x=>{"use strict";Object.defineProperty($x,"__esModule",{value:!0});var el=tt(),Ome=At(),Fme=Fq(),Tme={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,el.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,el._)`{limit: ${t}}`},Ime={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Tme,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?el.operators.GT:el.operators.LT,o=s.opts.unicode===!1?(0,el._)`${r}.length`:(0,el._)`${(0,Ome.useFunc)(t.gen,Fme.default)}(${r})`;t.fail$data((0,el._)`${o} ${i} ${n}`)}};$x.default=Ime});var Iq=v(jx=>{"use strict";Object.defineProperty(jx,"__esModule",{value:!0});var Bme=$i(),Fb=tt(),kme={message:({schemaCode:t})=>(0,Fb.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Fb._)`{pattern: ${t}}`},Rme={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:kme,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Fb._)`(new RegExp(${s}, ${o}))`:(0,Bme.usePattern)(t,n);t.fail$data((0,Fb._)`!${a}.test(${e})`)}};jx.default=Rme});var Bq=v(Nx=>{"use strict";Object.defineProperty(Nx,"__esModule",{value:!0});var Im=tt(),$me={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Im.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Im._)`{limit: ${t}}`},jme={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:$me,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?Im.operators.GT:Im.operators.LT;t.fail$data((0,Im._)`Object.keys(${r}).length ${s} ${n}`)}};Nx.default=jme});var kq=v(Mx=>{"use strict";Object.defineProperty(Mx,"__esModule",{value:!0});var Bm=$i(),km=tt(),Nme=At(),Mme={message:({params:{missingProperty:t}})=>(0,km.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,km._)`{missingProperty: ${t}}`},qme={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Mme,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let c=r.length>=a.loopRequired;if(o.allErrors?u():l(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:h}=t.it;for(let y of r)if(f?.[y]===void 0&&!h.has(y)){let g=o.schemaEnv.baseId+o.errSchemaPath,A=`required property "${y}" is not defined at "${g}" (strictRequired)`;(0,Nme.checkStrictMode)(o,A,o.opts.strictRequired)}}function u(){if(c||i)t.block$data(km.nil,d);else for(let f of r)(0,Bm.checkReportMissingProp)(t,f)}function l(){let f=e.let("missing");if(c||i){let h=e.let("valid",!0);t.block$data(h,()=>p(f,h)),t.ok(h)}else e.if((0,Bm.checkMissingProp)(t,r,f)),(0,Bm.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,Bm.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function p(f,h){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(h,(0,Bm.propertyInData)(e,s,f,a.ownProperties)),e.if((0,km.not)(h),()=>{t.error(),e.break()})},km.nil)}}};Mx.default=qme});var Rq=v(qx=>{"use strict";Object.defineProperty(qx,"__esModule",{value:!0});var Rm=tt(),Lme={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Rm.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Rm._)`{limit: ${t}}`},Ume={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Lme,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Rm.operators.GT:Rm.operators.LT;t.fail$data((0,Rm._)`${r}.length ${s} ${n}`)}};qx.default=Ume});var $q=v(Ux=>{"use strict";Object.defineProperty(Ux,"__esModule",{value:!0});var Lx=wm(),nn=tt(),Vme=At(),Kme=tm(),zme={message:({params:{i:t,j:e}})=>(0,nn.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,nn._)`{i: ${t}, j: ${e}}`},Hme={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:zme,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let c=e.let("valid"),u=i.items?(0,Lx.getSchemaTypes)(i.items):[];t.block$data(c,l,(0,nn._)`${o} === false`),t.ok(c);function l(){let h=e.let("i",(0,nn._)`${r}.length`),y=e.let("j");t.setParams({i:h,j:y}),e.assign(c,!0),e.if((0,nn._)`${h} > 1`,()=>(d()?p:f)(h,y))}function d(){return u.length>0&&!u.some(h=>h==="object"||h==="array")}function p(h,y){let g=e.name("item"),A=(0,Lx.checkDataTypes)(u,g,a.opts.strictNumbers,Lx.DataType.Wrong),x=e.const("indices",(0,nn._)`{}`);e.for((0,nn._)`;${h}--;`,()=>{e.let(g,(0,nn._)`${r}[${h}]`),e.if(A,(0,nn._)`continue`),u.length>1&&e.if((0,nn._)`typeof ${g} == "string"`,(0,nn._)`${g} += "_"`),e.if((0,nn._)`typeof ${x}[${g}] == "number"`,()=>{e.assign(y,(0,nn._)`${x}[${g}]`),t.error(),e.assign(c,!1).break()}).code((0,nn._)`${x}[${g}] = ${h}`)})}function f(h,y){let g=(0,Vme.useFunc)(e,Kme.default),A=e.name("outer");e.label(A).for((0,nn._)`;${h}--;`,()=>e.for((0,nn._)`${y} = ${h}; ${y}--;`,()=>e.if((0,nn._)`${g}(${r}[${h}], ${r}[${y}])`,()=>{t.error(),e.assign(c,!1).break(A)})))}}};Ux.default=Hme});var jq=v(Kx=>{"use strict";Object.defineProperty(Kx,"__esModule",{value:!0});var Vx=tt(),Wme=At(),Jme=tm(),Gme={message:"must be equal to constant",params:({schemaCode:t})=>(0,Vx._)`{allowedValue: ${t}}`},Zme={keyword:"const",$data:!0,error:Gme,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,Vx._)`!${(0,Wme.useFunc)(e,Jme.default)}(${r}, ${s})`):t.fail((0,Vx._)`${i} !== ${r}`)}};Kx.default=Zme});var Nq=v(zx=>{"use strict";Object.defineProperty(zx,"__esModule",{value:!0});var $m=tt(),Xme=At(),Yme=tm(),Qme={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,$m._)`{allowedValues: ${t}}`},eye={keyword:"enum",schemaType:"array",$data:!0,error:Qme,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,c,u=()=>c??(c=(0,Xme.useFunc)(e,Yme.default)),l;if(a||n)l=e.let("valid"),t.block$data(l,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);l=(0,$m.or)(...s.map((h,y)=>p(f,y)))}t.pass(l);function d(){e.assign(l,!1),e.forOf("v",i,f=>e.if((0,$m._)`${u()}(${r}, ${f})`,()=>e.assign(l,!0).break()))}function p(f,h){let y=s[h];return typeof y=="object"&&y!==null?(0,$m._)`${u()}(${r}, ${f}[${h}])`:(0,$m._)`${r} === ${y}`}}};zx.default=eye});var Mq=v(Hx=>{"use strict";Object.defineProperty(Hx,"__esModule",{value:!0});var tye=Cq(),rye=Pq(),nye=Tq(),iye=Iq(),sye=Bq(),oye=kq(),aye=Rq(),uye=$q(),cye=jq(),lye=Nq(),dye=[tye.default,rye.default,nye.default,iye.default,sye.default,oye.default,aye.default,uye.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},cye.default,lye.default];Hx.default=dye});var Jx=v(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});jm.validateAdditionalItems=void 0;var tl=tt(),Wx=At(),fye={message:({params:{len:t}})=>(0,tl.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,tl._)`{limit: ${t}}`},pye={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:fye,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,Wx.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}qq(t,n)}};function qq(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,tl._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,tl._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,Wx.alwaysValidSchema)(o,n)){let u=r.var("valid",(0,tl._)`${a} <= ${e.length}`);r.if((0,tl.not)(u),()=>c(u)),t.ok(u)}function c(u){r.forRange("i",e.length,a,l=>{t.subschema({keyword:i,dataProp:l,dataPropType:Wx.Type.Num},u),o.allErrors||r.if((0,tl.not)(u),()=>r.break())})}}jm.validateAdditionalItems=qq;jm.default=pye});var Gx=v(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});Nm.validateTuple=void 0;var Lq=tt(),Tb=At(),hye=$i(),mye={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return Uq(t,"additionalItems",e);r.items=!0,!(0,Tb.alwaysValidSchema)(r,e)&&t.ok((0,hye.validateArray)(t))}};function Uq(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;l(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Tb.mergeEvaluated.items(n,r.length,a.items));let c=n.name("valid"),u=n.const("len",(0,Lq._)`${i}.length`);r.forEach((d,p)=>{(0,Tb.alwaysValidSchema)(a,d)||(n.if((0,Lq._)`${u} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},c)),t.ok(c))});function l(d){let{opts:p,errSchemaPath:f}=a,h=r.length,y=h===d.minItems&&(h===d.maxItems||d[e]===!1);if(p.strictTuples&&!y){let g=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,Tb.checkStrictMode)(a,g,p.strictTuples)}}}Nm.validateTuple=Uq;Nm.default=mye});var Vq=v(Zx=>{"use strict";Object.defineProperty(Zx,"__esModule",{value:!0});var yye=Gx(),gye={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,yye.validateTuple)(t,"items")};Zx.default=gye});var zq=v(Xx=>{"use strict";Object.defineProperty(Xx,"__esModule",{value:!0});var Kq=tt(),vye=At(),bye=$i(),_ye=Jx(),wye={message:({params:{len:t}})=>(0,Kq.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Kq._)`{limit: ${t}}`},Eye={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:wye,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,vye.alwaysValidSchema)(n,e)&&(s?(0,_ye.validateAdditionalItems)(t,s):t.ok((0,bye.validateArray)(t)))}};Xx.default=Eye});var Hq=v(Yx=>{"use strict";Object.defineProperty(Yx,"__esModule",{value:!0});var Ni=tt(),Ib=At(),Sye={message:({params:{min:t,max:e}})=>e===void 0?(0,Ni.str)`must contain at least ${t} valid item(s)`:(0,Ni.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Ni._)`{minContains: ${t}}`:(0,Ni._)`{minContains: ${t}, maxContains: ${e}}`},Aye={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Sye,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:c,maxContains:u}=n;i.opts.next?(o=c===void 0?1:c,a=u):o=1;let l=e.const("len",(0,Ni._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Ib.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Ib.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Ib.alwaysValidSchema)(i,r)){let y=(0,Ni._)`${l} >= ${o}`;a!==void 0&&(y=(0,Ni._)`${y} && ${l} <= ${a}`),t.pass(y);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,Ni._)`${s}.length > 0`,p)):(e.let(d,!1),p()),t.result(d,()=>t.reset());function p(){let y=e.name("_valid"),g=e.let("count",0);f(y,()=>e.if(y,()=>h(g)))}function f(y,g){e.forRange("i",0,l,A=>{t.subschema({keyword:"contains",dataProp:A,dataPropType:Ib.Type.Num,compositeRule:!0},y),g()})}function h(y){e.code((0,Ni._)`${y}++`),a===void 0?e.if((0,Ni._)`${y} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,Ni._)`${y} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,Ni._)`${y} >= ${o}`,()=>e.assign(d,!0)))}}};Yx.default=Aye});var Gq=v(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.validateSchemaDeps=oo.validatePropertyDeps=oo.error=void 0;var Qx=tt(),Dye=At(),Mm=$i();oo.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,Qx.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,Qx._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var xye={keyword:"dependencies",type:"object",schemaType:"object",error:oo.error,code(t){let[e,r]=Cye(t);Wq(t,e),Jq(t,r)}};function Cye({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function Wq(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let c=(0,Mm.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(c,()=>{for(let u of a)(0,Mm.checkReportMissingProp)(t,u)}):(r.if((0,Qx._)`${c} && (${(0,Mm.checkMissingProp)(t,a,i)})`),(0,Mm.reportMissingProp)(t,i),r.else())}}oo.validatePropertyDeps=Wq;function Jq(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,Dye.alwaysValidSchema)(i,e[a])||(r.if((0,Mm.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let c=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(c,o)},()=>r.var(o,!0)),t.ok(o))}oo.validateSchemaDeps=Jq;oo.default=xye});var Xq=v(eC=>{"use strict";Object.defineProperty(eC,"__esModule",{value:!0});var Zq=tt(),Pye=At(),Oye={message:"property name must be valid",params:({params:t})=>(0,Zq._)`{propertyName: ${t.propertyName}}`},Fye={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Oye,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,Pye.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,Zq.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};eC.default=Fye});var rC=v(tC=>{"use strict";Object.defineProperty(tC,"__esModule",{value:!0});var Bb=$i(),gs=tt(),Tye=oa(),kb=At(),Iye={message:"must NOT have additional properties",params:({params:t})=>(0,gs._)`{additionalProperty: ${t.additionalProperty}}`},Bye={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Iye,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,kb.alwaysValidSchema)(o,r))return;let u=(0,Bb.allSchemaProperties)(n.properties),l=(0,Bb.allSchemaProperties)(n.patternProperties);d(),t.ok((0,gs._)`${i} === ${Tye.default.errors}`);function d(){e.forIn("key",s,g=>{!u.length&&!l.length?h(g):e.if(p(g),()=>h(g))})}function p(g){let A;if(u.length>8){let x=(0,kb.schemaRefOrVal)(o,n.properties,"properties");A=(0,Bb.isOwnProperty)(e,x,g)}else u.length?A=(0,gs.or)(...u.map(x=>(0,gs._)`${g} === ${x}`)):A=gs.nil;return l.length&&(A=(0,gs.or)(A,...l.map(x=>(0,gs._)`${(0,Bb.usePattern)(t,x)}.test(${g})`))),(0,gs.not)(A)}function f(g){e.code((0,gs._)`delete ${s}[${g}]`)}function h(g){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){f(g);return}if(r===!1){t.setParams({additionalProperty:g}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,kb.alwaysValidSchema)(o,r)){let A=e.name("valid");c.removeAdditional==="failing"?(y(g,A,!1),e.if((0,gs.not)(A),()=>{t.reset(),f(g)})):(y(g,A),a||e.if((0,gs.not)(A),()=>e.break()))}}function y(g,A,x){let b={keyword:"additionalProperties",dataProp:g,dataPropType:kb.Type.Str};x===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(b,A)}}};tC.default=Bye});var eL=v(iC=>{"use strict";Object.defineProperty(iC,"__esModule",{value:!0});var kye=Dm(),Yq=$i(),nC=At(),Qq=rC(),Rye={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Qq.default.code(new kye.KeywordCxt(i,Qq.default,"additionalProperties"));let o=(0,Yq.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=nC.mergeEvaluated.props(e,(0,nC.toHash)(o),i.props));let a=o.filter(d=>!(0,nC.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let c=e.name("valid");for(let d of a)u(d)?l(d):(e.if((0,Yq.propertyInData)(e,s,d,i.opts.ownProperties)),l(d),i.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(c);function u(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function l(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},c)}}};iC.default=Rye});var iL=v(sC=>{"use strict";Object.defineProperty(sC,"__esModule",{value:!0});var tL=$i(),Rb=tt(),rL=At(),nL=At(),$ye={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,tL.allSchemaProperties)(r),c=a.filter(y=>(0,rL.alwaysValidSchema)(i,r[y]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let u=o.strictSchema&&!o.allowMatchingProperties&&s.properties,l=e.name("valid");i.props!==!0&&!(i.props instanceof Rb.Name)&&(i.props=(0,nL.evaluatedPropsToName)(e,i.props));let{props:d}=i;p();function p(){for(let y of a)u&&f(y),i.allErrors?h(y):(e.var(l,!0),h(y),e.if(l))}function f(y){for(let g in u)new RegExp(y).test(g)&&(0,rL.checkStrictMode)(i,`property ${g} matches pattern ${y} (use allowMatchingProperties)`)}function h(y){e.forIn("key",n,g=>{e.if((0,Rb._)`${(0,tL.usePattern)(t,y)}.test(${g})`,()=>{let A=c.includes(y);A||t.subschema({keyword:"patternProperties",schemaProp:y,dataProp:g,dataPropType:nL.Type.Str},l),i.opts.unevaluated&&d!==!0?e.assign((0,Rb._)`${d}[${g}]`,!0):!A&&!i.allErrors&&e.if((0,Rb.not)(l),()=>e.break())})})}}};sC.default=$ye});var sL=v(oC=>{"use strict";Object.defineProperty(oC,"__esModule",{value:!0});var jye=At(),Nye={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,jye.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};oC.default=Nye});var oL=v(aC=>{"use strict";Object.defineProperty(aC,"__esModule",{value:!0});var Mye=$i(),qye={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Mye.validateUnion,error:{message:"must match a schema in anyOf"}};aC.default=qye});var aL=v(uC=>{"use strict";Object.defineProperty(uC,"__esModule",{value:!0});var $b=tt(),Lye=At(),Uye={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,$b._)`{passingSchemas: ${t.passing}}`},Vye={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Uye,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(u),t.result(o,()=>t.reset(),()=>t.error(!0));function u(){i.forEach((l,d)=>{let p;(0,Lye.alwaysValidSchema)(s,l)?e.var(c,!0):p=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},c),d>0&&e.if((0,$b._)`${c} && ${o}`).assign(o,!1).assign(a,(0,$b._)`[${a}, ${d}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,d),p&&t.mergeEvaluated(p,$b.Name)})})}}};uC.default=Vye});var uL=v(cC=>{"use strict";Object.defineProperty(cC,"__esModule",{value:!0});var Kye=At(),zye={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,Kye.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};cC.default=zye});var dL=v(lC=>{"use strict";Object.defineProperty(lC,"__esModule",{value:!0});var jb=tt(),lL=At(),Hye={message:({params:t})=>(0,jb.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,jb._)`{failingKeyword: ${t.ifClause}}`},Wye={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Hye,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,lL.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=cL(n,"then"),i=cL(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&i){let l=e.let("ifClause");t.setParams({ifClause:l}),e.if(a,u("then",l),u("else",l))}else s?e.if(a,u("then")):e.if((0,jb.not)(a),u("else"));t.pass(o,()=>t.error(!0));function c(){let l=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(l)}function u(l,d){return()=>{let p=t.subschema({keyword:l},a);e.assign(o,a),t.mergeValidEvaluated(p,o),d?e.assign(d,(0,jb._)`${l}`):t.setParams({ifClause:l})}}}};function cL(t,e){let r=t.schema[e];return r!==void 0&&!(0,lL.alwaysValidSchema)(t,r)}lC.default=Wye});var fL=v(dC=>{"use strict";Object.defineProperty(dC,"__esModule",{value:!0});var Jye=At(),Gye={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Jye.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};dC.default=Gye});var pL=v(fC=>{"use strict";Object.defineProperty(fC,"__esModule",{value:!0});var Zye=Jx(),Xye=Vq(),Yye=Gx(),Qye=zq(),e0e=Hq(),t0e=Gq(),r0e=Xq(),n0e=rC(),i0e=eL(),s0e=iL(),o0e=sL(),a0e=oL(),u0e=aL(),c0e=uL(),l0e=dL(),d0e=fL();function f0e(t=!1){let e=[o0e.default,a0e.default,u0e.default,c0e.default,l0e.default,d0e.default,r0e.default,n0e.default,t0e.default,i0e.default,s0e.default];return t?e.push(Xye.default,Qye.default):e.push(Zye.default,Yye.default),e.push(e0e.default),e}fC.default=f0e});var hL=v(pC=>{"use strict";Object.defineProperty(pC,"__esModule",{value:!0});var _r=tt(),p0e={message:({schemaCode:t})=>(0,_r.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,_r._)`{format: ${t}}`},h0e={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:p0e,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:u,schemaEnv:l,self:d}=a;if(!c.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:c.code.formats}),y=r.const("fDef",(0,_r._)`${h}[${o}]`),g=r.let("fType"),A=r.let("format");r.if((0,_r._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(g,(0,_r._)`${y}.type || "string"`).assign(A,(0,_r._)`${y}.validate`),()=>r.assign(g,(0,_r._)`"string"`).assign(A,y)),t.fail$data((0,_r.or)(x(),b()));function x(){return c.strictSchema===!1?_r.nil:(0,_r._)`${o} && !${A}`}function b(){let w=l.$async?(0,_r._)`(${y}.async ? await ${A}(${n}) : ${A}(${n}))`:(0,_r._)`${A}(${n})`,D=(0,_r._)`(typeof ${A} == "function" ? ${w} : ${A}.test(${n}))`;return(0,_r._)`${A} && ${A} !== true && ${g} === ${e} && !${D}`}}function f(){let h=d.formats[i];if(!h){x();return}if(h===!0)return;let[y,g,A]=b(h);y===e&&t.pass(w());function x(){if(c.strictSchema===!1){d.logger.warn(D());return}throw new Error(D());function D(){return`unknown format "${i}" ignored in schema at path "${u}"`}}function b(D){let F=D instanceof RegExp?(0,_r.regexpCode)(D):c.code.formats?(0,_r._)`${c.code.formats}${(0,_r.getProperty)(i)}`:void 0,C=r.scopeValue("formats",{key:i,ref:D,code:F});return typeof D=="object"&&!(D instanceof RegExp)?[D.type||"string",D.validate,(0,_r._)`${C}.validate`]:["string",D,C]}function w(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!l.$async)throw new Error("async format in sync schema");return(0,_r._)`await ${A}(${n})`}return typeof g=="function"?(0,_r._)`${A}(${n})`:(0,_r._)`${A}.test(${n})`}}}};pC.default=h0e});var mL=v(hC=>{"use strict";Object.defineProperty(hC,"__esModule",{value:!0});var m0e=hL(),y0e=[m0e.default];hC.default=y0e});var yL=v(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});hf.contentVocabulary=hf.metadataVocabulary=void 0;hf.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];hf.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var vL=v(mC=>{"use strict";Object.defineProperty(mC,"__esModule",{value:!0});var g0e=xq(),v0e=Mq(),b0e=pL(),_0e=mL(),gL=yL(),w0e=[g0e.default,v0e.default,(0,b0e.default)(),_0e.default,gL.metadataVocabulary,gL.contentVocabulary];mC.default=w0e});var _L=v(Nb=>{"use strict";Object.defineProperty(Nb,"__esModule",{value:!0});Nb.DiscrError=void 0;var bL;(function(t){t.Tag="tag",t.Mapping="mapping"})(bL||(Nb.DiscrError=bL={}))});var EL=v(gC=>{"use strict";Object.defineProperty(gC,"__esModule",{value:!0});var mf=tt(),yC=_L(),wL=wb(),E0e=xm(),S0e=At(),A0e={message:({params:{discrError:t,tagName:e}})=>t===yC.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,mf._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},D0e={keyword:"discriminator",type:"object",schemaType:"object",error:A0e,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let c=e.let("valid",!1),u=e.const("tag",(0,mf._)`${r}${(0,mf.getProperty)(a)}`);e.if((0,mf._)`typeof ${u} == "string"`,()=>l(),()=>t.error(!1,{discrError:yC.DiscrError.Tag,tag:u,tagName:a})),t.ok(c);function l(){let f=p();e.if(!1);for(let h in f)e.elseIf((0,mf._)`${u} === ${h}`),e.assign(c,d(f[h]));e.else(),t.error(!1,{discrError:yC.DiscrError.Mapping,tag:u,tagName:a}),e.endIf()}function d(f){let h=e.name("valid"),y=t.subschema({keyword:"oneOf",schemaProp:f},h);return t.mergeEvaluated(y,mf.Name),h}function p(){var f;let h={},y=A(s),g=!0;for(let w=0;w<o.length;w++){let D=o[w];if(D?.$ref&&!(0,S0e.schemaHasRulesButRef)(D,i.self.RULES)){let C=D.$ref;if(D=wL.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,C),D instanceof wL.SchemaEnv&&(D=D.schema),D===void 0)throw new E0e.default(i.opts.uriResolver,i.baseId,C)}let F=(f=D?.properties)===null||f===void 0?void 0:f[a];if(typeof F!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(y||A(D)),x(F,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return h;function A({required:w}){return Array.isArray(w)&&w.includes(a)}function x(w,D){if(w.const)b(w.const,D);else if(w.enum)for(let F of w.enum)b(F,D);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,D){if(typeof w!="string"||w in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[w]=D}}}};gC.default=D0e});var SL=v((F3e,x0e)=>{x0e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var bC=v((Zt,vC)=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.MissingRefError=Zt.ValidationError=Zt.CodeGen=Zt.Name=Zt.nil=Zt.stringify=Zt.str=Zt._=Zt.KeywordCxt=Zt.Ajv=void 0;var C0e=_q(),P0e=vL(),O0e=EL(),AL=SL(),F0e=["/properties"],Mb="http://json-schema.org/draft-07/schema",yf=class extends C0e.default{_addVocabularies(){super._addVocabularies(),P0e.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(O0e.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(AL,F0e):AL;this.addMetaSchema(e,Mb,!1),this.refs["http://json-schema.org/schema"]=Mb}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Mb)?Mb:void 0)}};Zt.Ajv=yf;vC.exports=Zt=yf;vC.exports.Ajv=yf;Object.defineProperty(Zt,"__esModule",{value:!0});Zt.default=yf;var T0e=Dm();Object.defineProperty(Zt,"KeywordCxt",{enumerable:!0,get:function(){return T0e.KeywordCxt}});var gf=tt();Object.defineProperty(Zt,"_",{enumerable:!0,get:function(){return gf._}});Object.defineProperty(Zt,"str",{enumerable:!0,get:function(){return gf.str}});Object.defineProperty(Zt,"stringify",{enumerable:!0,get:function(){return gf.stringify}});Object.defineProperty(Zt,"nil",{enumerable:!0,get:function(){return gf.nil}});Object.defineProperty(Zt,"Name",{enumerable:!0,get:function(){return gf.Name}});Object.defineProperty(Zt,"CodeGen",{enumerable:!0,get:function(){return gf.CodeGen}});var I0e=bb();Object.defineProperty(Zt,"ValidationError",{enumerable:!0,get:function(){return I0e.default}});var B0e=xm();Object.defineProperty(Zt,"MissingRefError",{enumerable:!0,get:function(){return B0e.default}})});var FL=v(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.formatNames=ao.fastFormats=ao.fullFormats=void 0;function vf(t,e){return{validate:t,compare:e}}ao.fullFormats={date:vf(CL,EC),time:vf(PL,SC),"date-time":vf(j0e,OL),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:q0e,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:W0e,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:L0e,int32:{type:"number",validate:K0e},int64:{type:"number",validate:z0e},float:{type:"number",validate:xL},double:{type:"number",validate:xL},password:!0,binary:!0};ao.fastFormats={...ao.fullFormats,date:vf(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,EC),time:vf(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,SC),"date-time":vf(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,OL),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};ao.formatNames=Object.keys(ao.fullFormats);function k0e(t){return t%4===0&&(t%100!==0||t%400===0)}var R0e=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,$0e=[0,31,28,31,30,31,30,31,31,30,31,30,31];function CL(t){let e=R0e.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&k0e(r)?29:$0e[n])}function EC(t,e){if(t&&e)return t>e?1:t<e?-1:0}var _C=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function PL(t,e){let r=_C.exec(t);if(!r)return!1;let n=+r[1],s=+r[2],i=+r[3],o=r[5];return(n<=23&&s<=59&&i<=59||n===23&&s===59&&i===60)&&(!e||o!=="")}function SC(t,e){if(!(t&&e))return;let r=_C.exec(t),n=_C.exec(e);if(r&&n)return t=r[1]+r[2]+r[3]+(r[4]||""),e=n[1]+n[2]+n[3]+(n[4]||""),t>e?1:t<e?-1:0}var wC=/t|\s/i;function j0e(t){let e=t.split(wC);return e.length===2&&CL(e[0])&&PL(e[1],!0)}function OL(t,e){if(!(t&&e))return;let[r,n]=t.split(wC),[s,i]=e.split(wC),o=EC(r,s);if(o!==void 0)return o||SC(n,i)}var N0e=/\/|:/,M0e=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function q0e(t){return N0e.test(t)&&M0e.test(t)}var DL=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function L0e(t){return DL.lastIndex=0,DL.test(t)}var U0e=-(2**31),V0e=2**31-1;function K0e(t){return Number.isInteger(t)&&t<=V0e&&t>=U0e}function z0e(t){return Number.isInteger(t)}function xL(){return!0}var H0e=/[^\\]\\Z/;function W0e(t){if(H0e.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var TL=v(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});bf.formatLimitDefinition=void 0;var J0e=bC(),vs=tt(),_u=vs.operators,qb={formatMaximum:{okStr:"<=",ok:_u.LTE,fail:_u.GT},formatMinimum:{okStr:">=",ok:_u.GTE,fail:_u.LT},formatExclusiveMaximum:{okStr:"<",ok:_u.LT,fail:_u.GTE},formatExclusiveMinimum:{okStr:">",ok:_u.GT,fail:_u.LTE}},G0e={message:({keyword:t,schemaCode:e})=>vs.str`should be ${qb[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>vs._`{comparison: ${qb[t].okStr}, limit: ${e}}`};bf.formatLimitDefinition={keyword:Object.keys(qb),type:"string",schemaType:"string",$data:!0,error:G0e,code(t){let{gen:e,data:r,schemaCode:n,keyword:s,it:i}=t,{opts:o,self:a}=i;if(!o.validateFormats)return;let c=new J0e.KeywordCxt(i,a.RULES.all.format.definition,"format");c.$data?u():l();function u(){let p=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),f=e.const("fmt",vs._`${p}[${c.schemaCode}]`);t.fail$data(vs.or(vs._`typeof ${f} != "object"`,vs._`${f} instanceof RegExp`,vs._`typeof ${f}.compare != "function"`,d(f)))}function l(){let p=c.schema,f=a.formats[p];if(!f||f===!0)return;if(typeof f!="object"||f instanceof RegExp||typeof f.compare!="function")throw new Error(`"${s}": format "${p}" does not define "compare" function`);let h=e.scopeValue("formats",{key:p,ref:f,code:o.code.formats?vs._`${o.code.formats}${vs.getProperty(p)}`:void 0});t.fail$data(d(h))}function d(p){return vs._`${p}.compare(${r}, ${n}) ${qb[s].fail} 0`}},dependencies:["format"]};var Z0e=t=>(t.addKeyword(bf.formatLimitDefinition),t);bf.default=Z0e});var RL=v((qm,kL)=>{"use strict";Object.defineProperty(qm,"__esModule",{value:!0});var _f=FL(),X0e=TL(),AC=tt(),IL=new AC.Name("fullFormats"),Y0e=new AC.Name("fastFormats"),DC=(t,e={keywords:!0})=>{if(Array.isArray(e))return BL(t,e,_f.fullFormats,IL),t;let[r,n]=e.mode==="fast"?[_f.fastFormats,Y0e]:[_f.fullFormats,IL],s=e.formats||_f.formatNames;return BL(t,s,r,n),e.keywords&&X0e.default(t),t};DC.get=(t,e="full")=>{let n=(e==="fast"?_f.fastFormats:_f.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function BL(t,e,r,n){var s,i;(s=(i=t.opts.code).formats)!==null&&s!==void 0||(i.formats=AC._`require("ajv-formats/dist/formats").${n}`);for(let o of e)t.addFormat(o,r[o])}kL.exports=qm=DC;Object.defineProperty(qm,"__esModule",{value:!0});qm.default=DC});var NL=v(wf=>{"use strict";var PC=wf&&wf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wf,"__esModule",{value:!0});wf.InputDescriptorFilterEvaluationHandler=void 0;var xC=Ti(),Q0e=PC(bC()),ege=PC(RL()),$L=Br(),CC=PC(as()),tge=Ii(),rge=ki(),jL=new Q0e.default({verbose:!1,code:{source:!1,lines:!0,esm:!1},allowUnionTypes:!0,allErrors:!0,strict:!1});(0,ege.default)(jL);var wu=class t extends rge.AbstractEvaluationHandler{constructor(e){super(e),t.keepCacheSizeInCheck()}getName(){return"FilterEvaluation"}handle(e,r){let n=xC.JSONPath.nodes(e,"$..fields[*]");r.forEach((s,i)=>{this.createNoFieldResults(e,i,s),n.forEach(o=>{let a=[];o.value.path&&(a=tge.JsonPathUtils.extractInputField(s.decoded,o.value.path));let c=!1;for(let u of a)if(this.evaluateFilter(u,o.value)){c=!0;let l={result:Object.assign({},a[0]),valid:!0,format:s.format};this.getResults().push(Object.assign({},this.createResultObject(xC.JSONPath.stringify(o.path.slice(0,3)),i,l)))}if(!c)if(a.length){let u={result:Object.assign({},a[0]),valid:!1,format:s.format};this.createResponse(o,i,u,CC.default.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION)}else{let u={valid:!1,format:s.format};this.createResponse(o,i,u,CC.default.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY)}})}),this.updatePresentationSubmission(e)}createNoFieldResults(e,r,n){e.input_descriptors.map((i,o)=>({index:o,inDesc:i})).filter(i=>{var o,a,c;return((o=i.inDesc.constraints)===null||o===void 0?void 0:o.fields)===void 0||((c=(a=i.inDesc.constraints)===null||a===void 0?void 0:a.fields)===null||c===void 0?void 0:c.length)===0}).forEach(i=>{let o={result:[],valid:!0,format:n.format};this.getResults().push(Object.assign({},this.createResultObject(`$.input_descriptors[${i.index}]`,r,o)))})}createResponse(e,r,n,s){this.getResults().push(Object.assign(Object.assign({},this.createResultObject(xC.JSONPath.stringify(e.path.slice(0,3)),r,n)),{status:$L.Status.ERROR,message:s}))}createResultObject(e,r,n){return{input_descriptor_path:e,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:$L.Status.INFO,message:CC.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}evaluateFilter(e,r){var n,s;!((n=r.filter)===null||n===void 0)&&n.format&&r.filter.format==="date"&&this.transformDateFormat(e);let i=!0;if(r.filter){let o=JSON.stringify({filter:r.filter,value:e.value}),a=Date.now();i=(s=t.FILTER_CACHE.get(o))===null||s===void 0?void 0:s.value,i===void 0&&(t.keepCacheSizeInCheck(),i=jL.validate(r.filter,e.value),t.FILTER_CACHE.set(o,{value:i,ts:a+t.DEFAULT_FILTER_CACHE_TTL}))}return i}transformDateFormat(e){let r=new Date(e.value),n=r.getUTCMonth()+1+"";n.length===1&&(n="0"+n);let s=r.getUTCDate()+"";s.length===1&&(s="0"+s),e.value=r.getUTCFullYear()+"-"+n+"-"+s,e.value=r.toISOString().substring(0,r.toISOString().indexOf("T"))}static keepCacheSizeInCheck(e){var r,n,s;let i=(r=e?.ttl)!==null&&r!==void 0?r:t.DEFAULT_FILTER_CACHE_TTL,o=(n=e?.maxCacheSize)!==null&&n!==void 0?n:t.DEFAULT_MAX_FILTER_CACHE_SIZE,a=(s=e?.resetCacheSize)!==null&&s!==void 0?s:t.DEFAULT_RESET_CACHE_SIZE,c=Date.now();for(let[l,d]of t.FILTER_CACHE)d.ts+i<c&&t.FILTER_CACHE.delete(l);let u=t.FILTER_CACHE.size;if(u>o){let l=t.FILTER_CACHE.keys();for(let d=0;d<u-a;d++)t.FILTER_CACHE.delete(l.next().value)}}};wf.InputDescriptorFilterEvaluationHandler=wu;wu.FILTER_CACHE=new Map;wu.DEFAULT_MAX_FILTER_CACHE_SIZE=100;wu.DEFAULT_FILTER_CACHE_TTL=1e3*30;wu.DEFAULT_RESET_CACHE_SIZE=wu.DEFAULT_MAX_FILTER_CACHE_SIZE/2});var qL=v(ML=>{"use strict";Object.defineProperty(ML,"__esModule",{value:!0})});var UL=v(LL=>{"use strict";Object.defineProperty(LL,"__esModule",{value:!0})});var KL=v(VL=>{"use strict";Object.defineProperty(VL,"__esModule",{value:!0})});var HL=v(zL=>{"use strict";Object.defineProperty(zL,"__esModule",{value:!0})});var JL=v(WL=>{"use strict";Object.defineProperty(WL,"__esModule",{value:!0})});var ZL=v(GL=>{"use strict";Object.defineProperty(GL,"__esModule",{value:!0})});var XL=v(Lb=>{"use strict";Object.defineProperty(Lb,"__esModule",{value:!0});Lb.Directives=void 0;Lb.Directives={Required:"required",Allowed:"allowed",Disallowed:"disallowed"}});var YL=v(Ub=>{"use strict";Object.defineProperty(Ub,"__esModule",{value:!0});Ub.ExchangeStatus=void 0;Ub.ExchangeStatus={Created:"CREATED",Submitted:"SUBMITTED",HolderDeclined:"HOLDER_DECLINED",Expired:"EXPIRED",Accepted:"ACCEPTED",VerifierDeclined:"VERIFIER_DECLINED"}});var e7=v(QL=>{"use strict";Object.defineProperty(QL,"__esModule",{value:!0})});var r7=v(t7=>{"use strict";Object.defineProperty(t7,"__esModule",{value:!0})});var i7=v(n7=>{"use strict";Object.defineProperty(n7,"__esModule",{value:!0})});var o7=v(s7=>{"use strict";Object.defineProperty(s7,"__esModule",{value:!0})});var u7=v(a7=>{"use strict";Object.defineProperty(a7,"__esModule",{value:!0})});var l7=v(c7=>{"use strict";Object.defineProperty(c7,"__esModule",{value:!0})});var f7=v(d7=>{"use strict";Object.defineProperty(d7,"__esModule",{value:!0})});var h7=v(p7=>{"use strict";Object.defineProperty(p7,"__esModule",{value:!0})});var y7=v(m7=>{"use strict";Object.defineProperty(m7,"__esModule",{value:!0})});var v7=v(g7=>{"use strict";Object.defineProperty(g7,"__esModule",{value:!0})});var _7=v(b7=>{"use strict";Object.defineProperty(b7,"__esModule",{value:!0})});var E7=v(w7=>{"use strict";Object.defineProperty(w7,"__esModule",{value:!0})});var A7=v(S7=>{"use strict";Object.defineProperty(S7,"__esModule",{value:!0})});var x7=v(D7=>{"use strict";Object.defineProperty(D7,"__esModule",{value:!0})});var P7=v(C7=>{"use strict";Object.defineProperty(C7,"__esModule",{value:!0})});var F7=v(O7=>{"use strict";Object.defineProperty(O7,"__esModule",{value:!0})});var I7=v(T7=>{"use strict";Object.defineProperty(T7,"__esModule",{value:!0})});var B7=v(Vb=>{"use strict";Object.defineProperty(Vb,"__esModule",{value:!0});Vb.Optionality=void 0;Vb.Optionality={Required:"required",Preferred:"preferred"}});var R7=v(k7=>{"use strict";Object.defineProperty(k7,"__esModule",{value:!0})});var j7=v($7=>{"use strict";Object.defineProperty($7,"__esModule",{value:!0})});var M7=v(N7=>{"use strict";Object.defineProperty(N7,"__esModule",{value:!0})});var L7=v(q7=>{"use strict";Object.defineProperty(q7,"__esModule",{value:!0})});var V7=v(U7=>{"use strict";Object.defineProperty(U7,"__esModule",{value:!0})});var z7=v(K7=>{"use strict";Object.defineProperty(K7,"__esModule",{value:!0})});var W7=v(H7=>{"use strict";Object.defineProperty(H7,"__esModule",{value:!0})});var G7=v(J7=>{"use strict";Object.defineProperty(J7,"__esModule",{value:!0})});var X7=v(Z7=>{"use strict";Object.defineProperty(Z7,"__esModule",{value:!0})});var Y7=v(Kb=>{"use strict";Object.defineProperty(Kb,"__esModule",{value:!0});Kb.Rules=void 0;Kb.Rules={All:"all",Pick:"pick"}});var eU=v(Q7=>{"use strict";Object.defineProperty(Q7,"__esModule",{value:!0})});var rU=v(tU=>{"use strict";Object.defineProperty(tU,"__esModule",{value:!0})});var nU=v(zb=>{"use strict";Object.defineProperty(zb,"__esModule",{value:!0});zb.Status=void 0;zb.Status={Success:"SUCCESS",Warn:"WARN",Error:"ERROR"}});var sU=v(iU=>{"use strict";Object.defineProperty(iU,"__esModule",{value:!0})});var aU=v(oU=>{"use strict";Object.defineProperty(oU,"__esModule",{value:!0})});var cU=v(uU=>{"use strict";Object.defineProperty(uU,"__esModule",{value:!0})});var dU=v(lU=>{"use strict";Object.defineProperty(lU,"__esModule",{value:!0})});var fU=v(Ne=>{"use strict";var nge=Ne&&Ne.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ke=Ne&&Ne.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&nge(e,t,r)};Object.defineProperty(Ne,"__esModule",{value:!0});Ke(qL(),Ne);Ke(UL(),Ne);Ke(KL(),Ne);Ke(HL(),Ne);Ke(JL(),Ne);Ke(ZL(),Ne);Ke(XL(),Ne);Ke(YL(),Ne);Ke(e7(),Ne);Ke(r7(),Ne);Ke(i7(),Ne);Ke(o7(),Ne);Ke(u7(),Ne);Ke(l7(),Ne);Ke(f7(),Ne);Ke(h7(),Ne);Ke(y7(),Ne);Ke(v7(),Ne);Ke(_7(),Ne);Ke(E7(),Ne);Ke(A7(),Ne);Ke(x7(),Ne);Ke(P7(),Ne);Ke(F7(),Ne);Ke(I7(),Ne);Ke(B7(),Ne);Ke(R7(),Ne);Ke(j7(),Ne);Ke(M7(),Ne);Ke(L7(),Ne);Ke(V7(),Ne);Ke(z7(),Ne);Ke(W7(),Ne);Ke(G7(),Ne);Ke(X7(),Ne);Ke(Y7(),Ne);Ke(eU(),Ne);Ke(rU(),Ne);Ke(nU(),Ne);Ke(sU(),Ne);Ke(aU(),Ne);Ke(cU(),Ne);Ke(dU(),Ne)});var ca=v(rl=>{"use strict";var ige=rl&&rl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sge=rl&&rl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ige(e,t,r)};Object.defineProperty(rl,"__esModule",{value:!0});sge(fU(),rl)});var pU=v(Wb=>{"use strict";Object.defineProperty(Wb,"__esModule",{value:!0});Wb.SubjectIsHolderEvaluationHandler=void 0;var Eu=Ti(),Hb=ca(),nl=Br(),oge=ki(),OC=class extends oge.AbstractEvaluationHandler{constructor(e){super(e),this.fieldIdzInputDescriptorsSameSubjectRequired=new Map,this.fieldIdzInputDescriptorsSameSubjectPreferred=new Map,this.isHolder=[],this.fieldIds=[],this.credentialsSubjectsByPath=new Map,this.credentialsByPath=new Map,this.messages=new Map,this.messages.set(nl.Status.INFO,"The field ids requiring the subject to be the holder"),this.messages.set(nl.Status.WARN,"The field ids preferring the subject to be the holder"),this.messages.set(nl.Status.ERROR,"The field id missing")}getName(){return"IsHolderEvaluation"}handle(e,r){this.findIsHolderFieldIdsToInputDescriptorsSets(e),this.findAllCredentialSubjects(r),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectRequired,nl.Status.INFO,Hb.Optionality.Required),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectPreferred,nl.Status.WARN,Hb.Optionality.Preferred),this.updatePresentationSubmission(e)}findIsHolderFieldIdsToInputDescriptorsSets(e){var r;this.fieldIds.push(...Eu.JSONPath.nodes(e,"$..fields[*].id")),this.isHolder.push(...Eu.JSONPath.nodes(e,"$..is_holder[*]"));let n=(r=this.fieldIds)===null||r===void 0?void 0:r.map(i=>i.value),s=[];s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectPreferred,this.isHolder,n,Hb.Optionality.Preferred)),s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectRequired,this.isHolder,n,Hb.Optionality.Required)),s.forEach(i=>this.getResults().push(this.createResult(i[1],i[0],["",{}],nl.Status.ERROR,void 0)))}evaluateFields(e,r,n,s){let i=[];return r.filter(o=>o.value.directive===s).filter(o=>o.value.field_id.every(a=>n.includes(a))).forEach(o=>e.set(Eu.JSONPath.stringify(o.path.slice(0,3)),o.value.field_id)),r.filter(o=>o.value.directive===s).filter(o=>!o.value.field_id.every(a=>n.includes(a))).forEach(o=>i.push([Eu.JSONPath.stringify(o.path.slice(0,3)),o.value.field_id])),i}findAllCredentialSubjects(e){let r=Eu.JSONPath.nodes(e.map(n=>n.credential),"$..credentialSubject");for(let n=0;n<r.length;n++){let s=r[n],i=Eu.JSONPath.stringify(s.path.slice(0,2));this.credentialsSubjectsByPath.set(i,s.value),this.credentialsByPath.set(i,e[n])}}confirmAllFieldSetHasSameSubject(e,r,n){let s=Array.from(e).flatMap(c=>Array.from(this.credentialsSubjectsByPath).filter(u=>c[1].find(l=>Object.keys(u[1]).includes(l)))),i=this.mapCredentialPathsToInputDescriptors(n),o=Array.from(s).flatMap(c=>Object.keys(c[1]).filter(u=>u!=="id")),a=Array.from(e.values()).flatMap(c=>c.every(u=>o.includes(u)))[0];s.forEach(c=>{let u=i.get(c[0]);a&&c[1].id&&this.client.dids.includes(c[1].id)?this.getResults().push(this.createResult(Object.keys(c[1]).filter(l=>l!=="id"),u,c,r,this.credentialsByPath.get(c[0]))):this.getResults().push(this.createResult(Object.keys(c[1]).filter(l=>l!=="id"),u,c,nl.Status.ERROR,this.credentialsByPath.get(c[0])))})}mapCredentialPathsToInputDescriptors(e){var r;let n=new Map;return(r=this.fieldIds)===null||r===void 0||r.forEach(s=>{let i=Eu.JSONPath.stringify(s.path.slice(0,3));this.credentialsSubjectsByPath.forEach((o,a)=>{let c=this.isHolder.find(u=>Eu.JSONPath.stringify(u.path.slice(0,3))===i);Object.keys(o).includes(s.value)&&c?.value.directive===e&&n.set(a,i)})}),n}createResult(e,r,n,s,i,o){return{input_descriptor_path:r,verifiable_credential_path:n[0],evaluator:this.getName(),status:s,payload:Object.assign({fieldIdSet:e,credentialSubject:n[1]},i?{format:i.format}:{}),message:o??this.messages.get(s)}}};Wb.SubjectIsHolderEvaluationHandler=OC});var hU=v(Ef=>{"use strict";var age=Ef&&Ef.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.LimitDisclosureEvaluationHandler=void 0;var Jb=ca(),FC=os(),Gb=Br(),TC=age(as()),Zb=Ii(),uge=ki(),IC=class extends uge.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"LimitDisclosureEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{var i,o,a;!((i=n.constraints)===null||i===void 0)&&i.fields&&(((o=n.constraints)===null||o===void 0?void 0:o.limit_disclosure)===Jb.Optionality.Required||((a=n.constraints)===null||a===void 0?void 0:a.limit_disclosure)===Jb.Optionality.Preferred)&&this.evaluateLimitDisclosure(r,n.constraints,s)})}isLimitDisclosureSupported(e,r,n,s){if(e.format==="vc+sd-jwt")return!0;let i=this.client.limitDisclosureSignatureSuites,o=e.decoded.proof;if(!o||Array.isArray(o)||!o.type)return!1;let a=o.cryptosuite?`${o.type}.${o.cryptosuite}`:o.type;return i?.includes(a)?!0:(s==Jb.Optionality.Required&&this.createLimitDisclosureNotSupportedResult(n,r),!1)}evaluateLimitDisclosure(e,r,n){let s=r?.fields,i=r.limit_disclosure;e.forEach((o,a)=>{i&&this.isLimitDisclosureSupported(o,a,n,i)&&this.enforceLimitDisclosure(o,s,n,a,e,i)})}enforceLimitDisclosure(e,r,n,s,i,o){if(FC.CredentialMapper.isWrappedSdJwtVerifiableCredential(e)){let a=this.createSdJwtPresentationFrame(e.credential,r,n,s);a&&((0,Zb.applySdJwtLimitDisclosure)(e.credential,a),e.decoded=e.credential.decodedPayload,e.original=FC.CredentialMapper.isSdJwtDecodedCredential(e.original)?e.credential:e.credential.compactSdJwtVc,this.createSuccessResult(n,`$[${s}]`,o))}else if(FC.CredentialMapper.isW3cCredential(e.credential)){let a=this.createVcWithRequiredFields(e.credential,r,n,s);a&&(i[s].credential=a,this.createSuccessResult(n,`$[${s}]`,o))}else throw new Error(`Unsupported format for selective disclosure ${e.format}`)}createSdJwtPresentationFrame(e,r,n,s){let i={};for(let o of r)if(o.path){let a=Zb.JsonPathUtils.extractInputField(e.decodedPayload,o.path);if(a.length>0){let c=a[0];Zb.JsonPathUtils.setValue(i,c.path,!0)}else{this.createMandatoryFieldNotFoundResult(n,s,o.path);return}}return i}createVcWithRequiredFields(e,r,n,s){let i={};i=Object.assign(i,e),i.credentialSubject={};for(let o of r)if(o.path){let a=Zb.JsonPathUtils.extractInputField(e,o.path);if(a.length>0)i=this.copyResultPathToDestinationCredential(a[0],e,i);else{this.createMandatoryFieldNotFoundResult(n,s,o.path);return}}return i}copyResultPathToDestinationCredential(e,r,n){let s=Object.assign({},r.credentialSubject);return e.path.forEach(i=>{s[i]&&(s={[i]:s[i]})}),n.credentialSubject=Object.assign(Object.assign({},n.credentialSubject),s),n}createSuccessResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`${r}`,evaluator:this.getName(),status:n===Jb.Optionality.Required?Gb.Status.INFO:Gb.Status.WARN,message:TC.default.LIMIT_DISCLOSURE_APPLIED,payload:void 0})}createMandatoryFieldNotFoundResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Gb.Status.ERROR,message:TC.default.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT,payload:n})}createLimitDisclosureNotSupportedResult(e,r){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Gb.Status.ERROR,message:TC.default.LIMIT_DISCLOSURE_NOT_SUPPORTED})}};Ef.LimitDisclosureEvaluationHandler=IC});var yU=v(Sf=>{"use strict";var cge=Sf&&Sf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.MarkForSubmissionEvaluationHandler=void 0;var lge=Ti(),BC=Br(),mU=cge(as()),dge=ki(),kC=class extends dge.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"MarkForSubmissionEvaluation"}handle(e,r){let n=[...this.getResults()],s=n.filter(o=>o.status===BC.Status.ERROR),i=this.retrieveNoErrorStatus(n,s);this.client.wrappedVcs=r,this.produceErrorResults(s),this.produceSuccessResults(i,e)}retrieveNoErrorStatus(e,r){return e.filter(s=>s.status!==BC.Status.ERROR).filter(s=>!r.find(i=>s.input_descriptor_path===i.input_descriptor_path&&s.verifiable_credential_path===i.verifiable_credential_path))}produceSuccessResults(e,r){this.removeDuplicate(e).forEach(n=>{let i=lge.JSONPath.nodes(r,n.input_descriptor_path)[0].value.group;this.getResults().push({input_descriptor_path:n.input_descriptor_path,verifiable_credential_path:n.verifiable_credential_path,evaluator:this.getName(),status:BC.Status.INFO,payload:{group:i},message:mU.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION})})}produceErrorResults(e){this.removeDuplicate(e).forEach(r=>{let n=Object.assign({},r.payload);n.evaluator=r.evaluator,this.getResults().push(Object.assign(Object.assign({},r),{evaluator:this.getName(),message:mU.default.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}))})}};Sf.MarkForSubmissionEvaluationHandler=kC});var gU=v(Af=>{"use strict";var fge=Af&&Af.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Af,"__esModule",{value:!0});Af.PredicateRelatedFieldEvaluationHandler=void 0;var pge=ca(),hge=Br(),mge=fge(as()),yge=ki(),RC=class extends yge.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"PredicateRelatedFieldEvaluation"}handle(e){e.input_descriptors.forEach((r,n)=>{r.constraints&&this.examinePredicateRelatedField(n,r.constraints)})}examinePredicateRelatedField(e,r){if(r?.fields)for(let n=0;n<r.fields.length;n++)for(let s=0;s<this.getResults().length;s++)this.examinePredicateForFilterEvaluationResult(this.getResults(),s,e,r,n)}examinePredicateForFilterEvaluationResult(e,r,n,s,i){var o;let a=this.retrieveResultInputDescriptorIdx(e[r].input_descriptor_path);if(e[r].payload&&e[r].payload.result&&e[r].payload.result.path&&e[r].evaluator==="FilterEvaluation"&&n===a&&s&&s.fields&&s.fields[i]&&s.fields[i].predicate&&s.fields[i].path&&(!((o=s.fields[i].path)===null||o===void 0)&&o.includes(this.concatenatePath(e[r].payload.result.path)))){let c=Object.assign({},e[r].payload.result),u=this.createResultObject(n,r,c,e);s.fields[i].predicate===pge.Optionality.Required||(u.payload.value=!0),e.push(u)}}retrieveResultInputDescriptorIdx(e){let r="$.input_descriptors[",n=e.indexOf(r),s=e.substring(n+r.length),i=s.indexOf("]"),o=s.substring(0,i);return parseInt(o)}concatenatePath(e){let r="";for(let n=0;n<e.length;n++)typeof e[n]=="number"?(r=r.substring(0,r.length-1),r+="[*]."):r+=e[n]+".";return r.substring(0,r.length-1)}createResultObject(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:s[r].verifiable_credential_path,evaluator:this.getName(),status:hge.Status.INFO,message:mge.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}};Af.PredicateRelatedFieldEvaluationHandler=RC});var bU=v(Xb=>{"use strict";Object.defineProperty(Xb,"__esModule",{value:!0});Xb.SameSubjectEvaluationHandler=void 0;var Su=Ti(),vU=ca(),la=Br(),gge=ki(),$C=class extends gge.AbstractEvaluationHandler{constructor(e){super(e),this.fieldIds=[],this.sameSubject=[],this.messages=new Map,this.messages.set(la.Status.INFO,"The field ids requiring the same subject to belong to same subject"),this.messages.set(la.Status.WARN,"The field ids preferring the same subject to belong to same subject"),this.messages.set(la.Status.ERROR,"The fields ids not belong to the same subject")}getName(){return"SameSubjectEvaluation"}handle(e,r){let n=this.mapSameSubjectFieldIdsToInputDescriptors(e),s=this.mapCredentialsToResultObjecs(r,n),i=this.countSameSubjectOccurrences(n,s);this.generateErrorResults(i,s),this.updatePresentationSubmission(e)}mapSameSubjectFieldIdsToInputDescriptors(e){this.fieldIds.push(...Su.JSONPath.nodes(e,"$..fields[*].id")),this.sameSubject.push(...Su.JSONPath.nodes(e,"$..same_subject[*]"));let r=[];return this.fieldIds.forEach(n=>{let s=this.sameSubject.find(i=>i.value.field_id.includes(n.value));s&&r.push([n,s])}),r}generateErrorResults(e,r){e.forEach((n,s)=>{let i=r.filter(o=>s===o.payload.fieldIdSet).map(o=>o.payload.credentialSubject.id);(i.length!==n||new Set(i).size!==1)&&r.forEach((o,a,c)=>{o.payload.fieldIdSet===s&&(o.status=la.Status.ERROR,o.message=this.messages.get(la.Status.ERROR),c[a]=o)})}),this.client.results.push(...r)}countSameSubjectOccurrences(e,r){let n=new Map;return e.forEach(s=>{r.filter(o=>s[1].value.field_id===o.payload.fieldIdSet)&&(n.has(s[1].value.field_id)&&n.get(s[1].value.field_id)?n.set(s[1].value.field_id,n.get(s[1].value.field_id)+1):n.set(s[1].value.field_id,1))}),n}mapCredentialsToResultObjecs(e,r){let n=[...Su.JSONPath.nodes(e.map(i=>i.credential),"$..credentialSubject")],s=[];return n.forEach(i=>{let o=r.find(a=>Su.JSONPath.query(i.value,`$..${a[0].value}`).length!==0);o&&o[1].value.directive===vU.Optionality.Required?s.push({input_descriptor_path:Su.JSONPath.stringify(o[0].path.slice(0,3)),status:la.Status.INFO,evaluator:this.getName(),payload:{fieldIdSet:o[1].value.field_id,credentialSubject:i.value},message:this.messages.get(la.Status.INFO),verifiable_credential_path:Su.JSONPath.stringify(i.path.slice(0,2))}):o&&o[1].value.directive===vU.Optionality.Preferred&&s.push({input_descriptor_path:Su.JSONPath.stringify(o[0].path.slice(0,3)),status:la.Status.WARN,evaluator:this.getName(),payload:{fieldIdSet:o[1].value.field_id,credentialSubject:i.value},message:this.messages.get(la.Status.WARN),verifiable_credential_path:Su.JSONPath.stringify(i.path.slice(0,2))})}),s}};Xb.SameSubjectEvaluationHandler=$C});var SU=v(Df=>{"use strict";var vge=Df&&Df.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Df,"__esModule",{value:!0});Df.SubjectIsIssuerEvaluationHandler=void 0;var bge=ca(),_U=os(),wU=Br(),EU=vge(as()),jC=Ii(),_ge=ki(),NC=class extends _ge.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"SubjectIsIssuerEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{let i=n.constraints;i?.subject_is_issuer===bge.Optionality.Required?this.checkSubjectIsIssuer(n.id,r,s):this.getResults().push(...r.map((o,a)=>this.generateSuccessResult(s,`$[${a}]`,o,"not applicable")))}),this.updatePresentationSubmission(e)}checkSubjectIsIssuer(e,r,n){this.client.presentationSubmission.descriptor_map.forEach(s=>{if(s.id===e){let i=jC.JsonPathUtils.extractInputField(r.map(o=>o.credential),[s.path]);for(let o of i){let a=(0,jC.getIssuerString)(o.value);o&&o.value&&(0,jC.getSubjectIdsAsString)(o.value).every(c=>c===a)?this.getResults().push(this.generateSuccessResult(n,s.path,_U.CredentialMapper.toWrappedVerifiableCredential(o.value))):this.getResults().push(this.generateErrorResult(n,s.path,_U.CredentialMapper.toWrappedVerifiableCredential(o.value)))}}})}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:wU.Status.ERROR,message:EU.default.SUBJECT_IS_NOT_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:wU.Status.INFO,message:s??EU.default.SUBJECT_IS_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}};Df.SubjectIsIssuerEvaluationHandler=NC});var AU,DU=ct(()=>{AU="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"});var PU={};xr(PU,{customAlphabet:()=>wge,customRandom:()=>CU,nanoid:()=>Ege,random:()=>xU,urlAlphabet:()=>AU});var xU,CU,wge,Ege,OU=ct(()=>{DU();xU=t=>crypto.getRandomValues(new Uint8Array(t)),CU=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,s=-~(1.6*n*e/t.length);return(i=e)=>{let o="";for(;;){let a=r(s),c=s;for(;c--;)if(o+=t[a[c]&n]||"",o.length===i)return o}}},wge=(t,e=21)=>CU(t,e,xU),Ege=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"")});var FU=v(Cf=>{"use strict";var Sge=Cf&&Cf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.UriEvaluationHandler=void 0;var MC=Ti(),il=os(),Age=(OU(),W_(PU)),Lm=Br(),Yb=qc(),Qb=Sge(as()),Dge=ki(),xf=class t extends Dge.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"UriEvaluation"}handle(e,r){var n,s,i;e.input_descriptors.forEach((c,u)=>{let l=e.getVersion()!==Yb.PEVersion.v2?c.schema.map(d=>d.uri):[];r.forEach((d,p)=>{let f=t.buildVcContextAndSchemaUris(d.credential,e.getVersion());this.evaluateUris(d,f,l,u,p,e.getVersion())})});let o=((n=e.format)===null||n===void 0?void 0:n.di)||((s=e.format)===null||s===void 0?void 0:s.di_vc)||((i=e.format)===null||i===void 0?void 0:i.di_vp),a=this.getResults().filter(c=>c.status===Lm.Status.INFO).map(c=>{var u,l,d,p;let f=(u=c.payload)===null||u===void 0?void 0:u.format;if(o&&(f==="ldp_vc"||f==="ldp")){let A=MC.JSONPath.nodes(r,c.verifiable_credential_path).map(w=>w.value).map(w=>w.type!==il.OriginalType.JSONLD||!w.credential.proof?[]:(Array.isArray(w.credential.proof)?w.credential.proof:[w.credential.proof]).filter(C=>C.type==="DataIntegrityProof"&&C.cryptosuite!==void 0)).reduce((w,D)=>w.filter(F=>D.includes(F))),x=MC.JSONPath.nodes(e,c.input_descriptor_path)[0].value,b=!x.format||((l=x?.format)===null||l===void 0?void 0:l.di)||((d=x?.format)===null||d===void 0?void 0:d.di_vc)||((p=x?.format)===null||p===void 0?void 0:p.di_vp);A.length>0&&b&&(f="di_vc")}return{id:MC.JSONPath.nodes(e,c.input_descriptor_path)[0].value.id,format:f,path:c.verifiable_credential_path}});this.client.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0)&&(this.presentationSubmission={id:(0,Age.nanoid)(),definition_id:e.id,descriptor_map:a})}evaluateUris(e,r,n,s,i,o){let a=!1;if(o===Yb.PEVersion.v1){for(let c=0;c<n.length;c++)t.containsHashlink(n[c])&&this.getResults().push(this.createWarnResultObject(s,i));for(let c=0;c<r.length;c++)n.find(u=>u===r[c])!=null&&(a=!0)}else a=!0;a?this.getResults().push(this.createSuccessResultObject(e,n,s,i)):this.getResults().push(this.createErrorResultObject(e,n,s,i))}static buildVcContextAndSchemaUris(e,r){let n=[];return il.CredentialMapper.isW3cCredential(e)&&(Array.isArray(e["@context"])?e["@context"].forEach(s=>n.push(s)):n.push(e["@context"]),Array.isArray(e.credentialSchema)&&e.credentialSchema.length>0?e.credentialSchema.forEach(s=>n.push(s.id)):e.credentialSchema&&n.push(e.credentialSchema.id),r===Yb.PEVersion.v1&&(Array.isArray(e.type)?e.type.forEach(s=>n.push(s)):e.type&&n.push(e.type))),il.CredentialMapper.isSdJwtDecodedCredential(e)&&r===Yb.PEVersion.v1&&n.push(e.decodedPayload.vct),n}createSuccessResultObject(e,r,n,s){let i=this.createResult(n,s);return i.status=Lm.Status.INFO,i.message=Qb.default.URI_EVALUATION_PASSED,i.payload={format:e.format,vcContext:il.CredentialMapper.isW3cCredential(e.credential)?e.credential["@context"]:void 0,vcCredentialSchema:il.CredentialMapper.isW3cCredential(e.credential)?e.credential.credentialSchema:void 0,inputDescriptorsUris:r},i}createErrorResultObject(e,r,n,s){let i=this.createResult(n,s);return i.status=Lm.Status.ERROR,i.message=Qb.default.URI_EVALUATION_DIDNT_PASS,i.payload={format:e.format,vcContext:il.CredentialMapper.isW3cCredential(e.credential)?e.credential["@context"]:void 0,vcCredentialSchema:il.CredentialMapper.isW3cCredential(e.credential)?e.credential.credentialSchema:void 0,inputDescriptorsUris:r},i}createWarnResultObject(e,r){let n=this.createResult(e,r);return n.status=Lm.Status.WARN,n.message=Qb.default.URI_EVALUATION_DIDNT_PASS,n.payload=Qb.default.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED,n}createResult(e,r){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Lm.Status.INFO,message:void 0}}static containsHashlink(e){return!(this.matchAll(e,t.HASHLINK_QUERY_URL_REGEX).next().done&&this.matchAll(e,t.HASHLINK_URL_ENCODED_REGEX).next().done)}};Cf.UriEvaluationHandler=xf;xf.matchAll=MD();xf.HASHLINK_URL_ENCODED_REGEX=/hl:[a-zA-Z0-9]+:[a-zA-Z0-9]+/g;xf.HASHLINK_QUERY_URL_REGEX=/https*?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)(hl=[a-zA-Z0-9]+)/g});var BU=v(Pf=>{"use strict";var xge=Pf&&Pf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.FormatRestrictionEvaluationHandler=void 0;var TU=Br(),IU=xge(as()),Cge=ki(),qC=class extends Cge.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"FormatRestrictionEvaluation"}handle(e,r){let n=this.client.restrictToFormats?Object.keys(this.client.restrictToFormats):void 0;e.input_descriptors.forEach((s,i)=>{r.forEach((o,a)=>{let c="format"in s&&s.format?Object.keys(s.format):[o.format],u=n??c;"format"in s&&s.format&&n!==void 0&&(u=Object.keys(s.format).filter(l=>n.includes(l))),u.includes(o.format)?this.getResults().push(this.generateSuccessResult(i,`$[${a}]`,o,`${o.format} is allowed from ${JSON.stringify(u)}`)):this.getResults().push(this.generateErrorResult(i,`$[${a}]`,o))})}),this.updatePresentationSubmission(e)}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:TU.Status.ERROR,message:IU.default.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:TU.Status.INFO,message:s??IU.default.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}};Pf.FormatRestrictionEvaluationHandler=qC});var jU=v(Of=>{"use strict";var Pge=Of&&Of.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Of,"__esModule",{value:!0});Of.DIDRestrictionEvaluationHandler=void 0;var kU=os(),RU=Br(),$U=Pge(as()),Oge=Ii(),Fge=ki(),LC=class extends Fge.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"DIDRestrictionEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{let a=this.getIssuerIdFromWrappedVerifiableCredential(i);!this.client.hasRestrictToDIDMethods()||!a||(0,Oge.isRestrictedDID)(a,this.client.restrictToDIDMethods)||!a.toLowerCase().startsWith("did:")?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${a} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(e)}getIssuerIdFromWrappedVerifiableCredential(e){if(kU.CredentialMapper.isW3cCredential(e.credential))return typeof e.credential.issuer=="object"?e.credential.issuer.id:e.credential.issuer;if(kU.CredentialMapper.isSdJwtDecodedCredential(e.credential))return e.credential.decodedPayload.iss;throw new Error("Unsupported credential type")}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:RU.Status.ERROR,message:$U.default.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:RU.Status.INFO,message:s??$U.default.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}};Of.DIDRestrictionEvaluationHandler=LC});var NU=v(zr=>{"use strict";var Tge=zr&&zr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Mi=zr&&zr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Tge(e,t,r)};Object.defineProperty(zr,"__esModule",{value:!0});Mi(ki(),zr);Mi(J9(),zr);Mi(NL(),zr);Mi(pU(),zr);Mi(hU(),zr);Mi(yU(),zr);Mi(gU(),zr);Mi(bU(),zr);Mi(SU(),zr);Mi(FU(),zr);Mi(BU(),zr);Mi(jU(),zr)});var KC=v(Ff=>{"use strict";var Ige=Ff&&Ff.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ff,"__esModule",{value:!0});Ff.EvaluationClient=void 0;var Bge=os(),kge=Br(),Rge=Ige(as()),UC=Ii(),uo=NU(),MU=[Bge.IProofType.BbsBlsSignatureProof2020,"DataIntegrityProof.anoncreds-2023"],VC=class{constructor(){this.failed_catched={tag:"root",status:kge.Status.ERROR,message:Rge.default.UNKNOWN_EXCEPTION,stacktrace:""},this._results=[],this._wrappedVcs=[],this._presentationSubmission={},this._dids=[],this._limitDisclosureSignatureSuites=MU,this._restrictToDIDMethods=[],this._generatePresentationSubmission=!0}evaluate(e,r,n){this._restrictToDIDMethods=n?.restrictToDIDMethods?(0,UC.uniformDIDMethods)(n?.restrictToDIDMethods):[],this._dids=n?.holderDIDs?(0,UC.filterToRestrictedDIDs)(n.holderDIDs,this._restrictToDIDMethods):[],this._limitDisclosureSignatureSuites=n?.limitDisclosureSignatureSuites,this._restrictToFormats=n?.restrictToFormats,this._generatePresentationSubmission=n?.generatePresentationSubmission!==void 0?n.generatePresentationSubmission:!0,n?.presentationSubmission&&(this._presentationSubmission=n.presentationSubmission);let s=this.initEvaluationHandlers();for(s?.handle(e,r);s?.hasNext();){s=s.getNext();try{s?.handle(e,r)}catch(i){throw this.failed_catched.message+=i.message,this.failed_catched.stacktrace=i,this.failed_catched}}}get results(){return this._results}get dids(){return this._dids}set dids(e){this._dids=e}assertPresentationSubmission(){if(typeof this._presentationSubmission=="string"&&(console.log("Presentation submission present, but as string not object. External calls did not follow contract. Correcting"),this._presentationSubmission=JSON.parse(this._presentationSubmission)),!this.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0))throw Error("No presentation submission present, but required option was set")}get generatePresentationSubmission(){return this._generatePresentationSubmission}set generatePresentationSubmission(e){this._generatePresentationSubmission=e}get presentationSubmission(){return this._presentationSubmission}set presentationSubmission(e){this._presentationSubmission=e}get wrappedVcs(){return this._wrappedVcs}set wrappedVcs(e){this._wrappedVcs=e}get limitDisclosureSignatureSuites(){return this._limitDisclosureSignatureSuites||MU}set limitDisclosureSignatureSuites(e){this._limitDisclosureSignatureSuites=e}get restrictToDIDMethods(){return this._restrictToDIDMethods}set restrictToDIDMethods(e){this._restrictToDIDMethods=(0,UC.uniformDIDMethods)(e)}hasRestrictToDIDMethods(){return this.restrictToDIDMethods&&this.restrictToDIDMethods.length>0}get restrictToFormats(){return this._restrictToFormats}set restrictToFormats(e){this._restrictToFormats=e}initEvaluationHandlers(){let e=new uo.UriEvaluationHandler(this);return e.setNext(new uo.DIDRestrictionEvaluationHandler(this)).setNext(new uo.FormatRestrictionEvaluationHandler(this)).setNext(new uo.InputDescriptorFilterEvaluationHandler(this)).setNext(new uo.PredicateRelatedFieldEvaluationHandler(this)).setNext(new uo.LimitDisclosureEvaluationHandler(this)).setNext(new uo.SubjectIsIssuerEvaluationHandler(this)).setNext(new uo.SubjectIsHolderEvaluationHandler(this)).setNext(new uo.SameSubjectEvaluationHandler(this)).setNext(new uo.MarkForSubmissionEvaluationHandler(this)),e}};Ff.EvaluationClient=VC});var UU=v(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});Tf.KeyEncoding=Tf.PresentationSubmissionLocation=void 0;var qU;(function(t){t[t.EXTERNAL=0]="EXTERNAL",t[t.PRESENTATION=1]="PRESENTATION"})(qU||(Tf.PresentationSubmissionLocation=qU={}));var LU;(function(t){t.Jwk="Jwk",t.Base58="Base58",t.Hex="Hex",t.Multibase="Multibase"})(LU||(Tf.KeyEncoding=LU={}))});var If=v(sl=>{"use strict";var $ge=sl&&sl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jge=sl&&sl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$ge(e,t,r)};Object.defineProperty(sl,"__esModule",{value:!0});jge(UU(),sl)});var KU=v(t_=>{"use strict";Object.defineProperty(t_,"__esModule",{value:!0});t_.EvaluationClientWrapper=void 0;var e_=Ti(),Bf=ca(),Nge=os(),Ue=Br(),VU=If(),zC=Ii(),Mge=KC(),HC=class{constructor(){this._client=new Mge.EvaluationClient}getEvaluationClient(){return this._client}selectFrom(e,r,n){var s;let i;this._client.evaluate(e,r,n);let o=[...this.formatNotInfo(Ue.Status.WARN)],a=[...this.formatNotInfo(Ue.Status.ERROR)];if(e.submission_requirements){let c=this._client.results.filter(h=>h.evaluator==="MarkForSubmissionEvaluation"&&h.payload.group&&h.status!==Ue.Status.ERROR),u=Array.from(new Set(c)),l;try{l=this.matchSubmissionRequirements(e,e.submission_requirements,u)}catch(h){let y={status:Ue.Status.ERROR,message:JSON.stringify(h),tag:"matchSubmissionRequirements"};return{errors:a?[...a,y]:[y],warnings:o,areRequiredCredentialsPresent:Ue.Status.ERROR}}let p=this.extractMatches(l).map(h=>e_.JSONPath.nodes(this._client.wrappedVcs.map(y=>y.original),h)[0].value),f=this.determineAreRequiredCredentialsPresent(e,l);i={errors:f===Ue.Status.INFO?[]:a,matches:[...l],areRequiredCredentialsPresent:f,verifiableCredential:p,warnings:o}}else{let c=this._client.results.filter(l=>l.evaluator==="MarkForSubmissionEvaluation"&&l.status!==Ue.Status.ERROR);if(this.checkWithoutSubmissionRequirements(c,e).length)return{errors:a,matches:[],areRequiredCredentialsPresent:Ue.Status.ERROR,verifiableCredential:r.map(l=>l.original),warnings:o};{let l=this.matchWithoutSubmissionRequirements(c,e),p=this.extractMatches(l).map(f=>e_.JSONPath.nodes(this._client.wrappedVcs.map(h=>h.original),f)[0].value);i={errors:[],matches:[...l],areRequiredCredentialsPresent:Ue.Status.INFO,verifiableCredential:p,warnings:o}}}return this.fillSelectableCredentialsToVerifiableCredentialsMapping(i,r),i.areRequiredCredentialsPresent=this.determineAreRequiredCredentialsPresent(e,i?.matches),this.remapMatches(r.map(c=>c.original),i.matches,i?.verifiableCredential),(s=i.matches)===null||s===void 0||s.forEach(c=>{this.updateSubmissionRequirementMatchPathToAlias(c,"verifiableCredential")}),i.areRequiredCredentialsPresent===Ue.Status.INFO?i.errors=[]:(i.errors=a,i.warnings=o,i.verifiableCredential=r.map(c=>c.original)),i}remapMatches(e,r,n){r?.forEach(s=>{s.from_nested?this.remapMatches(e,s.from_nested,n):(s.vc_path.forEach((i,o,a)=>{let c=e_.JSONPath.query(e,i)[0],u=n?.findIndex(l=>JSON.stringify(l)===JSON.stringify(c));if(u===-1)throw new Error(`The index of the VerifiableCredential in your current call can't be found in your previously submitted credentials. Are you trying to send a new Credential?
verifiableCredential: ${c}`);a[o]=`$[${u}]`}),s.name)})}extractMatches(e){let r=[];return e.forEach(n=>{r.push(...n.vc_path),n.from_nested&&r.push(...this.extractMatches(n.from_nested))}),Array.from(new Set(r))}checkWithoutSubmissionRequirements(e,r){let n=[];if(!r.input_descriptors)return[];if(!e.length)return[{input_descriptor_path:"",evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:Ue.Status.ERROR,payload:"Not all the InputDescriptors are addressed"}];let s=r.input_descriptors,i=zC.ObjectUtils.getDistinctFieldInObject(e,"input_descriptor_path");if(i.length!==s.length){let o=i.map(a=>zC.JsonPathUtils.extractInputField(r,[a])[0].value).map(a=>a.id);for(let a=0;a<r.input_descriptors.length;a++)o.indexOf(r.input_descriptors[a].id)==-1&&n.push({input_descriptor_path:`$.input_descriptors[${a}]`,evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:Ue.Status.ERROR,payload:"Not all the InputDescriptors are addressed"})}return n}matchSubmissionRequirements(e,r,n){let s=[];for(let i of r){let o={name:e.name||e.id,rule:i.rule,vc_path:[]};if(i.from&&(o.from=i.from),i.min&&(o.min=i.min),i.max&&(o.max=i.max),i.count&&(o.count=i.count),i.from){let a=this.mapMatchingDescriptors(e,i,n);a&&(o.vc_path.push(...a.vc_path),o.name=a.name,s.push(o))}else if(i.from_nested)try{o.from_nested=this.matchSubmissionRequirements(e,i.from_nested,n),s.push(o)}catch(a){throw new Error(`Error in handling value of from_nested: ${i.from_nested}: err: ${a}`)}else throw new Error("Invalid SubmissionRequirement object: Must contain either 'from' or 'from_nested'")}return s}matchWithoutSubmissionRequirements(e,r){let n=[],s=this.createIdToVcMap(e);for(let[i,o]of s.entries())if(!(!o||!o.length))for(let a of o){let c=zC.JsonPathUtils.extractInputField(r,[i]);c.length&&n.push({name:c[0].value.name||c[0].value.id,rule:Bf.Rules.All,vc_path:[a]})}return this.removeDuplicateSubmissionRequirementMatches(n)}mapMatchingDescriptors(e,r,n){var s;let i={rule:r.rule,vc_path:[]};if(r?.from){i.from=r.from;for(let o of n){let a=e_.JSONPath.query(e,o.input_descriptor_path)[0];a.group&&a.group.indexOf(r.from)===-1||(i.name=a.name||a.id,o.payload.group.includes(r.from)&&((s=i.vc_path)===null||s===void 0?void 0:s.indexOf(o.verifiable_credential_path))===-1&&i.vc_path.push(o.verifiable_credential_path))}}return i}evaluate(e,r,n){var s,i,o,a;this._client.evaluate(e,r,n);let c={areRequiredCredentialsPresent:Ue.Status.INFO,verifiableCredential:r.map(u=>u.original)};if(c.warnings=this.formatNotInfo(Ue.Status.WARN),c.errors=this.formatNotInfo(Ue.Status.ERROR),this._client.assertPresentationSubmission(),!((s=this._client.presentationSubmission)===null||s===void 0)&&s.descriptor_map.length){let u=(i=this._client.presentationSubmission)===null||i===void 0?void 0:i.descriptor_map.length;for(let l=0;l<u;l++)this._client.presentationSubmission.descriptor_map[l]&&this._client.presentationSubmission.descriptor_map.push(this._client.presentationSubmission.descriptor_map[l]);this._client.presentationSubmission.descriptor_map.splice(0,u),c.value=JSON.parse(JSON.stringify(this._client.presentationSubmission))}return this._client.generatePresentationSubmission&&this.updatePresentationSubmissionPathToVpPath(c.value),c.verifiableCredential=this._client.wrappedVcs.map(u=>u.original),c.areRequiredCredentialsPresent=!((a=(o=c.value)===null||o===void 0?void 0:o.descriptor_map)===null||a===void 0)&&a.length?Ue.Status.INFO:Ue.Status.ERROR,c}formatNotInfo(e){return this._client.results.filter(r=>r.status===e).map(r=>{let n=r.verifiable_credential_path.substring(1);return{tag:r.evaluator,status:r.status,message:`${r.message}: ${r.input_descriptor_path}: $.verifiableCredential${n}`}})}submissionFrom(e,r,n){if(!this._client.results.length)throw Error("You need to call evaluate() before pex.presentationFrom()");if(!this._client.generatePresentationSubmission)return this._client.presentationSubmission;if(e.submission_requirements){let o=this._client.results.filter(p=>p.evaluator==="MarkForSubmissionEvaluation"&&p.payload.group&&p.status!==Ue.Status.ERROR),[a,c]=this.matchUserSelectedVcs(o,r),u=new Map;"input_descriptors"in e&&e.input_descriptors.forEach(p=>{p.group&&p.group.forEach(f=>{u.has(f)?u.set(f,u.get(f)+1):u.set(f,1)})});let l=this.evaluateRequirements(e.submission_requirements,a,u,0),d=c.filter(p=>l[1].find(f=>f.verifiable_credential_path===p[1]));return this.updatePresentationSubmission(d),this.updatePresentationSubmissionPathToVpPath(),n?.presentationSubmissionLocation===VU.PresentationSubmissionLocation.EXTERNAL&&this.updatePresentationSubmissionToExternal(),this._client.presentationSubmission}let s=this._client.results.filter(o=>o.evaluator==="MarkForSubmissionEvaluation"&&o.status!==Ue.Status.ERROR),i=this.matchUserSelectedVcs(s,r);return this.updatePresentationSubmission(i[1]),this.updatePresentationSubmissionPathToVpPath(),n?.presentationSubmissionLocation===VU.PresentationSubmissionLocation.EXTERNAL&&this.updatePresentationSubmissionToExternal(),this._client.presentationSubmission}updatePresentationSubmission(e){this._client.generatePresentationSubmission&&(this._client.presentationSubmission.descriptor_map=this._client.presentationSubmission.descriptor_map.filter(r=>e.find(n=>n[0]===r.path)).map(r=>{let n=e.find(s=>s[0]===r.path);return n&&(r.path=n[1]),r}))}updatePresentationSubmissionToExternal(){let e=this._client.presentationSubmission.descriptor_map;this._client.presentationSubmission.descriptor_map=e.map(r=>{if(r.path_nested)return r;if(r.format==="vc+sd-jwt")return r;let n=r.format,s=Object.assign({},r);return s.path_nested=Object.assign({},r),s.path="$",n.startsWith("ldp_")?s.format="ldp_vp":n.startsWith("di_")?s.format="di_vp":n==="jwt_vc"?(s.format="jwt_vp",s.path_nested.path=s.path_nested.path.replace("$.verifiableCredential[","$.vp.verifiableCredential[")):n==="jwt_vc_json"&&(s.format="jwt_vp_json",s.path_nested.path=s.path_nested.path.replace("$.verifiableCredential[","$.vp.verifiableCredential[")),s})}matchUserSelectedVcs(e,r){let n=r.map((o,a)=>[a,JSON.stringify(o.original)]),s=this._client.wrappedVcs.map((o,a)=>[a,JSON.stringify(o.original)]),i=[];return n.forEach((o,a)=>{s.forEach((c,u)=>{c[1]===o[1]&&i.push([`$[${u}]`,`$[${a}]`])})}),e=e.filter(o=>i.find(a=>a[0]===o.verifiable_credential_path)).map(o=>{let a=i.find(c=>c[0]===o.verifiable_credential_path);return a&&(o.verifiable_credential_path=a[1]),o}),[e,i]}evaluateRequirements(e,r,n,s){let i=0,o=[];for(let a of e)if(a.from){if(a.rule===Bf.Rules.All){let[c,u]=this.countMatchingInputDescriptors(a,r);if(c!==(n.get(a.from)||0))throw Error(`Not all input descriptors are members of group ${a.from}`);i++,o.push(...u)}else if(a.rule===Bf.Rules.Pick){let[c,u]=this.countMatchingInputDescriptors(a,r);try{this.handleCount(a,c,s),i++}catch(l){if(s===0)throw l}o.push(...u)}}else if(a.from_nested){let[c,u]=this.evaluateRequirements(a.from_nested,r,n,++s);i+=c,o.push(...u),this.handleCount(a,c,s)}return[i,o]}countMatchingInputDescriptors(e,r){let n=0,s=[];for(let i of r)i.payload.group.includes(e.from)&&(s.push(i),n++);return[n,s]}handleCount(e,r,n){if(e.count&&r!==e.count)throw Error(`Count: expected: ${e.count} actual: ${r} at level: ${n}`);if(e.min&&r<e.min)throw Error(`Min: expected: ${e.min} actual: ${r} at level: ${n}`);if(e.max&&r>e.max)throw Error(`Max: expected: ${e.max} actual: ${r} at level: ${n}`)}removeDuplicateSubmissionRequirementMatches(e){return e.filter((r,n)=>{let s=JSON.stringify(r);return n===e.findIndex(i=>JSON.stringify(i)===s)})}fillSelectableCredentialsToVerifiableCredentialsMapping(e,r){var n;e&&((n=e.verifiableCredential)===null||n===void 0||n.forEach(s=>{var i;let o=r.findIndex(a=>Nge.CredentialMapper.areOriginalVerifiableCredentialsEqual(a.original,s));if(o===-1)throw new Error("index is not right");(i=e.vcIndexes)===null||i===void 0||i.push(o)}))}determineAreRequiredCredentialsPresent(e,r,n){if(!r||!r.length)return Ue.Status.ERROR;let s=r.map(i=>this.determineSubmissionRequirementStatus(e,i));if(n){if(n.rule===Bf.Rules.All&&s.includes(Ue.Status.ERROR))return Ue.Status.ERROR;let i=s.filter(o=>o!==Ue.Status.ERROR).length;if(n.count)return n.count>i?Ue.Status.ERROR:n.count<i?Ue.Status.WARN:Ue.Status.INFO;if(n.min&&n.min>i)return Ue.Status.ERROR;if(n.max&&n.max<i)return Ue.Status.WARN}else return s.includes(Ue.Status.ERROR)?Ue.Status.ERROR:s.includes(Ue.Status.WARN)?Ue.Status.WARN:Ue.Status.INFO;return Ue.Status.INFO}determineSubmissionRequirementStatus(e,r){if(r.from&&r.from_nested)throw new Error("Invalid submission_requirement object: MUST contain either a from or from_nested property.");if(!r.from&&!r.from_nested&&r.vc_path.length!==1)return Ue.Status.ERROR;if(r.from){let n=this.countGroupIDs(e.input_descriptors,r.from);switch(r.rule){case Bf.Rules.All:return r.vc_path.length===n?Ue.Status.INFO:Ue.Status.WARN;case Bf.Rules.Pick:return this.getPickRuleStatus(r);default:return Ue.Status.ERROR}}else if(r.from_nested)return this.determineAreRequiredCredentialsPresent(e,r.from_nested,r);return Ue.Status.INFO}getPickRuleStatus(e){return e.vc_path.length===0?Ue.Status.ERROR:e.count&&e.vc_path.length!==e.count?e.vc_path.length>e.count?Ue.Status.WARN:Ue.Status.ERROR:e.min&&e.vc_path.length<e.min?Ue.Status.ERROR:e.max&&e.vc_path.length>e.max?Ue.Status.WARN:Ue.Status.INFO}updateSubmissionRequirementMatchPathToAlias(e,r){let n=[];e.vc_path.forEach(s=>{n.push(s.replace("$","$."+r))}),e.vc_path=n,e.from_nested&&e.from_nested.forEach(s=>{this.updateSubmissionRequirementMatchPathToAlias(s,r)})}updatePresentationSubmissionPathToVpPath(e){let r=e?e.descriptor_map:this._client.generatePresentationSubmission?this._client.presentationSubmission.descriptor_map:void 0;r?.forEach(n=>{n.format==="vc+sd-jwt"?n.path="$":this.replacePathWithAlias(n,"verifiableCredential")})}replacePathWithAlias(e,r){e.path=e.path.replace("$[",`$.${r}[`),e.path_nested&&this.replacePathWithAlias(e.path_nested,r)}createIdToVcMap(e){let r=new Map,n=new Map;for(let s=0;s<e.length;s++){let i=e[s].input_descriptor_path;if(n.has(i)){let o=n.get(i);o&&o.push(e[s])}else n.set(i,[e[s]])}for(let[s,i]of n.entries()){let o=[];for(let a=0;a<i.length;a++)o.indexOf(i[a].verifiable_credential_path)===-1&&o.push(i[a].verifiable_credential_path);r.set(s,o)}return r}countGroupIDs(e,r){let n=0;for(let s of e)s.group&&s.group.includes(r)&&n++;return n}};t_.EvaluationClientWrapper=HC});var Um=v(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.HandlerCheckResult=Au.EvaluationClientWrapper=Au.EvaluationClient=void 0;var qge=ok();Object.defineProperty(Au,"HandlerCheckResult",{enumerable:!0,get:function(){return qge.HandlerCheckResult}});var Lge=KC();Object.defineProperty(Au,"EvaluationClient",{enumerable:!0,get:function(){return Lge.EvaluationClient}});var Uge=KU();Object.defineProperty(Au,"EvaluationClientWrapper",{enumerable:!0,get:function(){return Uge.EvaluationClientWrapper}})});var zU=v((U5e,ZC)=>{"use strict";ZC.exports=GC;ZC.exports.default=GC;var Dr={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberStringBoolean"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},Vge=Object.prototype.hasOwnProperty,WC={type:["number","string","boolean"]};function r_(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"&&typeof t!="boolean"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:WC.type},message:"must be number,string,boolean",schema:WC.type,parentSchema:WC,data:t};i===null?i=[a]:i.push(a),o++}return r_.errors=i,o===0}var JC={type:["number","string"]};function gn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:JC.type},message:"must be number,string",schema:JC.type,parentSchema:JC,data:t};i===null?i=[a]:i.push(a),o++}return gn.errors=i,o===0}function n_(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:Dr.required,parentSchema:Dr,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!Vge.call(Dr.properties,a)){let c={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Dr,data:t};i===null?i=[c]:i.push(c),o++}if(t.const!==void 0&&(r_(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?r_.errors:i.concat(r_.errors),o=i.length)),t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let c=a.length;for(let u=0;u<c;u++)gn(a[u],{instancePath:e+"/enum/"+u,parentData:a,parentDataProperty:u,rootData:s})||(i=i===null?gn.errors:i.concat(gn.errors),o=i.length)}else{let c={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Dr.properties.enum.type,parentSchema:Dr.properties.enum,data:a};i===null?i=[c]:i.push(c),o++}}if(t.exclusiveMaximum!==void 0&&(gn(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?gn.errors:i.concat(gn.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(gn(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?gn.errors:i.concat(gn.errors),o=i.length)),t.format!==void 0){let a=t.format;if(typeof a!="string"){let c={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Dr.properties.format.type,parentSchema:Dr.properties.format,data:a};i===null?i=[c]:i.push(c),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(typeof a!="number"){let c={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Dr.properties.maxLength.type,parentSchema:Dr.properties.maxLength,data:a};i===null?i=[c]:i.push(c),o++}}if(t.maximum!==void 0&&(gn(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?gn.errors:i.concat(gn.errors),o=i.length)),t.minLength!==void 0){let a=t.minLength;if(typeof a!="number"){let c={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Dr.properties.minLength.type,parentSchema:Dr.properties.minLength,data:a};i===null?i=[c]:i.push(c),o++}}if(t.minimum!==void 0&&(gn(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?gn.errors:i.concat(gn.errors),o=i.length)),t.not!==void 0){let a=t.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){let c={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Dr.properties.not.type,parentSchema:Dr.properties.not,data:a};i===null?i=[c]:i.push(c),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let c={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Dr.properties.pattern.type,parentSchema:Dr.properties.pattern,data:a};i===null?i=[c]:i.push(c),o++}}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let c={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Dr.properties.type.type,parentSchema:Dr.properties.type,data:a};i===null?i=[c]:i.push(c),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Dr.type,parentSchema:Dr,data:t};i===null?i=[a]:i.push(a),o++}return n_.errors=i,o===0}function GC(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return n_(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?n_.errors:i.concat(n_.errors),o=i.length),GC.errors=i,o===0}});var HU=v((V5e,eP)=>{"use strict";eP.exports=QC;eP.exports.default=QC;var Tt={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberStringBoolean"},contains:{$ref:"#/definitions/FilterV2"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},formatExclusiveMaximum:{type:"string"},formatExclusiveMinimum:{type:"string"},formatMaximum:{type:"string"},formatMinimum:{type:"string"},items:{anyOf:[{$ref:"#/definitions/FilterV2"},{items:{$ref:"#/definitions/FilterV2"},minItems:1,type:"array"}]},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},type:"object"},Kge=Object.prototype.hasOwnProperty,XC={type:["number","string","boolean"]};function i_(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"&&typeof t!="boolean"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:XC.type},message:"must be number,string,boolean",schema:XC.type,parentSchema:XC,data:t};i===null?i=[a]:i.push(a),o++}return i_.errors=i,o===0}var YC={type:["number","string"]};function vn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:YC.type},message:"must be number,string",schema:YC.type,parentSchema:YC,data:t};i===null?i=[a]:i.push(a),o++}return vn.errors=i,o===0}var da={validate:Vm};function Vm(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let c in t)if(!Kge.call(Tt.properties,c)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Tt,data:t};i===null?i=[u]:i.push(u),o++}if(t.const!==void 0&&(i_(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?i_.errors:i.concat(i_.errors),o=i.length)),t.contains!==void 0&&(da.validate(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?da.validate.errors:i.concat(da.validate.errors),o=i.length)),t.enum!==void 0){let c=t.enum;if(Array.isArray(c)){let u=c.length;for(let l=0;l<u;l++)vn(c[l],{instancePath:e+"/enum/"+l,parentData:c,parentDataProperty:l,rootData:s})||(i=i===null?vn.errors:i.concat(vn.errors),o=i.length)}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Tt.properties.enum.type,parentSchema:Tt.properties.enum,data:c};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0&&(vn(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?vn.errors:i.concat(vn.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(vn(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?vn.errors:i.concat(vn.errors),o=i.length)),t.format!==void 0){let c=t.format;if(typeof c!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Tt.properties.format.type,parentSchema:Tt.properties.format,data:c};i===null?i=[u]:i.push(u),o++}}if(t.formatExclusiveMaximum!==void 0){let c=t.formatExclusiveMaximum;if(typeof c!="string"){let u={instancePath:e+"/formatExclusiveMaximum",schemaPath:"#/properties/formatExclusiveMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Tt.properties.formatExclusiveMaximum.type,parentSchema:Tt.properties.formatExclusiveMaximum,data:c};i===null?i=[u]:i.push(u),o++}}if(t.formatExclusiveMinimum!==void 0){let c=t.formatExclusiveMinimum;if(typeof c!="string"){let u={instancePath:e+"/formatExclusiveMinimum",schemaPath:"#/properties/formatExclusiveMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Tt.properties.formatExclusiveMinimum.type,parentSchema:Tt.properties.formatExclusiveMinimum,data:c};i===null?i=[u]:i.push(u),o++}}if(t.formatMaximum!==void 0){let c=t.formatMaximum;if(typeof c!="string"){let u={instancePath:e+"/formatMaximum",schemaPath:"#/properties/formatMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Tt.properties.formatMaximum.type,parentSchema:Tt.properties.formatMaximum,data:c};i===null?i=[u]:i.push(u),o++}}if(t.formatMinimum!==void 0){let c=t.formatMinimum;if(typeof c!="string"){let u={instancePath:e+"/formatMinimum",schemaPath:"#/properties/formatMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Tt.properties.formatMinimum.type,parentSchema:Tt.properties.formatMinimum,data:c};i===null?i=[u]:i.push(u),o++}}if(t.items!==void 0){let c=t.items,u=o,l=!1,d=o;da.validate(c,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?da.validate.errors:i.concat(da.validate.errors),o=i.length);var a=d===o;if(l=l||a,!l){let p=o;if(Array.isArray(c)){if(c.length<1){let y={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Tt.properties.items.anyOf[1],data:c};i===null?i=[y]:i.push(y),o++}let h=c.length;for(let y=0;y<h;y++)da.validate(c[y],{instancePath:e+"/items/"+y,parentData:c,parentDataProperty:y,rootData:s})||(i=i===null?da.validate.errors:i.concat(da.validate.errors),o=i.length)}else{let h={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Tt.properties.items.anyOf[1].type,parentSchema:Tt.properties.items.anyOf[1],data:c};i===null?i=[h]:i.push(h),o++}var a=p===o;l=l||a}if(l)o=u,i!==null&&(u?i.length=u:i=null);else{let p={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:Tt.properties.items.anyOf,parentSchema:Tt.properties.items,data:c};i===null?i=[p]:i.push(p),o++}}if(t.maxLength!==void 0){let c=t.maxLength;if(typeof c!="number"){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Tt.properties.maxLength.type,parentSchema:Tt.properties.maxLength,data:c};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0&&(vn(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?vn.errors:i.concat(vn.errors),o=i.length)),t.minLength!==void 0){let c=t.minLength;if(typeof c!="number"){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Tt.properties.minLength.type,parentSchema:Tt.properties.minLength,data:c};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0&&(vn(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?vn.errors:i.concat(vn.errors),o=i.length)),t.not!==void 0){let c=t.not;if(!(c&&typeof c=="object"&&!Array.isArray(c))){let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Tt.properties.not.type,parentSchema:Tt.properties.not,data:c};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let c=t.pattern;if(typeof c!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Tt.properties.pattern.type,parentSchema:Tt.properties.pattern,data:c};i===null?i=[u]:i.push(u),o++}}if(t.type!==void 0){let c=t.type;if(typeof c!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Tt.properties.type.type,parentSchema:Tt.properties.type,data:c};i===null?i=[u]:i.push(u),o++}}}else{let c={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Tt.type,parentSchema:Tt,data:t};i===null?i=[c]:i.push(c),o++}return Vm.errors=i,o===0}function QC(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return Vm(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?Vm.errors:i.concat(Vm.errors),o=i.length),QC.errors=i,o===0}});var bs=v(s_=>{"use strict";Object.defineProperty(s_,"__esModule",{value:!0});s_.ValidationBundler=void 0;var WU=Br(),tP=class{constructor(e,r){this.parentTag=e,this.myTag=r}getTag(){return this.parentTag!=null?this.parentTag+"."+this.myTag:this.myTag}toChecked(e){return new WU.Checked(this.getTag(),WU.Status.ERROR,e)}};s_.ValidationBundler=tP});var nP=v(kf=>{"use strict";var GU=kf&&kf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kf,"__esModule",{value:!0});kf.FieldsVB=void 0;var zge=Ti(),JU=ca(),Hge=GU(zU()),Wge=GU(HU()),Jge=bs(),rP=class t extends Jge.ValidationBundler{constructor(e){super(e,"fields"),this.mustHaveValidJsonPathsMsg='field object "path" property must contain array of valid json paths',this.pathObjMustHaveValidJsonPathMsg='field object "path" property must contain valid json paths.',this.filterMustBeValidJsonSchemaMsg='field object "filter" property must be valid json schema',this.filterIsMustInPresenceOfPredicateMsg='field object must have a "filter" property if "predicate" is present',this.filterIsNotValidJsonSchemaDescriptorMsg='could not parse "filter" object as a valid json schema descriptor.',this.purposeShouldBeANonEmptyStringMsg="purpose should be a non empty string",this.shouldBeKnownOptionMsg="Unknown predicate property"}getValidations(e){let r=[];if(e)for(let n=0;n<e.length;n++)r=[...r,...this.getValidationsFor(e[n],n)];return r}getValidationsFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:this.mustHaveValidJsonPaths(),message:this.mustHaveValidJsonPathsMsg},{tag:this.getMyTag(r),target:e,predicate:this.filterMustBeValidJsonSchema(),message:this.filterMustBeValidJsonSchemaMsg},{tag:this.getMyTag(r),target:e,predicate:this.filterIsMustInPresenceOfPredicate(),message:this.filterIsMustInPresenceOfPredicateMsg},{tag:this.getMyTag(r),target:e,predicate:n=>t.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeANonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>t.shouldBeKnownOption(n?.predicate),message:this.shouldBeKnownOptionMsg}]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}mustHaveValidJsonPaths(){return e=>e.path!=null&&e.path.length>0&&this._validateJsonPaths(e.path)}_validateJsonPaths(e){let r=[];if(e.forEach(n=>{try{zge.JSONPath.parse(n)}catch{r.push(n)}}),r.length>0)throw this.toChecked(this.pathObjMustHaveValidJsonPathMsg+" Got: "+JSON.stringify(r));return!0}filterMustBeValidJsonSchema(){return e=>this._validateFilter(e.filter)}_validateFilter(e){if(e==null)return!0;let r=!1;try{r=(0,Wge.default)(e),r||(r=(0,Hge.default)(e))}catch{throw this.toChecked(this.filterIsNotValidJsonSchemaDescriptorMsg+" Got "+JSON.stringify(e))}return r}filterIsMustInPresenceOfPredicate(){return e=>!(e.predicate!=null&&e.filter==null)}static optionalNonEmptyString(e){return e==null||e.length>0}static shouldBeKnownOption(e){return e==null||e==JU.Optionality.Required||e==JU.Optionality.Preferred}};kf.FieldsVB=rP});var a_=v(o_=>{"use strict";Object.defineProperty(o_,"__esModule",{value:!0});o_.ConstraintsVB=void 0;var fa=ca(),Gge=nP(),Zge=bs(),iP=class t extends Zge.ValidationBundler{constructor(e){super(e,"constraints"),this.disclosureLimitShouldHaveKnownValueMsg="limit_disclosure should have known value",this.statusShouldHaveKnownValueMsg="Unknown status property",this.statusDirectiveShouldHaveKnownValueMsg="status directive should have known value",this.subjectIsIssuerShouldBeKnownValueMsg="subject_is_issuer should be known value",this.fieldIdIsMandatoryMsg="field_id property is mandatory",this.fieldIdMustBeArrayOfStringsMsg="field_id property must be an array of strings",this.fieldIdMustCorrespondToFieldIdMsg="field_id must correspond to a present field object id property",this.directivePropertyIsMandatoryMsg="directive property is mandatory",this.oneOfTheKnownDirectivePropertiesMandatoryMsg="directive property must be one of [required, preferred]"}getValidations(e){let r=[];return e&&(r=[{tag:this.getTag(),target:e,predicate:n=>t.disclosureLimitShouldHaveKnownValue(n.limit_disclosure),message:this.disclosureLimitShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>t.statusShouldHaveKnownValue(n.statuses),message:this.statusShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:t.statusDirectiveShouldHaveKnownValue(),message:this.statusDirectiveShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>t.shouldBeKnownOption(n.is_holder),message:this.subjectIsIssuerShouldBeKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>this.fieldIdInSubjectMustCorrespondToFieldId(n,n.is_holder),message:this.fieldIdMustCorrespondToFieldIdMsg},{tag:this.getTag(),target:e,predicate:n=>this.fieldIdInSubjectMustCorrespondToFieldId(n,n.same_subject),message:this.fieldIdMustCorrespondToFieldIdMsg},...this.getSubjectsValidations(e?.is_holder),...this.getSubjectsValidations(e?.same_subject),...this.getFieldsValidations(e)]),r}getFieldsValidations(e){var r;return!((r=e?.fields)===null||r===void 0)&&r.length?new Gge.FieldsVB(this.getTag()).getValidations(e.fields):[]}static disclosureLimitShouldHaveKnownValue(e){return!e||e===fa.Optionality.Preferred||e===fa.Optionality.Required}static statusShouldHaveKnownValue(e){return e==null||e.active!=null||e.revoked!=null||e.suspended!=null}static statusDirectiveShouldHaveKnownValue(){return e=>{var r,n,s;return this.pdStatusShouldBeKnown((r=e?.statuses)===null||r===void 0?void 0:r.active)&&this.pdStatusShouldBeKnown((n=e?.statuses)===null||n===void 0?void 0:n.revoked)&&this.pdStatusShouldBeKnown((s=e?.statuses)===null||s===void 0?void 0:s.suspended)}}static pdStatusShouldBeKnown(e){return!e||e.directive===fa.Directives.Allowed||e.directive===fa.Directives.Disallowed||e.directive===fa.Directives.Required}static shouldBeKnownOption(e){return e?e.filter(r=>r.directive!==fa.Optionality.Preferred&&r.directive!==fa.Optionality.Required).length===0:!0}getSubjectsValidations(e){if(e){let r=[];for(let n=0;n<e.length;n++)r=[{tag:this.getMyTag(n),target:e[n],predicate:s=>Array.isArray(s.field_id),message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>!!s.field_id,message:this.fieldIdIsMandatoryMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.field_id.length===s.field_id.filter(i=>typeof i=="string").length,message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.directive!==void 0,message:this.directivePropertyIsMandatoryMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.directive===fa.Optionality.Preferred||s.directive===fa.Optionality.Required,message:this.oneOfTheKnownDirectivePropertiesMandatoryMsg}];return r}return[]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}fieldIdInSubjectMustCorrespondToFieldId(e,r){if(r){for(let n of r)for(let s of n.field_id)if(!t.isValidFieldId(e,s))return!1}return!0}static isValidFieldId(e,r){return e?.fields?e.fields.map(n=>n.id).includes(r):!1}};o_.ConstraintsVB=iP});var oP=v(u_=>{"use strict";Object.defineProperty(u_,"__esModule",{value:!0});u_.InputDescriptorsV1VB=void 0;var Km=Ii(),Xge=a_(),Yge=bs(),sP=class extends Yge.ValidationBundler{constructor(e){super(e,"input_descriptor"),this.idMustBeNonEmptyStringMsg="input descriptor id must be non-empty string",this.nameShouldBeNonEmptyStringMsg="input descriptor name should be non-empty string",this.purposeShouldBeNonEmptyStringMsg="input descriptor purpose should be non-empty string",this.shouldHaveValidSchemaURIMsg="schema should have valid URI"}getValidations(e){let r=[];return r.push({tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueIds(n),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueFieldsIds(n),message:"fields id must be unique"}),e.forEach((n,s)=>{r=[...r,...this.getValidationFor(n,s),...this.constraintsValidations(n,s)]}),r}getValidationFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:n=>Km.ObjectValidationUtils.nonEmptyString(n?.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:this.isValidSchema(),message:this.shouldHaveValidSchemaURIMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Km.ObjectValidationUtils.optionalNonEmptyString(n?.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Km.ObjectValidationUtils.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(e){let r=[],n=new Set,s=[];return e.map(i=>{var o;return(o=i.constraints)===null||o===void 0?void 0:o.fields}).forEach(i=>{i&&s.push(...i)}),s.forEach(i=>{i.id&&r.push(i.id)}),r.forEach(i=>n.add(i)),r.length===n.size}shouldHaveUniqueIds(e){let r=[],n=new Set;return e.forEach(s=>r.push(s.id)),r.forEach(s=>n.add(s)),r.length===n.size}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}isValidSchema(){return e=>e.schema.filter(r=>this.isAValidURI(r.uri)&&(r.required==null||typeof r.required=="boolean")).length>0}isAValidURI(e){if(e){if(!Km.ObjectValidationUtils.nonEmptyString(e))return!1}else return!1;if(e.startsWith("http://")||e.startsWith("https://"))try{new URL(e)}catch{return Km.ObjectValidationUtils.isValidDIDURI(e)}return!0}constraintsValidations(e,r){return e.constraints?new Xge.ConstraintsVB(this.getMyTag(r)).getValidations(e.constraints):[]}};u_.InputDescriptorsV1VB=sP});var cP=v(c_=>{"use strict";Object.defineProperty(c_,"__esModule",{value:!0});c_.InputDescriptorsV2VB=void 0;var aP=Ii(),Qge=a_(),eve=bs(),uP=class extends eve.ValidationBundler{constructor(e){super(e,"input_descriptor"),this.idMustBeNonEmptyStringMsg="input descriptor id must be non-empty string",this.nameShouldBeNonEmptyStringMsg="input descriptor name should be non-empty string",this.purposeShouldBeNonEmptyStringMsg="input descriptor purpose should be non-empty string"}getValidations(e){let r=[];return r.push({tag:this.getTag(),target:e,predicate:n=>this.shouldNotHaveSchema(n),message:"input descriptor should not have schema property"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueIds(n),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueFieldsIds(n),message:"fields id must be unique"}),e.forEach((n,s)=>{r=[...r,...this.getValidationFor(n,s),...this.constraintsValidations(n,s)]}),r}getValidationFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:n=>aP.ObjectValidationUtils.nonEmptyString(n?.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>aP.ObjectValidationUtils.optionalNonEmptyString(n?.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>aP.ObjectValidationUtils.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(e){let r=[],n=new Set,s=[];return e.map(i=>{var o;return(o=i.constraints)===null||o===void 0?void 0:o.fields}).forEach(i=>{i&&s.push(...i)}),s.forEach(i=>{i.id&&r.push(i.id)}),r.forEach(i=>n.add(i)),r.length===n.size}shouldHaveUniqueIds(e){let r=[],n=new Set;return e.forEach(s=>r.push(s.id)),r.forEach(s=>n.add(s)),r.length===n.size}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}constraintsValidations(e,r){return e.constraints?new Qge.ConstraintsVB(this.getMyTag(r)).getValidations(e.constraints):[]}shouldNotHaveSchema(e){let r=!1;return e.forEach(n=>{n.schema&&(r=!0)}),!r}};c_.InputDescriptorsV2VB=uP});var dP=v(l_=>{"use strict";Object.defineProperty(l_,"__esModule",{value:!0});l_.JwtAlgos=void 0;var lP=class{static getJwtAlgos(){return["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512","PS256","PS384","PS512","none","RSA1_5","RSA-OAEP","RSA-OAEP-256","A128KW","A192KW","A256KW","dir","ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"]}};l_.JwtAlgos=lP});var pP=v(d_=>{"use strict";Object.defineProperty(d_,"__esModule",{value:!0});d_.LdpTypes=void 0;var fP=class{static getLdpTypes(){return["Ed25519VerificationKey2018","Ed25519Signature2018","RsaSignature2018","EcdsaSecp256k1Signature2019","EcdsaSecp256k1RecoverySignature2020","JsonWebSignature2020","GpgSignature2020","JcsEd25519Signature2020","BbsBlsSignature2020","Bls12381G2Key2020","DataIntegrityProof"]}};d_.LdpTypes=fP});var p_=v(f_=>{"use strict";Object.defineProperty(f_,"__esModule",{value:!0});f_.SubmissionRequirementVB=void 0;var tve=bs(),hP=class t extends tve.ValidationBundler{constructor(e){super(e,"submission_requirements"),this.ruleIsMandatoryMsg="rule is a mandatory field",this.needsOneFromOrFromNestedMsg="needs exactly one of from or from_nested",this.fromNestedShouldBeArrayMsg="The value of the from_nested property MUST be an array",this.isCountPositiveIntMsg="count must be a practical positive number",this.isMinPositiveIntMsg="min must be a practical positive number",this.isMaxPositiveIntMsg="max must be a practical positive number",this.ruleShouldBePickOrAllMsg="rule should be either pick or all"}getValidations(e){let r=[];if(e!=null&&e.length>0)for(let n=0;n<e.length;n++)r=[...r,...this.getMyValidations(n,e),...this.getSubValidations(n,e)];return r}getMyValidations(e,r){return[{tag:this.getMyTag(e),target:r[e],predicate:t.ruleIsMandatory,message:this.ruleIsMandatoryMsg},{tag:this.getMyTag(e),target:r[e],predicate:t.needsOneFromOrFromNested,message:this.needsOneFromOrFromNestedMsg},{tag:this.getMyTag(e),target:r[e],predicate:t.fromNestedShouldBeArray,message:this.fromNestedShouldBeArrayMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isCountPositiveInt,message:this.isCountPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isMinPositiveInt,message:this.isMinPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isMaxPositiveInt,message:this.isMaxPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:t.ruleShouldBePickOrAll,message:this.ruleShouldBePickOrAllMsg}]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}getSubValidations(e,r){let n=r[e].from_nested;return n!=null?new t(this.getFromNestedTag(e)).getValidations(n):[]}getFromNestedTag(e){return this.getMyTag(e)+".from_nested"}isCountPositiveInt(e){return e.rule!=="pick"||e.count==null||0<e.count}isMinPositiveInt(e){return e.rule!=="pick"||e.min==null||0<=e.min}isMaxPositiveInt(e){return e.rule!=="pick"||e.max==null||0<e.max}static ruleIsMandatory(e){return e.rule!=null}static needsOneFromOrFromNested(e){return e.from==null!=(e.from_nested==null)}static fromNestedShouldBeArray(e){return e.from_nested==null||Array.isArray(e.from_nested)}static ruleShouldBePickOrAll(e){return e.rule==="pick"||e.rule==="all"}};f_.SubmissionRequirementVB=hP});var XU=v(Rf=>{"use strict";var rve=Rf&&Rf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rf,"__esModule",{value:!0});Rf.PresentationDefinitionV1VB=void 0;var nve=dP(),ive=pP(),sve=rve(QD()),ZU=oP(),ove=p_(),ave=bs(),mP=class t extends ave.ValidationBundler{constructor(e){super(e,"presentation_definition")}getValidations(e){return e.submission_requirements?[...this.myValidations(e),...new ZU.InputDescriptorsV1VB(this.myTag).getValidations(e.input_descriptors),...new ove.SubmissionRequirementVB(this.myTag).getValidations(e.submission_requirements)]:[...this.myValidations(e),...new ZU.InputDescriptorsV1VB(this.myTag).getValidations(e.input_descriptors)]}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldNotBeEmpty(r?.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldBeAmongKnownValues(r?.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>t.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."},{tag:this.getTag(),target:e,predicate:r=>t.shouldNotHaveFrameProperty(r),message:"input descriptor should not have frame property."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var r,n,s,i,o,a,c,u,l,d,p;let f=!0;return e?.jwt!=null&&(f=f&&((r=e.jwt.alg)===null||r===void 0?void 0:r.length)>0),e?.jwt_vc!=null&&(f=f&&((n=e.jwt_vc.alg)===null||n===void 0?void 0:n.length)>0),e?.jwt_vc_json!=null&&(f=f&&((s=e.jwt_vc_json.alg)===null||s===void 0?void 0:s.length)>0),e?.jwt_vp!=null&&(f=f&&((i=e.jwt_vp.alg)===null||i===void 0?void 0:i.length)>0),e?.jwt_vp_json!=null&&(f=f&&((o=e.jwt_vp_json.alg)===null||o===void 0?void 0:o.length)>0),e?.ldp!=null&&(f=f&&((a=e.ldp.proof_type)===null||a===void 0?void 0:a.length)>0),e?.ldp_vc!=null&&(f=f&&((c=e.ldp_vc.proof_type)===null||c===void 0?void 0:c.length)>0),e?.ldp_vp!=null&&(f=f&&((u=e.ldp_vp.proof_type)===null||u===void 0?void 0:u.length)>0),e?.di!=null&&(f=f&&((l=e.di.proof_type)===null||l===void 0?void 0:l.length)>0),e?.di_vc!=null&&(f=f&&((d=e.di_vc.proof_type)===null||d===void 0?void 0:d.length)>0),e?.di_vp!=null&&(f=f&&((p=e.di_vp.proof_type)===null||p===void 0?void 0:p.length)>0),f}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){let n=nve.JwtAlgos.getJwtAlgos(),s=ive.LdpTypes.getLdpTypes();r=[];for(let[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...t.isJWTAlgoKnown(o,n)):r.push(...t.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){let n=[];if(e!=null&&e.alg!=null)for(let s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){let n=[];if(e!=null&&e.proof_type!=null)for(let s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){let r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});let n=new Set(r),s=[];t.flatten(e.submission_requirements).forEach(a=>{a.from&&(Array.isArray(a.from)?s.push(...a.from):s.push(a.from))});let i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e?.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>(0,sve.default)({presentation_definition:e})}static shouldNotHaveFrameProperty(e){return!e.frame}};Rf.PresentationDefinitionV1VB=mP});var YU=v(h_=>{"use strict";Object.defineProperty(h_,"__esModule",{value:!0});h_.FrameVB=void 0;var Du=Ii(),uve=bs(),yP=class t extends uve.ValidationBundler{constructor(e){super(e,"frame"),this.frameIsValidMsg="frame value is not valid"}getValidations(e){let r=[];return r=[...r,...this.getMyValidations(e)],r}getMyValidations(e){return[{tag:this.getMyTag(),target:e,predicate:t.frameIsValid,message:this.frameIsValidMsg}]}getMyTag(){return this.parentTag+"."+this.myTag}static frameIsValid(e){if(!e||Array.isArray(e)||typeof e!="object")return!1;let r=e;if(r&&r["@id"]){for(let n of Du.ObjectUtils.asArray(e["@id"]))if(!(Du.ObjectUtils.isObject(n)||Du.ObjectUtils.isUrlAbsolute(n))||Du.ObjectUtils.isString(n)&&n.indexOf("_:")===0)return!1}if(r["@types"]){for(let n of Du.ObjectUtils.asArray(e["@types"]))if(!(Du.ObjectUtils.isObject(n)||Du.ObjectUtils.isUrlAbsolute(n))||Du.ObjectUtils.isString(n)&&n.indexOf("_:")===0)return!1}return!0}};h_.FrameVB=yP});var eV=v($f=>{"use strict";var cve=$f&&$f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($f,"__esModule",{value:!0});$f.PresentationDefinitionV2VB=void 0;var lve=dP(),dve=pP(),fve=cve(c2()),pve=YU(),QU=cP(),hve=p_(),mve=bs(),gP=class t extends mve.ValidationBundler{constructor(e){super(e,"presentation_definition")}getValidations(e){let r=[];return e.submission_requirements?r=[...this.myValidations(e),...new QU.InputDescriptorsV2VB(this.myTag).getValidations(e.input_descriptors),...new hve.SubmissionRequirementVB(this.myTag).getValidations(e.submission_requirements)]:r=[...this.myValidations(e),...new QU.InputDescriptorsV2VB(this.myTag).getValidations(e.input_descriptors)],e.frame&&r.push(...new pve.FrameVB(this.myTag).getValidations(e.frame)),r}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldNotBeEmpty(r?.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldBeAmongKnownValues(r?.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>t.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var r,n,s,i,o,a,c,u,l,d,p;let f=!0;return e?.jwt!=null&&(f=f&&((r=e.jwt.alg)===null||r===void 0?void 0:r.length)>0),e?.jwt_vc!=null&&(f=f&&((n=e.jwt_vc.alg)===null||n===void 0?void 0:n.length)>0),e?.jwt_vc_json!=null&&(f=f&&((s=e.jwt_vc_json.alg)===null||s===void 0?void 0:s.length)>0),e?.jwt_vp!=null&&(f=f&&((i=e.jwt_vp.alg)===null||i===void 0?void 0:i.length)>0),e?.jwt_vp_json!=null&&(f=f&&((o=e.jwt_vp_json.alg)===null||o===void 0?void 0:o.length)>0),e?.ldp!=null&&(f=f&&((a=e.ldp.proof_type)===null||a===void 0?void 0:a.length)>0),e?.ldp_vc!=null&&(f=f&&((c=e.ldp_vc.proof_type)===null||c===void 0?void 0:c.length)>0),e?.ldp_vp!=null&&(f=f&&((u=e.ldp_vp.proof_type)===null||u===void 0?void 0:u.length)>0),e?.di!=null&&(f=f&&((l=e.di.proof_type)===null||l===void 0?void 0:l.length)>0),e?.di_vc!=null&&(f=f&&((d=e.di_vc.proof_type)===null||d===void 0?void 0:d.length)>0),e?.di_vp!=null&&(f=f&&((p=e.di_vp.proof_type)===null||p===void 0?void 0:p.length)>0),f}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){let n=lve.JwtAlgos.getJwtAlgos(),s=dve.LdpTypes.getLdpTypes();r=[];for(let[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...t.isJWTAlgoKnown(o,n)):r.push(...t.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){let n=[];if(e!=null&&e.alg!=null)for(let s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){let n=[];if(e!=null&&e.proof_type!=null)for(let s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){let r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});let n=new Set(r),s=[];t.flatten(e.submission_requirements).forEach(a=>{a.from&&s.push(a.from)});let i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e?.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>(0,fve.default)({presentation_definition:e})}};$f.PresentationDefinitionV2VB=gP});var rV=v(m_=>{"use strict";Object.defineProperty(m_,"__esModule",{value:!0});m_.PresentationSubmissionVB=void 0;var yve=Ti(),tV=Br(),gve=bs(),vP=class t extends gve.ValidationBundler{constructor(e){super(e,"presentation_submission")}getValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_submission should be non null."},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.definition_id),message:"presentation_definition_id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.descriptorMapMustBePresent(r?.descriptor_map),message:"descriptor_map should be a non-empty list"},{tag:this.getTag(),target:e,predicate:r=>t.idMustBeSameForEachLevelOfNesting(r?.descriptor_map),message:"each descriptor should have a one id in it, on all levels"},{tag:this.getTag(),target:e,predicate:r=>t.formatsShouldBeKnown(r?.descriptor_map),message:"each format should be one of the known format"},{tag:this.getTag(),target:e,predicate:r=>t.pathsShouldBeValidJsonPaths(r?.descriptor_map),message:"each path should be a valid jsonPath"}]}static nonEmptyString(e){return e!=null&&e.length>0}static descriptorMapMustBePresent(e){return e!=null&&e.length>0}static idMustBeSameForEachLevelOfNesting(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=r&&t.isIdSameForEachLevelOfNesting(e[n],e[n].id);return r}static isIdSameForEachLevelOfNesting(e,r){let n=!0;return e!=null&&e.path_nested!=null&&(e.path_nested.id==r?n=n&&t.isIdSameForEachLevelOfNesting(e.path_nested,r):n=!1),n}static formatsShouldBeKnown(e){let r=!0;if(e!=null){let n=["jwt","jwt_vc","jwt_vc_json","jwt_vp","jwt_vp_json","ldp","ldp_vc","ldp_vp","di","di_vc","di_vp","vc+sd-jwt"];for(let s=0;s<e.length;s++)r=t.formatShouldBeKnown(e[s],n)}return r}static formatShouldBeKnown(e,r){let n=!0;return e!=null&&(n=r.includes(e.format)),e.path_nested!=null&&(n=n&&t.formatShouldBeKnown(e.path_nested,r)),n}static pathsShouldBeValidJsonPaths(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=t.pathShouldBeValid(e[n],[]);return r}static pathShouldBeValid(e,r){if(e!=null){try{yve.JSONPath.parse(e.path)}catch{r.push(e.path)}e.path_nested!=null&&t.pathShouldBeValid(e.path_nested,r)}if(r.length>0)throw new tV.Checked("",tV.Status.ERROR,"These were not parsable json paths: "+JSON.stringify(r));return!0}};m_.PresentationSubmissionVB=vP});var nV=v(Cn=>{"use strict";var vve=Cn&&Cn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pa=Cn&&Cn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vve(e,t,r)};Object.defineProperty(Cn,"__esModule",{value:!0});pa(nP(),Cn);pa(oP(),Cn);pa(cP(),Cn);pa(XU(),Cn);pa(eV(),Cn);pa(rV(),Cn);pa(p_(),Cn);pa(bs(),Cn);pa(a_(),Cn)});var iV=v(y_=>{"use strict";Object.defineProperty(y_,"__esModule",{value:!0});y_.validate=void 0;var jf=Br(),bve=t=>{let e=t.map(a=>s(a));function r(a){return new jf.Checked(a.tag,jf.Status.ERROR,a.message)}function n(a){return new jf.Checked(a,jf.Status.INFO,"ok")}function s(a){let c;try{a.predicate(a.target)?c=n(a.tag):c=r(a)}catch{c=r(a)}return c}let i=(a,c)=>(c.status!==jf.Status.INFO&&a.push(c),a),o=e.reduce(i,[]);return(0,jf.hasErrors)(o)?o:[n("root")]};y_.validate=bve});var oV=v(sV=>{"use strict";Object.defineProperty(sV,"__esModule",{value:!0})});var aV=v(g_=>{"use strict";Object.defineProperty(g_,"__esModule",{value:!0});g_.ValidationEngine=void 0;var _ve=_P(),bP=class{validate(e){let r=[];for(let n of e)r=r.concat(n.bundler.getValidations(n.target));return(0,_ve.validate)(r)}};g_.ValidationEngine=bP});var _P=v(ha=>{"use strict";var wve=ha&&ha.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wP=ha&&ha.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wve(e,t,r)};Object.defineProperty(ha,"__esModule",{value:!0});wP(iV(),ha);wP(oV(),ha);wP(aV(),ha)});var zm=v(xu=>{"use strict";var Eve=xu&&xu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),uV=xu&&xu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Eve(e,t,r)};Object.defineProperty(xu,"__esModule",{value:!0});uV(nV(),xu);uV(_P(),xu)});var v_=v(Nf=>{"use strict";var Sve=Nf&&Nf.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(Nf,"__esModule",{value:!0});Nf.PEX=void 0;var ma=os(),cV=Br(),Hm=Um(),Wm=If(),_s=qc(),Jm=Ii(),Gm=zm(),EP=class t{constructor(e){this._evaluationClientWrapper=new Hm.EvaluationClientWrapper,this.options=e}evaluatePresentation(e,r,n){var s,i,o;let a=n?.generatePresentationSubmission!==void 0?n.generatePresentationSubmission:n?.presentationSubmission===void 0,c=_s.SSITypesBuilder.toInternalPresentationDefinition(e),u=JSON.parse(JSON.stringify(r)),l=_s.SSITypesBuilder.mapExternalVerifiablePresentationToWrappedVP(u,(s=this.options)===null||s===void 0?void 0:s.hasher),d=(i=n?.presentationSubmission)!==null&&i!==void 0?i:l.decoded.presentation_submission;if(!d&&!a)throw Error("Either a presentation submission as part of the VP or provided separately was expected");let p=ma.CredentialMapper.isW3cPresentation(l.presentation)&&l.presentation.holder?[l.presentation.holder]:[],f=Object.assign(Object.assign({},n),{holderDIDs:p,presentationSubmission:d,generatePresentationSubmission:a}),h=this._evaluationClientWrapper.evaluate(c,l.vcs,f);return!((o=h.value)===null||o===void 0)&&o.descriptor_map.length&&new Hm.EvaluationClientWrapper().selectFrom(c,l.vcs,f).areRequiredCredentialsPresent!==cV.Status.ERROR&&(h.errors=[]),h}evaluateCredentials(e,r,n){var s;let i=_s.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r,(s=this.options)===null||s===void 0?void 0:s.hasher);this._evaluationClientWrapper=new Hm.EvaluationClientWrapper;let o=_s.SSITypesBuilder.toInternalPresentationDefinition(e),a=this._evaluationClientWrapper.evaluate(o,i,n);if(a.value&&a.value.descriptor_map.length){let u=new Hm.EvaluationClientWrapper().selectFrom(o,i,n);a.areRequiredCredentialsPresent=u.areRequiredCredentialsPresent,a.errors=u.errors}else a.areRequiredCredentialsPresent=cV.Status.ERROR;return a}selectFrom(e,r,n){var s;let i=JSON.parse(JSON.stringify(r)),o=_s.SSITypesBuilder.toInternalPresentationDefinition(e);return this._evaluationClientWrapper=new Hm.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(o,_s.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(i,(s=this.options)===null||s===void 0?void 0:s.hasher),n)}presentationSubmissionFrom(e,r,n){var s;let i=_s.SSITypesBuilder.toInternalPresentationDefinition(e);return this._evaluationClientWrapper.submissionFrom(i,_s.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r,(s=this.options)===null||s===void 0?void 0:s.hasher),n)}presentationFrom(e,r,n){var s,i;let o=this.presentationSubmissionFrom(e,r,n),a=r.some(l=>ma.CredentialMapper.isSdJwtDecodedCredential(l)||ma.CredentialMapper.isSdJwtEncoded(l));if(n?.presentationSubmissionLocation===Wm.PresentationSubmissionLocation.PRESENTATION&&a)throw new Error("Presentation submission location cannot be set to presentation when creating a presentation with an SD-JWT VC");let c=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:a?Wm.PresentationSubmissionLocation.EXTERNAL:Wm.PresentationSubmissionLocation.PRESENTATION;return{presentation:t.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:c===Wm.PresentationSubmissionLocation.PRESENTATION?o:void 0,hasher:(i=this.options)===null||i===void 0?void 0:i.hasher})),presentationSubmissionLocation:c,presentationSubmission:o}}static constructPresentation(e,r){var n,s,i,o;let a=Array.isArray(e)?e:[e];if(a.some(c=>ma.CredentialMapper.isSdJwtDecodedCredential(c)||ma.CredentialMapper.isSdJwtEncoded(c))){if(a.length>1)throw new Error("Only a single credential is supported when creating a presentation with an SD-JWT VC");if(r?.presentationSubmission)throw new Error("Presentation submission cannot be included in the presentation when creating a presentation with an SD-JWT VC");if(r?.basePresentationPayload)throw new Error("Base presentation payload cannot be when creating a presentation from an SD-JWT VC");let c=ma.CredentialMapper.isSdJwtEncoded(a[0])?ma.CredentialMapper.decodeVerifiableCredential(a[0],r?.hasher):a[0];if(!r?.hasher)throw new Error("Hasher must be provided when creating a presentation with an SD-JWT VC");let u=(n=c.signedPayload._sd_alg)!==null&&n!==void 0?n:"sha-256",l=(0,Jm.calculateSdHash)(c.compactSdJwtVc,u,r.hasher),d={header:{typ:"kb+jwt"},payload:{iat:new Date().getTime(),_sd_hash:l}};return Object.assign(Object.assign({},c),{kbJwt:d})}else{if(!e)throw Error("At least a verifiable credential needs to be passed in to create a presentation");let c=Array.isArray(e)?e:[e],u=c.map(h=>ma.CredentialMapper.toWrappedVerifiableCredential(h)),l=Array.from(new Set(u.flatMap(h=>(0,Jm.getSubjectIdsAsString)(h.credential))));l.length!==1&&!r?.holderDID&&console.log(`We deduced ${l.length} subject from ${u.length} Verifiable Credentials, and no holder property was given. This might lead to undesired results`);let d=(s=r?.holderDID)!==null&&s!==void 0?s:l.length===1?l[0]:void 0,p=!((i=r?.basePresentationPayload)===null||i===void 0)&&i.type?Array.isArray(r.basePresentationPayload.type)?r.basePresentationPayload.type:[r.basePresentationPayload.type]:[];p.includes("VerifiablePresentation")||p.push("VerifiablePresentation");let f=!((o=r?.basePresentationPayload)===null||o===void 0)&&o["@context"]?Array.isArray(r.basePresentationPayload["@context"])?r.basePresentationPayload["@context"]:[r.basePresentationPayload["@context"]]:[];return f.includes("https://www.w3.org/2018/credentials/v1")||f.push("https://www.w3.org/2018/credentials/v1"),r?.presentationSubmission&&(p.includes("PresentationSubmission")||p.push("PresentationSubmission"),f.includes("https://identity.foundation/presentation-exchange/submission/v1")||f.push("https://identity.foundation/presentation-exchange/submission/v1")),Object.assign(Object.assign(Object.assign(Object.assign({},r?.basePresentationPayload),{"@context":f,type:p,holder:d}),!!r?.presentationSubmission&&{presentation_submission:r.presentationSubmission}),{verifiableCredential:c})}}static validateDefinition(e){let r=(0,Jm.definitionVersionDiscovery)(e);if(r.error)throw new Error(r.error);let n=[];return r.version===_s.PEVersion.v1?n.push({bundler:new Gm.PresentationDefinitionV1VB("root"),target:_s.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e)}):n.push({bundler:new Gm.PresentationDefinitionV2VB("root"),target:_s.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e)}),new Gm.ValidationEngine().validate(n)}static validateSubmission(e){return new Gm.ValidationEngine().validate([{bundler:new Gm.PresentationSubmissionVB("root"),target:e}])}verifiablePresentationFrom(e,r,n,s){return Sve(this,void 0,void 0,function*(){var i,o;let{holderDID:a,signatureOptions:c,proofOptions:u}=s;function l(){let w=[];if(u?.typeSupportsSelectiveDisclosure){if(!u?.type)throw Error("Please provide a proof type if you enable selective disclosure");w=[u.type]}return w}let d=a?[a]:[],p=l(),f=this.evaluateCredentials(e,r,{holderDIDs:d,limitDisclosureSignatureSuites:p}),h=this.presentationFrom(e,f.verifiableCredential,s),y=this.evaluatePresentation(e,h.presentation,Object.assign({limitDisclosureSignatureSuites:p},h.presentationSubmissionLocation===Wm.PresentationSubmissionLocation.EXTERNAL&&{presentationSubmission:h.presentationSubmission}));if(!y.value)throw new Error("Could not get evaluation results from presentationResult");let g={type:u?.type,verificationMethod:c?.verificationMethod,created:u?.created?u.created:new Date().toISOString(),proofPurpose:u?.proofPurpose,proofValue:c?.proofValue,jws:c?.jws,challenge:u?.challenge,nonce:u?.nonce,domain:u?.domain},A=h.presentation;if(ma.CredentialMapper.isSdJwtDecodedCredential(h.presentation)){if(!(!((i=this.options)===null||i===void 0)&&i.hasher))throw new Error("Hasher must be provided when creating a presentation with an SD-JWT VC");let w=(o=h.presentation.signedPayload._sd_alg)!==null&&o!==void 0?o:"sha-256",D=(0,Jm.calculateSdHash)(h.presentation.compactSdJwtVc,w,this.options.hasher),F={header:{typ:"kb+jwt"},payload:{iat:new Date().getTime(),nonce:u?.nonce,_sd_hash:D}};A=Object.assign(Object.assign({},A),{kbJwt:F})}let x={options:Object.assign(Object.assign({},s),{presentationSubmissionLocation:h.presentationSubmissionLocation}),presentation:A,presentationDefinition:e,selectedCredentials:r,proof:g,presentationSubmission:y.value,evaluationResults:y};return{verifiablePresentation:yield n(x),presentationSubmissionLocation:h.presentationSubmissionLocation,presentationSubmission:y.value}})}static definitionVersionDiscovery(e){return(0,Jm.definitionVersionDiscovery)(e)}};Nf.PEX=EP});var fV=v(__=>{"use strict";Object.defineProperty(__,"__esModule",{value:!0});__.PEXv1=void 0;var lV=os(),SP=v_(),Ave=Um(),b_=If(),ol=qc(),dV=zm(),AP=class extends SP.PEX{evaluatePresentation(e,r,n){return ol.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),super.evaluatePresentation(e,r,n)}evaluateCredentials(e,r,n){return ol.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),super.evaluateCredentials(e,r,n)}selectFrom(e,r,n){let s=JSON.parse(JSON.stringify(r));return this._evaluationClientWrapper=new Ave.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(ol.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),ol.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(s),n)}presentationFrom(e,r,n){var s;let i=this._evaluationClientWrapper.submissionFrom(ol.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),ol.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r),n),o=r.some(u=>lV.CredentialMapper.isSdJwtDecodedCredential(u)||lV.CredentialMapper.isSdJwtEncoded(u));if(n?.presentationSubmissionLocation===b_.PresentationSubmissionLocation.PRESENTATION&&o)throw new Error("Presentation submission location cannot be set to presentation when creating a presentation with an SD-JWT VC");let a=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:o?b_.PresentationSubmissionLocation.EXTERNAL:b_.PresentationSubmissionLocation.PRESENTATION;return{presentation:SP.PEX.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:a===b_.PresentationSubmissionLocation.PRESENTATION?i:void 0})),presentationSubmissionLocation:a,presentationSubmission:i}}static validateDefinition(e){let r=ol.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e);return new dV.ValidationEngine().validate([{bundler:new dV.PresentationDefinitionV1VB("root"),target:r}])}static validateSubmission(e){return SP.PEX.validateSubmission(e)}};__.PEXv1=AP});var mV=v(E_=>{"use strict";Object.defineProperty(E_,"__esModule",{value:!0});E_.PEXv2=void 0;var pV=os(),DP=v_(),Dve=Um(),w_=If(),al=qc(),hV=zm(),xP=class extends DP.PEX{evaluatePresentation(e,r,n){return al.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),super.evaluatePresentation(e,r,n)}evaluateCredentials(e,r,n){return al.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),super.evaluateCredentials(e,r,n)}selectFrom(e,r,n){return this._evaluationClientWrapper=new Dve.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(al.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),al.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r),n)}presentationFrom(e,r,n){var s;let i=this._evaluationClientWrapper.submissionFrom(al.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),al.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r),n),o=r.some(u=>pV.CredentialMapper.isSdJwtDecodedCredential(u)||pV.CredentialMapper.isSdJwtEncoded(u));if(n?.presentationSubmissionLocation===w_.PresentationSubmissionLocation.PRESENTATION&&o)throw new Error("Presentation submission location cannot be set to presentation when creating a presentation with an SD-JWT VC");let a=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:o?w_.PresentationSubmissionLocation.EXTERNAL:w_.PresentationSubmissionLocation.PRESENTATION;return{presentation:DP.PEX.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:a===w_.PresentationSubmissionLocation.PRESENTATION?i:void 0})),presentationSubmissionLocation:a,presentationSubmission:i}}static validateDefinition(e){let r=al.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e);return new hV.ValidationEngine().validate([{bundler:new hV.PresentationDefinitionV2VB("root"),target:r}])}static validateSubmission(e){return DP.PEX.validateSubmission(e)}};E_.PEXv2=xP});var gV=v(ur=>{"use strict";var xve=ur&&ur.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Cve=ur&&ur.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&xve(e,t,r)};Object.defineProperty(ur,"__esModule",{value:!0});ur.PEXv2=ur.PEXv1=ur.PEX=ur.Status=ur.Checked=ur.PEVersion=ur.ValidationEngine=ur.HandlerCheckResult=void 0;var yV=Br();Object.defineProperty(ur,"Checked",{enumerable:!0,get:function(){return yV.Checked}});Object.defineProperty(ur,"Status",{enumerable:!0,get:function(){return yV.Status}});var Pve=v_();Object.defineProperty(ur,"PEX",{enumerable:!0,get:function(){return Pve.PEX}});var Ove=fV();Object.defineProperty(ur,"PEXv1",{enumerable:!0,get:function(){return Ove.PEXv1}});var Fve=mV();Object.defineProperty(ur,"PEXv2",{enumerable:!0,get:function(){return Fve.PEXv2}});var Tve=Um();Object.defineProperty(ur,"HandlerCheckResult",{enumerable:!0,get:function(){return Tve.HandlerCheckResult}});var Ive=qc();Object.defineProperty(ur,"PEVersion",{enumerable:!0,get:function(){return Ive.PEVersion}});var Bve=zm();Object.defineProperty(ur,"ValidationEngine",{enumerable:!0,get:function(){return Bve.ValidationEngine}});Cve(If(),ur)});var vV=v(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.PresentationSubmissionLocation=fr.HandlerCheckResult=fr.ValidationEngine=fr.PEVersion=fr.Checked=fr.Status=fr.KeyEncoding=fr.PEXv2=fr.PEXv1=fr.PEX=void 0;var co=gV();Object.defineProperty(fr,"Checked",{enumerable:!0,get:function(){return co.Checked}});Object.defineProperty(fr,"HandlerCheckResult",{enumerable:!0,get:function(){return co.HandlerCheckResult}});Object.defineProperty(fr,"KeyEncoding",{enumerable:!0,get:function(){return co.KeyEncoding}});Object.defineProperty(fr,"PEVersion",{enumerable:!0,get:function(){return co.PEVersion}});Object.defineProperty(fr,"PEX",{enumerable:!0,get:function(){return co.PEX}});Object.defineProperty(fr,"PEXv1",{enumerable:!0,get:function(){return co.PEXv1}});Object.defineProperty(fr,"PEXv2",{enumerable:!0,get:function(){return co.PEXv2}});Object.defineProperty(fr,"PresentationSubmissionLocation",{enumerable:!0,get:function(){return co.PresentationSubmissionLocation}});Object.defineProperty(fr,"Status",{enumerable:!0,get:function(){return co.Status}});Object.defineProperty(fr,"ValidationEngine",{enumerable:!0,get:function(){return co.ValidationEngine}})});var MK=v((Wf,Jf)=>{(function(t){var e=typeof Wf=="object"&&Wf&&!Wf.nodeType&&Wf,r=typeof Jf=="object"&&Jf&&!Jf.nodeType&&Jf,n=typeof globalThis=="object"&&globalThis;(n.global===n||n.window===n||n.self===n)&&(t=n);var s,i=2147483647,o=36,a=1,c=26,u=38,l=700,d=72,p=128,f="-",h=/^xn--/,y=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=o-a,b=Math.floor,w=String.fromCharCode,D;function F(U){throw new RangeError(A[U])}function C(U,q){for(var N=U.length,Y=[];N--;)Y[N]=q(U[N]);return Y}function I(U,q){var N=U.split("@"),Y="";N.length>1&&(Y=N[0]+"@",U=N[1]),U=U.replace(g,".");var oe=U.split("."),M=C(oe,q).join(".");return Y+M}function k(U){for(var q=[],N=0,Y=U.length,oe,M;N<Y;)oe=U.charCodeAt(N++),oe>=55296&&oe<=56319&&N<Y?(M=U.charCodeAt(N++),(M&64512)==56320?q.push(((oe&1023)<<10)+(M&1023)+65536):(q.push(oe),N--)):q.push(oe);return q}function T(U){return C(U,function(q){var N="";return q>65535&&(q-=65536,N+=w(q>>>10&1023|55296),q=56320|q&1023),N+=w(q),N}).join("")}function j(U){return U-48<10?U-22:U-65<26?U-65:U-97<26?U-97:o}function L(U,q){return U+22+75*(U<26)-((q!=0)<<5)}function Q(U,q,N){var Y=0;for(U=N?b(U/l):U>>1,U+=b(U/q);U>x*c>>1;Y+=o)U=b(U/x);return b(Y+(x+1)*U/(U+u))}function ne(U){var q=[],N=U.length,Y,oe=0,M=p,V=d,se,de,ye,we,Oe,xe,Me,Re,_t;for(se=U.lastIndexOf(f),se<0&&(se=0),de=0;de<se;++de)U.charCodeAt(de)>=128&&F("not-basic"),q.push(U.charCodeAt(de));for(ye=se>0?se+1:0;ye<N;){for(we=oe,Oe=1,xe=o;ye>=N&&F("invalid-input"),Me=j(U.charCodeAt(ye++)),(Me>=o||Me>b((i-oe)/Oe))&&F("overflow"),oe+=Me*Oe,Re=xe<=V?a:xe>=V+c?c:xe-V,!(Me<Re);xe+=o)_t=o-Re,Oe>b(i/_t)&&F("overflow"),Oe*=_t;Y=q.length+1,V=Q(oe-we,Y,we==0),b(oe/Y)>i-M&&F("overflow"),M+=b(oe/Y),oe%=Y,q.splice(oe++,0,M)}return T(q)}function W(U){var q,N,Y,oe,M,V,se,de,ye,we,Oe,xe=[],Me,Re,_t,pt;for(U=k(U),Me=U.length,q=p,N=0,M=d,V=0;V<Me;++V)Oe=U[V],Oe<128&&xe.push(w(Oe));for(Y=oe=xe.length,oe&&xe.push(f);Y<Me;){for(se=i,V=0;V<Me;++V)Oe=U[V],Oe>=q&&Oe<se&&(se=Oe);for(Re=Y+1,se-q>b((i-N)/Re)&&F("overflow"),N+=(se-q)*Re,q=se,V=0;V<Me;++V)if(Oe=U[V],Oe<q&&++N>i&&F("overflow"),Oe==q){for(de=N,ye=o;we=ye<=M?a:ye>=M+c?c:ye-M,!(de<we);ye+=o)pt=de-we,_t=o-we,xe.push(w(L(we+pt%_t,0))),de=b(pt/_t);xe.push(w(L(de,0))),M=Q(N,Re,Y==oe),N=0,++Y}++N,++q}return xe.join("")}function ee(U){return I(U,function(q){return h.test(q)?ne(q.slice(4).toLowerCase()):q})}function ue(U){return I(U,function(q){return y.test(q)?"xn--"+W(q):q})}if(s={version:"1.4.1",ucs2:{decode:k,encode:T},decode:ne,encode:W,toASCII:ue,toUnicode:ee},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return s});else if(e&&r)if(Jf.exports==e)r.exports=s;else for(D in s)s.hasOwnProperty(D)&&(e[D]=s[D]);else t.punycode=s})(Wf)});var j_=v((mke,qK)=>{"use strict";var F1e=String.prototype.replace,T1e=/%20/g,aO={RFC1738:"RFC1738",RFC3986:"RFC3986"};qK.exports={default:aO.RFC3986,formatters:{RFC1738:function(t){return F1e.call(t,T1e,"+")},RFC3986:function(t){return String(t)}},RFC1738:aO.RFC1738,RFC3986:aO.RFC3986}});var lO=v((yke,UK)=>{"use strict";var I1e=j_(),uO=Object.prototype.hasOwnProperty,gl=Array.isArray,mo=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),B1e=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(gl(n)){for(var s=[],i=0;i<n.length;++i)typeof n[i]<"u"&&s.push(n[i]);r.obj[r.prop]=s}}},LK=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},s=0;s<e.length;++s)typeof e[s]<"u"&&(n[s]=e[s]);return n},k1e=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(gl(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!uO.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var s=e;return gl(e)&&!gl(r)&&(s=LK(e,n)),gl(e)&&gl(r)?(r.forEach(function(i,o){if(uO.call(e,o)){var a=e[o];a&&typeof a=="object"&&i&&typeof i=="object"?e[o]=t(a,i,n):e.push(i)}else e[o]=i}),e):Object.keys(r).reduce(function(i,o){var a=r[o];return uO.call(i,o)?i[o]=t(i[o],a,n):i[o]=a,i},s)},R1e=function(e,r){return Object.keys(r).reduce(function(n,s){return n[s]=r[s],n},e)},$1e=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},cO=1024,j1e=function(e,r,n,s,i){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",c=0;c<o.length;c+=cO){for(var u=o.length>=cO?o.slice(c,c+cO):o,l=[],d=0;d<u.length;++d){var p=u.charCodeAt(d);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||i===I1e.RFC1738&&(p===40||p===41)){l[l.length]=u.charAt(d);continue}if(p<128){l[l.length]=mo[p];continue}if(p<2048){l[l.length]=mo[192|p>>6]+mo[128|p&63];continue}if(p<55296||p>=57344){l[l.length]=mo[224|p>>12]+mo[128|p>>6&63]+mo[128|p&63];continue}d+=1,p=65536+((p&1023)<<10|u.charCodeAt(d)&1023),l[l.length]=mo[240|p>>18]+mo[128|p>>12&63]+mo[128|p>>6&63]+mo[128|p&63]}a+=l.join("")}return a},N1e=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],s=0;s<r.length;++s)for(var i=r[s],o=i.obj[i.prop],a=Object.keys(o),c=0;c<a.length;++c){var u=a[c],l=o[u];typeof l=="object"&&l!==null&&n.indexOf(l)===-1&&(r.push({obj:o,prop:u}),n.push(l))}return B1e(r),e},M1e=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},q1e=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},L1e=function(e,r){return[].concat(e,r)},U1e=function(e,r){if(gl(e)){for(var n=[],s=0;s<e.length;s+=1)n.push(r(e[s]));return n}return r(e)};UK.exports={arrayToObject:LK,assign:R1e,combine:L1e,compact:N1e,decode:$1e,encode:j1e,isBuffer:q1e,isRegExp:M1e,maybeMap:U1e,merge:k1e}});var JK=v((gke,WK)=>{"use strict";var KK=vD(),N_=lO(),my=j_(),V1e=Object.prototype.hasOwnProperty,zK={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},yo=Array.isArray,K1e=Array.prototype.push,HK=function(t,e){K1e.apply(t,yo(e)?e:[e])},z1e=Date.prototype.toISOString,VK=my.default,Rr={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:N_.encode,encodeValuesOnly:!1,format:VK,formatter:my.formatters[VK],indices:!1,serializeDate:function(e){return z1e.call(e)},skipNulls:!1,strictNullHandling:!1},H1e=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},dO={},W1e=function t(e,r,n,s,i,o,a,c,u,l,d,p,f,h,y,g,A,x){for(var b=e,w=x,D=0,F=!1;(w=w.get(dO))!==void 0&&!F;){var C=w.get(e);if(D+=1,typeof C<"u"){if(C===D)throw new RangeError("Cyclic object value");F=!0}typeof w.get(dO)>"u"&&(D=0)}if(typeof l=="function"?b=l(r,b):b instanceof Date?b=f(b):n==="comma"&&yo(b)&&(b=N_.maybeMap(b,function(N){return N instanceof Date?f(N):N})),b===null){if(o)return u&&!g?u(r,Rr.encoder,A,"key",h):r;b=""}if(H1e(b)||N_.isBuffer(b)){if(u){var I=g?r:u(r,Rr.encoder,A,"key",h);return[y(I)+"="+y(u(b,Rr.encoder,A,"value",h))]}return[y(r)+"="+y(String(b))]}var k=[];if(typeof b>"u")return k;var T;if(n==="comma"&&yo(b))g&&u&&(b=N_.maybeMap(b,u)),T=[{value:b.length>0?b.join(",")||null:void 0}];else if(yo(l))T=l;else{var j=Object.keys(b);T=d?j.sort(d):j}var L=c?r.replace(/\./g,"%2E"):r,Q=s&&yo(b)&&b.length===1?L+"[]":L;if(i&&yo(b)&&b.length===0)return Q+"[]";for(var ne=0;ne<T.length;++ne){var W=T[ne],ee=typeof W=="object"&&typeof W.value<"u"?W.value:b[W];if(!(a&&ee===null)){var ue=p&&c?W.replace(/\./g,"%2E"):W,U=yo(b)?typeof n=="function"?n(Q,ue):Q:Q+(p?"."+ue:"["+ue+"]");x.set(e,D);var q=KK();q.set(dO,x),HK(k,t(ee,U,n,s,i,o,a,c,n==="comma"&&g&&yo(b)?null:u,l,d,p,f,h,y,g,A,q))}}return k},J1e=function(e){if(!e)return Rr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Rr.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=my.default;if(typeof e.format<"u"){if(!V1e.call(my.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var s=my.formatters[n],i=Rr.filter;(typeof e.filter=="function"||yo(e.filter))&&(i=e.filter);var o;if(e.arrayFormat in zK?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=Rr.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Rr.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Rr.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Rr.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Rr.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Rr.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Rr.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Rr.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Rr.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Rr.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Rr.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Rr.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Rr.strictNullHandling}};WK.exports=function(t,e){var r=t,n=J1e(e),s,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):yo(n.filter)&&(i=n.filter,s=i);var o=[];if(typeof r!="object"||r===null)return"";var a=zK[n.arrayFormat],c=a==="comma"&&n.commaRoundTrip;s||(s=Object.keys(r)),n.sort&&s.sort(n.sort);for(var u=KK(),l=0;l<s.length;++l){var d=s[l];n.skipNulls&&r[d]===null||HK(o,W1e(r[d],d,a,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var p=o.join(n.delimiter),f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),p.length>0?f+p:""}});var XK=v((vke,ZK)=>{"use strict";var Gf=lO(),fO=Object.prototype.hasOwnProperty,G1e=Array.isArray,pr={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Gf.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},Z1e=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},GK=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},X1e="utf8=%26%2310003%3B",Y1e="utf8=%E2%9C%93",Q1e=function(e,r){var n={__proto__:null},s=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=r.parameterLimit===1/0?void 0:r.parameterLimit,o=s.split(r.delimiter,i),a=-1,c,u=r.charset;if(r.charsetSentinel)for(c=0;c<o.length;++c)o[c].indexOf("utf8=")===0&&(o[c]===Y1e?u="utf-8":o[c]===X1e&&(u="iso-8859-1"),a=c,c=o.length);for(c=0;c<o.length;++c)if(c!==a){var l=o[c],d=l.indexOf("]="),p=d===-1?l.indexOf("="):d+1,f,h;p===-1?(f=r.decoder(l,pr.decoder,u,"key"),h=r.strictNullHandling?null:""):(f=r.decoder(l.slice(0,p),pr.decoder,u,"key"),h=Gf.maybeMap(GK(l.slice(p+1),r),function(g){return r.decoder(g,pr.decoder,u,"value")})),h&&r.interpretNumericEntities&&u==="iso-8859-1"&&(h=Z1e(h)),l.indexOf("[]=")>-1&&(h=G1e(h)?[h]:h);var y=fO.call(n,f);y&&r.duplicates==="combine"?n[f]=Gf.combine(n[f],h):(!y||r.duplicates==="last")&&(n[f]=h)}return n},ewe=function(t,e,r,n){for(var s=n?e:GK(e,r),i=t.length-1;i>=0;--i){var o,a=t[i];if(a==="[]"&&r.parseArrays)o=r.allowEmptyArrays&&(s===""||r.strictNullHandling&&s===null)?[]:[].concat(s);else{o=r.plainObjects?Object.create(null):{};var c=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,l=parseInt(u,10);!r.parseArrays&&u===""?o={0:s}:!isNaN(l)&&a!==u&&String(l)===u&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(o=[],o[l]=s):u!=="__proto__"&&(o[u]=s)}s=o}return s},twe=function(e,r,n,s){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,c=n.depth>0&&o.exec(i),u=c?i.slice(0,c.index):i,l=[];if(u){if(!n.plainObjects&&fO.call(Object.prototype,u)&&!n.allowPrototypes)return;l.push(u)}for(var d=0;n.depth>0&&(c=a.exec(i))!==null&&d<n.depth;){if(d+=1,!n.plainObjects&&fO.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(c[1])}if(c){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");l.push("["+i.slice(c.index)+"]")}return ewe(l,r,n,s)}},rwe=function(e){if(!e)return pr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?pr.charset:e.charset,n=typeof e.duplicates>"u"?pr.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var s=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:pr.allowDots:!!e.allowDots;return{allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:pr.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:pr.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:pr.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:pr.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:pr.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:pr.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:pr.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:pr.decoder,delimiter:typeof e.delimiter=="string"||Gf.isRegExp(e.delimiter)?e.delimiter:pr.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:pr.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:pr.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:pr.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:pr.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:pr.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:pr.strictNullHandling}};ZK.exports=function(t,e){var r=rwe(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?Q1e(t,r):t,s=r.plainObjects?Object.create(null):{},i=Object.keys(n),o=0;o<i.length;++o){var a=i[o],c=twe(a,n[a],r,typeof t=="string");s=Gf.merge(s,c,r)}return r.allowSparse===!0?s:Gf.compact(s)}});var QK=v((bke,YK)=>{"use strict";var nwe=JK(),iwe=XK(),swe=j_();YK.exports={formats:swe,parse:iwe,stringify:nwe}});var M_=v(Xf=>{"use strict";var owe=MK();function Ui(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var awe=/^([a-z0-9.+-]+:)/i,uwe=/:[0-9]*$/,cwe=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,lwe=["<",">",'"',"`"," ","\r",`
`,"	"],dwe=["{","}","|","\\","^","`"].concat(lwe),pO=["'"].concat(dwe),ez=["%","/","?",";","#"].concat(pO),tz=["/","?","#"],fwe=255,rz=/^[+a-z0-9A-Z_-]{0,63}$/,pwe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hwe={javascript:!0,"javascript:":!0},hO={javascript:!0,"javascript:":!0},Zf={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},mO=QK();function yy(t,e,r){if(t&&typeof t=="object"&&t instanceof Ui)return t;var n=new Ui;return n.parse(t,e,r),n}Ui.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),s=n!==-1&&n<t.indexOf("#")?"?":"#",i=t.split(s),o=/\\/g;i[0]=i[0].replace(o,"/"),t=i.join(s);var a=t;if(a=a.trim(),!r&&t.split("#").length===1){var c=cwe.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=mO.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=awe.exec(a);if(u){u=u[0];var l=u.toLowerCase();this.protocol=l,a=a.substr(u.length)}if(r||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var d=a.substr(0,2)==="//";d&&!(u&&hO[u])&&(a=a.substr(2),this.slashes=!0)}if(!hO[u]&&(d||u&&!Zf[u])){for(var p=-1,f=0;f<tz.length;f++){var h=a.indexOf(tz[f]);h!==-1&&(p===-1||h<p)&&(p=h)}var y,g;p===-1?g=a.lastIndexOf("@"):g=a.lastIndexOf("@",p),g!==-1&&(y=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(y)),p=-1;for(var f=0;f<ez.length;f++){var h=a.indexOf(ez[f]);h!==-1&&(p===-1||h<p)&&(p=h)}p===-1&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var A=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!A)for(var x=this.hostname.split(/\./),f=0,b=x.length;f<b;f++){var w=x[f];if(w&&!w.match(rz)){for(var D="",F=0,C=w.length;F<C;F++)w.charCodeAt(F)>127?D+="x":D+=w[F];if(!D.match(rz)){var I=x.slice(0,f),k=x.slice(f+1),T=w.match(pwe);T&&(I.push(T[1]),k.unshift(T[2])),k.length&&(a="/"+k.join(".")+a),this.hostname=I.join(".");break}}}this.hostname.length>fwe?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=owe.toASCII(this.hostname));var j=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+j,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!hwe[l])for(var f=0,b=pO.length;f<b;f++){var Q=pO[f];if(a.indexOf(Q)!==-1){var ne=encodeURIComponent(Q);ne===Q&&(ne=escape(Q)),a=a.split(Q).join(ne)}}var W=a.indexOf("#");W!==-1&&(this.hash=a.substr(W),a=a.slice(0,W));var ee=a.indexOf("?");if(ee!==-1?(this.search=a.substr(ee),this.query=a.substr(ee+1),e&&(this.query=mO.parse(this.query)),a=a.slice(0,ee)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Zf[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",ue=this.search||"";this.path=j+ue}return this.href=this.format(),this};function mwe(t){return typeof t=="string"&&(t=yy(t)),t instanceof Ui?t.format():Ui.prototype.format.call(t)}Ui.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,i="";this.host?s=t+this.host:this.hostname&&(s=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(i=mO.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||i&&"?"+i||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Zf[e])&&s!==!1?(s="//"+(s||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):s||(s=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+s+r+o+n};function ywe(t,e){return yy(t,!1,!0).resolve(e)}Ui.prototype.resolve=function(t){return this.resolveObject(yy(t,!1,!0)).format()};function gwe(t,e){return t?yy(t,!1,!0).resolveObject(e):e}Ui.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Ui;e.parse(t,!1,!0),t=e}for(var r=new Ui,n=Object.keys(this),s=0;s<n.length;s++){var i=n[s];r[i]=this[i]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var c=o[a];c!=="protocol"&&(r[c]=t[c])}return Zf[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!Zf[t.protocol]){for(var u=Object.keys(t),l=0;l<u.length;l++){var d=u[l];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!hO[t.protocol]){for(var b=(t.pathname||"").split("/");b.length&&!(t.host=b.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),b[0]!==""&&b.unshift(""),b.length<2&&b.unshift(""),r.pathname=b.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var p=r.pathname||"",f=r.search||"";r.path=p+f}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var h=r.pathname&&r.pathname.charAt(0)==="/",y=t.host||t.pathname&&t.pathname.charAt(0)==="/",g=y||h||r.host&&t.pathname,A=g,x=r.pathname&&r.pathname.split("/")||[],b=t.pathname&&t.pathname.split("/")||[],w=r.protocol&&!Zf[r.protocol];if(w&&(r.hostname="",r.port=null,r.host&&(x[0]===""?x[0]=r.host:x.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(b[0]===""?b[0]=t.host:b.unshift(t.host)),t.host=null),g=g&&(b[0]===""||x[0]==="")),y)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,x=b;else if(b.length)x||(x=[]),x.pop(),x=x.concat(b),r.search=t.search,r.query=t.query;else if(t.search!=null){if(w){r.host=x.shift(),r.hostname=r.host;var D=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;D&&(r.auth=D.shift(),r.hostname=D.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var F=x.slice(-1)[0],C=(r.host||t.host||x.length>1)&&(F==="."||F==="..")||F==="",I=0,k=x.length;k>=0;k--)F=x[k],F==="."?x.splice(k,1):F===".."?(x.splice(k,1),I++):I&&(x.splice(k,1),I--);if(!g&&!A)for(;I--;I)x.unshift("..");g&&x[0]!==""&&(!x[0]||x[0].charAt(0)!=="/")&&x.unshift(""),C&&x.join("/").substr(-1)!=="/"&&x.push("");var T=x[0]===""||x[0]&&x[0].charAt(0)==="/";if(w){r.hostname=T?"":x.length?x.shift():"",r.host=r.hostname;var D=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;D&&(r.auth=D.shift(),r.hostname=D.shift(),r.host=r.hostname)}return g=g||r.host&&x.length,g&&!T&&x.unshift(""),x.length>0?r.pathname=x.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};Ui.prototype.parseHost=function(){var t=this.host,e=uwe.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};Xf.parse=yy;Xf.resolve=ywe;Xf.resolveObject=gwe;Xf.format=mwe;Xf.Url=Ui});var Iu=v((ci,bO)=>{"use strict";var iz=M_(),yO=ci.ValidationError=function(e,r,n,s,i,o){if(Array.isArray(s)?(this.path=s,this.property=s.reduce(function(c,u){return c+sz(u)},"instance")):s!==void 0&&(this.property=s),e&&(this.message=e),n){var a=n.$id||n.id;this.schema=a||n}r!==void 0&&(this.instance=r),this.name=i,this.argument=o,this.stack=this.toString()};yO.prototype.toString=function(){return this.property+" "+this.message};var q_=ci.ValidatorResult=function(e,r,n,s){this.instance=e,this.schema=r,this.options=n,this.path=s.path,this.propertyPath=s.propertyPath,this.errors=[],this.throwError=n&&n.throwError,this.throwFirst=n&&n.throwFirst,this.throwAll=n&&n.throwAll,this.disableFormat=n&&n.disableFormat===!0};q_.prototype.addError=function(e){var r;if(typeof e=="string")r=new yO(e,this.instance,this.schema,this.path);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");r=new yO(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(r),this.throwFirst)throw new vl(this);if(this.throwError)throw r;return r};q_.prototype.importErrors=function(e){typeof e=="string"||e&&e.validatorType?this.addError(e):e&&e.errors&&(this.errors=this.errors.concat(e.errors))};function vwe(t,e){return e+": "+t.toString()+`
`}q_.prototype.toString=function(e){return this.errors.map(vwe).join("")};Object.defineProperty(q_.prototype,"valid",{get:function(){return!this.errors.length}});bO.exports.ValidatorResultError=vl;function vl(t){Error.captureStackTrace&&Error.captureStackTrace(this,vl),this.instance=t.instance,this.schema=t.schema,this.options=t.options,this.errors=t.errors}vl.prototype=new Error;vl.prototype.constructor=vl;vl.prototype.name="Validation Error";var nz=ci.SchemaError=function t(e,r){this.message=e,this.schema=r,Error.call(this,e),Error.captureStackTrace(this,t)};nz.prototype=Object.create(Error.prototype,{constructor:{value:nz,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var gO=ci.SchemaContext=function(e,r,n,s,i){this.schema=e,this.options=r,Array.isArray(n)?(this.path=n,this.propertyPath=n.reduce(function(o,a){return o+sz(a)},"instance")):this.propertyPath=n,this.base=s,this.schemas=i};gO.prototype.resolve=function(e){return iz.resolve(this.base,e)};gO.prototype.makeChild=function(e,r){var n=r===void 0?this.path:this.path.concat([r]),s=e.$id||e.id,i=iz.resolve(this.base,s||""),o=new gO(e,this.options,n,i,Object.create(this.schemas));return s&&!o.schemas[i]&&(o.schemas[i]=e),o};var ws=ci.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,duration:/P(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S)|\d+(D|M(\d+D)?|Y(\d+M(\d+D)?)?)(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S))?|\d+W)/i,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"idn-email":/^("(?:[!#-\[\]-\u{10FFFF}]|\\[\t -\u{10FFFF}])*"|[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*)@([!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*|\[[!-Z\^-\u{10FFFF}]*\])$/u,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,iri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"iri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\u{10FFFF}]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/u,uuid:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,"uri-template":/(%[0-9a-f]{2}|[!#$&(-;=?@\[\]_a-z~]|\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?)*\})*/iu,"json-pointer":/^(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*$/iu,"relative-json-pointer":/^\d+(#|(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*)$/iu,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"utc-millisec":function(t){return typeof t=="string"&&parseFloat(t)===parseInt(t,10)&&!isNaN(t)},regex:function(t){var e=!0;try{new RegExp(t)}catch{e=!1}return e},style:/[\r\n\t ]*[^\r\n\t ][^:]*:[\r\n\t ]*[^\r\n\t ;]*[\r\n\t ]*;?/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/};ws.regexp=ws.regex;ws.pattern=ws.regex;ws.ipv4=ws["ip-address"];ci.isFormat=function(e,r,n){if(typeof e=="string"&&ws[r]!==void 0){if(ws[r]instanceof RegExp)return ws[r].test(e);if(typeof ws[r]=="function")return ws[r](e)}else if(n&&n.customFormats&&typeof n.customFormats[r]=="function")return n.customFormats[r](e);return!0};var sz=ci.makeSuffix=function(e){return e=e.toString(),!e.match(/[.\s\[\]]/)&&!e.match(/^[\d]/)?"."+e:e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]"};ci.deepCompareStrict=function t(e,r){if(typeof e!=typeof r)return!1;if(Array.isArray(e))return!Array.isArray(r)||e.length!==r.length?!1:e.every(function(i,o){return t(e[o],r[o])});if(typeof e=="object"){if(!e||!r)return e===r;var n=Object.keys(e),s=Object.keys(r);return n.length!==s.length?!1:n.every(function(i){return t(e[i],r[i])})}return e===r};function bwe(t,e,r,n){typeof r=="object"?e[n]=vO(t[n],r):t.indexOf(r)===-1&&e.push(r)}function _we(t,e,r){e[r]=t[r]}function wwe(t,e,r,n){typeof e[n]!="object"||!e[n]?r[n]=e[n]:t[n]?r[n]=vO(t[n],e[n]):r[n]=e[n]}function vO(t,e){var r=Array.isArray(e),n=r&&[]||{};return r?(t=t||[],n=n.concat(t),e.forEach(bwe.bind(null,t,n))):(t&&typeof t=="object"&&Object.keys(t).forEach(_we.bind(null,t,n)),Object.keys(e).forEach(wwe.bind(null,t,e,n))),n}bO.exports.deepMerge=vO;ci.objectGetPath=function(e,r){for(var n=r.split("/").slice(1),s;typeof(s=n.shift())=="string";){var i=decodeURIComponent(s.replace(/~0/,"~").replace(/~1/g,"/"));if(!(i in e))return;e=e[i]}return e};function Ewe(t){return"/"+encodeURIComponent(t).replace(/~/g,"%7E")}ci.encodePath=function(e){return e.map(Ewe).join("")};ci.getDecimalPlaces=function(e){var r=0;if(isNaN(e))return r;typeof e!="number"&&(e=Number(e));var n=e.toString().split("e");if(n.length===2){if(n[1][0]!=="-")return r;r=Number(n[1].slice(1))}var s=n[0].split(".");return s.length===2&&(r+=s[1].length),r};ci.isSchema=function(e){return typeof e=="object"&&e||typeof e=="boolean"}});var cz=v((wke,uz)=>{"use strict";var li=Iu(),xt=li.ValidatorResult,Bu=li.SchemaError,_O={};_O.ignoreProperties={id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0};var Ct=_O.validators={};Ct.type=function(e,r,n,s){if(e===void 0)return null;var i=new xt(e,r,n,s),o=Array.isArray(r.type)?r.type:[r.type];if(!o.some(this.testType.bind(this,e,r,n,s))){var a=o.map(function(c){if(c){var u=c.$id||c.id;return u?"<"+u+">":c+""}});i.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return i};function wO(t,e,r,n,s){var i=e.throwError,o=e.throwAll;e.throwError=!1,e.throwAll=!1;var a=this.validateSchema(t,s,e,r);return e.throwError=i,e.throwAll=o,!a.valid&&n instanceof Function&&n(a),a.valid}Ct.anyOf=function(e,r,n,s){if(e===void 0)return null;var i=new xt(e,r,n,s),o=new xt(e,r,n,s);if(!Array.isArray(r.anyOf))throw new Bu("anyOf must be an array");if(!r.anyOf.some(wO.bind(this,e,n,s,function(c){o.importErrors(c)}))){var a=r.anyOf.map(function(c,u){var l=c.$id||c.id;return l?"<"+l+">":c.title&&JSON.stringify(c.title)||c.$ref&&"<"+c.$ref+">"||"[subschema "+u+"]"});n.nestedErrors&&i.importErrors(o),i.addError({name:"anyOf",argument:a,message:"is not any of "+a.join(",")})}return i};Ct.allOf=function(e,r,n,s){if(e===void 0)return null;if(!Array.isArray(r.allOf))throw new Bu("allOf must be an array");var i=new xt(e,r,n,s),o=this;return r.allOf.forEach(function(a,c){var u=o.validateSchema(e,a,n,s);if(!u.valid){var l=a.$id||a.id,d=l||a.title&&JSON.stringify(a.title)||a.$ref&&"<"+a.$ref+">"||"[subschema "+c+"]";i.addError({name:"allOf",argument:{id:d,length:u.errors.length,valid:u},message:"does not match allOf schema "+d+" with "+u.errors.length+" error[s]:"}),i.importErrors(u)}}),i};Ct.oneOf=function(e,r,n,s){if(e===void 0)return null;if(!Array.isArray(r.oneOf))throw new Bu("oneOf must be an array");var i=new xt(e,r,n,s),o=new xt(e,r,n,s),a=r.oneOf.filter(wO.bind(this,e,n,s,function(u){o.importErrors(u)})).length,c=r.oneOf.map(function(u,l){var d=u.$id||u.id;return d||u.title&&JSON.stringify(u.title)||u.$ref&&"<"+u.$ref+">"||"[subschema "+l+"]"});return a!==1&&(n.nestedErrors&&i.importErrors(o),i.addError({name:"oneOf",argument:c,message:"is not exactly one from "+c.join(",")})),i};Ct.if=function(e,r,n,s){if(e===void 0)return null;if(!li.isSchema(r.if))throw new Error('Expected "if" keyword to be a schema');var i=wO.call(this,e,n,s,null,r.if),o=new xt(e,r,n,s),a;if(i){if(r.then===void 0)return;if(!li.isSchema(r.then))throw new Error('Expected "then" keyword to be a schema');a=this.validateSchema(e,r.then,n,s.makeChild(r.then)),o.importErrors(a)}else{if(r.else===void 0)return;if(!li.isSchema(r.else))throw new Error('Expected "else" keyword to be a schema');a=this.validateSchema(e,r.else,n,s.makeChild(r.else)),o.importErrors(a)}return o};function EO(t,e){if(Object.hasOwnProperty.call(t,e))return t[e];if(e in t){for(;t=Object.getPrototypeOf(t);)if(Object.propertyIsEnumerable.call(t,e))return t[e]}}Ct.propertyNames=function(e,r,n,s){if(this.types.object(e)){var i=new xt(e,r,n,s),o=r.propertyNames!==void 0?r.propertyNames:{};if(!li.isSchema(o))throw new Bu('Expected "propertyNames" to be a schema (object or boolean)');for(var a in e)if(EO(e,a)!==void 0){var c=this.validateSchema(a,o,n,s.makeChild(o));i.importErrors(c)}return i}};Ct.properties=function(e,r,n,s){if(this.types.object(e)){var i=new xt(e,r,n,s),o=r.properties||{};for(var a in o){var c=o[a];if(c!==void 0){if(c===null)throw new Bu('Unexpected null, expected schema in "properties"');typeof n.preValidateProperty=="function"&&n.preValidateProperty(e,a,c,n,s);var u=EO(e,a),l=this.validateSchema(u,c,n,s.makeChild(c,a));l.instance!==i.instance[a]&&(i.instance[a]=l.instance),i.importErrors(l)}}return i}};function oz(t,e,r,n,s,i){if(this.types.object(t)&&!(e.properties&&e.properties[s]!==void 0))if(e.additionalProperties===!1)i.addError({name:"additionalProperties",argument:s,message:"is not allowed to have the additional property "+JSON.stringify(s)});else{var o=e.additionalProperties||{};typeof r.preValidateProperty=="function"&&r.preValidateProperty(t,s,o,r,n);var a=this.validateSchema(t[s],o,r,n.makeChild(o,s));a.instance!==i.instance[s]&&(i.instance[s]=a.instance),i.importErrors(a)}}Ct.patternProperties=function(e,r,n,s){if(this.types.object(e)){var i=new xt(e,r,n,s),o=r.patternProperties||{};for(var a in e){var c=!0;for(var u in o){var l=o[u];if(l!==void 0){if(l===null)throw new Bu('Unexpected null, expected schema in "patternProperties"');try{var d=new RegExp(u,"u")}catch{d=new RegExp(u)}if(d.test(a)){c=!1,typeof n.preValidateProperty=="function"&&n.preValidateProperty(e,a,l,n,s);var p=this.validateSchema(e[a],l,n,s.makeChild(l,a));p.instance!==i.instance[a]&&(i.instance[a]=p.instance),i.importErrors(p)}}}c&&oz.call(this,e,r,n,s,a,i)}return i}};Ct.additionalProperties=function(e,r,n,s){if(this.types.object(e)){if(r.patternProperties)return null;var i=new xt(e,r,n,s);for(var o in e)oz.call(this,e,r,n,s,o,i);return i}};Ct.minProperties=function(e,r,n,s){if(this.types.object(e)){var i=new xt(e,r,n,s),o=Object.keys(e);return o.length>=r.minProperties||i.addError({name:"minProperties",argument:r.minProperties,message:"does not meet minimum property length of "+r.minProperties}),i}};Ct.maxProperties=function(e,r,n,s){if(this.types.object(e)){var i=new xt(e,r,n,s),o=Object.keys(e);return o.length<=r.maxProperties||i.addError({name:"maxProperties",argument:r.maxProperties,message:"does not meet maximum property length of "+r.maxProperties}),i}};Ct.items=function(e,r,n,s){var i=this;if(this.types.array(e)&&r.items!==void 0){var o=new xt(e,r,n,s);return e.every(function(a,c){if(Array.isArray(r.items))var u=r.items[c]===void 0?r.additionalItems:r.items[c];else var u=r.items;if(u===void 0)return!0;if(u===!1)return o.addError({name:"items",message:"additionalItems not permitted"}),!1;var l=i.validateSchema(a,u,n,s.makeChild(u,c));return l.instance!==o.instance[c]&&(o.instance[c]=l.instance),o.importErrors(l),!0}),o}};Ct.contains=function(e,r,n,s){var i=this;if(this.types.array(e)&&r.contains!==void 0){if(!li.isSchema(r.contains))throw new Error('Expected "contains" keyword to be a schema');var o=new xt(e,r,n,s),a=e.some(function(c,u){var l=i.validateSchema(c,r.contains,n,s.makeChild(r.contains,u));return l.errors.length===0});return a===!1&&o.addError({name:"contains",argument:r.contains,message:"must contain an item matching given schema"}),o}};Ct.minimum=function(e,r,n,s){if(this.types.number(e)){var i=new xt(e,r,n,s);return r.exclusiveMinimum&&r.exclusiveMinimum===!0?e>r.minimum||i.addError({name:"minimum",argument:r.minimum,message:"must be greater than "+r.minimum}):e>=r.minimum||i.addError({name:"minimum",argument:r.minimum,message:"must be greater than or equal to "+r.minimum}),i}};Ct.maximum=function(e,r,n,s){if(this.types.number(e)){var i=new xt(e,r,n,s);return r.exclusiveMaximum&&r.exclusiveMaximum===!0?e<r.maximum||i.addError({name:"maximum",argument:r.maximum,message:"must be less than "+r.maximum}):e<=r.maximum||i.addError({name:"maximum",argument:r.maximum,message:"must be less than or equal to "+r.maximum}),i}};Ct.exclusiveMinimum=function(e,r,n,s){if(typeof r.exclusiveMinimum!="boolean"&&this.types.number(e)){var i=new xt(e,r,n,s),o=e>r.exclusiveMinimum;return o||i.addError({name:"exclusiveMinimum",argument:r.exclusiveMinimum,message:"must be strictly greater than "+r.exclusiveMinimum}),i}};Ct.exclusiveMaximum=function(e,r,n,s){if(typeof r.exclusiveMaximum!="boolean"&&this.types.number(e)){var i=new xt(e,r,n,s),o=e<r.exclusiveMaximum;return o||i.addError({name:"exclusiveMaximum",argument:r.exclusiveMaximum,message:"must be strictly less than "+r.exclusiveMaximum}),i}};var az=function(e,r,n,s,i,o){if(this.types.number(e)){var a=r[i];if(a==0)throw new Bu(i+" cannot be zero");var c=new xt(e,r,n,s),u=li.getDecimalPlaces(e),l=li.getDecimalPlaces(a),d=Math.max(u,l),p=Math.pow(10,d);return Math.round(e*p)%Math.round(a*p)!==0&&c.addError({name:i,argument:a,message:o+JSON.stringify(a)}),c}};Ct.multipleOf=function(e,r,n,s){return az.call(this,e,r,n,s,"multipleOf","is not a multiple of (divisible by) ")};Ct.divisibleBy=function(e,r,n,s){return az.call(this,e,r,n,s,"divisibleBy","is not divisible by (multiple of) ")};Ct.required=function(e,r,n,s){var i=new xt(e,r,n,s);return e===void 0&&r.required===!0?i.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(r.required)&&r.required.forEach(function(o){EO(e,o)===void 0&&i.addError({name:"required",argument:o,message:"requires property "+JSON.stringify(o)})}),i};Ct.pattern=function(e,r,n,s){if(this.types.string(e)){var i=new xt(e,r,n,s),o=r.pattern;try{var a=new RegExp(o,"u")}catch{a=new RegExp(o)}return e.match(a)||i.addError({name:"pattern",argument:r.pattern,message:"does not match pattern "+JSON.stringify(r.pattern.toString())}),i}};Ct.format=function(e,r,n,s){if(e!==void 0){var i=new xt(e,r,n,s);return!i.disableFormat&&!li.isFormat(e,r.format,this)&&i.addError({name:"format",argument:r.format,message:"does not conform to the "+JSON.stringify(r.format)+" format"}),i}};Ct.minLength=function(e,r,n,s){if(this.types.string(e)){var i=new xt(e,r,n,s),o=e.match(/[\uDC00-\uDFFF]/g),a=e.length-(o?o.length:0);return a>=r.minLength||i.addError({name:"minLength",argument:r.minLength,message:"does not meet minimum length of "+r.minLength}),i}};Ct.maxLength=function(e,r,n,s){if(this.types.string(e)){var i=new xt(e,r,n,s),o=e.match(/[\uDC00-\uDFFF]/g),a=e.length-(o?o.length:0);return a<=r.maxLength||i.addError({name:"maxLength",argument:r.maxLength,message:"does not meet maximum length of "+r.maxLength}),i}};Ct.minItems=function(e,r,n,s){if(this.types.array(e)){var i=new xt(e,r,n,s);return e.length>=r.minItems||i.addError({name:"minItems",argument:r.minItems,message:"does not meet minimum length of "+r.minItems}),i}};Ct.maxItems=function(e,r,n,s){if(this.types.array(e)){var i=new xt(e,r,n,s);return e.length<=r.maxItems||i.addError({name:"maxItems",argument:r.maxItems,message:"does not meet maximum length of "+r.maxItems}),i}};function Swe(t,e,r){var n,s=r.length;for(n=e+1,s;n<s;n++)if(li.deepCompareStrict(t,r[n]))return!1;return!0}Ct.uniqueItems=function(e,r,n,s){if(r.uniqueItems===!0&&this.types.array(e)){var i=new xt(e,r,n,s);return e.every(Swe)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i}};Ct.dependencies=function(e,r,n,s){if(this.types.object(e)){var i=new xt(e,r,n,s);for(var o in r.dependencies)if(e[o]!==void 0){var a=r.dependencies[o],c=s.makeChild(a,o);if(typeof a=="string"&&(a=[a]),Array.isArray(a))a.forEach(function(l){e[l]===void 0&&i.addError({name:"dependencies",argument:c.propertyPath,message:"property "+l+" not found, required by "+c.propertyPath})});else{var u=this.validateSchema(e,a,n,c);i.instance!==u.instance&&(i.instance=u.instance),u&&u.errors.length&&(i.addError({name:"dependencies",argument:c.propertyPath,message:"does not meet dependency required by "+c.propertyPath}),i.importErrors(u))}}return i}};Ct.enum=function(e,r,n,s){if(e===void 0)return null;if(!Array.isArray(r.enum))throw new Bu("enum expects an array",r);var i=new xt(e,r,n,s);return r.enum.some(li.deepCompareStrict.bind(null,e))||i.addError({name:"enum",argument:r.enum,message:"is not one of enum values: "+r.enum.map(String).join(",")}),i};Ct.const=function(e,r,n,s){if(e===void 0)return null;var i=new xt(e,r,n,s);return li.deepCompareStrict(r.const,e)||i.addError({name:"const",argument:r.const,message:"does not exactly match expected constant: "+r.const}),i};Ct.not=Ct.disallow=function(e,r,n,s){var i=this;if(e===void 0)return null;var o=new xt(e,r,n,s),a=r.not||r.disallow;return a?(Array.isArray(a)||(a=[a]),a.forEach(function(c){if(i.testType(e,r,n,s,c)){var u=c&&(c.$id||c.id),l=u||c;o.addError({name:"not",argument:l,message:"is of prohibited type "+l})}}),o):null};uz.exports=_O});var L_=v((Eke,SO)=>{"use strict";var lz=M_(),Awe=Iu();SO.exports.SchemaScanResult=dz;function dz(t,e){this.id=t,this.ref=e}SO.exports.scan=function(e,r){function n(c,u){if(!(!u||typeof u!="object")){if(u.$ref){var l=lz.resolve(c,u.$ref);a[l]=a[l]?a[l]+1:0;return}var d=u.$id||u.id,p=d?lz.resolve(c,d):c;if(p){if(p.indexOf("#")<0&&(p+="#"),o[p]){if(!Awe.deepCompareStrict(o[p],u))throw new Error("Schema <"+p+"> already exists with different definition");return o[p]}o[p]=u,p[p.length-1]=="#"&&(o[p.substring(0,p.length-1)]=u)}s(p+"/items",Array.isArray(u.items)?u.items:[u.items]),s(p+"/extends",Array.isArray(u.extends)?u.extends:[u.extends]),n(p+"/additionalItems",u.additionalItems),i(p+"/properties",u.properties),n(p+"/additionalProperties",u.additionalProperties),i(p+"/definitions",u.definitions),i(p+"/patternProperties",u.patternProperties),i(p+"/dependencies",u.dependencies),s(p+"/disallow",u.disallow),s(p+"/allOf",u.allOf),s(p+"/anyOf",u.anyOf),s(p+"/oneOf",u.oneOf),n(p+"/not",u.not)}}function s(c,u){if(Array.isArray(u))for(var l=0;l<u.length;l++)n(c+"/"+l,u[l])}function i(c,u){if(!(!u||typeof u!="object"))for(var l in u)n(c+"/"+l,u[l])}var o={},a={};return n(e,r),new dz(o,a)}});var _z=v((Ske,bz)=>{"use strict";var fz=M_(),pz=cz(),bl=Iu(),hz=L_().scan,mz=bl.ValidatorResult,Dwe=bl.ValidatorResultError,gy=bl.SchemaError,yz=bl.SchemaContext,gz="/",Wr=function t(){this.customFormats=Object.create(t.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(go),this.attributes=Object.create(pz.validators)};Wr.prototype.customFormats={};Wr.prototype.schemas=null;Wr.prototype.types=null;Wr.prototype.attributes=null;Wr.prototype.unresolvedRefs=null;Wr.prototype.addSchema=function(e,r){var n=this;if(!e)return null;var s=hz(r||gz,e),i=r||e.$id||e.id;for(var o in s.id)this.schemas[o]=s.id[o];for(var o in s.ref)this.unresolvedRefs.push(o);return this.unresolvedRefs=this.unresolvedRefs.filter(function(a){return typeof n.schemas[a]>"u"}),this.schemas[i]};Wr.prototype.addSubSchemaArray=function(e,r){if(Array.isArray(r))for(var n=0;n<r.length;n++)this.addSubSchema(e,r[n])};Wr.prototype.addSubSchemaObject=function(e,r){if(!(!r||typeof r!="object"))for(var n in r)this.addSubSchema(e,r[n])};Wr.prototype.setSchemas=function(e){this.schemas=e};Wr.prototype.getSchema=function(e){return this.schemas[e]};Wr.prototype.validate=function(e,r,n,s){if(typeof r!="boolean"&&typeof r!="object"||r===null)throw new gy("Expected `schema` to be an object or boolean");n||(n={});var i=r.$id||r.id,o=fz.resolve(n.base||gz,i||"");if(!s){s=new yz(r,n,[],o,Object.create(this.schemas)),s.schemas[o]||(s.schemas[o]=r);var a=hz(o,r);for(var c in a.id){var u=a.id[c];s.schemas[c]=u}}if(n.required&&e===void 0){var l=new mz(e,r,n,s);return l.addError("is required, but is undefined"),l}var l=this.validateSchema(e,r,n,s);if(l){if(n.throwAll&&l.errors.length)throw new Dwe(l)}else throw new Error("Result undefined");return l};function vz(t){var e=typeof t=="string"?t:t.$ref;return typeof e=="string"?e:!1}Wr.prototype.validateSchema=function(e,r,n,s){var i=new mz(e,r,n,s);if(typeof r=="boolean")r===!0?r={}:r===!1&&(r={type:[]});else if(!r)throw new Error("schema is undefined");if(r.extends)if(Array.isArray(r.extends)){var o={schema:r,ctx:s};r.extends.forEach(this.schemaTraverser.bind(this,o)),r=o.schema,o.schema=null,o.ctx=null,o=null}else r=bl.deepMerge(r,this.superResolve(r.extends,s));var a=vz(r);if(a){var c=this.resolve(r,a,s),u=new yz(c.subschema,n,s.path,c.switchSchema,s.schemas);return this.validateSchema(e,c.subschema,n,u)}var l=n&&n.skipAttributes||[];for(var d in r)if(!pz.ignoreProperties[d]&&l.indexOf(d)<0){var p=null,f=this.attributes[d];if(f)p=f.call(this,e,r,n,s);else if(n.allowUnknownAttributes===!1)throw new gy("Unsupported attribute: "+d,r);p&&i.importErrors(p)}if(typeof n.rewrite=="function"){var h=n.rewrite.call(this,e,r,n,s);i.instance=h}return i};Wr.prototype.schemaTraverser=function(e,r){e.schema=bl.deepMerge(e.schema,this.superResolve(r,e.ctx))};Wr.prototype.superResolve=function(e,r){var n=vz(e);return n?this.resolve(e,n,r).subschema:e};Wr.prototype.resolve=function(e,r,n){if(r=n.resolve(r),n.schemas[r])return{subschema:n.schemas[r],switchSchema:r};var s=fz.parse(r),i=s&&s.hash,o=i&&i.length&&r.substr(0,r.length-i.length);if(!o||!n.schemas[o])throw new gy("no such schema <"+r+">",e);var a=bl.objectGetPath(n.schemas[o],i.substr(1));if(a===void 0)throw new gy("no such schema "+i+" located in <"+o+">",e);return{subschema:a,switchSchema:r}};Wr.prototype.testType=function(e,r,n,s,i){if(i!==void 0){if(i===null)throw new gy('Unexpected null in "type" keyword');if(typeof this.types[i]=="function")return this.types[i].call(this,e);if(i&&typeof i=="object"){var o=this.validateSchema(e,i,n,s);return o===void 0||!(o&&o.errors.length)}return!0}};var go=Wr.prototype.types={};go.string=function(e){return typeof e=="string"};go.number=function(e){return typeof e=="number"&&isFinite(e)};go.integer=function(e){return typeof e=="number"&&e%1===0};go.boolean=function(e){return typeof e=="boolean"};go.array=function(e){return Array.isArray(e)};go.null=function(e){return e===null};go.date=function(e){return e instanceof Date};go.any=function(e){return!0};go.object=function(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof Date)};bz.exports=Wr});var wz=v((Ake,ba)=>{"use strict";var xwe=ba.exports.Validator=_z();ba.exports.ValidatorResult=Iu().ValidatorResult;ba.exports.ValidatorResultError=Iu().ValidatorResultError;ba.exports.ValidationError=Iu().ValidationError;ba.exports.SchemaError=Iu().SchemaError;ba.exports.SchemaScanResult=L_().SchemaScanResult;ba.exports.scan=L_().scan;ba.exports.validate=function(t,e,r){var n=new xwe;return n.validate(t,e,r)}});var Owe={};xr(Owe,{DEFAULT_STATUS_LIST_VC_CONTEXT:()=>U_,DEFAULT_VC_CONTEXT:()=>_a,DEFAULT_VC_TYPE:()=>wa,DEFAULT_VP_TYPE:()=>_l,Jwt:()=>ss,PresentationExchange:()=>S_,StatusListCredential:()=>xO,StatusPurpose:()=>Dz,VerifiableCredential:()=>wl,VerifiablePresentation:()=>AO,utils:()=>oO});var qz=xs(kO(),1);var Lwe=new Uint8Array(0);function RO(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Ol(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function Uz(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var y=0,g=0,A=0,x=h.length;A!==x&&h[A]===0;)A++,y++;for(var b=(x-A)*l+1>>>0,w=new Uint8Array(b);A!==x;){for(var D=h[A],F=0,C=b-1;(D!==0||F<g)&&C!==-1;C--,F++)D+=256*w[C]>>>0,w[C]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");g=F,A++}for(var I=b-g;I!==b&&w[I]===0;)I++;for(var k=c.repeat(y);I<b;++I)k+=t.charAt(w[I]);return k}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var y=0;if(h[y]!==" "){for(var g=0,A=0;h[y]===c;)g++,y++;for(var x=(h.length-y)*u+1>>>0,b=new Uint8Array(x);h[y];){var w=r[h.charCodeAt(y)];if(w===255)return;for(var D=0,F=x-1;(w!==0||D<A)&&F!==-1;F--,D++)w+=a*b[F]>>>0,b[F]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");A=D,y++}if(h[y]!==" "){for(var C=x-A;C!==x&&b[C]===0;)C++;for(var I=new Uint8Array(g+(x-C)),k=g;C!==x;)I[k++]=b[C++];return I}}}function f(h){var y=p(h);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:f}}var Vz=Uz,Kz=Vz,$O=Kz;var Z_=class{name;prefix;baseEncode;constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},X_=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jO(this,e)}},Y_=class{decoders;constructor(e){this.decoders=e}or(e){return jO(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function jO(t,e){return new Y_({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}var Q_=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Z_(e,r,n),this.decoder=new X_(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function NO({name:t,prefix:e,encode:r,decode:n}){return new Q_(t,e,r,n)}function e1({name:t,prefix:e,alphabet:r}){let{encode:n,decode:s}=$O(r,t);return NO({prefix:e,name:t,encode:n,decode:i=>Ol(s(i))})}function zz(t,e,r,n){let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,c=0,u=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o}function Hz(t,e,r){let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o!==0&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i}function _n({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return NO({prefix:e,name:t,encode(s){return Hz(s,n,r)},decode(s){return zz(s,n,r,t)}})}var np=_n({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Wwe=_n({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Jwe=_n({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Gwe=_n({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Zwe=_n({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xwe=_n({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ywe=_n({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Qwe=_n({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),t1=_n({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Tn=e1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rEe=e1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var sEe=_n({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),oEe=_n({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cs=_n({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),aEe=_n({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function MO(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function qO(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function Fl(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var ip=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},LO=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}},xy=new TextEncoder,Mu=new TextDecoder,le=class t{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new t(e,"ArrayBuffer")}static asyncIterable(e){if(!qO(e))throw new TypeError("Input must be of type AsyncIterable.");return new t(e,"AsyncIterable")}static base32Z(e){return new t(e,"Base32Z")}static base58Btc(e){return new t(e,"Base58Btc")}static base64Url(e){return new t(e,"Base64Url")}static bufferSource(e){return new t(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new t(e,"Hex")}static multibase(e){return new t(e,"Multibase")}static object(e){return new t(e,"Object")}static string(e){return new t(e,"String")}static uint8Array(e){return new t(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Tn.baseDecode(this.data).buffer;case"Base64Url":return Cs.baseDecode(this.data).buffer;case"BufferSource":{if(Fl(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return MO(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return ip(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return t1.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Tn.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Tn.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Cs.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return Cs.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=xy.encode(e);return Cs.baseEncode(r)}case"String":{let e=xy.encode(this.data);return Cs.baseEncode(e)}case"Uint8Array":return Cs.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){return ip(this,void 0,void 0,function*(){var e,r,n,s;switch(this.format){case"AsyncIterable":{let c=[];try{for(var i=!0,o=LO(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let l=s;c.push(l)}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(c)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=Cs.baseDecode(this.data),r=Mu.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=Mu.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return ip(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return Mu.decode(this.data);case"Base64Url":{let e=Cs.baseDecode(this.data);return Mu.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return Mu.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){return ip(this,void 0,void 0,function*(){var e,r,n,s;switch(this.format){case"AsyncIterable":{let c="";try{for(var i=!0,o=LO(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let u=s;typeof u=="string"?c+=u:c+=Mu.decode(u,{stream:!0})}}catch(u){r={error:u}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return c+=Mu.decode(void 0,{stream:!1}),c}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return t1.baseDecode(this.data);case"Base58Btc":return Tn.baseDecode(this.data);case"Base64Url":return Cs.baseDecode(this.data);case"BufferSource":{let e=Fl(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return xy.encode(e)}case"String":return xy.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return ip(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var sp;(function(t){t.Debug="debug",t.Silent="silent"})(sp||(sp={}));var r1=class{constructor(){this.logLevel=sp.Silent}setLogLevel(e){this.logLevel=e}log(e){this.info(e)}info(e){this.logLevel!==sp.Silent&&console.info(e)}error(e){this.logLevel!==sp.Silent&&console.error(e)}},Wz=new r1;typeof window<"u"&&(window.web5logger=Wz);var Eo={};xr(Eo,{decode:()=>Tl,encodeTo:()=>qu,encodingLength:()=>Lu});var Jz=KO,UO=128,Gz=127,Zz=~Gz,Xz=Math.pow(2,31);function KO(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Xz;)e[r++]=t&255|UO,t/=128;for(;t&Zz;)e[r++]=t&255|UO,t>>>=7;return e[r]=t|0,KO.bytes=r-n+1,e}var Yz=n1,Qz=128,VO=127;function n1(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw n1.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&VO)<<s:(o&VO)*Math.pow(2,s),s+=7}while(o>=Qz);return n1.bytes=i-n,r}var eH=Math.pow(2,7),tH=Math.pow(2,14),rH=Math.pow(2,21),nH=Math.pow(2,28),iH=Math.pow(2,35),sH=Math.pow(2,42),oH=Math.pow(2,49),aH=Math.pow(2,56),uH=Math.pow(2,63),cH=function(t){return t<eH?1:t<tH?2:t<rH?3:t<nH?4:t<iH?5:t<sH?6:t<oH?7:t<aH?8:t<uH?9:10},lH={encode:Jz,decode:Yz,encodingLength:cH},dH=lH,op=dH;function Tl(t,e=0){return[op.decode(t,e),op.decode.bytes]}function qu(t,e,r=0){return op.encode(t,e,r),e}function Lu(t){return op.encodingLength(t)}function i1(t,e){let r=e.byteLength,n=Lu(t),s=n+Lu(r),i=new Uint8Array(s+r);return qu(t,i,0),qu(r,i,n),i.set(e,s),new Il(t,r,e,i)}function zO(t){let e=Ol(t),[r,n]=Tl(e),[s,i]=Tl(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new Il(r,s,o,e)}function HO(t,e){if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&RO(t.bytes,r.bytes)}}var Il=class{code;size;digest;bytes;constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};function WO(t,e){let{bytes:r,version:n}=t;switch(n){case 0:return pH(r,o1(t),e??Tn.encoder);default:return hH(r,o1(t),e??np.encoder)}}var JO=new WeakMap;function o1(t){let e=JO.get(t);if(e==null){let r=new Map;return JO.set(t,r),r}return e}var a1=class t{code;version;multihash;bytes;"/";constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==ap)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==mH)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=i1(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n!=null&&e.code===n.code&&e.version===n.version&&HO(e.multihash,n.multihash)}toString(e){return WO(this,e)}toJSON(){return{"/":WO(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:s,multihash:i,bytes:o}=r;return new t(n,s,i,o??GO(n,s,i.bytes))}else if(r[yH]===!0){let{version:n,multihash:s,code:i}=r,o=zO(s);return t.create(n,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==ap)throw new Error(`Version 0 CID must use dag-pb (code: ${ap}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let s=GO(e,r,n.bytes);return new t(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,ap,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,s=Ol(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new Il(r.multihashCode,r.digestSize,i,s);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,p]=Tl(e.subarray(r));return r+=p,d},s=n(),i=ap;if(s===18?(s=0,r=0):i=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),c=n(),u=r+c,l=u-o;return{version:s,codec:i,multihashCode:a,digestSize:c,multihashSize:l,size:u}}static parse(e,r){let[n,s]=fH(e,r),i=t.decode(s);if(i.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return o1(i).set(n,e),i}};function fH(t,e){switch(t[0]){case"Q":{let r=e??Tn;return[Tn.prefix,r.decode(`${Tn.prefix}${t}`)]}case Tn.prefix:{let r=e??Tn;return[Tn.prefix,r.decode(t)]}case np.prefix:{let r=e??np;return[np.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function pH(t,e,r){let{prefix:n}=r;if(n!==Tn.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s}function hH(t,e,r){let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s}var ap=112,mH=18;function GO(t,e,r){let n=Lu(t),s=n+Lu(e),i=new Uint8Array(s+r.byteLength);return qu(t,i,0),qu(e,i,n),i.set(r,s),i}var yH=Symbol.for("@ipld/js-cid/CID");var an=class t{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=t.codeToName.has(n)?n:t.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let o=Eo.encodingLength(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),Eo.encodeTo(n,a),a}static getCodeFromData(e){let{prefixedData:r}=e,[n,s]=Eo.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=t.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=t.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){t.codeToName.set(e.code,e.name),t.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,s]=Eo.decode(r),i=t.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};an.codeToName=new Map;an.nameToCode=new Map;an.registerCodec({code:237,name:"ed25519-pub"});an.registerCodec({code:4864,name:"ed25519-priv"});an.registerCodec({code:236,name:"x25519-pub"});an.registerCodec({code:4866,name:"x25519-priv"});an.registerCodec({code:231,name:"secp256k1-pub"});an.registerCodec({code:4865,name:"secp256k1-priv"});function u1(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&u1(t[e])})}var tJ=xs(lw(),1),ic=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};var n0=class{constructor(){this.store=new Map}clear(){return ic(this,void 0,void 0,function*(){this.store.clear()})}close(){return ic(this,void 0,void 0,function*(){})}delete(e){return ic(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return ic(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return ic(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return ic(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return ic(this,void 0,void 0,function*(){this.store.set(e,r)})}};var _Q=xs(AE(),1);var wQ=xs(AE(),1);function EQ(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function DE(t,...e){if(!EQ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function xE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function xB(t,e){DE(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var cd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var j0=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Xi=(t,e)=>t<<32-e|t>>>e;var dAe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function SQ(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function CE(t){return typeof t=="string"&&(t=SQ(t)),DE(t),t}var $0=class{clone(){return this._cloneInto()}},fAe={}.toString;function CB(t){let e=n=>t().update(CE(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function PB(t=32){if(cd&&typeof cd.getRandomValues=="function")return cd.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function AQ(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}var OB=(t,e,r)=>t&e^~t&r,FB=(t,e,r)=>t&e^t&r^e&r,N0=class extends $0{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=j0(this.buffer)}update(e){xE(this);let{view:r,buffer:n,blockLen:s}=this;e=CE(e);let i=e.length;for(let o=0;o<i;){let a=Math.min(s-this.pos,i-o);if(a===s){let c=j0(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){xE(this),xB(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;AQ(n,s-8,BigInt(this.length*8),i),this.process(n,0);let a=j0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};var DQ=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ja=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Na=new Uint32Array(64),PE=class extends N0{constructor(){super(64,32,8,!1),this.A=ja[0]|0,this.B=ja[1]|0,this.C=ja[2]|0,this.D=ja[3]|0,this.E=ja[4]|0,this.F=ja[5]|0,this.G=ja[6]|0,this.H=ja[7]|0}get(){let{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Na[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){let p=Na[d-15],f=Na[d-2],h=Xi(p,7)^Xi(p,18)^p>>>3,y=Xi(f,17)^Xi(f,19)^f>>>10;Na[d]=y+Na[d-7]+h+Na[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){let p=Xi(a,6)^Xi(a,11)^Xi(a,25),f=l+p+OB(a,c,u)+DQ[d]+Na[d]|0,y=(Xi(n,2)^Xi(n,13)^Xi(n,22))+FB(n,s,i)|0;l=u,u=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+y|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Na.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Ma=CB(()=>new PE);var xQ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},ld=class{static digest(e){return xQ(this,arguments,void 0,function*({data:r}){return Ma(r)})}};var Ls=class{};var CQ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},M0=class extends Ls{digest(e){return CQ(this,arguments,void 0,function*({algorithm:r,data:n}){switch(r){case"SHA-256":return yield ld.digest({data:n})}})}};function TB(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function PQ(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function OE(t,...e){if(!PQ(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function IB(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");TB(t.outputLen),TB(t.blockLen)}function dd(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function BB(t,e){OE(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var q0=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function kB(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var L0=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Yi=(t,e)=>t<<32-e|t>>>e,OQ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!OQ)throw new Error("Non little-endian hardware is not supported");function FE(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Lp(t){if(typeof t=="string"&&(t=FE(t)),!kB(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function U0(...t){let e=0;for(let n=0;n<t.length;n++){let s=t[n];if(!kB(s))throw new Error("Uint8Array expected");e+=s.length}let r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){let i=t[n];r.set(i,s),s+=i.length}return r}var fd=class{clone(){return this._cloneInto()}},OAe={}.toString;function V0(t){let e=n=>t().update(Lp(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Up(t=32){if(q0&&typeof q0.getRandomValues=="function")return q0.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function FQ(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}var pd=class extends fd{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=L0(this.buffer)}update(e){dd(this);let{view:r,buffer:n,blockLen:s}=this;e=Lp(e);let i=e.length;for(let o=0;o<i;){let a=Math.min(s-this.pos,i-o);if(a===s){let c=L0(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){dd(this),BB(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;FQ(n,s-8,BigInt(this.length*8),i),this.process(n,0);let a=L0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};var TQ=(t,e,r)=>t&e^~t&r,IQ=(t,e,r)=>t&e^t&r^e&r,BQ=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qa=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),La=new Uint32Array(64),TE=class extends pd{constructor(){super(64,32,8,!1),this.A=qa[0]|0,this.B=qa[1]|0,this.C=qa[2]|0,this.D=qa[3]|0,this.E=qa[4]|0,this.F=qa[5]|0,this.G=qa[6]|0,this.H=qa[7]|0}get(){let{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)La[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){let p=La[d-15],f=La[d-2],h=Yi(p,7)^Yi(p,18)^p>>>3,y=Yi(f,17)^Yi(f,19)^f>>>10;La[d]=y+La[d-7]+h+La[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){let p=Yi(a,6)^Yi(a,11)^Yi(a,25),f=l+p+TQ(a,c,u)+BQ[d]+La[d]|0,y=(Yi(n,2)^Yi(n,13)^Yi(n,22))+IQ(n,s,i)|0;l=u,u=c,c=a,a=o+f|0,o=i,i=s,s=n,n=f+y|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){La.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var K0=V0(()=>new TE);var H0={};xr(H0,{bitGet:()=>qQ,bitLen:()=>MQ,bitMask:()=>Vp,bitSet:()=>LQ,bytesToHex:()=>No,bytesToNumberBE:()=>Mo,bytesToNumberLE:()=>es,concatBytes:()=>Lo,createHmacDrbg:()=>kE,ensureBytes:()=>zt,equalBytes:()=>jQ,hexToBytes:()=>gc,hexToNumber:()=>BE,isBytes:()=>Qi,numberToBytesBE:()=>kn,numberToBytesLE:()=>qo,numberToHexUnpadded:()=>NB,numberToVarBytesBE:()=>$Q,utf8ToBytes:()=>NQ,validateObject:()=>bi});var jB=BigInt(0),z0=BigInt(1),kQ=BigInt(2);function Qi(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var RQ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function No(t){if(!Qi(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=RQ[t[r]];return e}function NB(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function BE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var jo={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function RB(t){if(t>=jo._0&&t<=jo._9)return t-jo._0;if(t>=jo._A&&t<=jo._F)return t-(jo._A-10);if(t>=jo._a&&t<=jo._f)return t-(jo._a-10)}function gc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){let o=RB(t.charCodeAt(i)),a=RB(t.charCodeAt(i+1));if(o===void 0||a===void 0){let c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function Mo(t){return BE(No(t))}function es(t){if(!Qi(t))throw new Error("Uint8Array expected");return BE(No(Uint8Array.from(t).reverse()))}function kn(t,e){return gc(t.toString(16).padStart(e*2,"0"))}function qo(t,e){return kn(t,e).reverse()}function $Q(t){return gc(NB(t))}function zt(t,e,r){let n;if(typeof e=="string")try{n=gc(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Qi(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function Lo(...t){let e=0;for(let s=0;s<t.length;s++){let i=t[s];if(!Qi(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e),n=0;for(let s=0;s<t.length;s++){let i=t[s];r.set(i,n),n+=i.length}return r}function jQ(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function NQ(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function MQ(t){let e;for(e=0;t>jB;t>>=z0,e+=1);return e}function qQ(t,e){return t>>BigInt(e)&z0}var LQ=(t,e,r)=>t|(r?z0:jB)<<BigInt(e),Vp=t=>(kQ<<BigInt(t-1))-z0,IE=t=>new Uint8Array(t),$B=t=>Uint8Array.from(t);function kE(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=IE(t),s=IE(t),i=0,o=()=>{n.fill(1),s.fill(0),i=0},a=(...d)=>r(s,n,...d),c=(d=IE())=>{s=a($B([0]),d),n=a(),d.length!==0&&(s=a($B([1]),d),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0,p=[];for(;d<e;){n=a();let f=n.slice();p.push(f),d+=n.length}return Lo(...p)};return(d,p)=>{o(),c(d);let f;for(;!(f=p(u()));)c();return o(),f}}var UQ={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Qi(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function bi(t,e,r={}){let n=(s,i,o)=>{let a=UQ[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(let[s,i]of Object.entries(e))n(s,i,!1);for(let[s,i]of Object.entries(r))n(s,i,!0);return t}var Or=BigInt(0),Yt=BigInt(1),vc=BigInt(2),VQ=BigInt(3),RE=BigInt(4),MB=BigInt(5),qB=BigInt(8),KQ=BigInt(9),zQ=BigInt(16);function Ot(t,e){let r=t%e;return r>=Or?r:e+r}function $E(t,e,r){if(r<=Or||e<Or)throw new Error("Expected power/modulo > 0");if(r===Yt)return Or;let n=Yt;for(;e>Or;)e&Yt&&(n=n*t%r),t=t*t%r,e>>=Yt;return n}function Ht(t,e,r){let n=t;for(;e-- >Or;)n*=n,n%=r;return n}function W0(t,e){if(t===Or||e<=Or)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Ot(t,e),n=e,s=Or,i=Yt,o=Yt,a=Or;for(;r!==Or;){let u=n/r,l=n%r,d=s-o*u,p=i-a*u;n=r,r=l,s=o,i=a,o=d,a=p}if(n!==Yt)throw new Error("invert: does not exist");return Ot(s,e)}function HQ(t){let e=(t-Yt)/vc,r,n,s;for(r=t-Yt,n=0;r%vc===Or;r/=vc,n++);for(s=vc;s<t&&$E(s,e,t)!==t-Yt;s++);if(n===1){let o=(t+Yt)/RE;return function(c,u){let l=c.pow(u,o);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}let i=(r+Yt)/vc;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,l=a.pow(a.mul(a.ONE,s),r),d=a.pow(c,i),p=a.pow(c,r);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let f=1;for(let y=a.sqr(p);f<u&&!a.eql(y,a.ONE);f++)y=a.sqr(y);let h=a.pow(l,Yt<<BigInt(u-f-1));l=a.sqr(h),d=a.mul(d,h),p=a.mul(p,l),u=f}return d}}function WQ(t){if(t%RE===VQ){let e=(t+Yt)/RE;return function(n,s){let i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%qB===MB){let e=(t-MB)/qB;return function(n,s){let i=n.mul(s,vc),o=n.pow(i,e),a=n.mul(s,o),c=n.mul(n.mul(a,vc),o),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),s))throw new Error("Cannot find square root");return u}}return t%zQ,HQ(t)}var LB=(t,e)=>(Ot(t,e)&Yt)===Yt,JQ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jE(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=JQ.reduce((n,s)=>(n[s]="function",n),e);return bi(t,r)}function GQ(t,e,r){if(r<Or)throw new Error("Expected power > 0");if(r===Or)return t.ONE;if(r===Yt)return e;let n=t.ONE,s=e;for(;r>Or;)r&Yt&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Yt;return n}function ZQ(t,e){let r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function NE(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function hd(t,e,r=!1,n={}){if(t<=Or)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:s,nByteLength:i}=NE(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=WQ(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:Vp(s),ZERO:Or,ONE:Yt,create:c=>Ot(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Or<=c&&c<t},is0:c=>c===Or,isOdd:c=>(c&Yt)===Yt,neg:c=>Ot(-c,t),eql:(c,u)=>c===u,sqr:c=>Ot(c*c,t),add:(c,u)=>Ot(c+u,t),sub:(c,u)=>Ot(c-u,t),mul:(c,u)=>Ot(c*u,t),pow:(c,u)=>GQ(a,c,u),div:(c,u)=>Ot(c*W0(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>W0(c,t),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>ZQ(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?qo(c,i):kn(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return r?es(c):Mo(c)}});return Object.freeze(a)}function UB(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function VB(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function ME(t){let e=VB(t);return e+Math.ceil(e/2)}function KB(t,e,r=!1){let n=t.length,s=VB(e),i=ME(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let o=r?Mo(t):es(t),a=Ot(o,e-Yt)+Yt;return r?qo(a,s):kn(a,s)}var YQ=BigInt(0),qE=BigInt(1);function J0(t,e){let r=(s,i)=>{let o=i.negate();return s?o:i},n=s=>{let i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>YQ;)i&qE&&(o=o.add(a)),a=a.double(),i>>=qE;return o},precomputeWindow(s,i){let{windows:o,windowSize:a}=n(i),c=[],u=s,l=u;for(let d=0;d<o;d++){l=u,c.push(l);for(let p=1;p<a;p++)l=l.add(u),c.push(l);u=l.double()}return c},wNAF(s,i,o){let{windows:a,windowSize:c}=n(s),u=t.ZERO,l=t.BASE,d=BigInt(2**s-1),p=2**s,f=BigInt(s);for(let h=0;h<a;h++){let y=h*c,g=Number(o&d);o>>=f,g>c&&(g-=p,o+=qE);let A=y,x=y+Math.abs(g)-1,b=h%2!==0,w=g<0;g===0?l=l.add(r(b,i[A])):u=u.add(r(w,i[x]))}return{p:u,f:l}},wNAFCached(s,i,o,a){let c=s._WINDOW_SIZE||1,u=i.get(s);return u||(u=this.precomputeWindow(s,c),c!==1&&i.set(s,a(u))),this.wNAF(c,u,o)}}}function Kp(t){return jE(t.Fp),bi(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...NE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function QQ(t){let e=Kp(t);bi(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:eee,hexToBytes:tee}=H0,bc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=bc;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:eee(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=bc,r=typeof t=="string"?tee(t):t;if(!Qi(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:s,l:i}=bc._parseInt(r.subarray(2)),{d:o,l:a}=bc._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){let e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let l=u.toString(16);return l.length&1?`0${l}`:l},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),c=r(o);return`30${r(o+i+4)}02${c}${s}02${a}${n}`}},Uo=BigInt(0),_i=BigInt(1),KAe=BigInt(2),zB=BigInt(3),zAe=BigInt(4);function ree(t){let e=QQ(t),{Fp:r}=e,n=e.toBytes||((h,y,g)=>{let A=y.toAffine();return Lo(Uint8Array.from([4]),r.toBytes(A.x),r.toBytes(A.y))}),s=e.fromBytes||(h=>{let y=h.subarray(1),g=r.fromBytes(y.subarray(0,r.BYTES)),A=r.fromBytes(y.subarray(r.BYTES,2*r.BYTES));return{x:g,y:A}});function i(h){let{a:y,b:g}=e,A=r.sqr(h),x=r.mul(A,h);return r.add(r.add(x,r.mul(h,y)),g)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(h){return typeof h=="bigint"&&Uo<h&&h<e.n}function a(h){if(!o(h))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(h){let{allowedPrivateKeyLengths:y,nByteLength:g,wrapPrivateKey:A,n:x}=e;if(y&&typeof h!="bigint"){if(Qi(h)&&(h=No(h)),typeof h!="string"||!y.includes(h.length))throw new Error("Invalid key");h=h.padStart(g*2,"0")}let b;try{b=typeof h=="bigint"?h:Mo(zt("private key",h,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof h}`)}return A&&(b=Ot(b,x)),a(b),b}let u=new Map;function l(h){if(!(h instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(y,g,A){if(this.px=y,this.py=g,this.pz=A,y==null||!r.isValid(y))throw new Error("x required");if(g==null||!r.isValid(g))throw new Error("y required");if(A==null||!r.isValid(A))throw new Error("z required")}static fromAffine(y){let{x:g,y:A}=y||{};if(!y||!r.isValid(g)||!r.isValid(A))throw new Error("invalid affine point");if(y instanceof d)throw new Error("projective point not allowed");let x=b=>r.eql(b,r.ZERO);return x(g)&&x(A)?d.ZERO:new d(g,A,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){let g=r.invertBatch(y.map(A=>A.pz));return y.map((A,x)=>A.toAffine(g[x])).map(d.fromAffine)}static fromHex(y){let g=d.fromAffine(s(zt("pointHex",y)));return g.assertValidity(),g}static fromPrivateKey(y){return d.BASE.multiply(c(y))}_setWindowSize(y){this._WINDOW_SIZE=y,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:y,y:g}=this.toAffine();if(!r.isValid(y)||!r.isValid(g))throw new Error("bad point: x or y not FE");let A=r.sqr(g),x=i(y);if(!r.eql(A,x))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y}=this.toAffine();if(r.isOdd)return!r.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){l(y);let{px:g,py:A,pz:x}=this,{px:b,py:w,pz:D}=y,F=r.eql(r.mul(g,D),r.mul(b,x)),C=r.eql(r.mul(A,D),r.mul(w,x));return F&&C}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){let{a:y,b:g}=e,A=r.mul(g,zB),{px:x,py:b,pz:w}=this,D=r.ZERO,F=r.ZERO,C=r.ZERO,I=r.mul(x,x),k=r.mul(b,b),T=r.mul(w,w),j=r.mul(x,b);return j=r.add(j,j),C=r.mul(x,w),C=r.add(C,C),D=r.mul(y,C),F=r.mul(A,T),F=r.add(D,F),D=r.sub(k,F),F=r.add(k,F),F=r.mul(D,F),D=r.mul(j,D),C=r.mul(A,C),T=r.mul(y,T),j=r.sub(I,T),j=r.mul(y,j),j=r.add(j,C),C=r.add(I,I),I=r.add(C,I),I=r.add(I,T),I=r.mul(I,j),F=r.add(F,I),T=r.mul(b,w),T=r.add(T,T),I=r.mul(T,j),D=r.sub(D,I),C=r.mul(T,k),C=r.add(C,C),C=r.add(C,C),new d(D,F,C)}add(y){l(y);let{px:g,py:A,pz:x}=this,{px:b,py:w,pz:D}=y,F=r.ZERO,C=r.ZERO,I=r.ZERO,k=e.a,T=r.mul(e.b,zB),j=r.mul(g,b),L=r.mul(A,w),Q=r.mul(x,D),ne=r.add(g,A),W=r.add(b,w);ne=r.mul(ne,W),W=r.add(j,L),ne=r.sub(ne,W),W=r.add(g,x);let ee=r.add(b,D);return W=r.mul(W,ee),ee=r.add(j,Q),W=r.sub(W,ee),ee=r.add(A,x),F=r.add(w,D),ee=r.mul(ee,F),F=r.add(L,Q),ee=r.sub(ee,F),I=r.mul(k,W),F=r.mul(T,Q),I=r.add(F,I),F=r.sub(L,I),I=r.add(L,I),C=r.mul(F,I),L=r.add(j,j),L=r.add(L,j),Q=r.mul(k,Q),W=r.mul(T,W),L=r.add(L,Q),Q=r.sub(j,Q),Q=r.mul(k,Q),W=r.add(W,Q),j=r.mul(L,W),C=r.add(C,j),j=r.mul(ee,W),F=r.mul(ne,F),F=r.sub(F,j),j=r.mul(ne,L),I=r.mul(ee,I),I=r.add(I,j),new d(F,C,I)}subtract(y){return this.add(y.negate())}is0(){return this.equals(d.ZERO)}wNAF(y){return f.wNAFCached(this,u,y,g=>{let A=r.invertBatch(g.map(x=>x.pz));return g.map((x,b)=>x.toAffine(A[b])).map(d.fromAffine)})}multiplyUnsafe(y){let g=d.ZERO;if(y===Uo)return g;if(a(y),y===_i)return this;let{endo:A}=e;if(!A)return f.unsafeLadder(this,y);let{k1neg:x,k1:b,k2neg:w,k2:D}=A.splitScalar(y),F=g,C=g,I=this;for(;b>Uo||D>Uo;)b&_i&&(F=F.add(I)),D&_i&&(C=C.add(I)),I=I.double(),b>>=_i,D>>=_i;return x&&(F=F.negate()),w&&(C=C.negate()),C=new d(r.mul(C.px,A.beta),C.py,C.pz),F.add(C)}multiply(y){a(y);let g=y,A,x,{endo:b}=e;if(b){let{k1neg:w,k1:D,k2neg:F,k2:C}=b.splitScalar(g),{p:I,f:k}=this.wNAF(D),{p:T,f:j}=this.wNAF(C);I=f.constTimeNegate(w,I),T=f.constTimeNegate(F,T),T=new d(r.mul(T.px,b.beta),T.py,T.pz),A=I.add(T),x=k.add(j)}else{let{p:w,f:D}=this.wNAF(g);A=w,x=D}return d.normalizeZ([A,x])[0]}multiplyAndAddUnsafe(y,g,A){let x=d.BASE,b=(D,F)=>F===Uo||F===_i||!D.equals(x)?D.multiplyUnsafe(F):D.multiply(F),w=b(this,g).add(b(y,A));return w.is0()?void 0:w}toAffine(y){let{px:g,py:A,pz:x}=this,b=this.is0();y==null&&(y=b?r.ONE:r.inv(x));let w=r.mul(g,y),D=r.mul(A,y),F=r.mul(x,y);if(b)return{x:r.ZERO,y:r.ZERO};if(!r.eql(F,r.ONE))throw new Error("invZ was invalid");return{x:w,y:D}}isTorsionFree(){let{h:y,isTorsionFree:g}=e;if(y===_i)return!0;if(g)return g(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:y,clearCofactor:g}=e;return y===_i?this:g?g(d,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return this.assertValidity(),n(d,this,y)}toHex(y=!0){return No(this.toRawBytes(y))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);let p=e.nBitLength,f=J0(d,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function nee(t){let e=Kp(t);return bi(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function HB(t){let e=nee(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(W){return Uo<W&&W<r.ORDER}function a(W){return Ot(W,n)}function c(W){return W0(W,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:p}=ree({...e,toBytes(W,ee,ue){let U=ee.toAffine(),q=r.toBytes(U.x),N=Lo;return ue?N(Uint8Array.from([ee.hasEvenY()?2:3]),q):N(Uint8Array.from([4]),q,r.toBytes(U.y))},fromBytes(W){let ee=W.length,ue=W[0],U=W.subarray(1);if(ee===s&&(ue===2||ue===3)){let q=Mo(U);if(!o(q))throw new Error("Point is not on curve");let N=d(q),Y=r.sqrt(N),oe=(Y&_i)===_i;return(ue&1)===1!==oe&&(Y=r.neg(Y)),{x:q,y:Y}}else if(ee===i&&ue===4){let q=r.fromBytes(U.subarray(0,r.BYTES)),N=r.fromBytes(U.subarray(r.BYTES,2*r.BYTES));return{x:q,y:N}}else throw new Error(`Point of length ${ee} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=W=>No(kn(W,e.nByteLength));function h(W){let ee=n>>_i;return W>ee}function y(W){return h(W)?a(-W):W}let g=(W,ee,ue)=>Mo(W.slice(ee,ue));class A{constructor(ee,ue,U){this.r=ee,this.s=ue,this.recovery=U,this.assertValidity()}static fromCompact(ee){let ue=e.nByteLength;return ee=zt("compactSignature",ee,ue*2),new A(g(ee,0,ue),g(ee,ue,2*ue))}static fromDER(ee){let{r:ue,s:U}=bc.toSig(zt("DER",ee));return new A(ue,U)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ee){return new A(this.r,this.s,ee)}recoverPublicKey(ee){let{r:ue,s:U,recovery:q}=this,N=C(zt("msgHash",ee));if(q==null||![0,1,2,3].includes(q))throw new Error("recovery id invalid");let Y=q===2||q===3?ue+e.n:ue;if(Y>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let oe=q&1?"03":"02",M=u.fromHex(oe+f(Y)),V=c(Y),se=a(-N*V),de=a(U*V),ye=u.BASE.multiplyAndAddUnsafe(M,se,de);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return gc(this.toDERHex())}toDERHex(){return bc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return gc(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}let x={isValidPrivateKey(W){try{return l(W),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let W=ME(e.n);return KB(e.randomBytes(W),e.n)},precompute(W=8,ee=u.BASE){return ee._setWindowSize(W),ee.multiply(BigInt(3)),ee}};function b(W,ee=!0){return u.fromPrivateKey(W).toRawBytes(ee)}function w(W){let ee=Qi(W),ue=typeof W=="string",U=(ee||ue)&&W.length;return ee?U===s||U===i:ue?U===2*s||U===2*i:W instanceof u}function D(W,ee,ue=!0){if(w(W))throw new Error("first arg must be private key");if(!w(ee))throw new Error("second arg must be public key");return u.fromHex(ee).multiply(l(W)).toRawBytes(ue)}let F=e.bits2int||function(W){let ee=Mo(W),ue=W.length*8-e.nBitLength;return ue>0?ee>>BigInt(ue):ee},C=e.bits2int_modN||function(W){return a(F(W))},I=Vp(e.nBitLength);function k(W){if(typeof W!="bigint")throw new Error("bigint expected");if(!(Uo<=W&&W<I))throw new Error(`bigint expected < 2^${e.nBitLength}`);return kn(W,e.nByteLength)}function T(W,ee,ue=j){if(["recovered","canonical"].some(Oe=>Oe in ue))throw new Error("sign() legacy options not supported");let{hash:U,randomBytes:q}=e,{lowS:N,prehash:Y,extraEntropy:oe}=ue;N==null&&(N=!0),W=zt("msgHash",W),Y&&(W=zt("prehashed msgHash",U(W)));let M=C(W),V=l(ee),se=[k(V),k(M)];if(oe!=null){let Oe=oe===!0?q(r.BYTES):oe;se.push(zt("extraEntropy",Oe))}let de=Lo(...se),ye=M;function we(Oe){let xe=F(Oe);if(!p(xe))return;let Me=c(xe),Re=u.BASE.multiply(xe).toAffine(),_t=a(Re.x);if(_t===Uo)return;let pt=a(Me*a(ye+_t*V));if(pt===Uo)return;let on=(Re.x===_t?0:2)|Number(Re.y&_i),hr=pt;return N&&h(pt)&&(hr=y(pt),on^=1),new A(_t,hr,on)}return{seed:de,k2sig:we}}let j={lowS:e.lowS,prehash:!1},L={lowS:e.lowS,prehash:!1};function Q(W,ee,ue=j){let{seed:U,k2sig:q}=T(W,ee,ue),N=e;return kE(N.hash.outputLen,N.nByteLength,N.hmac)(U,q)}u.BASE._setWindowSize(8);function ne(W,ee,ue,U=L){let q=W;if(ee=zt("msgHash",ee),ue=zt("publicKey",ue),"strict"in U)throw new Error("options.strict was renamed to lowS");let{lowS:N,prehash:Y}=U,oe,M;try{if(typeof q=="string"||Qi(q))try{oe=A.fromDER(q)}catch(Re){if(!(Re instanceof bc.Err))throw Re;oe=A.fromCompact(q)}else if(typeof q=="object"&&typeof q.r=="bigint"&&typeof q.s=="bigint"){let{r:Re,s:_t}=q;oe=new A(Re,_t)}else throw new Error("PARSE");M=u.fromHex(ue)}catch(Re){if(Re.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(N&&oe.hasHighS())return!1;Y&&(ee=e.hash(ee));let{r:V,s:se}=oe,de=C(ee),ye=c(se),we=a(de*ye),Oe=a(V*ye),xe=u.BASE.multiplyAndAddUnsafe(M,we,Oe)?.toAffine();return xe?a(xe.x)===V:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:D,sign:Q,verify:ne,ProjectivePoint:u,Signature:A,utils:x}}var G0=class extends fd{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,IB(e);let n=Lp(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return dd(this),this.iHash.update(e),this}digestInto(e){dd(this),OE(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},LE=(t,e,r)=>new G0(t,e).update(r).digest();LE.create=(t,e)=>new G0(t,e);function iee(t){return{hash:t,hmac:(e,...r)=>LE(t,e,U0(...r)),randomBytes:Up}}function Z0(t,e){let r=n=>HB({...t,...iee(n)});return Object.freeze({...r(e),create:r})}var GB=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),WB=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),see=BigInt(1),UE=BigInt(2),JB=(t,e)=>(t+e/UE)/e;function oee(t){let e=GB,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=Ht(l,r,e)*l%e,p=Ht(d,r,e)*l%e,f=Ht(p,UE,e)*u%e,h=Ht(f,s,e)*f%e,y=Ht(h,i,e)*h%e,g=Ht(y,a,e)*y%e,A=Ht(g,c,e)*g%e,x=Ht(A,a,e)*y%e,b=Ht(x,r,e)*l%e,w=Ht(b,o,e)*h%e,D=Ht(w,n,e)*u%e,F=Ht(D,UE,e);if(!VE.eql(VE.sqr(F),t))throw new Error("Cannot find square root");return F}var VE=hd(GB,void 0,void 0,{sqrt:oee}),Rn=Z0({a:BigInt(0),b:BigInt(7),Fp:VE,n:WB,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=WB,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-see*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=JB(i*t,e),c=JB(-n*t,e),u=Ot(t-a*r-c*s,e),l=Ot(-a*n-c*i,e),d=u>o,p=l>o;if(d&&(u=e-u),p&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:p,k2:l}}}},K0),nDe=BigInt(0);var iDe=Rn.ProjectivePoint;function ZB(t){let e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){let s=Object.keys(n).sort(),i={};for(let o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var aee=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},KE="urn:jwk:";function ze(t){return aee(this,arguments,void 0,function*({jwk:e}){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);u1(n);let s=ZB(n),i=le.string(s).toUint8Array(),o=yield ld.digest({data:i});return le.uint8Array(o).toBase64Url()})}function Us(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function md(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function Vs(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function yd(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function XB(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var Gr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},uee=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},jr=class t{static adjustSignatureToLowS(e){return Gr(this,arguments,void 0,function*({signature:r}){let n=Rn.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return Gr(this,arguments,void 0,function*({privateKeyBytes:r}){let n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",d:le.uint8Array(r).toBase64Url(),x:le.uint8Array(n.x).toBase64Url(),y:le.uint8Array(n.y).toBase64Url()};return s.kid=yield ze({jwk:s}),s})}static bytesToPublicKey(e){return Gr(this,arguments,void 0,function*({publicKeyBytes:r}){let n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:le.uint8Array(n.x).toBase64Url(),y:le.uint8Array(n.y).toBase64Url()};return s.kid=yield ze({jwk:s}),s})}static compressPublicKey(e){return Gr(this,arguments,void 0,function*({publicKeyBytes:r}){return Rn.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return Gr(this,arguments,void 0,function*({key:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=yield t.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"secp256k1",x:le.uint8Array(s.x).toBase64Url(),y:le.uint8Array(s.y).toBase64Url()};return i.kid=yield ze({jwk:i}),i})}static convertDerToCompactSignature(e){return Gr(this,arguments,void 0,function*({derSignature:r}){return Rn.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return Gr(this,arguments,void 0,function*({publicKeyBytes:r}){return Rn.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return Gr(this,void 0,void 0,function*(){let e=Rn.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield ze({jwk:r}),r})}static getPublicKey(e){return Gr(this,arguments,void 0,function*({key:r}){var n;if(!(Us(r)&&r.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:s}=r,i=uee(r,["d"]);return(n=i.kid)!==null&&n!==void 0||(i.kid=yield ze({jwk:i})),i})}static privateKeyToBytes(e){return Gr(this,arguments,void 0,function*({privateKey:r}){if(!Us(r))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return le.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return Gr(this,arguments,void 0,function*({publicKey:r}){if(!(md(r)&&r.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");let n=new Uint8Array([4]),s=le.base64Url(r.x).toUint8Array(),i=le.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(e){return Gr(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let s=yield t.privateKeyToBytes({privateKey:r}),i=yield t.publicKeyToBytes({publicKey:n});return Rn.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return Gr(this,arguments,void 0,function*({data:r,key:n}){let s=yield t.privateKeyToBytes({privateKey:n}),i=Ma(r);return Rn.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return Gr(this,arguments,void 0,function*({privateKeyBytes:r}){return Rn.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return Gr(this,arguments,void 0,function*({publicKeyBytes:r}){try{Rn.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return Gr(this,arguments,void 0,function*({key:r,signature:n,data:s}){let i=yield t.publicKeyToBytes({publicKey:r}),o=Ma(s);return Rn.verify(n,o,i,{lowS:!1})})}static getCurvePoint(e){return Gr(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=Rn.getPublicKey(r));let n=Rn.ProjectivePoint.fromHex(r),s=kn(n.x,32),i=kn(n.y,32);return{x:s,y:i}})}};var YB=hd(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),cee=YB.create(BigInt("-3")),lee=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),dee=Z0({a:cee,b:lee,Fp:YB,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},K0),Yn=dee;var Zr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},fee=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Xr=class t{static adjustSignatureToLowS(e){return Zr(this,arguments,void 0,function*({signature:r}){let n=Yn.Signature.fromCompact(r);return n.hasHighS()?n.normalizeS().toCompactRawBytes():r})}static bytesToPrivateKey(e){return Zr(this,arguments,void 0,function*({privateKeyBytes:r}){let n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",d:le.uint8Array(r).toBase64Url(),x:le.uint8Array(n.x).toBase64Url(),y:le.uint8Array(n.y).toBase64Url()};return s.kid=yield ze({jwk:s}),s})}static bytesToPublicKey(e){return Zr(this,arguments,void 0,function*({publicKeyBytes:r}){let n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:le.uint8Array(n.x).toBase64Url(),y:le.uint8Array(n.y).toBase64Url()};return s.kid=yield ze({jwk:s}),s})}static compressPublicKey(e){return Zr(this,arguments,void 0,function*({publicKeyBytes:r}){return Yn.ProjectivePoint.fromHex(r).toRawBytes(!0)})}static computePublicKey(e){return Zr(this,arguments,void 0,function*({key:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=yield t.getCurvePoint({keyBytes:n}),i={kty:"EC",crv:"P-256",x:le.uint8Array(s.x).toBase64Url(),y:le.uint8Array(s.y).toBase64Url()};return i.kid=yield ze({jwk:i}),i})}static convertDerToCompactSignature(e){return Zr(this,arguments,void 0,function*({derSignature:r}){return Yn.Signature.fromDER(r).toCompactRawBytes()})}static decompressPublicKey(e){return Zr(this,arguments,void 0,function*({publicKeyBytes:r}){return Yn.ProjectivePoint.fromHex(r).toRawBytes(!1)})}static generateKey(){return Zr(this,void 0,void 0,function*(){let e=Yn.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield ze({jwk:r}),r})}static getPublicKey(e){return Zr(this,arguments,void 0,function*({key:r}){var n;if(!(Us(r)&&r.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let{d:s}=r,i=fee(r,["d"]);return(n=i.kid)!==null&&n!==void 0||(i.kid=yield ze({jwk:i})),i})}static privateKeyToBytes(e){return Zr(this,arguments,void 0,function*({privateKey:r}){if(!Us(r))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return le.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return Zr(this,arguments,void 0,function*({publicKey:r}){if(!(md(r)&&r.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");let n=new Uint8Array([4]),s=le.base64Url(r.x).toUint8Array(),i=le.base64Url(r.y).toUint8Array();return new Uint8Array([...n,...s,...i])})}static sharedSecret(e){return Zr(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let s=yield t.privateKeyToBytes({privateKey:r}),i=yield t.publicKeyToBytes({publicKey:n});return Yn.getSharedSecret(s,i,!0).slice(1)})}static sign(e){return Zr(this,arguments,void 0,function*({data:r,key:n}){let s=yield t.privateKeyToBytes({privateKey:n}),i=Ma(r);return Yn.sign(i,s).toCompactRawBytes()})}static validatePrivateKey(e){return Zr(this,arguments,void 0,function*({privateKeyBytes:r}){return Yn.utils.isValidPrivateKey(r)})}static validatePublicKey(e){return Zr(this,arguments,void 0,function*({publicKeyBytes:r}){try{Yn.ProjectivePoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return Zr(this,arguments,void 0,function*({key:r,signature:n,data:s}){let i=yield t.publicKeyToBytes({publicKey:r}),o=Ma(s);return Yn.verify(n,o,i,{lowS:!1})})}static getCurvePoint(e){return Zr(this,arguments,void 0,function*({keyBytes:r}){r.byteLength===32&&(r=Yn.getPublicKey(r));let n=Yn.ProjectivePoint.fromHex(r),s=kn(n.x,32),i=kn(n.y,32);return{x:s,y:i}})}};var zp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Hp=class extends Ls{computePublicKey(e){return zp(this,arguments,void 0,function*({key:r}){if(!Us(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{let n=yield jr.computePublicKey({key:r});return n.alg="ES256K",n}case"P-256":{let n=yield Xr.computePublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return zp(this,arguments,void 0,function*({algorithm:r}){switch(r){case"ES256K":case"secp256k1":{let n=yield jr.generateKey();return n.alg="ES256K",n}case"ES256":case"secp256r1":{let n=yield Xr.generateKey();return n.alg="ES256",n}}})}getPublicKey(e){return zp(this,arguments,void 0,function*({key:r}){if(!Us(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":{let n=yield jr.getPublicKey({key:r});return n.alg="ES256K",n}case"P-256":{let n=yield Xr.getPublicKey({key:r});return n.alg="ES256",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return zp(this,arguments,void 0,function*({key:r,data:n}){if(!Us(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(r.crv){case"secp256k1":return yield jr.sign({key:r,data:n});case"P-256":return yield Xr.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return zp(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!md(r))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(r.crv){case"secp256k1":return yield jr.verify({key:r,signature:n,data:s});case"P-256":return yield Xr.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var X0=BigInt(4294967295),zE=BigInt(32);function QB(t,e=!1){return e?{h:Number(t&X0),l:Number(t>>zE&X0)}:{h:Number(t>>zE&X0)|0,l:Number(t&X0)|0}}function pee(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){let{h:i,l:o}=QB(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}var hee=(t,e)=>BigInt(t>>>0)<<zE|BigInt(e>>>0),mee=(t,e,r)=>t>>>r,yee=(t,e,r)=>t<<32-r|e>>>r,gee=(t,e,r)=>t>>>r|e<<32-r,vee=(t,e,r)=>t<<32-r|e>>>r,bee=(t,e,r)=>t<<64-r|e>>>r-32,_ee=(t,e,r)=>t>>>r-32|e<<64-r,wee=(t,e)=>e,Eee=(t,e)=>t,See=(t,e,r)=>t<<r|e>>>32-r,Aee=(t,e,r)=>e<<r|t>>>32-r,Dee=(t,e,r)=>e<<r-32|t>>>64-r,xee=(t,e,r)=>t<<r-32|e>>>64-r;function Cee(t,e,r,n){let s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}var Pee=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Oee=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Fee=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Tee=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,Iee=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),Bee=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0;var kee={fromBig:QB,split:pee,toBig:hee,shrSH:mee,shrSL:yee,rotrSH:gee,rotrSL:vee,rotrBH:bee,rotrBL:_ee,rotr32H:wee,rotr32L:Eee,rotlSH:See,rotlSL:Aee,rotlBH:Dee,rotlBL:xee,add:Cee,add3L:Pee,add3H:Oee,add4L:Fee,add4H:Tee,add5H:Bee,add5L:Iee},Je=kee;var[Ree,$ee]=Je.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ua=new Uint32Array(80),Va=new Uint32Array(80),HE=class extends pd{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:p,Gh:f,Gl:h,Hh:y,Hl:g}=this;return[e,r,n,s,i,o,a,c,u,l,d,p,f,h,y,g]}set(e,r,n,s,i,o,a,c,u,l,d,p,f,h,y,g){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=p|0,this.Gh=f|0,this.Gl=h|0,this.Hh=y|0,this.Hl=g|0}process(e,r){for(let b=0;b<16;b++,r+=4)Ua[b]=e.getUint32(r),Va[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){let w=Ua[b-15]|0,D=Va[b-15]|0,F=Je.rotrSH(w,D,1)^Je.rotrSH(w,D,8)^Je.shrSH(w,D,7),C=Je.rotrSL(w,D,1)^Je.rotrSL(w,D,8)^Je.shrSL(w,D,7),I=Ua[b-2]|0,k=Va[b-2]|0,T=Je.rotrSH(I,k,19)^Je.rotrBH(I,k,61)^Je.shrSH(I,k,6),j=Je.rotrSL(I,k,19)^Je.rotrBL(I,k,61)^Je.shrSL(I,k,6),L=Je.add4L(C,j,Va[b-7],Va[b-16]),Q=Je.add4H(L,F,T,Ua[b-7],Ua[b-16]);Ua[b]=Q|0,Va[b]=L|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:p,Fh:f,Fl:h,Gh:y,Gl:g,Hh:A,Hl:x}=this;for(let b=0;b<80;b++){let w=Je.rotrSH(d,p,14)^Je.rotrSH(d,p,18)^Je.rotrBH(d,p,41),D=Je.rotrSL(d,p,14)^Je.rotrSL(d,p,18)^Je.rotrBL(d,p,41),F=d&f^~d&y,C=p&h^~p&g,I=Je.add5L(x,D,C,$ee[b],Va[b]),k=Je.add5H(I,A,w,F,Ree[b],Ua[b]),T=I|0,j=Je.rotrSH(n,s,28)^Je.rotrBH(n,s,34)^Je.rotrBH(n,s,39),L=Je.rotrSL(n,s,28)^Je.rotrBL(n,s,34)^Je.rotrBL(n,s,39),Q=n&i^n&a^i&a,ne=s&o^s&c^o&c;A=y|0,x=g|0,y=f|0,g=h|0,f=d|0,h=p|0,{h:d,l:p}=Je.add(u|0,l|0,k|0,T|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;let W=Je.add3L(T,L,ne);n=Je.add3H(W,k,j,Q),s=W|0}({h:n,l:s}=Je.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Je.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Je.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=Je.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:p}=Je.add(this.Eh|0,this.El|0,d|0,p|0),{h:f,l:h}=Je.add(this.Fh|0,this.Fl|0,f|0,h|0),{h:y,l:g}=Je.add(this.Gh|0,this.Gl|0,y|0,g|0),{h:A,l:x}=Je.add(this.Hh|0,this.Hl|0,A|0,x|0),this.set(n,s,i,o,a,c,u,l,d,p,f,h,y,g,A,x)}roundClean(){Ua.fill(0),Va.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var WE=V0(()=>new HE);var ts=BigInt(0),Qn=BigInt(1),Y0=BigInt(2),jee=BigInt(8),Nee={zip215:!0};function Mee(t){let e=Kp(t);return bi(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Q0(t){let e=Mee(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=Y0<<BigInt(a*8)-Qn,l=r.create,d=e.uvRatio||((U,q)=>{try{return{isValid:!0,value:r.sqrt(U*r.inv(q))}}catch{return{isValid:!1,value:ts}}}),p=e.adjustScalarBytes||(U=>U),f=e.domain||((U,q,N)=>{if(q.length||N)throw new Error("Contexts/pre-hash are not supported");return U}),h=U=>typeof U=="bigint"&&ts<U,y=(U,q)=>h(U)&&h(q)&&U<q,g=U=>U===ts||y(U,u);function A(U,q){if(y(U,q))return U;throw new Error(`Expected valid scalar < ${q}, got ${typeof U} ${U}`)}function x(U){return U===ts?U:A(U,n)}let b=new Map;function w(U){if(!(U instanceof D))throw new Error("ExtendedPoint expected")}class D{constructor(q,N,Y,oe){if(this.ex=q,this.ey=N,this.ez=Y,this.et=oe,!g(q))throw new Error("x required");if(!g(N))throw new Error("y required");if(!g(Y))throw new Error("z required");if(!g(oe))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(q){if(q instanceof D)throw new Error("extended point not allowed");let{x:N,y:Y}=q||{};if(!g(N)||!g(Y))throw new Error("invalid affine point");return new D(N,Y,Qn,l(N*Y))}static normalizeZ(q){let N=r.invertBatch(q.map(Y=>Y.ez));return q.map((Y,oe)=>Y.toAffine(N[oe])).map(D.fromAffine)}_setWindowSize(q){this._WINDOW_SIZE=q,b.delete(this)}assertValidity(){let{a:q,d:N}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:Y,ey:oe,ez:M,et:V}=this,se=l(Y*Y),de=l(oe*oe),ye=l(M*M),we=l(ye*ye),Oe=l(se*q),xe=l(ye*l(Oe+de)),Me=l(we+l(N*l(se*de)));if(xe!==Me)throw new Error("bad point: equation left != right (1)");let Re=l(Y*oe),_t=l(M*V);if(Re!==_t)throw new Error("bad point: equation left != right (2)")}equals(q){w(q);let{ex:N,ey:Y,ez:oe}=this,{ex:M,ey:V,ez:se}=q,de=l(N*se),ye=l(M*oe),we=l(Y*se),Oe=l(V*oe);return de===ye&&we===Oe}is0(){return this.equals(D.ZERO)}negate(){return new D(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){let{a:q}=e,{ex:N,ey:Y,ez:oe}=this,M=l(N*N),V=l(Y*Y),se=l(Y0*l(oe*oe)),de=l(q*M),ye=N+Y,we=l(l(ye*ye)-M-V),Oe=de+V,xe=Oe-se,Me=de-V,Re=l(we*xe),_t=l(Oe*Me),pt=l(we*Me),on=l(xe*Oe);return new D(Re,_t,on,pt)}add(q){w(q);let{a:N,d:Y}=e,{ex:oe,ey:M,ez:V,et:se}=this,{ex:de,ey:ye,ez:we,et:Oe}=q;if(N===BigInt(-1)){let Ea=l((M-oe)*(ye+de)),ht=l((M+oe)*(ye-de)),er=l(ht-Ea);if(er===ts)return this.double();let Be=l(V*Y0*Oe),yr=l(se*Y0*we),wt=yr+Be,Ss=ht+Ea,ku=yr-Be,Fn=l(wt*er),As=l(Ss*ku),zi=l(wt*ku),cr=l(er*Ss);return new D(Fn,As,cr,zi)}let xe=l(oe*de),Me=l(M*ye),Re=l(se*Y*Oe),_t=l(V*we),pt=l((oe+M)*(de+ye)-xe-Me),on=_t-Re,hr=_t+Re,Es=l(Me-N*xe),Ki=l(pt*on),vo=l(hr*Es),mr=l(pt*Es),On=l(on*hr);return new D(Ki,vo,On,mr)}subtract(q){return this.add(q.negate())}wNAF(q){return I.wNAFCached(this,b,q,D.normalizeZ)}multiply(q){let{p:N,f:Y}=this.wNAF(A(q,n));return D.normalizeZ([N,Y])[0]}multiplyUnsafe(q){let N=x(q);return N===ts?C:this.equals(C)||N===Qn?this:this.equals(F)?this.wNAF(N).p:I.unsafeLadder(this,N)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,n).is0()}toAffine(q){let{ex:N,ey:Y,ez:oe}=this,M=this.is0();q==null&&(q=M?jee:r.inv(oe));let V=l(N*q),se=l(Y*q),de=l(oe*q);if(M)return{x:ts,y:Qn};if(de!==Qn)throw new Error("invZ was invalid");return{x:V,y:se}}clearCofactor(){let{h:q}=e;return q===Qn?this:this.multiplyUnsafe(q)}static fromHex(q,N=!1){let{d:Y,a:oe}=e,M=r.BYTES;q=zt("pointHex",q,M);let V=q.slice(),se=q[M-1];V[M-1]=se&-129;let de=es(V);de===ts||(N?A(de,u):A(de,r.ORDER));let ye=l(de*de),we=l(ye-Qn),Oe=l(Y*ye-oe),{isValid:xe,value:Me}=d(we,Oe);if(!xe)throw new Error("Point.fromHex: invalid y coordinate");let Re=(Me&Qn)===Qn,_t=(se&128)!==0;if(!N&&Me===ts&&_t)throw new Error("Point.fromHex: x=0 and x_0=1");return _t!==Re&&(Me=l(-Me)),D.fromAffine({x:Me,y:de})}static fromPrivateKey(q){return j(q).point}toRawBytes(){let{x:q,y:N}=this.toAffine(),Y=qo(N,r.BYTES);return Y[Y.length-1]|=q&Qn?128:0,Y}toHex(){return No(this.toRawBytes())}}D.BASE=new D(e.Gx,e.Gy,Qn,l(e.Gx*e.Gy)),D.ZERO=new D(ts,Qn,Qn,ts);let{BASE:F,ZERO:C}=D,I=J0(D,a*8);function k(U){return Ot(U,n)}function T(U){return k(es(U))}function j(U){let q=a;U=zt("private key",U,q);let N=zt("hashed private key",i(U),2*q),Y=p(N.slice(0,q)),oe=N.slice(q,2*q),M=T(Y),V=F.multiply(M),se=V.toRawBytes();return{head:Y,prefix:oe,scalar:M,point:V,pointBytes:se}}function L(U){return j(U).pointBytes}function Q(U=new Uint8Array,...q){let N=Lo(...q);return T(i(f(N,zt("context",U),!!s)))}function ne(U,q,N={}){U=zt("message",U),s&&(U=s(U));let{prefix:Y,scalar:oe,pointBytes:M}=j(q),V=Q(N.context,Y,U),se=F.multiply(V).toRawBytes(),de=Q(N.context,se,M,U),ye=k(V+de*oe);x(ye);let we=Lo(se,qo(ye,r.BYTES));return zt("result",we,a*2)}let W=Nee;function ee(U,q,N,Y=W){let{context:oe,zip215:M}=Y,V=r.BYTES;U=zt("signature",U,2*V),q=zt("message",q),s&&(q=s(q));let se=es(U.slice(V,2*V)),de,ye,we;try{de=D.fromHex(N,M),ye=D.fromHex(U.slice(0,V),M),we=F.multiplyUnsafe(se)}catch{return!1}if(!M&&de.isSmallOrder())return!1;let Oe=Q(oe,ye.toRawBytes(),de.toRawBytes(),q);return ye.add(de.multiplyUnsafe(Oe)).subtract(we).clearCofactor().equals(D.ZERO)}return F._setWindowSize(8),{CURVE:e,getPublicKey:L,sign:ne,verify:ee,ExtendedPoint:D,utils:{getExtendedPublicKey:j,randomPrivateKey:()=>o(r.BYTES),precompute(U=8,q=D.BASE){return q._setWindowSize(U),q.multiply(BigInt(3)),q}}}}var Wp=BigInt(0),JE=BigInt(1);function qee(t){return bi(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function e3(t){let e=qee(t),{P:r}=e,n=b=>Ot(b,r),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>$E(b,r-BigInt(2),r));function u(b,w,D){let F=n(b*(w-D));return w=n(w-F),D=n(D+F),[w,D]}function l(b){if(typeof b=="bigint"&&Wp<=b&&b<r)return b;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let d=(e.a-BigInt(2))/BigInt(4);function p(b,w){let D=l(b),F=l(w),C=D,I=JE,k=Wp,T=D,j=JE,L=Wp,Q;for(let W=BigInt(s-1);W>=Wp;W--){let ee=F>>W&JE;L^=ee,Q=u(L,I,T),I=Q[0],T=Q[1],Q=u(L,k,j),k=Q[0],j=Q[1],L=ee;let ue=I+k,U=n(ue*ue),q=I-k,N=n(q*q),Y=U-N,oe=T+j,M=T-j,V=n(M*ue),se=n(oe*q),de=V+se,ye=V-se;T=n(de*de),j=n(C*n(ye*ye)),I=n(U*N),k=n(Y*(U+n(d*Y)))}Q=u(L,I,T),I=Q[0],T=Q[1],Q=u(L,k,j),k=Q[0],j=Q[1];let ne=c(k);return n(I*ne)}function f(b){return qo(n(b),i)}function h(b){let w=zt("u coordinate",b,i);return o===32&&(w[31]&=127),es(w)}function y(b){let w=zt("scalar",b),D=w.length;if(D!==i&&D!==o)throw new Error(`Expected ${i} or ${o} bytes, got ${D}`);return es(a(w))}function g(b,w){let D=h(w),F=y(b),C=p(D,F);if(C===Wp)throw new Error("Invalid private or public key received");return f(C)}let A=f(e.Gu);function x(b){return g(b,A)}return{scalarMult:g,scalarMultBase:x,getSharedSecret:(b,w)=>g(b,w),getPublicKey:b=>x(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:A}}var Jp=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),t3=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),GDe=BigInt(0),Lee=BigInt(1),GE=BigInt(2),Uee=BigInt(5),r3=BigInt(10),Vee=BigInt(20),Kee=BigInt(40),n3=BigInt(80);function i3(t){let e=Jp,n=t*t%e*t%e,s=Ht(n,GE,e)*n%e,i=Ht(s,Lee,e)*t%e,o=Ht(i,Uee,e)*i%e,a=Ht(o,r3,e)*o%e,c=Ht(a,Vee,e)*a%e,u=Ht(c,Kee,e)*c%e,l=Ht(u,n3,e)*u%e,d=Ht(l,n3,e)*u%e,p=Ht(d,r3,e)*o%e;return{pow_p_5_8:Ht(p,GE,e)*t%e,b2:n}}function s3(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function zee(t,e){let r=Jp,n=Ot(e*e*e,r),s=Ot(n*n*e,r),i=i3(t*s).pow_p_5_8,o=Ot(t*n*i,r),a=Ot(e*o*o,r),c=o,u=Ot(o*t3,r),l=a===t,d=a===Ot(-t,r),p=a===Ot(-t*t3,r);return l&&(o=c),(d||p)&&(o=u),LB(o,r)&&(o=Ot(-o,r)),{isValid:l||d,value:o}}var wi=hd(Jp,void 0,!0),Gp={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:wi,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:WE,randomBytes:Up,adjustScalarBytes:s3,uvRatio:zee},Ka=Q0(Gp);function o3(t,e,r){if(e.length>255)throw new Error("Context is too big");return U0(FE("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var ZDe=Q0({...Gp,domain:o3}),XDe=Q0({...Gp,domain:o3,prehash:WE}),_c=e3({P:Jp,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=Jp,{pow_p_5_8:r,b2:n}=i3(t);return Ot(Ht(r,BigInt(3),e)*n,e)},adjustScalarBytes:s3,randomBytes:Up});function a3(t){let{y:e}=Ka.ExtendedPoint.fromHex(t),r=BigInt(1);return wi.toBytes(wi.create((r+e)*wi.inv(r-e)))}function u3(t){let e=Gp.hash(t.subarray(0,32));return Gp.adjustScalarBytes(e).subarray(0,32)}var Hee=(wi.ORDER+BigInt(3))/BigInt(8),YDe=wi.pow(GE,Hee),QDe=wi.sqrt(wi.neg(wi.ONE)),e2e=(wi.ORDER-BigInt(5))/BigInt(8),t2e=BigInt(486662);var r2e=UB(wi,wi.neg(BigInt(486664)));var n2e=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),i2e=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),s2e=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),o2e=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var a2e=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Ei=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Wee=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Fr=class t{static bytesToPrivateKey(e){return Ei(this,arguments,void 0,function*({privateKeyBytes:r}){let n=Ka.getPublicKey(r),s={crv:"Ed25519",d:le.uint8Array(r).toBase64Url(),kty:"OKP",x:le.uint8Array(n).toBase64Url()};return s.kid=yield ze({jwk:s}),s})}static bytesToPublicKey(e){return Ei(this,arguments,void 0,function*({publicKeyBytes:r}){let n={kty:"OKP",crv:"Ed25519",x:le.uint8Array(r).toBase64Url()};return n.kid=yield ze({jwk:n}),n})}static computePublicKey(e){return Ei(this,arguments,void 0,function*({key:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=Ka.getPublicKey(n),i={kty:"OKP",crv:"Ed25519",x:le.uint8Array(s).toBase64Url()};return i.kid=yield ze({jwk:i}),i})}static convertPrivateKeyToX25519(e){return Ei(this,arguments,void 0,function*({privateKey:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=u3(n),i=_c.getPublicKey(s),o={kty:"OKP",crv:"X25519",d:le.uint8Array(s).toBase64Url(),x:le.uint8Array(i).toBase64Url()};return o.kid=yield ze({jwk:o}),o})}static convertPublicKeyToX25519(e){return Ei(this,arguments,void 0,function*({publicKey:r}){let n=yield t.publicKeyToBytes({publicKey:r});if(!(yield t.validatePublicKey({publicKeyBytes:n})))throw new Error("Ed25519: Invalid public key.");let i=a3(n),o={kty:"OKP",crv:"X25519",x:le.uint8Array(i).toBase64Url()};return o.kid=yield ze({jwk:o}),o})}static generateKey(){return Ei(this,void 0,void 0,function*(){let e=Ka.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield ze({jwk:r}),r})}static getPublicKey(e){return Ei(this,arguments,void 0,function*({key:r}){var n;if(!(Vs(r)&&r.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let{d:s}=r,i=Wee(r,["d"]);return(n=i.kid)!==null&&n!==void 0||(i.kid=yield ze({jwk:i})),i})}static privateKeyToBytes(e){return Ei(this,arguments,void 0,function*({privateKey:r}){if(!Vs(r))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return le.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return Ei(this,arguments,void 0,function*({publicKey:r}){if(!yd(r))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return le.base64Url(r.x).toUint8Array()})}static sign(e){return Ei(this,arguments,void 0,function*({key:r,data:n}){let s=yield t.privateKeyToBytes({privateKey:r});return Ka.sign(n,s)})}static validatePublicKey(e){return Ei(this,arguments,void 0,function*({publicKeyBytes:r}){try{Ka.ExtendedPoint.fromHex(r).assertValidity()}catch{return!1}return!0})}static verify(e){return Ei(this,arguments,void 0,function*({key:r,signature:n,data:s}){let i=yield t.publicKeyToBytes({publicKey:r});return Ka.verify(n,s,i)})}};var Zp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},eg=class extends Ls{computePublicKey(e){return Zp(this,arguments,void 0,function*({key:r}){if(!Vs(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{let n=yield Fr.computePublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}generateKey(e){return Zp(this,arguments,void 0,function*({algorithm:r}){switch(r){case"Ed25519":{let n=yield Fr.generateKey();return n.alg="EdDSA",n}}})}getPublicKey(e){return Zp(this,arguments,void 0,function*({key:r}){if(!Vs(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":{let n=yield Fr.getPublicKey({key:r});return n.alg="EdDSA",n}default:throw new Error(`Unsupported curve: ${r.crv}`)}})}sign(e){return Zp(this,arguments,void 0,function*({key:r,data:n}){if(!Vs(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(r.crv){case"Ed25519":return yield Fr.sign({key:r,data:n});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}verify(e){return Zp(this,arguments,void 0,function*({key:r,signature:n,data:s}){if(!yd(r))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(r.crv){case"Ed25519":return yield Fr.verify({key:r,signature:n,data:s});default:throw new Error(`Unsupported curve: ${r.crv}`)}})}};var Vo=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},ZE={Ed25519:{implementation:eg,names:["Ed25519"]},secp256k1:{implementation:Hp,names:["ES256K","secp256k1"]},secp256r1:{implementation:Hp,names:["ES256","secp256r1"]},"SHA-256":{implementation:M0,names:["SHA-256"]}},Nr=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e?.keyStore)!==null&&r!==void 0?r:new n0}digest(e){return Vo(this,arguments,void 0,function*({algorithm:r,data:n}){return yield this.getAlgorithm({algorithm:r}).digest({algorithm:r,data:n})})}exportKey(e){return Vo(this,arguments,void 0,function*({keyUri:r}){return yield this.getPrivateKey({keyUri:r})})}generateKey(e){return Vo(this,arguments,void 0,function*({algorithm:r}){let s=yield this.getAlgorithm({algorithm:r}).generateKey({algorithm:r});if(s?.kid===void 0)throw new Error("Generated key is missing a required property: kid");let i=`${KE}${s.kid}`;return yield this._keyStore.set(i,s),i})}getKeyUri(e){return Vo(this,arguments,void 0,function*({key:r}){let n=yield ze({jwk:r});return`${KE}${n}`})}getPublicKey(e){return Vo(this,arguments,void 0,function*({keyUri:r}){let n=yield this.getPrivateKey({keyUri:r}),s=this.getAlgorithmName({key:n});return yield this.getAlgorithm({algorithm:s}).getPublicKey({key:n})})}importKey(e){return Vo(this,arguments,void 0,function*({key:r}){var n;if(!XB(r))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let s=structuredClone(r);(n=s.kid)!==null&&n!==void 0||(s.kid=yield ze({jwk:s}));let i=yield this.getKeyUri({key:s});return yield this._keyStore.set(i,s),i})}sign(e){return Vo(this,arguments,void 0,function*({keyUri:r,data:n}){let s=yield this.getPrivateKey({keyUri:r}),i=this.getAlgorithmName({key:s});return this.getAlgorithm({algorithm:i}).sign({data:n,key:s})})}verify(e){return Vo(this,arguments,void 0,function*({key:r,signature:n,data:s}){let i=this.getAlgorithmName({key:r});return this.getAlgorithm({algorithm:i}).verify({key:r,signature:n,data:s})})}getAlgorithm({algorithm:e}){var r;let n=(r=ZE[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let s in ZE){let i=ZE[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey(e){return Vo(this,arguments,void 0,function*({keyUri:r}){let n=yield this._keyStore.get(r);if(!n)throw new Error(`Key not found: ${r}`);return n})}};var za=class t{static getJoseSignatureAlgorithmFromPublicKey(e){let r={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(e.alg&&Object.values(r).includes(e.alg))return e.alg;if(e.crv&&Object.keys(r).includes(e.crv))return r[e.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${e.alg}, crv=${e.crv}. Supported 'alg' values: ${Object.values(r).join(", ")}. Supported 'crv' values: ${Object.keys(r).join(", ")}.`)}static randomBytes(e){return PB(e)}static randomUuid(){return cd.randomUUID()}static randomPin({length:e}){if(3>e||e>10)throw new Error("randomPin() can securely generate a PIN between 3 to 10 digits.");let r=Math.pow(10,e)-1,n;if(e<=6){let s=Math.pow(10,e);do{let i=t.randomBytes(Math.ceil(e/2));n=new DataView(i.buffer).getUint16(0,!1)%s}while(n>r)}else{let s=Math.pow(10,10);do{let i=t.randomBytes(4);n=new DataView(i.buffer).getUint32(0,!1)%s}while(n>r)}return n.toString().padStart(e,"0")}};var Ha=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Jee=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},gd=class t{static bytesToPrivateKey(e){return Ha(this,arguments,void 0,function*({privateKeyBytes:r}){let n=_c.getPublicKey(r),s={kty:"OKP",crv:"X25519",d:le.uint8Array(r).toBase64Url(),x:le.uint8Array(n).toBase64Url()};return s.kid=yield ze({jwk:s}),s})}static bytesToPublicKey(e){return Ha(this,arguments,void 0,function*({publicKeyBytes:r}){let n={kty:"OKP",crv:"X25519",x:le.uint8Array(r).toBase64Url()};return n.kid=yield ze({jwk:n}),n})}static computePublicKey(e){return Ha(this,arguments,void 0,function*({key:r}){let n=yield t.privateKeyToBytes({privateKey:r}),s=_c.getPublicKey(n),i={kty:"OKP",crv:"X25519",x:le.uint8Array(s).toBase64Url()};return i.kid=yield ze({jwk:i}),i})}static generateKey(){return Ha(this,void 0,void 0,function*(){let e=_c.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield ze({jwk:r}),r})}static getPublicKey(e){return Ha(this,arguments,void 0,function*({key:r}){var n;if(!(Vs(r)&&r.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let{d:s}=r,i=Jee(r,["d"]);return(n=i.kid)!==null&&n!==void 0||(i.kid=yield ze({jwk:i})),i})}static privateKeyToBytes(e){return Ha(this,arguments,void 0,function*({privateKey:r}){if(!Vs(r))throw new Error("X25519: The provided key is not a valid OKP private key.");return le.base64Url(r.d).toUint8Array()})}static publicKeyToBytes(e){return Ha(this,arguments,void 0,function*({publicKey:r}){if(!yd(r))throw new Error("X25519: The provided key is not a valid OKP public key.");return le.base64Url(r.x).toUint8Array()})}static sharedSecret(e){return Ha(this,arguments,void 0,function*({privateKeyA:r,publicKeyB:n}){if("x"in r&&"x"in n&&r.x===n.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let s=yield t.privateKeyToBytes({privateKey:r}),i=yield t.publicKeyToBytes({publicKey:n});return _c.getSharedSecret(s,i)})}};var wc;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(wc||(wc={}));var sr={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};var rt=class t{constructor({method:e,id:r,path:n,query:s,fragment:i,params:o}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=s,this.fragment=i,this.params=o}static parse(e){if(!e)return null;let r=t.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;let{method:n,id:s,path:i,query:o,fragment:a}=r.groups,c={uri:`did:${n}:${s}`,method:n,id:s};if(i&&(c.path=i),o&&(c.query=o.slice(1)),a&&(c.fragment=a.slice(1)),o){let u={},l=o.slice(1).split("&");for(let d of l){let[p,f]=d.split("=");u[p]=f}c.params=u}return c}};rt.METHOD_PATTERN="([a-z0-9]+)";rt.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";rt.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${rt.PCT_ENCODED_PATTERN})`;rt.METHOD_ID_PATTERN=`((?:${rt.ID_CHAR_PATTERN}*:)*(${rt.ID_CHAR_PATTERN}+))`;rt.PATH_PATTERN="(/[^#?]*)?";rt.QUERY_PATTERN="([?][^#]*)?";rt.FRAGMENT_PATTERN="(#.*)?";rt.DID_URI_PATTERN=new RegExp(`^did:(?<method>${rt.METHOD_PATTERN}):(?<id>${rt.METHOD_ID_PATTERN})(?<path>${rt.PATH_PATTERN})(?<query>${rt.QUERY_PATTERN})(?<fragment>${rt.FRAGMENT_PATTERN})$`);var Ee=class t extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,t)}},ge;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPreviousDidProof="invalidPreviousDidProof",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(ge||(ge={}));var ig={};xr(ig,{extractDidFragment:()=>$n,getServices:()=>Zee,getVerificationMethodByKey:()=>Xee,getVerificationMethodTypes:()=>YE,getVerificationMethods:()=>Xp,getVerificationRelationshipsById:()=>QE,isDidService:()=>c3,isDidVerificationMethod:()=>tg,isDwnDidService:()=>Yee,keyBytesToMultibaseId:()=>rg,multibaseIdToKeyBytes:()=>ng});var Gee=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})};function $n(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function Zee({didDocument:t,id:e,type:r}){var n,s;return(s=(n=t?.service)===null||n===void 0?void 0:n.filter(i=>!(e&&i.id!==e||r&&i.type!==r)))!==null&&s!==void 0?s:[]}function Xee(t){return Gee(this,arguments,void 0,function*({didDocument:e,publicKeyJwk:r,publicKeyMultibase:n}){let s=Xp({didDocument:e});for(let i of s)if(r&&i.publicKeyJwk){if((yield ze({jwk:r}))===(yield ze({jwk:i.publicKeyJwk})))return i}else if(n&&i.publicKeyMultibase&&n===i.publicKeyMultibase)return i;return null})}function Xp({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");let n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter(tg))!==null&&r!==void 0?r:[]),Object.keys(wc).forEach(s=>{var i,o;n.push(...(o=(i=t[s])===null||i===void 0?void 0:i.filter(tg))!==null&&o!==void 0?o:[])}),n}function YE({didDocument:t}){let r=Xp({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function QE({didDocument:t,methodId:e}){let r=[];return Object.keys(wc).forEach(n=>{if(Array.isArray(t[n])){let s=t[n],i=$n(e);s.some(a=>{let c=$n(a)===i,u=tg(a)&&$n(a.id)===i;return c||u})&&r.push(n)}}),r}function c3(t){return!t||typeof t!="object"||t===null?!1:"id"in t&&"type"in t&&"serviceEndpoint"in t}function Yee(t){if(!c3(t)||t.type!=="DecentralizedWebNode"||!("enc"in t&&"sig"in t))return!1;let e=r=>typeof r=="string"||Array.isArray(r)&&r.every(n=>typeof n=="string");return e(t.enc)&&e(t.sig)}function tg(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function rg({keyBytes:t,multicodecCode:e,multicodecName:r}){let n=an.addPrefix({code:e,data:t,name:r}),s=le.uint8Array(n).toBase58Btc();return le.base58Btc(s).toMultibase()}function ng({multibaseKeyId:t}){try{let e=le.multibase(t).toBase58Btc(),r=le.base58Btc(e).toUint8Array(),{code:n,data:s,name:i}=an.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:n,multicodecName:i}}catch{throw new Ee(ge.InvalidDid,`Invalid multibase identifier: ${t}`)}}var Yp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},jn=class t{constructor({uri:e,document:r,metadata:n,keyManager:s}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=s}export(){return Yp(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e=JSON.parse(JSON.stringify({uri:this.uri,document:this.document,metadata:this.metadata}));if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){let r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);let s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},i))}e.privateKeys=r}return e})}getSigner(e){return Yp(this,void 0,void 0,function*(){var r;let n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(c=>{var u,l;return $n(c.id)===((u=$n(e?.methodId))!==null&&u!==void 0?u:$n((l=this.document.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(n&&n.publicKeyJwk))throw new Ee(ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");let s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:za.getJoseSignatureAlgorithmFromPublicKey(i),keyId:n.id,sign(c){return Yp(this,arguments,void 0,function*({data:u}){return yield o.sign({data:u,keyUri:s})})},verify(c){return Yp(this,arguments,void 0,function*({data:u,signature:l}){return yield o.verify({data:u,key:i,signature:l})})}}})}static import(e){return Yp(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Nr}){var s;let i=Xp({didDocument:r.document});if(i.length===0)throw new Ee(ge.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let a of(s=r.privateKeys)!==null&&s!==void 0?s:[]){let c=yield n.getKeyUri({key:a});(yield n.getPublicKey({keyUri:c}).then(()=>!0).catch(()=>!1))||(yield n.importKey({key:a}))}for(let a of i){if(!a.publicKeyJwk)throw new Error(`Verification method '${a.id}' does not contain a public key in JWK format`);let c=yield n.getKeyUri({key:a.publicKeyJwk});yield n.getPublicKey({keyUri:c})}return new t({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:n})})}};var eS="0123456789abcdef",d3=[],l3=[];for(let t=0;t<256;t++)d3[t]=eS[t>>4&15]+eS[t&15],t<16&&(t<10?l3[48+t]=t:l3[87+t]=t);var tS=t=>{let e=t.length,r="",n=0;for(;n<e;)r+=d3[t[n++]];return r};var f3=(t,e=0)=>{let r=t.length||0;if(!e){let o=r;for(;o--;)e+=t[o].length}let n=new Uint8Array(e),s=e,i=r;for(;i--;)s-=t[i].length,n.set(t[i],s);return n};var p3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qee=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Qp=0;Qp<p3.length;Qp++)Qee[p3.charCodeAt(Qp)]=Qp;var Qp;var ete=new TextDecoder,rS=(t,e)=>e?new TextDecoder(e).decode(t):ete.decode(t),tte=new TextEncoder,Si=t=>tte.encode(t);var h3=typeof window<"u"?window:self,m3=h3.crypto||h3.msCrypto||{},Vxe=m3.subtle||m3.webkitSubtle;function vd(t){let e=t<0?1:0;return t=Math.abs(Number(t||1)),Math.floor(Math.log10(t))+1+e}function sg(t){return ArrayBuffer.isView(t)?"arraybufferview":Array.isArray(t)?"array":t instanceof Number?"number":t instanceof Boolean?"boolean":t instanceof Set?"set":t instanceof Map?"map":t instanceof String?"string":t instanceof ArrayBuffer?"arraybuffer":typeof t}function Ft(t,e,r){let n=[],s=null;return Ft._encode(n,t),s=f3(n),Ft.bytes=s.length,ArrayBuffer.isView(e)?(e.set(s,r),e):s}Ft.bytes=-1;Ft._floatConversionDetected=!1;Ft._encode=function(t,e){if(e!=null)switch(sg(e)){case"object":Ft.dict(t,e);break;case"map":Ft.dictMap(t,e);break;case"array":Ft.list(t,e);break;case"set":Ft.listSet(t,e);break;case"string":Ft.string(t,e);break;case"number":Ft.number(t,e);break;case"boolean":Ft.number(t,e);break;case"arraybufferview":Ft.buffer(t,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));break;case"arraybuffer":Ft.buffer(t,new Uint8Array(e));break}};var og=new Uint8Array([101]),y3=new Uint8Array([100]),g3=new Uint8Array([108]);Ft.buffer=function(t,e){t.push(Si(e.length+":"),e)};Ft.string=function(t,e){t.push(Si(Si(e).byteLength+":"+e))};Ft.number=function(t,e){if(Number.isInteger(e))return t.push(Si("i"+BigInt(e)+"e"));let r=2147483648,n=e/r<<0,s=e%r<<0,i=n*r+s;t.push(Si("i"+i+"e")),i!==e&&!Ft._floatConversionDetected&&(Ft._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+i+'"'),console.trace())};Ft.dict=function(t,e){t.push(y3);let r=0,n,s=Object.keys(e).sort(),i=s.length;for(;r<i;r++)n=s[r],e[n]!=null&&(Ft.string(t,n),Ft._encode(t,e[n]));t.push(og)};Ft.dictMap=function(t,e){t.push(y3);let r=Array.from(e.keys()).sort();for(let n of r)e.get(n)!=null&&(ArrayBuffer.isView(n)?Ft._encode(t,n):Ft.string(t,String(n)),Ft._encode(t,e.get(n)));t.push(og)};Ft.list=function(t,e){let r=0,n=e.length;for(t.push(g3);r<n;r++)e[r]!=null&&Ft._encode(t,e[r]);t.push(og)};Ft.listSet=function(t,e){t.push(g3);for(let r of e)r!=null&&Ft._encode(t,r);t.push(og)};var v3=Ft;var rte=105,nte=58,ite=100,ste=108,nS=101;function b3(t,e,r){let n=0,s=1;for(let i=e;i<r;i++){let o=t[i];if(o<58&&o>=48){n=n*10+(o-48);continue}if(!(i===e&&o===43)){if(i===e&&o===45){s=-1;continue}if(o===46)break;throw new Error("not a number: buffer["+i+"] = "+o)}}return n*s}function $e(t,e,r,n){return t==null||t.length===0?null:(typeof e!="number"&&n==null&&(n=e,e=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),$e.position=0,$e.encoding=n||null,$e.data=ArrayBuffer.isView(t)?new Uint8Array(t.slice(e,r)):Si(t),$e.bytes=$e.data.length,$e.next())}$e.bytes=0;$e.position=0;$e.data=null;$e.encoding=null;$e.next=function(){switch($e.data[$e.position]){case ite:return $e.dictionary();case ste:return $e.list();case rte:return $e.integer();default:return $e.buffer()}};$e.find=function(t){let e=$e.position,r=$e.data.length,n=$e.data;for(;e<r;){if(n[e]===t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(t)+'" [0x'+t.toString(16)+"]")};$e.dictionary=function(){$e.position++;let t={};for(;$e.data[$e.position]!==nS;){let e=$e.buffer(),r=rS(e);r.includes("\uFFFD")&&(r=tS(e)),t[r]=$e.next()}return $e.position++,t};$e.list=function(){$e.position++;let t=[];for(;$e.data[$e.position]!==nS;)t.push($e.next());return $e.position++,t};$e.integer=function(){let t=$e.find(nS),e=b3($e.data,$e.position+1,t);return $e.position+=t+1-$e.position,e};$e.buffer=function(){let t=$e.find(nte),e=b3($e.data,$e.position,t),r=++t+e;return $e.position=r,$e.encoding?rS($e.data.slice(t,r)):$e.data.slice(t,r)};var _3=$e;function ote(t){let e=2;for(let r of t)e+=ag(r);return e}function ate(t){let e=2;for(let[r,n]of t){let s=Si(r).byteLength;e+=vd(s)+1+s,e+=ag(n)}return e}function ute(t){let e=2,r=Object.keys(t);for(let n=0;n<r.length;n++){let s=Si(r[n]).byteLength;e+=vd(s)+1+s,e+=ag(t[r[n]])}return e}function cte(t){let e=Si(t).byteLength;return vd(e)+1+e}function lte(t){let e=t.byteLength-t.byteOffset;return vd(e)+1+e}function ag(t){if(t==null)return 0;let r=sg(t);switch(r){case"arraybufferview":return lte(t);case"string":return cte(t);case"array":case"set":return ote(t);case"number":return 1+vd(Math.floor(t))+1;case"bigint":return 1+t.toString().length+1;case"object":return ute(t);case"map":return ate(t);default:throw new TypeError(`Unsupported value of type "${r}"`)}}var iS=ag;var dte=iS,sS={encode:v3,decode:_3,byteLength:iS,encodingLength:dte};var fte=/^(\d{1,3}\.){3,3}\d{1,3}$/;var pte=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;var rs={name:"v4",size:4,isFormat:t=>fte.test(t),encode(t,e,r){r=~~r,e=e||new Uint8Array(r+4);let n=t.length,s=0;for(let i=0;i<n;){let o=t.charCodeAt(i++);o===46?(e[r++]=s,s=0):s=s*10+(o-48)}return e[r]=s,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}},Ko={name:"v6",size:16,isFormat:t=>t.length>0&&pte.test(t),encode(t,e,r){r=~~r;let n=r+16,s=-1,i=0,o=0,a=!0,c=!1;e=e||new Uint8Array(r+16);for(let u=0;u<t.length;u++){let l=t.charCodeAt(u);l===58?(a?s!==-1?(r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2):r<n&&(s=r):(c===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2),i=0,o=0),a=!0,c=!1):l===46?(r<n&&(e[r]=o),r++,o=0,i=0,a=!1,c=!0):(a=!1,l>=97?l-=87:l>=65?l-=55:(l-=48,o=o*10+l),i=(i<<4)+l)}if(a===!1)c===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2);else if(s===0)r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2;else if(s!==-1){r+=2;for(let u=Math.min(r-1,n-1);u>=s+2;u--)e[u]=e[u-2];e[s]=0,e[s+1]=0,s=r}if(s!==r&&s!==-1)for(r>n-2&&(r=n-2);n>s;)e[--n]=r<n&&r>s?e[--r]:0;else for(;r<n;)e[r++]=0;return e},decode(t,e){e=~~e;let r="";for(let n=0;n<16;n+=2)n!==0&&(r+=":"),r+=(t[e+n]<<8|t[e+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function w3(t){if(rs.isFormat(t))return rs.size;if(Ko.isFormat(t))return Ko.size;throw Error(`Invalid ip address: ${t}`)}function E3(t){return w3(t)===rs.size?1:2}function S3(t,e,r){r=~~r;let n=w3(t);return typeof e=="function"&&(e=e(r+n)),n===rs.size?rs.encode(t,e,r):Ko.encode(t,e,r)}function A3(t,e,r){if(e=~~e,r=r||t.length-e,r===rs.size)return rs.decode(t,e,r);if(r===Ko.size)return Ko.decode(t,e,r);throw Error(`Invalid buffer size needs to be ${rs.size} for v4 or ${Ko.size} for v6.`)}function eh(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t}function bd(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}function D3(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t}function x3(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t}function oS(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t}function aS(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}function C3(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`}function uS(t){if(typeof t=="number")return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}function cS(t){let e=0,r=t.length;for(let n=0;n<r;n+=1){let s=t.charCodeAt(n);if(s<=127)e+=1;else if(s<=2047)e+=2;else if((s&63488)!==55296)e+=3;else{let i=n+1;i===r||s>=56320||(t.charCodeAt(i)&64512)!==56320?e+=3:(n=i,e+=4)}}return e}function _d(t,e,r){let n=t.length;r==null&&(r=0),e===void 0&&(e=new Uint8Array(cS(t)+r));let s=r;for(let i=0;i<n;i+=1){let o=t.charCodeAt(i);if(o<=127)e[s++]=o;else if(o<=2047)e[s++]=192|(o&1984)>>6,e[s++]=128|o&63;else if((o&63488)!==55296)e[s++]=224|(o&61440)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63;else{let a=i+1;if(a===n||o>=56320)e[s++]=239,e[s++]=191,e[s++]=189;else{let c=t.charCodeAt(a);(c&64512)!==56320?(e[s++]=239,e[s++]=191,e[s++]=189):(i=a,o=65536|(o&1023)<<10|c&1023,e[s++]=240|(o&1835008)>>18,e[s++]=128|(o&258048)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63)}}}return _d.bytes=s-r,e}_d.bytes=0;function wd(t,e,r){let n="";e==null&&(e=0),r==null&&(r=t.length);for(let s=e;s<r;){let i=t[s++],o;if(i<=128)o=i;else if(i>191&&i<224)o=(i&31)<<6|t[s++]&63;else if(i>239&&i<365){o=((i&7)<<18|(t[s++]&63)<<12|(t[s++]&63)<<6|t[s++]&63)-65536;let a=55296|o>>10&1023;n+=String.fromCharCode(a),o=56320|o&1023}else o=(i&15)<<12|(t[s++]&63)<<6|t[s++]&63;n+=String.fromCharCode(o)}return wd.bytes=r-e,n}wd.bytes=0;var Wa=t=>t instanceof Uint8Array;function zo(t){return typeof t=="string"?cS(t):t.byteLength}function ug(t){return t instanceof Uint8Array?t:Array.isArray(t)?new Uint8Array(t):_d(t)}function cg(t,e,r){if(typeof e!="string")throw new Error("unknown input type");return _d(e,t,r),_d.bytes}var th={},P3=new Array(255);for(let t=0;t<=15;t+=1){let e=t.toString(16),r=e.toUpperCase();for(let n=0;n<=15;n+=1){let s=n.toString(16),i=s.toUpperCase(),o=t<<4|n,a=`${e}${s}`;P3[o]=a,th[a]=o,th[`${r}${s}`]=o,th[`${e}${i}`]=o,th[`${r}${i}`]=o}}function O3(t,e,r){let n="";for(let s=e;s<r;){let i=t[s++];n+=P3[i]}return n}function lS(t){return t.length>>>1}function F3(t,e,r,n){let s=0;for(;r<n;){let i=e.substr(s,2),o=th[i];if(o===void 0)return;t[r++]=o,s+=2}return t}var wte=Math.pow(2,24),Ete=Math.pow(2,16),Ste=Math.pow(2,8),Ks=(t,e)=>t[e]*wte+t[e+1]*Ete+t[e+2]*Ste+t[e+3],Ge=(t,e)=>t[e]<<8|t[e+1],zs=(t,e,r)=>(e=+e,t[r+3]=e,e=e>>>8,t[r+2]=e,e=e>>>8,t[r+1]=e,e=e>>>8,t[r]=e,r+4),Ie=(t,e,r)=>(t[r]=e>>8,t[r+1]=e&255,r+2);function Nn(t,e,r,n,s){return r<0&&(n-=r,r=0),n<0&&(n=0),s<0?new Uint8Array(0):r>=e.length||n>=s?0:Ate(t,e,r,n,s)}function Ate(t,e,r,n,s){s-n>e.length-r&&(s=n+e.length-r);let i=s-n,o=t.length-n;return i>o&&(i=o),(n!==0||s<t.length)&&(t=new Uint8Array(t.buffer,t.byteOffset+n,i)),e.set(t,r),i}var xte=0,T3=32768,fS=32768,Cte=~fS,B3=32768,Pte=~B3;function Ut({bytes:t=0,encode:e,decode:r,encodingLength:n}){return e.bytes=t,r.bytes=t,{encode:e,decode:r,encodingLength:n||(()=>t)}}var be=Ut({encode(t,e,r){e||(e=new Uint8Array(be.encodingLength(t))),r||(r=0);let n=r,s=t.replace(/^\.|\.$/gm,"");if(s.length){let i=s.split(".");for(let o=0;o<i.length;o++){let a=cg(e,i[o],r+1);e[r]=a,r+=a+1}}return e[r++]=0,be.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=[],n=e,s=0,i=0,o=!1;for(;;){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");let a=t[e++];if(i+=o?0:1,a===0)break;if(a&192)if((a&192)===192){if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");let c=Ge(t,e-1)-49152;if(c>=n)throw new Error("Cannot decode name (bad pointer)");e=c,n=c,i+=o?0:1,o=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+a>t.length)throw new Error("Cannot decode name (buffer overflow)");if(s+=a+1,s>254)throw new Error("Cannot decode name (name too long)");r.push(wd(t,e,e+a)),e+=a,i+=o?0:a}}return be.decode.bytes=i,r.length===0?".":r.join(".")},encodingLength(t){return t==="."||t===".."?1:zo(t.replace(/^\.|\.$/gm,""))+2}}),Tr=Ut({encode(t,e,r){e||(e=new Uint8Array(Tr.encodingLength(t))),r||(r=0);let n=cg(e,t,r+1);return e[r]=n,Tr.encode.bytes=n+1,e},decode(t,e){e||(e=0);let r=t[e],n=wd(t,e+1,e+1+r);return Tr.decode.bytes=r+1,n},encodingLength(t){return zo(t)+1}}),Ed=Ut({bytes:12,encode(t,e,r){e||(e=new Uint8Array(Ed.encodingLength(t))),r||(r=0);let n=(t.flags||0)&32767,s=t.type==="response"?T3:xte;return Ie(e,t.id||0,r),Ie(e,n|s,r+2),Ie(e,t.questions.length,r+4),Ie(e,t.answers.length,r+6),Ie(e,t.authorities.length,r+8),Ie(e,t.additionals.length,r+10),e},decode(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");let r=Ge(t,e+2);return{id:Ge(t,e),type:r&T3?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:x3(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:D3(r&15),questions:new Array(Ge(t,e+4)),answers:new Array(Ge(t,e+6)),authorities:new Array(Ge(t,e+8)),additionals:new Array(Ge(t,e+10))}},encodingLength(){return 12}}),dg=Ut({encode(t,e,r){e||(e=new Uint8Array(dg.encodingLength(t))),r||(r=0);let n=t.length;return Ie(e,n,r),Nn(t,e,r+2,0,n),dg.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=Ge(t,e),n=t.slice(e+2,e+2+r);return dg.decode.bytes=r+2,n},encodingLength(t){return t.length+2}}),fg=Ut({encode(t,e,r){return e||(e=new Uint8Array(fg.encodingLength(t))),r||(r=0),be.encode(t,e,r+2),Ie(e,be.encode.bytes,r),fg.encode.bytes=be.encode.bytes+2,e},decode(t,e){e||(e=0);let r=Ge(t,e),n=be.decode(t,e+2);return fg.decode.bytes=r+2,n},encodingLength(t){return be.encodingLength(t)+2}}),pg=Ut({encode(t,e,r){e||(e=new Uint8Array(pg.encodingLength(t))),r||(r=0);let n=r;return r+=2,be.encode(t.mname,e,r),r+=be.encode.bytes,be.encode(t.rname,e,r),r+=be.encode.bytes,zs(e,t.serial||0,r),r+=4,zs(e,t.refresh||0,r),r+=4,zs(e,t.retry||0,r),r+=4,zs(e,t.expire||0,r),r+=4,zs(e,t.minimum||0,r),r+=4,Ie(e,r-n-2,n),pg.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mname=be.decode(t,e),e+=be.decode.bytes,n.rname=be.decode(t,e),e+=be.decode.bytes,n.serial=Ks(t,e),e+=4,n.refresh=Ks(t,e),e+=4,n.retry=Ks(t,e),e+=4,n.expire=Ks(t,e),e+=4,n.minimum=Ks(t,e),e+=4,pg.decode.bytes=e-r,n},encodingLength(t){return 22+be.encodingLength(t.mname)+be.encodingLength(t.rname)}}),hg=Ut({encode(t,e,r){Array.isArray(t)||(t=[t]);for(let s=0;s<t.length;s++)if(typeof t[s]=="string"&&(t[s]=ug(t[s])),!Wa(t[s]))throw new Error("Must be a Buffer");e||(e=new Uint8Array(hg.encodingLength(t))),r||(r=0);let n=r;return r+=2,t.forEach(function(s){e[r++]=s.length,Nn(s,e,r,0,s.length),r+=s.length}),Ie(e,r-n-2,n),hg.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=Ge(t,e);e+=2;let s=[];for(;n>0;){let i=t[e++];if(--n,n<i)throw new Error("Buffer overflow");s.push(t.slice(e,e+i)),e+=i,n-=i}return hg.decode.bytes=e-r,s},encodingLength(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach(function(r){typeof r=="string"?e+=zo(r)+1:e+=r.length+1}),e}}),mg=Ut({encode(t,e,r){e||(e=new Uint8Array(mg.encodingLength(t))),r||(r=0),typeof t=="string"&&(t=ug(t)),t||(t=new Uint8Array(0));let n=r;r+=2;let s=t.length;return Nn(t,e,r,0,s),r+=s,Ie(e,r-n-2,n),mg.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=Ge(t,e);e+=2;let s=t.slice(e,e+n);return e+=n,mg.decode.bytes=e-r,s},encodingLength(t){return t?(Wa(t)?t.length:zo(t))+2:2}}),yg=Ut({encode(t,e,r){e||(e=new Uint8Array(yg.encodingLength(t))),r||(r=0);let n=r;return r+=2,Tr.encode(t.cpu,e,r),r+=Tr.encode.bytes,Tr.encode(t.os,e,r),r+=Tr.encode.bytes,Ie(e,r-n-2,n),yg.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.cpu=Tr.decode(t,e),e+=Tr.decode.bytes,n.os=Tr.decode(t,e),e+=Tr.decode.bytes,yg.decode.bytes=e-r,n},encodingLength(t){return Tr.encodingLength(t.cpu)+Tr.encodingLength(t.os)+2}}),Dd=Ut({encode(t,e,r){return e||(e=new Uint8Array(Dd.encodingLength(t))),r||(r=0),be.encode(t,e,r+2),Ie(e,be.encode.bytes,r),Dd.encode.bytes=be.encode.bytes+2,e},decode(t,e){e||(e=0);let r=be.decode(t,e+2);return Dd.decode.bytes=be.decode.bytes+2,r},encodingLength(t){return be.encodingLength(t)+2}}),gg=Ut({encode(t,e,r){e||(e=new Uint8Array(gg.encodingLength(t))),r||(r=0),Ie(e,t.priority||0,r+2),Ie(e,t.weight||0,r+4),Ie(e,t.port||0,r+6),be.encode(t.target,e,r+8);let n=be.encode.bytes+6;return Ie(e,n,r),gg.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=Ge(t,e),n={};return n.priority=Ge(t,e+2),n.weight=Ge(t,e+4),n.port=Ge(t,e+6),n.target=be.decode(t,e+8),gg.decode.bytes=r+2,n},encodingLength(t){return 8+be.encodingLength(t.target)}}),Ja=Ut({encode(t,e,r){let n=Ja.encodingLength(t);return e||(e=new Uint8Array(Ja.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=Ja.ISSUER_CRITICAL),Ie(e,n-2,r),r+=2,e[r]=t.flags||0,r+=1,Tr.encode(t.tag,e,r),r+=Tr.encode.bytes,cg(e,t.value,r),r+=zo(t.value),Ja.encode.bytes=n,e},decode(t,e){e||(e=0);let r=Ge(t,e);e+=2;let n=e,s={};return s.flags=t[e],e+=1,s.tag=Tr.decode(t,e),e+=Tr.decode.bytes,s.value=wd(t,e,n+r),s.issuerCritical=!!(s.flags&Ja.ISSUER_CRITICAL),Ja.decode.bytes=r+2,s},encodingLength(t){return Tr.encodingLength(t.tag)+Tr.encodingLength(t.value)+2}});Ja.ISSUER_CRITICAL=128;var vg=Ut({encode(t,e,r){e||(e=new Uint8Array(vg.encodingLength(t))),r||(r=0);let n=r;return r+=2,Ie(e,t.preference||0,r),r+=2,be.encode(t.exchange,e,r),r+=be.encode.bytes,Ie(e,r-n-2,n),vg.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.preference=Ge(t,e),e+=2,n.exchange=be.decode(t,e),e+=be.decode.bytes,vg.decode.bytes=e-r,n},encodingLength(t){return 4+be.encodingLength(t.exchange)}}),k3=Ut({encode(t,e,r){return e||(e=new Uint8Array(k3.encodingLength(t))),r||(r=0),Ie(e,4,r),r+=2,rs.encode(t,e,r),e},decode(t,e){return e||(e=0),e+=2,rs.decode(t,e)},bytes:6}),bg=Ut({encode(t,e,r){return e||(e=new Uint8Array(bg.encodingLength(t))),r||(r=0),Ie(e,16,r),r+=2,Ko.encode(t,e,r),bg.encode.bytes=18,e},decode(t,e){e||(e=0),e+=2;let r=Ko.decode(t,e);return bg.decode.bytes=18,r},bytes:18}),I3=t=>new Uint8Array(t),Ho=Ut({encode(t,e,r){e||(e=new Uint8Array(Ho.encodingLength(t))),r||(r=0);let n=r,s=uS(t.code);if(Ie(e,s,r),r+=2,t.data)Ie(e,t.data.length,r),r+=2,Nn(t.data,e,r),r+=t.data.length;else switch(s){case 8:{let i=t.sourcePrefixLength||0,o=t.family||E3(t.ip,I3),a=S3(t.ip,I3),c=Math.ceil(i/8);Ie(e,c+4,r),r+=2,Ie(e,o,r),r+=2,e[r++]=i,e[r++]=t.scopePrefixLength||0,Nn(a,e,r,0,c),r+=c}break;case 11:t.timeout?(Ie(e,2,r),r+=2,Ie(e,t.timeout,r),r+=2):(Ie(e,0,r),r+=2);break;case 12:{let i=t.length||0;Ie(e,i,r),r+=2,e.fill(0,r,r+i),r+=i}break;case 14:{let i=t.tags.length*2;Ie(e,i,r),r+=2;for(let o of t.tags)Ie(e,o,r),r+=2}break;default:throw new Error(`Unknown roption code: ${t.code}`)}return Ho.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={};r.code=Ge(t,e),r.type=C3(r.code),e+=2;let n=Ge(t,e);switch(e+=2,r.data=t.slice(e,e+n),r.code){case 8:r.family=Ge(t,e),e+=2,r.sourcePrefixLength=t[e++],r.scopePrefixLength=t[e++];{let s=new Uint8Array(r.family===1?4:16);Nn(t,s,0,e,e+n-4),r.ip=A3(s)}break;case 11:n>0&&(r.timeout=Ge(t,e),e+=2);break;case 14:r.tags=[];for(let s=0;s<n;s+=2)r.tags.push(Ge(t,e)),e+=2}return Ho.decode.bytes=n+4,r},encodingLength(t){if(t.data)return t.data.length+4;switch(uS(t.code)){case 8:{let r=t.sourcePrefixLength||0;return Math.ceil(r/8)+8}case 11:return typeof t.timeout=="number"?6:4;case 12:return t.length+4;case 14:return 4+t.tags.length*2}throw new Error(`Unknown roption code: ${t.code}`)}}),Ga=Ut({encode(t,e,r){e||(e=new Uint8Array(Ga.encodingLength(t))),r||(r=0);let n=r,s=Ad(t,Ho);return Ie(e,s,r),r=ah(t,Ho,e,r+2),Ga.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=[],s=Ge(t,e);e+=2;let i=0;for(;s>0;)n[i++]=Ho.decode(t,e),e+=Ho.decode.bytes,s-=Ho.decode.bytes;return Ga.decode.bytes=e-r,n},encodingLength(t){return 2+Ad(t||[],Ho)}}),Hs=Ut({encode(t,e,r){e||(e=new Uint8Array(Hs.encodingLength(t))),r||(r=0);let n=r,s=t.key;if(!Wa(s))throw new Error("Key must be a Buffer");return r+=2,Ie(e,t.flags,r),r+=2,e[r]=Hs.PROTOCOL_DNSSEC,r+=1,e[r]=t.algorithm,r+=1,Nn(s,e,r,0,s.length),r+=s.length,Hs.encode.bytes=r-n,Ie(e,Hs.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=Ge(t,e);if(e+=2,n.flags=Ge(t,e),e+=2,t[e]!==Hs.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t[e],e+=1,n.key=t.slice(e,r+s+2),e+=n.key.length,Hs.decode.bytes=e-r,n},encodingLength(t){return 6+zo(t.key)}});Hs.PROTOCOL_DNSSEC=3;Hs.ZONE_KEY=128;Hs.SECURE_ENTRYPOINT=32768;var rh=Ut({encode(t,e,r){e||(e=new Uint8Array(rh.encodingLength(t))),r||(r=0);let n=r,s=t.signature;if(!Wa(s))throw new Error("Signature must be a Buffer");return r+=2,Ie(e,bd(t.typeCovered),r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.labels,r+=1,zs(e,t.originalTTL,r),r+=4,zs(e,t.expiration,r),r+=4,zs(e,t.inception,r),r+=4,Ie(e,t.keyTag,r),r+=2,be.encode(t.signersName,e,r),r+=be.encode.bytes,Nn(s,e,r,0,s.length),r+=s.length,rh.encode.bytes=r-n,Ie(e,rh.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=Ge(t,e);return e+=2,n.typeCovered=eh(Ge(t,e)),e+=2,n.algorithm=t[e],e+=1,n.labels=t[e],e+=1,n.originalTTL=Ks(t,e),e+=4,n.expiration=Ks(t,e),e+=4,n.inception=Ks(t,e),e+=4,n.keyTag=Ge(t,e),e+=2,n.signersName=be.decode(t,e),e+=be.decode.bytes,n.signature=t.slice(e,r+s+2),e+=n.signature.length,rh.decode.bytes=e-r,n},encodingLength(t){return 20+be.encodingLength(t.signersName)+zo(t.signature)}}),nh=Ut({encode(t,e,r){e||(e=new Uint8Array(nh.encodingLength(t))),r||(r=0);let n=r;return r+=2,be.encode(t.mbox||".",e,r),r+=be.encode.bytes,be.encode(t.txt||".",e,r),r+=be.encode.bytes,nh.encode.bytes=r-n,Ie(e,nh.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mbox=be.decode(t,e)||".",e+=be.decode.bytes,n.txt=be.decode(t,e)||".",e+=be.decode.bytes,nh.decode.bytes=e-r,n},encodingLength(t){return 2+be.encodingLength(t.mbox||".")+be.encodingLength(t.txt||".")}}),ei=Ut({encode(t,e,r){e||(e=new Uint8Array(ei.encodingLength(t))),r||(r=0);let n=r,s=[];for(let i=0;i<t.length;i++){let o=bd(t[i]);s[o>>8]===void 0&&(s[o>>8]=[]),s[o>>8][o>>3&31]|=1<<7-(o&7)}for(let i=0;i<s.length;i++)if(s[i]!==void 0){let o=ug(s[i]);e[r]=i,r+=1,e[r]=o.length,r+=1,Nn(o,e,r,0,o.length),r+=o.length}return ei.encode.bytes=r-n,e},decode(t,e,r){e||(e=0);let n=e,s=[];for(;e-n<r;){let i=t[e];e+=1;let o=t[e];e+=1;for(let a=0;a<o;a++){let c=t[e+a];for(let u=0;u<8;u++)if(c&1<<7-u){let l=eh(i<<8|a<<3|u);s.push(l)}}e+=o}return ei.decode.bytes=e-n,s},encodingLength(t){let e=[];for(let n=0;n<t.length;n++){let s=bd(t[n]);e[s>>8]=Math.max(e[s>>8]||0,s&255)}let r=0;for(let n=0;n<e.length;n++)e[n]!==void 0&&(r+=2+Math.ceil((e[n]+1)/8));return r}}),ih=Ut({encode(t,e,r){e||(e=new Uint8Array(ih.encodingLength(t))),r||(r=0);let n=r;return r+=2,be.encode(t.nextDomain,e,r),r+=be.encode.bytes,ei.encode(t.rrtypes,e,r),r+=ei.encode.bytes,ih.encode.bytes=r-n,Ie(e,ih.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=Ge(t,e);return e+=2,n.nextDomain=be.decode(t,e),e+=be.decode.bytes,n.rrtypes=ei.decode(t,e,s-(e-r)),e+=ei.decode.bytes,ih.decode.bytes=e-r,n},encodingLength(t){return 2+be.encodingLength(t.nextDomain)+ei.encodingLength(t.rrtypes)}}),sh=Ut({encode(t,e,r){e||(e=new Uint8Array(sh.encodingLength(t))),r||(r=0);let n=r,s=t.salt;if(!Wa(s))throw new Error("salt must be a Buffer");let i=t.nextDomain;if(!Wa(i))throw new Error("nextDomain must be a Buffer");return r+=2,e[r]=t.algorithm,r+=1,e[r]=t.flags,r+=1,Ie(e,t.iterations,r),r+=2,e[r]=s.length,r+=1,Nn(s,e,r,0,s.length),r+=s.length,e[r]=i.length,r+=1,Nn(i,e,r,0,i.length),r+=i.length,ei.encode(t.rrtypes,e,r),r+=ei.encode.bytes,sh.encode.bytes=r-n,Ie(e,sh.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=Ge(t,e);e+=2,n.algorithm=t[e],e+=1,n.flags=t[e],e+=1,n.iterations=Ge(t,e),e+=2;let i=t[e];e+=1,n.salt=t.slice(e,e+i),e+=i;let o=t[e];return e+=1,n.nextDomain=t.slice(e,e+o),e+=o,n.rrtypes=ei.decode(t,e,s-(e-r)),e+=ei.decode.bytes,sh.decode.bytes=e-r,n},encodingLength(t){return 8+t.salt.length+t.nextDomain.length+ei.encodingLength(t.rrtypes)}}),oh=Ut({encode(t,e,r){e||(e=new Uint8Array(oh.encodingLength(t))),r||(r=0);let n=r,s=t.digest;if(!Wa(s))throw new Error("Digest must be a Buffer");return r+=2,Ie(e,t.keyTag,r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.digestType,r+=1,Nn(s,e,r,0,s.length),r+=s.length,oh.encode.bytes=r-n,Ie(e,oh.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=Ge(t,e);return e+=2,n.keyTag=Ge(t,e),e+=2,n.algorithm=t[e],e+=1,n.digestType=t[e],e+=1,n.digest=t.slice(e,r+s+2),e+=n.digest.length,oh.decode.bytes=e-r,n},encodingLength(t){return 6+zo(t.digest)}}),Sd=Ut({encode(t,e,r){e||(e=new Uint8Array(Sd.encodingLength(t))),r||(r=0);let n=r;r+=2,e[r]=t.algorithm,r+=1,e[r]=t.hash,r+=1;let s=lS(t.fingerprint),i=pS(t.hash);if(s!==i)throw new Error(`Invalid length of fingerprint "${t.fingerprint}" for hashType=${t.hash}: ${s} != ${i}`);return F3(e,t.fingerprint,r,r+=s),Sd.encode.bytes=r-n,Ie(e,Sd.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;let s=pS(n.hash);return n.fingerprint=O3(t,e,e+s),e+=s,Sd.decode.bytes=e-r,n},encodingLength(t){return 4+lS(t.fingerprint)}});function pS(t){if(t===1)return 20;if(t===2)return 32;throw new Error(`Invalid hashType=${t}, supported=1,2`)}Sd.getFingerprintLengthForHashType=pS;function dS(t){switch(t.toUpperCase()){case"A":return k3;case"PTR":return Dd;case"CNAME":return Dd;case"DNAME":return Dd;case"TXT":return hg;case"NULL":return mg;case"AAAA":return bg;case"SRV":return gg;case"HINFO":return yg;case"CAA":return Ja;case"NS":return fg;case"SOA":return pg;case"MX":return vg;case"OPT":return Ga;case"DNSKEY":return Hs;case"RRSIG":return rh;case"RP":return nh;case"NSEC":return ih;case"NSEC3":return sh;case"SSHFP":return Sd;case"DS":return oh}return dg}var Ai=Ut({encode(t,e,r){e||(e=new Uint8Array(Ai.encodingLength(t))),r||(r=0);let n=r;if(be.encode(t.name,e,r),r+=be.encode.bytes,Ie(e,bd(t.type),r),t.type.toUpperCase()==="OPT"){if(t.name!==".")throw new Error("OPT name must be root.");Ie(e,t.udpPayloadSize||4096,r+2),e[r+4]=t.extendedRcode||0,e[r+5]=t.ednsVersion||0,Ie(e,t.flags||0,r+6),r+=8,Ga.encode(t.options||[],e,r),r+=Ga.encode.bytes}else{let s=aS(t.class===void 0?"IN":t.class);t.flush&&(s|=fS),Ie(e,s,r+2),zs(e,t.ttl||0,r+4),r+=8;let i=dS(t.type);i.encode(t.data,e,r),r+=i.encode.bytes}return Ai.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={},n=e;if(r.name=be.decode(t,e),e+=be.decode.bytes,r.type=eh(Ge(t,e)),r.type==="OPT")r.udpPayloadSize=Ge(t,e+2),r.extendedRcode=t[e+4],r.ednsVersion=t[e+5],r.flags=Ge(t,e+6),r.flag_do=(r.flags>>15&1)===1,r.options=Ga.decode(t,e+8),e+=8+Ga.decode.bytes;else{let s=Ge(t,e+2);r.ttl=Ks(t,e+4),r.class=oS(s&Cte),r.flush=!!(s&fS);let i=dS(r.type);r.data=i.decode(t,e+8),e+=8+i.decode.bytes}return Ai.decode.bytes=e-n,r},encodingLength(t){let e=t.data!==null&&t.data!==void 0?t.data:t.options;return be.encodingLength(t.name)+8+dS(t.type).encodingLength(e)}}),xd=Ut({encode(t,e,r){e||(e=new Uint8Array(xd.encodingLength(t))),r||(r=0);let n=r;return be.encode(t.name,e,r),r+=be.encode.bytes,Ie(e,bd(t.type),r),r+=2,Ie(e,aS(t.class===void 0?"IN":t.class),r),r+=2,xd.encode.bytes=r-n,t},decode(t,e){e||(e=0);let r=e,n={};return n.name=be.decode(t,e),e+=be.decode.bytes,n.type=eh(Ge(t,e)),e+=2,n.class=oS(Ge(t,e)),e+=2,!!(n.class&B3)&&(n.class&=Pte),xd.decode.bytes=e-r,n},encodingLength(t){return be.encodingLength(t.name)+4}});var R3=1024;var Yr={encode:function(t,e,r){let n=!e;n&&(e=new Uint8Array(Ote(t))),r||(r=0);let s=r;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),Ed.encode(t,e,r),r+=Ed.encode.bytes,r=ah(t.questions,xd,e,r),r=ah(t.answers,Ai,e,r),r=ah(t.authorities,Ai,e,r),r=ah(t.additionals,Ai,e,r),Yr.encode.bytes=r-s,n&&uh.bytes!==e.length?e.slice(0,uh.bytes):e},decode:function(t,e){e||(e=0);let r=e,n=Ed.decode(t,e);return e+=Ed.decode.bytes,e=lg(n.questions,xd,t,e),e=lg(n.answers,Ai,t,e),e=lg(n.authorities,Ai,t,e),e=lg(n.additionals,Ai,t,e),Yr.decode.bytes=e-r,n},encodingLength:function(t){return Ed.encodingLength(t)+Ad(t.questions||[],xd)+Ad(t.answers||[],Ai)+Ad(t.authorities||[],Ai)+Ad(t.additionals||[],Ai)}};Yr.encode.bytes=0;Yr.decode.bytes=0;function _g(t,e){if(t.questions)throw new Error("Only one .question object expected instead of a .questions array!");let r=Object.assign({type:e},t);return r.question&&(r.questions=[r.question],delete r.question),r}var wg={encode:function(t,e,r){return e=Yr.encode(_g(t,"query"),e,r),wg.encode.bytes=Yr.encode.bytes,e},decode:function(t,e){let r=Yr.decode(t,e);return wg.decode.bytes=Yr.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return Yr.encodingLength(_g(t,"query"))}};wg.encode.bytes=0;wg.decode.bytes=0;var Eg={encode:function(t,e,r){return e=Yr.encode(_g(t,"response"),e,r),Eg.encode.bytes=Yr.encode.bytes,e},decode:function(t,e){let r=Yr.decode(t,e);return Eg.decode.bytes=Yr.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return Yr.encodingLength(_g(t,"response"))}};Eg.encode.bytes=0;Eg.decode.bytes=0;var uh=Yr.encode,Sg=Yr.decode,Ote=Yr.encodingLength;function $3(t){let e=uh(t),r=new Uint8Array(2+e.byteLength);return Ie(r,e.byteLength),Nn(e,r,2,0,e.length),$3.bytes=r.byteLength,r}$3.bytes=0;function j3(t){let e=Ge(t,0);if(t.byteLength<e+2)return null;let r=Sg(t.slice(2));return j3.bytes=Sg.bytes,r}j3.bytes=0;function Ad(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function ah(t,e,r,n){for(let s=0;s<t.length;s++)e.encode(t[s],r,n),n+=e.encode.bytes;return n}function lg(t,e,r,n){for(let s=0;s<t.length;s++)t[s]=e.decode(r,n),n+=e.decode.bytes;return n}var N3=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Di=class{static getSigningMethod(e){return N3(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return N3(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var qr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},M3=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},q3="https://diddht.tbddev.org",Fte=0,Za=7200,Ag=";",En=",",hS;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(hS||(hS={}));var Sn;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1",t[t.X25519=3]="X25519"})(Sn||(Sn={}));var mS;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(mS||(mS={}));var U3={Ed25519:Sn.Ed25519,ES256K:Sn.secp256k1,ES256:Sn.secp256r1,"P-256":Sn.secp256r1,secp256k1:Sn.secp256k1,secp256r1:Sn.secp256r1,X25519:Sn.X25519},L3={[Sn.Ed25519]:"EdDSA",[Sn.secp256k1]:"ES256K",[Sn.secp256r1]:"ES256",[Sn.X25519]:"ECDH-ES+A256KW"},Ec=class t extends Di{static create(){return qr(this,arguments,void 0,function*({keyManager:e=new Nr,options:r={}}={}){var n,s,i,o,a,c,u,l,d,p,f;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(D=>!(D.algorithm in U3)))throw new Error("One or more verification method algorithms are not supported");let h=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(D=>"id"in D).map(D=>D.id);if(h&&h.length!==new Set(h).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(D=>!D.id||!D.type||!D.serviceEndpoint))throw new Error("One or more services are missing required properties");let y=yield e.generateKey({algorithm:"Ed25519"}),g=yield e.getPublicKey({keyUri:y}),A=yield Mr.identityKeyToIdentifier({identityKey:g}),x=Object.assign(Object.assign({id:A},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),b=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];b?.some(D=>{var F;return((F=D.id)===null||F===void 0?void 0:F.split("#").pop())==="0"})||b.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(let D of b){let F=D.id&&D.id.split("#").pop()==="0"?y:yield e.generateKey({algorithm:D.algorithm}),C=yield e.getPublicKey({keyUri:F}),I=(c=(a=D.id)!==null&&a!==void 0?a:C.kid)!==null&&c!==void 0?c:yield ze({jwk:C});I=`${A}#${$n(I)}`,(u=x.verificationMethod)!==null&&u!==void 0||(x.verificationMethod=[]),x.verificationMethod.push({id:I,type:"JsonWebKey",controller:(l=D.controller)!==null&&l!==void 0?l:A,publicKeyJwk:C});for(let k of(d=D.purposes)!==null&&d!==void 0?d:[])x[k]||(x[k]=[]),x[k].push(I)}(p=r.services)===null||p===void 0||p.forEach(D=>{var F;(F=x.service)!==null&&F!==void 0||(x.service=[]),D.id=`${A}#${D.id.split("#").pop()}`,x.service.push(D)});let w=new jn({uri:A,document:x,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((f=r.publish)!==null&&f!==void 0)||f){let D=yield t.publish({did:w,gatewayUri:r.gatewayUri});w.metadata=D.didDocumentMetadata}return w})}static import(e){return qr(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Nr}){var s;let i=rt.parse(r.uri);if(i?.method!==t.methodName)throw new Ee(ge.MethodNotSupported,"Method not supported");let o=yield jn.import({portableDid:r,keyManager:n});if(!(!((s=o.document.verificationMethod)===null||s===void 0)&&s.some(a=>{var c;return((c=a.id)===null||c===void 0?void 0:c.split("#").pop())==="0"})))throw new Ee(ge.InvalidDidDocument,"DID document must contain an Identity Key");return o})}static getSigningMethod(e){return qr(this,arguments,void 0,function*({didDocument:r,methodId:n="#0"}){var s;let i=rt.parse(r.id);if(i&&i.method!==this.methodName)throw new Ee(ge.MethodNotSupported,`Method not supported: ${i.method}`);let o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var c,u;return $n(a.id)===((c=$n(n))!==null&&c!==void 0?c:$n((u=r.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(o&&o.publicKeyJwk))throw new Ee(ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static publish(e){return qr(this,arguments,void 0,function*({did:r,gatewayUri:n=q3}){return yield Dg.put({did:r,gatewayUri:n})})}static resolve(e){return qr(this,arguments,void 0,function*(r,n={}){var s;let i=(s=n?.gatewayUri)!==null&&s!==void 0?s:q3;try{yield Mr.identifierToIdentityKey({didUri:r});let{didDocument:o,didDocumentMetadata:a}=yield Dg.get({didUri:r,gatewayUri:i});return Object.assign(Object.assign({},sr),{didDocument:o,didDocumentMetadata:a})}catch(o){if(!(o instanceof Ee))throw new Error(o);return Object.assign(Object.assign({},sr),{didResolutionMetadata:Object.assign({error:o.code},o.message&&{errorMessage:o.message})})}})}};Ec.methodName="dht";var Dg=class t{static get(e){return qr(this,arguments,void 0,function*({didUri:r,gatewayUri:n}){let s=Mr.identifierToIdentityKeyBytes({didUri:r}),i=yield t.pkarrGet({gatewayUri:n,publicKeyBytes:s}),o=yield Mr.parseBep44GetMessage({bep44Message:i}),a=yield t.fromDnsPacket({didUri:r,dnsPacket:o});return a.didDocumentMetadata.versionId=i.seq.toString(),a})}static put(e){return qr(this,arguments,void 0,function*({did:r,gatewayUri:n}){let s=yield t.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[n]}),i=yield Mr.createBep44PutMessage({dnsPacket:s,publicKeyBytes:Mr.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),o=yield t.pkarrPut({gatewayUri:n,bep44Message:i});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:o,versionId:i.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(e){return qr(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:n}){let s=le.uint8Array(n).toBase32Z(),i=new URL(s,r).href,o;try{if(o=yield fetch(i,{method:"GET"}),!o.ok)throw new Ee(ge.NotFound,`Pkarr record not found for: ${s}`)}catch(u){throw u instanceof Ee?u:new Ee(ge.InternalError,`Failed to fetch Pkarr record: ${u.message}`)}let a=yield o.arrayBuffer();if(!a)throw new Ee(ge.NotFound,`Pkarr record not found for: ${s}`);if(a.byteLength<72)throw new Ee(ge.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${a.byteLength}`);if(a.byteLength>1072)throw new Ee(ge.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${a.byteLength}`);return{k:n,seq:Number(new DataView(a).getBigUint64(64)),sig:new Uint8Array(a,0,64),v:new Uint8Array(a,72)}})}static pkarrPut(e){return qr(this,arguments,void 0,function*({gatewayUri:r,bep44Message:n}){let s=le.uint8Array(n.k).toBase32Z(),i=new URL(s,r).href,o=new Uint8Array(n.v.length+72);o.set(n.sig,0),new DataView(o.buffer).setBigUint64(n.sig.length,BigInt(n.seq)),o.set(n.v,n.sig.length+8);let a;try{a=yield fetch(i,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:o})}catch(c){throw new Ee(ge.InternalError,`Failed to put Pkarr record for identifier ${s}: ${c.message}`)}return a.ok})}static fromDnsPacket(e){return qr(this,arguments,void 0,function*({didUri:r,dnsPacket:n}){var s,i,o;let a={id:r},c={published:!0},u=new Map;for(let l of(s=n?.answers)!==null&&s!==void 0?s:[]){if(l.type!=="TXT")continue;let d=l.name.split(".")[0].substring(1);switch(!0){case d.startsWith("aka"):{let p=Mr.parseTxtDataToString(l.data);a.alsoKnownAs=p.split(En);break}case d.startsWith("cnt"):{let p=Mr.parseTxtDataToString(l.data);a.controller=p.includes(En)?p.split(En):p;break}case d.startsWith("k"):{let{id:p,t:f,k:h,c:y,a:g}=Mr.parseTxtDataToObject(l.data),A=le.base64Url(h).toUint8Array(),x=Sn[Number(f)],b=yield Mr.keyConverter(x).bytesToPublicKey({publicKeyBytes:A});b.alg=g||L3[Number(f)];let w=d==="k0"?"0":p!==void 0?p:yield ze({jwk:b});(i=a.verificationMethod)!==null&&i!==void 0||(a.verificationMethod=[]);let D=`${r}#${w}`;a.verificationMethod.push({id:D,type:"JsonWebKey",controller:y??r,publicKeyJwk:b}),u.set(d,D);break}case d.startsWith("s"):{let p=Mr.parseTxtDataToObject(l.data),{id:f,t:h,se:y}=p,g=M3(p,["id","t","se"]),A=y.includes(En)?y.split(En):[y],x=Object.fromEntries(Object.entries(g).map(([b,w])=>[b,w.includes(En)?w.split(En):w]));(o=a.service)!==null&&o!==void 0||(a.service=[]),a.service.push(Object.assign(Object.assign({},x),{id:`${r}#${f}`,type:h,serviceEndpoint:A}));break}case d.startsWith("typ"):{let{id:p}=Mr.parseTxtDataToObject(l.data);c.types=p.split(En).map(f=>Number(f));break}case d.startsWith("did"):{let p=x=>x.split(En).map(b=>u.get(b)).filter(b=>typeof b=="string"),{auth:f,asm:h,del:y,inv:g,agm:A}=Mr.parseTxtDataToObject(l.data);f&&(a.authentication=p(f)),h&&(a.assertionMethod=p(h)),y&&(a.capabilityDelegation=p(y)),g&&(a.capabilityInvocation=p(g)),A&&(a.keyAgreement=p(A));break}}}return{didDocument:a,didDocumentMetadata:c,didResolutionMetadata:{}}})}static toDnsPacket(e){return qr(this,arguments,void 0,function*({didDocument:r,didMetadata:n,authoritativeGatewayUris:s,previousDidProof:i}){var o,a,c,u,l;let d=[],p=[],f=new Map,h=[],y=[];if(i!==void 0){let{signature:x,previousDid:b}=i;yield Mr.validatePreviousDidProof({newDid:r.id,previousDidProof:i}),d.push({type:"TXT",name:"_prv._did.",ttl:Za,data:`id=${b};s=${x}`})}if(r.alsoKnownAs&&d.push({type:"TXT",name:"_aka._did.",ttl:Za,data:r.alsoKnownAs.join(En)}),r.controller){let x=Array.isArray(r.controller)?r.controller.join(En):r.controller;d.push({type:"TXT",name:"_cnt._did.",ttl:Za,data:x})}for(let[x,b]of(a=(o=r.verificationMethod)===null||o===void 0?void 0:o.entries())!==null&&a!==void 0?a:[]){let w=`k${x}`;y.push(w);let D=b.id.split("#").pop();f.set(D,w);let F=b.publicKeyJwk;if(!(F?.crv&&F.crv in U3))throw new Ee(ge.InvalidPublicKeyType,`Verification method '${b.id}' contains an unsupported key type: ${(c=F?.crv)!==null&&c!==void 0?c:"undefined"}`);let C=Sn[F.crv],I=yield Mr.keyConverter(F.crv).publicKeyToBytes({publicKey:F}),k=le.uint8Array(I).toBase64Url(),T=[`t=${C}`,`k=${k}`];D!=="0"&&(yield ze({jwk:F}))!==D&&T.unshift(`id=${D}`),F.alg!==L3[C]&&T.push(`a=${F.alg}`),b.controller!==r.id&&T.push(`c=${b.controller}`),d.push({type:"TXT",name:`_${w}._did.`,ttl:Za,data:T.join(Ag)})}(u=r.service)===null||u===void 0||u.forEach((x,b)=>{let w=`s${b}`;h.push(w);let{id:D,type:F,serviceEndpoint:C}=x,I=M3(x,["id","type","serviceEndpoint"]);D=$n(D),C=Array.isArray(C)?C.join(","):C;let T=Object.entries(Object.assign({id:D,t:F,se:C},I)).map(([L,Q])=>`${L}=${Q}`).join(Ag),j=Mr.chunkDataIfNeeded(T);d.push({type:"TXT",name:`_${w}._did.`,ttl:Za,data:j})});let g=[`v=${Fte}`];if(y.length&&g.push(`vm=${y.join(En)}`),Object.keys(wc).forEach(x=>{var b;let w=(b=r[x])===null||b===void 0?void 0:b.map(D=>f.get(D.split("#").pop()));if(w){let D=mS[x];g.push(`${D}=${w.join(En)}`)}}),h.length&&g.push(`svc=${h.join(En)}`),!((l=n.types)===null||l===void 0)&&l.length){let b=n.types.map(w=>typeof w=="string"?hS[w]:w);d.push({type:"TXT",name:"_typ._did.",ttl:Za,data:`id=${b.join(En)}`})}d.push({type:"TXT",name:"_did."+t.getUniqueDidSuffix(r.id)+".",ttl:Za,data:g.join(Ag)});for(let x of s||[])p.push({type:"NS",name:"_did."+t.getUniqueDidSuffix(r.id)+".",ttl:Za,data:x+"."});return{id:0,type:"response",flags:R3,answers:[...d,...p]}})}static getUniqueDidSuffix(e){return e.split(":")[2]}},Mr=class t{static createBep44PutMessage(e){return qr(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:n,signer:s}){let i=Math.ceil(Date.now()/1e3),o=uh(r),a=sS.encode({seq:i,v:o}).subarray(1,-1);if(a.length>1e3)throw new Ee(ge.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${a.length} bytes`);let c=yield s.sign({data:a});return{k:n,seq:i,sig:c,v:o}})}static identifierToIdentityKey(e){return qr(this,arguments,void 0,function*({didUri:r}){let n=t.identifierToIdentityKeyBytes({didUri:r});return yield Fr.bytesToPublicKey({publicKeyBytes:n})})}static identifierToIdentityKeyBytes({didUri:e}){let r=rt.parse(e);if(!r)throw new Ee(ge.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==Ec.methodName)throw new Ee(ge.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=le.base32Z(r.id).toUint8Array()}catch{throw new Ee(ge.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new Ee(ge.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier(e){return qr(this,arguments,void 0,function*({identityKey:r}){let n=yield Fr.publicKeyToBytes({publicKey:r}),s=le.uint8Array(n).toBase32Z();return`did:${Ec.methodName}:${s}`})}static keyConverter(e){let n={Ed25519:Fr,"P-256":{publicKeyToBytes:s=>qr(this,[s],void 0,function*({publicKey:i}){let o=yield Xr.publicKeyToBytes({publicKey:i});return yield Xr.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:Xr.bytesToPublicKey,privateKeyToBytes:Xr.privateKeyToBytes,bytesToPrivateKey:Xr.bytesToPrivateKey},secp256k1:{publicKeyToBytes:s=>qr(this,[s],void 0,function*({publicKey:i}){let o=yield jr.publicKeyToBytes({publicKey:i});return yield jr.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:jr.bytesToPublicKey,privateKeyToBytes:jr.privateKeyToBytes,bytesToPrivateKey:jr.bytesToPrivateKey},X25519:gd}[e];if(!n)throw new Ee(ge.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage(e){return qr(this,arguments,void 0,function*({bep44Message:r}){let n=yield Fr.bytesToPublicKey({publicKeyBytes:r.k}),s=sS.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield Fr.verify({key:n,signature:r.sig,data:s})))throw new Ee(ge.InvalidSignature,"Invalid signature for DHT BEP44 message");return Sg(r.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(Ag).reduce((r,n)=>{let[s,i]=n.split("=");return r[s]=i,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return le.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new Ee(ge.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(e){return qr(this,arguments,void 0,function*({newDid:r,previousDidProof:n}){let s=yield t.identifierToIdentityKey({didUri:n.previousDid}),i=t.identifierToIdentityKeyBytes({didUri:r}),o=le.base64Url(n.signature).toUint8Array();if(!(yield Fr.verify({key:s,data:i,signature:o})))throw new Ee(ge.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(e){if(e.length<=255)return e;let r=[];for(let n=0;n<e.length;n+=255)r.push(e.slice(n,n+255));return r}};var Wt={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};var Mt=class extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}};var SCe=new Uint8Array(0);var yS=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var gS=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},vS=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return V3(this,e)}},bS=class{constructor(e){this.decoders=e}or(e){return V3(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},V3=(t,e)=>new bS({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),_S=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new gS(e,r,n),this.decoder=new vS(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Tte=({name:t,prefix:e,encode:r,decode:n})=>new _S(t,e,r,n);var Ite=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,c=0,u=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Bte=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},ch=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Tte({prefix:e,name:t,encode(s){return Bte(s,n,r)},decode(s){return Ite(s,n,r,t)}});var FCe=ch({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),TCe=ch({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),lh=ch({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ICe=ch({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Mn=class t{static encode(e){return lh.baseEncode(e)}static decodeAsBytes(e,r){if(!t.isBase64UrlString(e))throw new Mt(Wt.EncodedStringIncorrectEncoding,`Given ${r} must be base64url string.`);return lh.baseDecode(e)}static decodeAsString(e,r){let n=t.decodeAsBytes(e,r);return t.bytesToString(n)}static isBase64UrlString(e){return/^[A-Za-z0-9_-]+$/.test(e)}static stringToBytes(e){return new TextEncoder().encode(e)}static bytesToString(e){return new TextDecoder().decode(e)}};var e5=xs(z3(),1);var wS;(function(t){t.Public="public",t.Private="private"})(wS||(wS={}));var ti=wS;var Ir=class{static validateEs256kOperationKey(e,r){let n=new Set(["kty","crv","x","y"]);r===ti.Private&&n.add("d");for(let s in e)if(!n.has(s))throw new Mt(Wt.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${s}'.`);if(e.crv!=="secp256k1")throw new Mt(Wt.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${e.crv}.'`);if(e.kty!=="EC")throw new Mt(Wt.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${e.kty}.'`);if(e.x.length!==43)throw new Mt(Wt.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(e.y.length!==43)throw new Mt(Wt.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if(r===ti.Private&&(e.d===void 0||e.d.length!==43))throw new Mt(Wt.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(e){if(e.length>50)throw new Mt(Wt.IdTooLong,`Key ID length ${e.length} exceed max allowed length of 50.`);if(!Mn.isBase64UrlString(e))throw new Mt(Wt.IdNotUsingBase64UrlCharacterSet,`Key ID '${e}' is not a Base64URL string.`)}static validatePublicKeyPurposes(e){if(e===void 0)return;let r=new Set;for(let n of e){if(r.has(n))throw new Mt(Wt.PublicKeyPurposeDuplicated,`Public key purpose '${n}' already specified.`);r.add(n)}}};var dh=class{};dh.hashAlgorithmInMultihashCode=18;dh.maxCanonicalizedDeltaSizeInBytes=1e3;var An=dh;var J3=xs(W3(),1);var ns=class t{static canonicalizeAsBytes(e){let r=t.removeAllUndefinedProperties(e),n=J3.default(r);return Mn.stringToBytes(n)}static removeAllUndefinedProperties(e){for(let r in e)typeof e[r]=="object"?t.removeAllUndefinedProperties(e[r]):e[r]===void 0&&delete e[r];return e}};var kte=X3,G3=128,Rte=127,$te=~Rte,jte=Math.pow(2,31);function X3(t,e,r){e=e||[],r=r||0;for(var n=r;t>=jte;)e[r++]=t&255|G3,t/=128;for(;t&$te;)e[r++]=t&255|G3,t>>>=7;return e[r]=t|0,X3.bytes=r-n+1,e}var Nte=ES,Mte=128,Z3=127;function ES(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw ES.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&Z3)<<s:(o&Z3)*Math.pow(2,s),s+=7}while(o>=Mte);return ES.bytes=i-n,r}var qte=Math.pow(2,7),Lte=Math.pow(2,14),Ute=Math.pow(2,21),Vte=Math.pow(2,28),Kte=Math.pow(2,35),zte=Math.pow(2,42),Hte=Math.pow(2,49),Wte=Math.pow(2,56),Jte=Math.pow(2,63),Gte=function(t){return t<qte?1:t<Lte?2:t<Ute?3:t<Vte?4:t<Kte?5:t<zte?6:t<Hte?7:t<Wte?8:t<Jte?9:10},Zte={encode:kte,decode:Nte,encodingLength:Gte},Xte=Zte,fh=Xte;var SS=(t,e=0)=>[fh.decode(t,e),fh.decode.bytes],AS=(t,e,r=0)=>(fh.encode(t,e,r),e),DS=t=>fh.encodingLength(t);var xS=(t,e)=>{let r=e.byteLength,n=DS(t),s=n+DS(r),i=new Uint8Array(s+r);return AS(t,i,0),AS(r,i,n),i.set(e,s),new Cg(t,r,e,i)},Y3=t=>{let e=yS(t),[r,n]=SS(e),[s,i]=SS(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new Cg(r,s,o,e)};var Cg=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};var PS=({name:t,code:e,encode:r})=>new CS(t,e,r),CS=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?xS(this.code,r):r.then(n=>xS(this.code,n))}else throw Error("Unknown type, must be binary type")}};var Q3=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Pg=PS({name:"sha2-256",code:18,encode:Q3("SHA-256")}),ePe=PS({name:"sha2-512",code:19,encode:Q3("SHA-512")});var ph=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Lr=class t{static hash(e,r){return ph(this,void 0,void 0,function*(){let n;switch(r){case 18:n=(yield Pg.digest(e)).bytes;break;default:throw new Mt(Wt.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static hashAsNonMultihashBytes(e,r){return ph(this,void 0,void 0,function*(){let n;switch(r){case 18:n=yield Pg.encode(e);break;default:throw new Mt(Wt.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static canonicalizeThenHashThenEncode(e,r){return ph(this,void 0,void 0,function*(){let n=ns.canonicalizeAsBytes(e);return yield t.hashThenEncode(n,r)})}static canonicalizeThenDoubleHashThenEncode(e,r){return ph(this,void 0,void 0,function*(){let n=ns.canonicalizeAsBytes(e),s=yield t.hashAsNonMultihashBytes(n,r);return yield t.hashThenEncode(s,r)})}static hashThenEncode(e,r){return ph(this,void 0,void 0,function*(){let n=yield t.hash(e,r);return Mn.encode(n)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(e,r){let n,s=Mn.decodeAsBytes(e,r);try{n=Y3(s)}catch{throw new Mt(Wt.MultihashStringNotAMultihash,`Given ${r} string '${e}' is not a multihash after decoding.`)}let i=An.hashAlgorithmInMultihashCode;if(i!==n.code)throw new Mt(Wt.MultihashUnsupportedHashAlgorithm,`Given ${r} uses unsupported multihash algorithm with code ${n.code}, should use ${i} or change IonSdkConfig to desired hashing algorithm.`)}};var OS;(function(t){t.Create="create",t.Update="update",t.Deactivate="deactivate",t.Recover="recover"})(OS||(OS={}));var hh=OS;var FS;(function(t){t.Replace="replace",t.AddPublicKeys="add-public-keys",t.RemovePublicKeys="remove-public-keys",t.AddServices="add-services",t.RemoveServices="remove-services"})(FS||(FS={}));var Sc=FS;var Og=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Xa=class t{static createCreateRequest(e){return Og(this,void 0,void 0,function*(){let r=e.recoveryKey,n=e.updateKey,s=e.document.publicKeys,i=e.document.services;Ir.validateEs256kOperationKey(r,ti.Public),Ir.validateEs256kOperationKey(n,ti.Public),t.validateDidDocumentKeys(s),t.validateServices(i);let o=An.hashAlgorithmInMultihashCode,a=[{action:Sc.Replace,document:e.document}],c={updateCommitment:yield Lr.canonicalizeThenDoubleHashThenEncode(n,o),patches:a};t.validateDeltaSize(c);let l={deltaHash:yield Lr.canonicalizeThenHashThenEncode(c,o),recoveryCommitment:yield Lr.canonicalizeThenDoubleHashThenEncode(r,o)};return{type:hh.Create,suffixData:l,delta:c}})}static createDeactivateRequest(e){return Og(this,void 0,void 0,function*(){t.validateDidSuffix(e.didSuffix),Ir.validateEs256kOperationKey(e.recoveryPublicKey,ti.Public);let r=An.hashAlgorithmInMultihashCode,n=yield Lr.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s={didSuffix:e.didSuffix,recoveryKey:e.recoveryPublicKey},i=yield e.signer.sign({alg:"ES256K"},s);return{type:hh.Deactivate,didSuffix:e.didSuffix,revealValue:n,signedData:i}})}static createRecoverRequest(e){return Og(this,void 0,void 0,function*(){t.validateDidSuffix(e.didSuffix),Ir.validateEs256kOperationKey(e.recoveryPublicKey,ti.Public),Ir.validateEs256kOperationKey(e.nextRecoveryPublicKey,ti.Public),Ir.validateEs256kOperationKey(e.nextUpdatePublicKey,ti.Public),t.validateDidDocumentKeys(e.document.publicKeys),t.validateServices(e.document.services);let r=An.hashAlgorithmInMultihashCode,n=yield Lr.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s=[{action:Sc.Replace,document:e.document}],i=yield Lr.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,r),o={patches:s,updateCommitment:i},a=yield Lr.canonicalizeThenHashThenEncode(o,r),u={recoveryCommitment:yield Lr.canonicalizeThenDoubleHashThenEncode(e.nextRecoveryPublicKey,r),recoveryKey:e.recoveryPublicKey,deltaHash:a},l=yield e.signer.sign({alg:"ES256K"},u);return{type:hh.Recover,didSuffix:e.didSuffix,revealValue:n,delta:o,signedData:l}})}static createUpdateRequest(e){return Og(this,void 0,void 0,function*(){if(t.validateDidSuffix(e.didSuffix),Ir.validateEs256kOperationKey(e.updatePublicKey,ti.Public),Ir.validateEs256kOperationKey(e.nextUpdatePublicKey,ti.Public),t.validateServices(e.servicesToAdd),t.validateDidDocumentKeys(e.publicKeysToAdd),e.idsOfServicesToRemove!==void 0)for(let h of e.idsOfServicesToRemove)Ir.validateId(h);if(e.idsOfPublicKeysToRemove!==void 0)for(let h of e.idsOfPublicKeysToRemove)Ir.validateId(h);let r=[],n=e.servicesToAdd;if(n!==void 0&&n.length>0){let h={action:Sc.AddServices,services:n};r.push(h)}let s=e.idsOfServicesToRemove;if(s!==void 0&&s.length>0){let h={action:Sc.RemoveServices,ids:s};r.push(h)}let i=e.publicKeysToAdd;if(i!==void 0&&i.length>0){let h={action:Sc.AddPublicKeys,publicKeys:i};r.push(h)}let o=e.idsOfPublicKeysToRemove;if(o!==void 0&&o.length>0){let h={action:Sc.RemovePublicKeys,ids:o};r.push(h)}let a=An.hashAlgorithmInMultihashCode,c=yield Lr.canonicalizeThenHashThenEncode(e.updatePublicKey,a),u=yield Lr.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,a),l={patches:r,updateCommitment:u},d=yield Lr.canonicalizeThenHashThenEncode(l,a),p={updateKey:e.updatePublicKey,deltaHash:d},f=yield e.signer.sign({alg:"ES256K"},p);return{type:hh.Update,didSuffix:e.didSuffix,revealValue:c,delta:l,signedData:f}})}static validateDidSuffix(e){Lr.validateEncodedHashComputedUsingSupportedHashAlgorithm(e,"didSuffix")}static validateDidDocumentKeys(e){if(e===void 0)return;let r=new Set;for(let n of e){if(Array.isArray(n.publicKeyJwk))throw new Mt(Wt.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(Ir.validateId(n.id),r.has(n.id))throw new Mt(Wt.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${n.id}' already exists.`);r.add(n.id),Ir.validatePublicKeyPurposes(n.purposes)}}static validateServices(e){if(e!==void 0&&e.length!==0){let r=new Set;for(let n of e){if(t.validateService(n),r.has(n.id))throw new Mt(Wt.DidDocumentServiceIdDuplicated,"Service id has to be unique");r.add(n.id)}}}static validateService(e){Ir.validateId(e.id);let r=30;if(e.type.length>r){let n=`Service endpoint type length ${e.type.length} exceeds max allowed length of ${r}.`;throw new Mt(Wt.ServiceTypeTooLong,n)}if(Array.isArray(e.serviceEndpoint)){let n="Service endpoint value cannot be an array.";throw new Mt(Wt.ServiceEndpointCannotBeAnArray,n)}if(typeof e.serviceEndpoint=="string"&&e5.parse(e.serviceEndpoint).error!==void 0)throw new Mt(Wt.ServiceEndpointStringNotValidUri,`Service endpoint string '${e.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(e){let r=ns.canonicalizeAsBytes(e);if(r.length>An.maxCanonicalizedDeltaSizeInBytes){let n=`Delta of ${r.length} bytes exceeded limit of ${An.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new Mt(Wt.DeltaExceedsMaximumSize,n)}}};var t5=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Cd=class t{static createLongFormDid(e){return t5(this,void 0,void 0,function*(){let r=yield Xa.createCreateRequest(e),n=yield t.computeDidUniqueSuffix(r.suffixData),s;An.network===void 0||An.network==="mainnet"?s=`did:ion:${n}`:s=`did:ion:${An.network}:${n}`;let i={suffixData:r.suffixData,delta:r.delta},o=ns.canonicalizeAsBytes(i),a=Mn.encode(o);return`${s}:${a}`})}static computeDidUniqueSuffix(e){return t5(this,void 0,void 0,function*(){let r=ns.canonicalizeAsBytes(e),n=yield Lr.hash(r,An.hashAlgorithmInMultihashCode);return Mn.encode(n)})}};var r5;(function(t){t.Mainnet="mainnet",t.Testnet="test"})(r5||(r5={}));var n5;(function(t){t.Authentication="authentication",t.AssertionMethod="assertionMethod",t.CapabilityInvocation="capabilityInvocation",t.CapabilityDelegation="capabilityDelegation",t.KeyAgreement="keyAgreement"})(n5||(n5={}));var Ya=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Ws;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Ws||(Ws={}));var ere={Ed25519:Ws.Ed25519,ES256K:Ws.secp256k1,ES256:Ws.secp256r1,"P-256":Ws.secp256r1,secp256k1:Ws.secp256k1,secp256r1:Ws.secp256r1},i5="https://ion.tbd.engineering",mh=class t extends Di{static create(){return Ya(this,arguments,void 0,function*({keyManager:e=new Nr,options:r={}}={}){var n,s,i,o,a,c,u;if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(D=>!(D.algorithm in ere)))throw new Error("One or more verification method algorithms are not supported");let l=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(D=>"id"in D).map(D=>D.id);if(l&&l.length!==new Set(l).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(D=>!D.id||!D.type||!D.serviceEndpoint))throw new Error("One or more services are missing required properties");let d={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},p=[];for(let D of(o=r.verificationMethods)!==null&&o!==void 0?o:[d]){let F=yield e.generateKey({algorithm:D.algorithm}),C=yield e.getPublicKey({keyUri:F});p.push({id:D.id,publicKeyJwk:C,purposes:(a=D.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}let f=yield e.generateKey({algorithm:Ws.secp256k1}),h=yield e.getPublicKey({keyUri:f}),y=yield e.generateKey({algorithm:Ws.secp256k1}),g=yield e.getPublicKey({keyUri:y}),A=yield Ac.computeLongFormDidUri({recoveryKey:h,updateKey:g,services:(c=r.services)!==null&&c!==void 0?c:[],verificationMethods:p}),{didDocument:x,didResolutionMetadata:b}=yield t.resolve(A,{gatewayUri:r.gatewayUri});if(x===null)throw new Error(`Unable to resolve DID during creation: ${b?.error}`);let w=new jn({uri:A,document:x,metadata:{published:!1,canonicalId:A.split(":",3).join(":"),recoveryKey:h,updateKey:g},keyManager:e});if(!((u=r.publish)!==null&&u!==void 0)||u){let D=yield t.publish({did:w,gatewayUri:r.gatewayUri});w.metadata=D.didDocumentMetadata}return w})}static getSigningMethod(e){return Ya(this,arguments,void 0,function*({didDocument:r,methodId:n}){var s;let i=rt.parse(r.id);if(i&&i.method!==this.methodName)throw new Ee(ge.MethodNotSupported,`Method not supported: ${i.method}`);let o=(s=r.verificationMethod)===null||s===void 0?void 0:s.find(a=>{var c;return a.id===(n??((c=r.assertionMethod)===null||c===void 0?void 0:c[0]))});if(!(o&&o.publicKeyJwk))throw new Ee(ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return Ya(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Nr}){let s=rt.parse(r.uri);if(s?.method!==t.methodName)throw new Ee(ge.MethodNotSupported,"Method not supported");return yield jn.import({portableDid:r,keyManager:n})})}static publish(e){return Ya(this,arguments,void 0,function*({did:r,gatewayUri:n=i5}){var s,i,o;let a=(i=(s=r.document.verificationMethod)===null||s===void 0?void 0:s.map(l=>({id:l.id,publicKeyJwk:l.publicKeyJwk,purposes:QE({didDocument:r.document,methodId:l.id})})))!==null&&i!==void 0?i:[],c=yield Ac.createIonDocument({services:(o=r.document.service)!==null&&o!==void 0?o:[],verificationMethods:a}),u=yield Ac.constructCreateRequest({ionDocument:c,recoveryKey:r.metadata.recoveryKey,updateKey:r.metadata.updateKey});try{let l=Ac.appendPathToUrl({baseUrl:n,path:"/operations"}),d=yield fetch(l,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:d.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:ge.InternalError,errorMessage:`Failed to publish DID document for: ${r.uri}`}}}})}static resolve(e){return Ya(this,arguments,void 0,function*(r,n={}){var s,i;let o=rt.parse(r);if(!o)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"invalidDid"}});if(o.method!==t.methodName)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"methodNotSupported"}});let a=(s=n?.gatewayUri)!==null&&s!==void 0?s:i5;try{let c=Ac.appendPathToUrl({baseUrl:a,path:`/identifiers/${r}`}),u=yield fetch(c);if(!u.ok)throw new Ee(ge.NotFound,`Unable to find DID document for: ${r}`);let{didDocument:l,didDocumentMetadata:d}=yield u.json();return Object.assign(Object.assign(Object.assign({},sr),l&&{didDocument:l}),{didDocumentMetadata:Object.assign({published:(i=d?.method)===null||i===void 0?void 0:i.published},d)})}catch(c){if(!(c instanceof Ee))throw new Error(c);return Object.assign(Object.assign({},sr),{didResolutionMetadata:Object.assign({error:c.code},c.message&&{errorMessage:c.message})})}})}};mh.methodName="ion";var Ac=class t{static appendPathToUrl({baseUrl:e,path:r}){let n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri(e){return Ya(this,arguments,void 0,function*({recoveryKey:r,updateKey:n,services:s,verificationMethods:i}){let o=yield t.createIonDocument({services:s,verificationMethods:i}),a=t.normalizeJwk(r),c=t.normalizeJwk(n);return yield Cd.createLongFormDid({document:o,recoveryKey:a,updateKey:c})})}static constructCreateRequest(e){return Ya(this,arguments,void 0,function*({ionDocument:r,recoveryKey:n,updateKey:s}){return yield Xa.createCreateRequest({document:r,recoveryKey:t.normalizeJwk(n),updateKey:t.normalizeJwk(s)})})}static createIonDocument(e){return Ya(this,arguments,void 0,function*({services:r,verificationMethods:n}){var s,i;let o=[];for(let u of n){let l=(i=(s=u.id)!==null&&s!==void 0?s:u.publicKeyJwk.kid)!==null&&i!==void 0?i:yield ze({jwk:u.publicKeyJwk});l=`${l.split("#").pop()}`;let d={id:l,publicKeyJwk:t.normalizeJwk(u.publicKeyJwk),purposes:u.purposes,type:"JsonWebKey2020"};o.push(d)}let a=r.map(u=>Object.assign(Object.assign({},u),{id:`${u.id.split("#").pop()}`}));return{publicKeys:o,services:a}})}static normalizeJwk(e){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}};var Fg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},yh=class t extends Di{static create(){return Fg(this,arguments,void 0,function*({keyManager:e=new Nr,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",c=yield e.generateKey({algorithm:a}),u=yield e.getPublicKey({keyUri:c}),l=le.object(u).toBase64Url(),d=`did:${t.methodName}:${l}`,f=(yield t.resolve(d)).didDocument;return new jn({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod(e){return Fg(this,arguments,void 0,function*({didDocument:r}){var n;let s=rt.parse(r.id);if(s&&s.method!==this.methodName)throw new Ee(ge.MethodNotSupported,`Method not supported: ${s.method}`);let[i]=(n=r.verificationMethod)!==null&&n!==void 0?n:[];if(!(i&&i.publicKeyJwk))throw new Ee(ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import(e){return Fg(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Nr}){let s=rt.parse(r.uri);if(s?.method!==t.methodName)throw new Ee(ge.MethodNotSupported,"Method not supported");let i=yield jn.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new Ee(ge.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(e,r){return Fg(this,void 0,void 0,function*(){let n=rt.parse(e),s;try{s=le.base64Url(n.id).toObject()}catch{}if(!n||!s)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==t.methodName)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"methodNotSupported"}});let i={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${i.id}#0`;switch(i.verificationMethod=[{id:o,type:"JsonWebKey",controller:i.id,publicKeyJwk:s}],i.authentication=[o],i.assertionMethod=[o],i.capabilityInvocation=[o],i.capabilityDelegation=[o],i.keyAgreement=[o],s.use){case"sig":{delete i.keyAgreement;break}case"enc":{delete i.authentication,delete i.assertionMethod,delete i.capabilityInvocation,delete i.capabilityDelegation;break}}return Object.assign(Object.assign({},sr),{didDocument:i})})}};yh.methodName="jwk";var is=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Wo;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Wo||(Wo={}));var TS={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},tre={Ed25519:Wo.Ed25519,ES256K:Wo.secp256k1,ES256:Wo.secp256r1,"P-256":Wo.secp256r1,secp256k1:Wo.secp256k1,secp256r1:Wo.secp256r1,X25519:Wo.X25519},gh=class t extends Di{static create(){return is(this,arguments,void 0,function*({keyManager:e=new Nr,options:r={}}={}){var n,s,i,o;if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",c=yield e.generateKey({algorithm:a}),u=yield e.getPublicKey({keyUri:c}),l=yield qn.publicKeyToMultibaseId({publicKey:u}),d=`did:${t.methodName}:${l}`,f=(yield t.resolve(d,r)).didDocument;return new jn({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod(e){return is(this,arguments,void 0,function*({didDocument:r}){var n;let s=rt.parse(r.id);if(s&&s.method!==this.methodName)throw new Ee(ge.MethodNotSupported,`Method not supported: ${s.method}`);let[i]=r.assertionMethod||[],o=(n=r.verificationMethod)===null||n===void 0?void 0:n.find(a=>a.id===i);if(!(o&&o.publicKeyJwk))throw new Ee(ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(e){return is(this,arguments,void 0,function*({portableDid:r,keyManager:n=new Nr}){let s=rt.parse(r.uri);if(s?.method!==t.methodName)throw new Ee(ge.MethodNotSupported,"Method not supported");let i=yield jn.import({portableDid:r,keyManager:n});if(i.document.verificationMethod.length!==1)throw new Ee(ge.InvalidDidDocument,"DID document must contain exactly one verification method");return i})}static resolve(e,r){return is(this,void 0,void 0,function*(){try{let n=yield t.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},sr),{didDocument:n})}catch(n){if(!(n instanceof Ee))throw new Error(n);return Object.assign(Object.assign({},sr),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument(e){return is(this,arguments,void 0,function*({didUri:r,options:n={}}){let{defaultContext:s="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:i=!1,enableExperimentalPublicKeyTypes:o=!1,publicKeyFormat:a="JsonWebKey2020"}=n,c={id:""},u=rt.parse(r);if(!u)throw new Ee(ge.InvalidDid,`Invalid DID URI: ${r}`);let l=u.id;if(u.method!==t.methodName)throw new Ee(ge.MethodNotSupported,`Method not supported: ${u.method}`);if(!t.validateIdentifier(u))throw new Ee(ge.InvalidDid,`Invalid DID URI: ${r}`);let d=yield t.createSignatureMethod({didUri:r,multibaseValue:l,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:a}});if(c.id=u.uri,c.verificationMethod=[d],c.authentication=[d.id],c.assertionMethod=[d.id],c.capabilityInvocation=[d.id],c.capabilityDelegation=[d.id],i===!0){let h=a==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",y=yield this.createEncryptionMethod({didUri:r,multibaseValue:l,options:{enableExperimentalPublicKeyTypes:o,publicKeyFormat:h}});c.verificationMethod.push(y),c.keyAgreement=[y.id]}let p=[s];return YE({didDocument:c}).forEach(h=>{let y=TS[h];p.push(y)}),c["@context"]=p,c})}static createEncryptionMethod(e){return is(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){let{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:c,multicodecCode:u}=yield t.deriveEncryptionKey({multibaseValue:n}),l=c.byteLength,d=qn.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(l!==d)throw new Ee(ge.InvalidPublicKeyLength,`Expected ${l} bytes. Actual: ${d}`);let p=rg({keyBytes:c,multicodecCode:u});a.id=`${r}#${p}`;try{new URL(a.id)}catch{throw new Ee(ge.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in TS))throw new Ee(ge.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(o))throw new Ee(ge.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="X25519KeyAgreementKey2020"&&(a.publicKeyMultibase=p),o==="JsonWebKey2020"){let{crv:h}=yield qn.multicodecToJwk({code:u});a.publicKeyJwk=yield qn.keyConverter(h).bytesToPublicKey({publicKeyBytes:c})}return a})}static createSignatureMethod(e){return is(this,arguments,void 0,function*({didUri:r,multibaseValue:n,options:s}){let{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}=s,a={id:"",type:"",controller:""},{keyBytes:c,multicodecCode:u,multicodecName:l}=ng({multibaseKeyId:n}),d=c.byteLength,p=qn.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(d!==p)throw new Ee(ge.InvalidPublicKeyLength,`Expected ${d} bytes. Actual: ${p}`);let f=!1;switch(l){case"secp256k1-pub":f=yield jr.validatePublicKey({publicKeyBytes:c});break;case"ed25519-pub":f=yield Fr.validatePublicKey({publicKeyBytes:c});break;case"x25519-pub":f=!0;break}if(!f)throw new Ee(ge.InvalidPublicKey,"Invalid public key detected.");a.id=`${r}#${n}`;try{new URL(a.id)}catch{throw new Ee(ge.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(o in TS))throw new Ee(ge.UnsupportedPublicKeyType,`Unsupported format: ${o}`);if(i===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(o))throw new Ee(ge.InvalidPublicKeyType,`Specified '${o}' without setting enableExperimentalPublicKeyTypes to true.`);if(a.type=o,a.controller=r,o==="Ed25519VerificationKey2020"&&(a.publicKeyMultibase=n),o==="JsonWebKey2020"){let{crv:y}=yield qn.multicodecToJwk({code:u});a.publicKeyJwk=yield qn.keyConverter(y).bytesToPublicKey({publicKeyBytes:c})}return a})}static deriveEncryptionKey(e){return is(this,arguments,void 0,function*({multibaseValue:r}){let n={keyBytes:new Uint8Array,multicodecCode:0},{keyBytes:s,multicodecCode:i}=ng({multibaseKeyId:r});if(i===237){let o=yield qn.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:s}),a=yield Fr.convertPublicKeyToX25519({publicKey:o});n={keyBytes:yield qn.keyConverter("Ed25519").publicKeyToBytes({publicKey:a}),multicodecCode:236}}return n})}static validateIdentifier(e){let{method:r,id:n}=e,[s]=e.uri.split(":",1);return s==="did"&&r==="key"&&Number("1")>0&&Fl(n)==="String"&&n.startsWith("z")}};gh.methodName="key";var qn=class t{static jwkToMulticodec(e){return is(this,arguments,void 0,function*({jwk:r}){let n=[];r.crv&&(n.push(r.crv),r.d?n.push("private"):n.push("public"));let s=n.join(":"),i=t.JWK_TO_MULTICODEC[s];if(i===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${s}'`);return{code:an.getCodeFromName({name:i}),name:i}})}static keyCompressor(e){let n={"P-256":Xr.compressPublicKey,secp256k1:jr.compressPublicKey}[e];if(!n)throw new Ee(ge.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){let n={Ed25519:Fr,"P-256":Xr,secp256k1:jr,X25519:gd}[e];if(!n)throw new Ee(ge.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk(e){return is(this,arguments,void 0,function*({code:r,name:n}){if(!(n?!r:r))throw new Error("Either 'name' or 'code' must be defined, but not both.");n=n===void 0?an.getNameFromCode({code:r}):n;let s=n,i=t.MULTICODEC_TO_JWK[s];if(i===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},i)})}static publicKeyToMultibaseId(e){return is(this,arguments,void 0,function*({publicKey:r}){var n;if(!(r?.crv&&r.crv in tre))throw new Ee(ge.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(n=r?.crv)!==null&&n!==void 0?n:"undefined"}`);let s=yield t.keyConverter(r.crv).publicKeyToBytes({publicKey:r});/^(secp256k1|P-256|P-384|P-521)$/.test(r.crv)&&(s=yield t.keyCompressor(r.crv)({publicKeyBytes:s}));let{name:i}=yield t.jwkToMulticodec({jwk:r});return rg({keyBytes:s,multicodecName:i})})}};qn.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};qn.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};qn.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var rre=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},vh=class t extends Di{static resolve(e,r){return rre(this,void 0,void 0,function*(){let n=rt.parse(e);if(!n)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==t.methodName)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"methodNotSupported"}});let s=`https://${n.id.replace(/:/g,"/")}`;s=decodeURIComponent(s);let i=n.id.includes(":")?`${s}/did.json`:`${s}/.well-known/did.json`;try{let o=yield fetch(i);if(!o.ok)throw new Error("HTTP error status code returned");let a=yield o.json();return Object.assign(Object.assign({},sr),{didDocument:a})}catch{return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:"notFound"}})}})}};vh.methodName="web";var ure=xs(o5(),1),cre=xs(lw(),1);var a5={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};var u5=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Ig=class{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map,this.cache=e||a5;for(let n of r)this.didResolvers.set(n.methodName,n)}resolve(e,r){return u5(this,void 0,void 0,function*(){let n=rt.parse(e);if(!n)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:ge.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});let s=this.didResolvers.get(n.method);if(!s)return Object.assign(Object.assign({},sr),{didResolutionMetadata:{error:ge.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});let i=yield this.cache.get(n.uri);if(i)return i;{let o=yield s.resolve(n.uri,r);return o.didResolutionMetadata.error||(yield this.cache.set(n.uri,o)),o}})}dereference(e,r){return u5(this,void 0,void 0,function*(){let n=rt.parse(e);if(!n)return{dereferencingMetadata:{error:ge.InvalidDidUrl},contentStream:null,contentMetadata:{}};let{didDocument:s,didResolutionMetadata:i,didDocumentMetadata:o}=yield this.resolve(n.uri);if(!s)return{dereferencingMetadata:{error:i.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:s,contentMetadata:o};let{service:a=[],verificationMethod:c=[]}=s,u=new Set([e,n.fragment,`#${n.fragment}`]),l;for(let d of c)if(u.has(d.id)){l=d;break}for(let d of a)if(u.has(d.id)){l=d;break}return l?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:l,contentMetadata:i}:{dereferencingMetadata:{error:ge.NotFound},contentStream:null,contentMetadata:{}}})}};var lre=new Nr,bh=class bh{static async sign(e){let{signerDid:r,payload:n}=e,s=await r.getSigner(),i=s.keyId;i.charAt(0)==="#"&&(i=`${r.uri}${i}`);let o={alg:s.algorithm,kid:i,...e.header},a=le.object(o).toBase64Url(),c=le.object(n).toBase64Url(),u=`${a}.${c}`,l=le.string(u).toUint8Array(),d=await s.sign({data:l}),p=le.uint8Array(d).toBase64Url();return`${u}.${p}`}static async verify(e){let{decoded:r,encoded:n}=bh.parse({jwt:e.jwt});if(r.payload.exp&&Math.floor(Date.now()/1e3)>r.payload.exp)throw new Error("Verification failed: JWT is expired");let s=await bh.didResolver.dereference(r.header.kid);if(s.dereferencingMetadata.error)throw new Error(`Failed to resolve ${r.header.kid}`);let i=s.contentStream;if(!i||!ig.isDidVerificationMethod(i))throw new Error("Verification failed: Expected kid in JWT header to dereference a DID Document Verification Method");let o=i.publicKeyJwk;if(!o)throw new Error("Verification failed: Expected kid in JWT header to dereference to a DID Document Verification Method with publicKeyJwk");if(o.alg&&o.alg!==r.header.alg)throw new Error("Verification failed: Expected alg in JWT header to match DID Document Verification Method alg");let a=`${n.header}.${n.payload}`,c=le.string(a).toUint8Array(),u=le.base64Url(n.signature).toUint8Array();if(!await lre.verify({key:o,signature:u,data:c}))throw new Error("Signature verification failed: Integrity mismatch");return r}static parse(e){let r=e.jwt.split(".");if(r.length!==3)throw new Error(`Verification failed: Malformed JWT. expected 3 parts. got ${r.length}`);let[n,s,i]=r,o,a;try{o=le.base64Url(n).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT header")}if(!o.alg||!o.kid)throw new Error("Verification failed: Expected JWT header to contain alg and kid");try{a=le.base64Url(s).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT payload")}return{decoded:{header:o,payload:a},encoded:{header:n,payload:s,signature:i}}}};bh.didResolver=new Ig({didResolvers:[Ec,mh,gh,yh,vh]});var ss=bh;var ul=xs(vV(),1),S_=class{static selectCredentials({vcJwts:e,presentationDefinition:r}){this.resetPex();let n=this.pex.selectFrom(r,e);return n.errors?.length!==0?[]:Array.from(new Set(n.verifiableCredential??[]))}static satisfiesPresentationDefinition({vcJwts:e,presentationDefinition:r}){this.resetPex();let n=this.pex.evaluateCredentials(r,e);if(n.warnings?.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(n.warnings)),n.areRequiredCredentialsPresent.toString()!=="info"||n.errors?.length){let s="Failed to create Verifiable Presentation JWT due to: ";throw n.areRequiredCredentialsPresent&&(s+="Required Credentials Not Present: "+JSON.stringify(n.areRequiredCredentialsPresent)),n.errors?.length&&(s+="Errors: "+JSON.stringify(n.errors)),new Error(s)}}static createPresentationFromCredentials({vcJwts:e,presentationDefinition:r}){this.resetPex();let n=ul.PEX.validateDefinition(r);bV(n);let s=this.pex.evaluateCredentials(r,e);if(s.warnings?.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(s.warnings)),s.areRequiredCredentialsPresent.toString()!=="info"||s.errors?.length){let a="Failed to create Verifiable Presentation JWT due to: ";throw s.areRequiredCredentialsPresent&&(a+="Required Credentials Not Present: "+JSON.stringify(s.areRequiredCredentialsPresent)),s.errors?.length&&(a+="Errors: "+JSON.stringify(s.errors)),new Error(a)}let i=this.pex.presentationFrom(r,e),o=ul.PEX.validateSubmission(i.presentationSubmission);return bV(o),i}static validateDefinition({presentationDefinition:e}){return ul.PEX.validateDefinition(e)}static validateSubmission({presentationSubmission:e}){return ul.PEX.validateSubmission(e)}static evaluatePresentation({presentationDefinition:e,presentation:r}){return this.resetPex(),this.pex.evaluatePresentation(e,r)}static resetPex(){this.pex=new ul.PEX}};S_.pex=new ul.PEX;function bV(t){let e="Failed to pass validation check due to: ";if(Array.isArray(t)){if(!t.every(r=>r.status==="info"))throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}else if(t.status!=="info")throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}function Kf(t){let e=t.length;for(;--e>=0;)t[e]=0}var kve=0,iK=1,Rve=2,$ve=3,jve=258,ZP=29,ly=256,ry=ly+1+ZP,Lf=30,XP=19,sK=2*ry+1,cl=15,CP=16,Nve=7,YP=256,oK=16,aK=17,uK=18,LP=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),O_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Mve=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),cK=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qve=512,ga=new Array((ry+2)*2);Kf(ga);var Qm=new Array(Lf*2);Kf(Qm);var ny=new Array(qve);Kf(ny);var iy=new Array(jve-$ve+1);Kf(iy);var QP=new Array(ZP);Kf(QP);var F_=new Array(Lf);Kf(F_);function PP(t,e,r,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}var lK,dK,fK;function OP(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}var pK=t=>t<256?ny[t]:ny[256+(t>>>7)],sy=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},Hn=(t,e,r)=>{t.bi_valid>CP-r?(t.bi_buf|=e<<t.bi_valid&65535,sy(t,t.bi_buf),t.bi_buf=e>>CP-t.bi_valid,t.bi_valid+=r-CP):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},fo=(t,e,r)=>{Hn(t,r[e*2],r[e*2+1])},hK=(t,e)=>{let r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1},Lve=t=>{t.bi_valid===16?(sy(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},Uve=(t,e)=>{let r=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,u,l,d,p,f,h,y=0;for(p=0;p<=cl;p++)t.bl_count[p]=0;for(r[t.heap[t.heap_max]*2+1]=0,u=t.heap_max+1;u<sK;u++)l=t.heap[u],p=r[r[l*2+1]*2+1]+1,p>c&&(p=c,y++),r[l*2+1]=p,!(l>n)&&(t.bl_count[p]++,f=0,l>=a&&(f=o[l-a]),h=r[l*2],t.opt_len+=h*(p+f),i&&(t.static_len+=h*(s[l*2+1]+f)));if(y!==0){do{for(p=c-1;t.bl_count[p]===0;)p--;t.bl_count[p]--,t.bl_count[p+1]+=2,t.bl_count[c]--,y-=2}while(y>0);for(p=c;p!==0;p--)for(l=t.bl_count[p];l!==0;)d=t.heap[--u],!(d>n)&&(r[d*2+1]!==p&&(t.opt_len+=(p-r[d*2+1])*r[d*2],r[d*2+1]=p),l--)}},mK=(t,e,r)=>{let n=new Array(cl+1),s=0,i,o;for(i=1;i<=cl;i++)s=s+r[i-1]<<1,n[i]=s;for(o=0;o<=e;o++){let a=t[o*2+1];a!==0&&(t[o*2]=hK(n[a]++,a))}},Vve=()=>{let t,e,r,n,s,i=new Array(cl+1);for(r=0,n=0;n<ZP-1;n++)for(QP[n]=r,t=0;t<1<<LP[n];t++)iy[r++]=n;for(iy[r-1]=n,s=0,n=0;n<16;n++)for(F_[n]=s,t=0;t<1<<O_[n];t++)ny[s++]=n;for(s>>=7;n<Lf;n++)for(F_[n]=s<<7,t=0;t<1<<O_[n]-7;t++)ny[256+s++]=n;for(e=0;e<=cl;e++)i[e]=0;for(t=0;t<=143;)ga[t*2+1]=8,t++,i[8]++;for(;t<=255;)ga[t*2+1]=9,t++,i[9]++;for(;t<=279;)ga[t*2+1]=7,t++,i[7]++;for(;t<=287;)ga[t*2+1]=8,t++,i[8]++;for(mK(ga,ry+1,i),t=0;t<Lf;t++)Qm[t*2+1]=5,Qm[t*2]=hK(t,5);lK=new PP(ga,LP,ly+1,ry,cl),dK=new PP(Qm,O_,0,Lf,cl),fK=new PP(new Array(0),Mve,0,XP,Nve)},yK=t=>{let e;for(e=0;e<ry;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Lf;e++)t.dyn_dtree[e*2]=0;for(e=0;e<XP;e++)t.bl_tree[e*2]=0;t.dyn_ltree[YP*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},gK=t=>{t.bi_valid>8?sy(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},_V=(t,e,r,n)=>{let s=e*2,i=r*2;return t[s]<t[i]||t[s]===t[i]&&n[e]<=n[r]},FP=(t,e,r)=>{let n=t.heap[r],s=r<<1;for(;s<=t.heap_len&&(s<t.heap_len&&_V(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!_V(e,n,t.heap[s],t.depth));)t.heap[r]=t.heap[s],r=s,s<<=1;t.heap[r]=n},wV=(t,e,r)=>{let n,s,i=0,o,a;if(t.sym_next!==0)do n=t.pending_buf[t.sym_buf+i++]&255,n+=(t.pending_buf[t.sym_buf+i++]&255)<<8,s=t.pending_buf[t.sym_buf+i++],n===0?fo(t,s,e):(o=iy[s],fo(t,o+ly+1,e),a=LP[o],a!==0&&(s-=QP[o],Hn(t,s,a)),n--,o=pK(n),fo(t,o,r),a=O_[o],a!==0&&(n-=F_[o],Hn(t,n,a)));while(i<t.sym_next);fo(t,YP,e)},UP=(t,e)=>{let r=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,i=e.stat_desc.elems,o,a,c=-1,u;for(t.heap_len=0,t.heap_max=sK,o=0;o<i;o++)r[o*2]!==0?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):r[o*2+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=c<2?++c:0,r[u*2]=1,t.depth[u]=0,t.opt_len--,s&&(t.static_len-=n[u*2+1]);for(e.max_code=c,o=t.heap_len>>1;o>=1;o--)FP(t,r,o);u=i;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],FP(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,r[u*2]=r[o*2]+r[a*2],t.depth[u]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,r[o*2+1]=r[a*2+1]=u,t.heap[1]=u++,FP(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],Uve(t,e),mK(r,c,t.bl_count)},EV=(t,e,r)=>{let n,s=-1,i,o=e[0*2+1],a=0,c=7,u=4;for(o===0&&(c=138,u=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)i=o,o=e[(n+1)*2+1],!(++a<c&&i===o)&&(a<u?t.bl_tree[i*2]+=a:i!==0?(i!==s&&t.bl_tree[i*2]++,t.bl_tree[oK*2]++):a<=10?t.bl_tree[aK*2]++:t.bl_tree[uK*2]++,a=0,s=i,o===0?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))},SV=(t,e,r)=>{let n,s=-1,i,o=e[0*2+1],a=0,c=7,u=4;for(o===0&&(c=138,u=3),n=0;n<=r;n++)if(i=o,o=e[(n+1)*2+1],!(++a<c&&i===o)){if(a<u)do fo(t,i,t.bl_tree);while(--a!==0);else i!==0?(i!==s&&(fo(t,i,t.bl_tree),a--),fo(t,oK,t.bl_tree),Hn(t,a-3,2)):a<=10?(fo(t,aK,t.bl_tree),Hn(t,a-3,3)):(fo(t,uK,t.bl_tree),Hn(t,a-11,7));a=0,s=i,o===0?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}},Kve=t=>{let e;for(EV(t,t.dyn_ltree,t.l_desc.max_code),EV(t,t.dyn_dtree,t.d_desc.max_code),UP(t,t.bl_desc),e=XP-1;e>=3&&t.bl_tree[cK[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},zve=(t,e,r,n)=>{let s;for(Hn(t,e-257,5),Hn(t,r-1,5),Hn(t,n-4,4),s=0;s<n;s++)Hn(t,t.bl_tree[cK[s]*2+1],3);SV(t,t.dyn_ltree,e-1),SV(t,t.dyn_dtree,r-1)},Hve=t=>{let e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return 0;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return 1;for(r=32;r<ly;r++)if(t.dyn_ltree[r*2]!==0)return 1;return 0},AV=!1,Wve=t=>{AV||(Vve(),AV=!0),t.l_desc=new OP(t.dyn_ltree,lK),t.d_desc=new OP(t.dyn_dtree,dK),t.bl_desc=new OP(t.bl_tree,fK),t.bi_buf=0,t.bi_valid=0,yK(t)},vK=(t,e,r,n)=>{Hn(t,(kve<<1)+(n?1:0),3),gK(t),sy(t,r),sy(t,~r),r&&t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r},Jve=t=>{Hn(t,iK<<1,3),fo(t,YP,ga),Lve(t)},Gve=(t,e,r,n)=>{let s,i,o=0;t.level>0?(t.strm.data_type===2&&(t.strm.data_type=Hve(t)),UP(t,t.l_desc),UP(t,t.d_desc),o=Kve(t),s=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=s&&(s=i)):s=i=r+5,r+4<=s&&e!==-1?vK(t,e,r,n):t.strategy===4||i===s?(Hn(t,(iK<<1)+(n?1:0),3),wV(t,ga,Qm)):(Hn(t,(Rve<<1)+(n?1:0),3),zve(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),wV(t,t.dyn_ltree,t.dyn_dtree)),yK(t),n&&gK(t)},Zve=(t,e,r)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=r,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(iy[r]+ly+1)*2]++,t.dyn_dtree[pK(e)*2]++),t.sym_next===t.sym_end),Xve=Wve,Yve=vK,Qve=Gve,ebe=Zve,tbe=Jve,rbe={_tr_init:Xve,_tr_stored_block:Yve,_tr_flush_block:Qve,_tr_tally:ebe,_tr_align:tbe},nbe=(t,e,r,n)=>{let s=t&65535|0,i=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do s=s+e[n++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0},oy=nbe,ibe=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},sbe=new Uint32Array(ibe()),obe=(t,e,r,n)=>{let s=sbe,i=n+r;t^=-1;for(let o=n;o<i;o++)t=t>>>8^s[(t^e[o])&255];return t^-1},Hr=obe,fl={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ml={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:abe,_tr_stored_block:VP,_tr_flush_block:ube,_tr_tally:Ou,_tr_align:cbe}=rbe,{Z_NO_FLUSH:Fu,Z_PARTIAL_FLUSH:lbe,Z_FULL_FLUSH:dbe,Z_FINISH:qi,Z_BLOCK:DV,Z_OK:sn,Z_STREAM_END:xV,Z_STREAM_ERROR:po,Z_DATA_ERROR:fbe,Z_BUF_ERROR:TP,Z_DEFAULT_COMPRESSION:pbe,Z_FILTERED:hbe,Z_HUFFMAN_ONLY:A_,Z_RLE:mbe,Z_FIXED:ybe,Z_DEFAULT_STRATEGY:gbe,Z_UNKNOWN:vbe,Z_DEFLATED:B_}=ml,bbe=9,_be=15,wbe=8,Ebe=29,Sbe=256,KP=Sbe+1+Ebe,Abe=30,Dbe=19,xbe=2*KP+1,Cbe=15,gt=3,Pu=258,ho=Pu+gt+1,Pbe=32,Uf=42,eO=57,zP=69,HP=73,WP=91,JP=103,ll=113,Xm=666,Pn=1,zf=2,pl=3,Hf=4,Obe=3,dl=(t,e)=>(t.msg=fl[e],e),CV=t=>t*2-(t>4?9:0),Cu=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Fbe=t=>{let e,r,n,s=t.w_size;e=t.hash_size,n=e;do r=t.head[--n],t.head[n]=r>=s?r-s:0;while(--e);e=s,n=e;do r=t.prev[--n],t.prev[n]=r>=s?r-s:0;while(--e)},Tbe=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask,Tu=Tbe,ai=t=>{let e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))},ui=(t,e)=>{ube(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ai(t.strm)},It=(t,e)=>{t.pending_buf[t.pending++]=e},Zm=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},GP=(t,e,r,n)=>{let s=t.avail_in;return s>n&&(s=n),s===0?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),r),t.state.wrap===1?t.adler=oy(t.adler,e,s,r):t.state.wrap===2&&(t.adler=Hr(t.adler,e,s,r)),t.next_in+=s,t.total_in+=s,s)},bK=(t,e)=>{let r=t.max_chain_length,n=t.strstart,s,i,o=t.prev_length,a=t.nice_match,c=t.strstart>t.w_size-ho?t.strstart-(t.w_size-ho):0,u=t.window,l=t.w_mask,d=t.prev,p=t.strstart+Pu,f=u[n+o-1],h=u[n+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(s=e,!(u[s+o]!==h||u[s+o-1]!==f||u[s]!==u[n]||u[++s]!==u[n+1])){n+=2,s++;do;while(u[++n]===u[++s]&&u[++n]===u[++s]&&u[++n]===u[++s]&&u[++n]===u[++s]&&u[++n]===u[++s]&&u[++n]===u[++s]&&u[++n]===u[++s]&&u[++n]===u[++s]&&n<p);if(i=Pu-(p-n),n=p-Pu,i>o){if(t.match_start=e,o=i,i>=a)break;f=u[n+o-1],h=u[n+o]}}while((e=d[e&l])>c&&--r!==0);return o<=t.lookahead?o:t.lookahead},Vf=t=>{let e=t.w_size,r,n,s;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-ho)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Fbe(t),n+=e),t.strm.avail_in===0)break;if(r=GP(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=r,t.lookahead+t.insert>=gt)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=Tu(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=Tu(t,t.ins_h,t.window[s+gt-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<gt)););}while(t.lookahead<ho&&t.strm.avail_in!==0)},_K=(t,e)=>{let r=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,n,s,i,o=0,a=t.strm.avail_in;do{if(n=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i||(i=t.strm.avail_out-i,s=t.strstart-t.block_start,n>s+t.strm.avail_in&&(n=s+t.strm.avail_in),n>i&&(n=i),n<r&&(n===0&&e!==qi||e===Fu||n!==s+t.strm.avail_in)))break;o=e===qi&&n===s+t.strm.avail_in?1:0,VP(t,0,0,o),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,ai(t.strm),s&&(s>n&&(s=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+s),t.strm.next_out),t.strm.next_out+=s,t.strm.avail_out-=s,t.strm.total_out+=s,t.block_start+=s,n-=s),n&&(GP(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(o===0);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?Hf:e!==Fu&&e!==qi&&t.strm.avail_in===0&&t.strstart===t.block_start?zf:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(GP(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,r=i>t.w_size?t.w_size:i,s=t.strstart-t.block_start,(s>=r||(s||e===qi)&&e!==Fu&&t.strm.avail_in===0&&s<=i)&&(n=s>i?i:s,o=e===qi&&t.strm.avail_in===0&&n===s?1:0,VP(t,t.block_start,n,o),t.block_start+=n,ai(t.strm)),o?pl:Pn)},IP=(t,e)=>{let r,n;for(;;){if(t.lookahead<ho){if(Vf(t),t.lookahead<ho&&e===Fu)return Pn;if(t.lookahead===0)break}if(r=0,t.lookahead>=gt&&(t.ins_h=Tu(t,t.ins_h,t.window[t.strstart+gt-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-ho&&(t.match_length=bK(t,r)),t.match_length>=gt)if(n=Ou(t,t.strstart-t.match_start,t.match_length-gt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=gt){t.match_length--;do t.strstart++,t.ins_h=Tu(t,t.ins_h,t.window[t.strstart+gt-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Tu(t,t.ins_h,t.window[t.strstart+1]);else n=Ou(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(ui(t,!1),t.strm.avail_out===0))return Pn}return t.insert=t.strstart<gt-1?t.strstart:gt-1,e===qi?(ui(t,!0),t.strm.avail_out===0?pl:Hf):t.sym_next&&(ui(t,!1),t.strm.avail_out===0)?Pn:zf},Mf=(t,e)=>{let r,n,s;for(;;){if(t.lookahead<ho){if(Vf(t),t.lookahead<ho&&e===Fu)return Pn;if(t.lookahead===0)break}if(r=0,t.lookahead>=gt&&(t.ins_h=Tu(t,t.ins_h,t.window[t.strstart+gt-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=gt-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-ho&&(t.match_length=bK(t,r),t.match_length<=5&&(t.strategy===hbe||t.match_length===gt&&t.strstart-t.match_start>4096)&&(t.match_length=gt-1)),t.prev_length>=gt&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-gt,n=Ou(t,t.strstart-1-t.prev_match,t.prev_length-gt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=Tu(t,t.ins_h,t.window[t.strstart+gt-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=gt-1,t.strstart++,n&&(ui(t,!1),t.strm.avail_out===0))return Pn}else if(t.match_available){if(n=Ou(t,0,t.window[t.strstart-1]),n&&ui(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Pn}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Ou(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<gt-1?t.strstart:gt-1,e===qi?(ui(t,!0),t.strm.avail_out===0?pl:Hf):t.sym_next&&(ui(t,!1),t.strm.avail_out===0)?Pn:zf},Ibe=(t,e)=>{let r,n,s,i,o=t.window;for(;;){if(t.lookahead<=Pu){if(Vf(t),t.lookahead<=Pu&&e===Fu)return Pn;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=gt&&t.strstart>0&&(s=t.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){i=t.strstart+Pu;do;while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<i);t.match_length=Pu-(i-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=gt?(r=Ou(t,1,t.match_length-gt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Ou(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(ui(t,!1),t.strm.avail_out===0))return Pn}return t.insert=0,e===qi?(ui(t,!0),t.strm.avail_out===0?pl:Hf):t.sym_next&&(ui(t,!1),t.strm.avail_out===0)?Pn:zf},Bbe=(t,e)=>{let r;for(;;){if(t.lookahead===0&&(Vf(t),t.lookahead===0)){if(e===Fu)return Pn;break}if(t.match_length=0,r=Ou(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(ui(t,!1),t.strm.avail_out===0))return Pn}return t.insert=0,e===qi?(ui(t,!0),t.strm.avail_out===0?pl:Hf):t.sym_next&&(ui(t,!1),t.strm.avail_out===0)?Pn:zf};function lo(t,e,r,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=s}var Ym=[new lo(0,0,0,0,_K),new lo(4,4,8,4,IP),new lo(4,5,16,8,IP),new lo(4,6,32,32,IP),new lo(4,4,16,16,Mf),new lo(8,16,32,32,Mf),new lo(8,16,128,128,Mf),new lo(8,32,128,256,Mf),new lo(32,128,258,1024,Mf),new lo(32,258,258,4096,Mf)],kbe=t=>{t.window_size=2*t.w_size,Cu(t.head),t.max_lazy_match=Ym[t.level].max_lazy,t.good_match=Ym[t.level].good_length,t.nice_match=Ym[t.level].nice_length,t.max_chain_length=Ym[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=gt-1,t.match_available=0,t.ins_h=0};function Rbe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=B_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(xbe*2),this.dyn_dtree=new Uint16Array((2*Abe+1)*2),this.bl_tree=new Uint16Array((2*Dbe+1)*2),Cu(this.dyn_ltree),Cu(this.dyn_dtree),Cu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Cbe+1),this.heap=new Uint16Array(2*KP+1),Cu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*KP+1),Cu(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var dy=t=>{if(!t)return 1;let e=t.state;return!e||e.strm!==t||e.status!==Uf&&e.status!==eO&&e.status!==zP&&e.status!==HP&&e.status!==WP&&e.status!==JP&&e.status!==ll&&e.status!==Xm?1:0},wK=t=>{if(dy(t))return dl(t,po);t.total_in=t.total_out=0,t.data_type=vbe;let e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?eO:e.wrap?Uf:ll,t.adler=e.wrap===2?0:1,e.last_flush=-2,abe(e),sn},EK=t=>{let e=wK(t);return e===sn&&kbe(t.state),e},$be=(t,e)=>dy(t)||t.state.wrap!==2?po:(t.state.gzhead=e,sn),SK=(t,e,r,n,s,i)=>{if(!t)return po;let o=1;if(e===pbe&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>bbe||r!==B_||n<8||n>15||e<0||e>9||i<0||i>ybe||n===8&&o!==1)return dl(t,po);n===8&&(n=9);let a=new Rbe;return t.state=a,a.strm=t,a.status=Uf,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+gt-1)/gt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=i,a.method=r,EK(t)},jbe=(t,e)=>SK(t,e,B_,_be,wbe,gbe),Nbe=(t,e)=>{if(dy(t)||e>DV||e<0)return t?dl(t,po):po;let r=t.state;if(!t.output||t.avail_in!==0&&!t.input||r.status===Xm&&e!==qi)return dl(t,t.avail_out===0?TP:po);let n=r.last_flush;if(r.last_flush=e,r.pending!==0){if(ai(t),t.avail_out===0)return r.last_flush=-1,sn}else if(t.avail_in===0&&CV(e)<=CV(n)&&e!==qi)return dl(t,TP);if(r.status===Xm&&t.avail_in!==0)return dl(t,TP);if(r.status===Uf&&r.wrap===0&&(r.status=ll),r.status===Uf){let s=B_+(r.w_bits-8<<4)<<8,i=-1;if(r.strategy>=A_||r.level<2?i=0:r.level<6?i=1:r.level===6?i=2:i=3,s|=i<<6,r.strstart!==0&&(s|=Pbe),s+=31-s%31,Zm(r,s),r.strstart!==0&&(Zm(r,t.adler>>>16),Zm(r,t.adler&65535)),t.adler=1,r.status=ll,ai(t),r.pending!==0)return r.last_flush=-1,sn}if(r.status===eO){if(t.adler=0,It(r,31),It(r,139),It(r,8),r.gzhead)It(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),It(r,r.gzhead.time&255),It(r,r.gzhead.time>>8&255),It(r,r.gzhead.time>>16&255),It(r,r.gzhead.time>>24&255),It(r,r.level===9?2:r.strategy>=A_||r.level<2?4:0),It(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(It(r,r.gzhead.extra.length&255),It(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Hr(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=zP;else if(It(r,0),It(r,0),It(r,0),It(r,0),It(r,0),It(r,r.level===9?2:r.strategy>=A_||r.level<2?4:0),It(r,Obe),r.status=ll,ai(t),r.pending!==0)return r.last_flush=-1,sn}if(r.status===zP){if(r.gzhead.extra){let s=r.pending,i=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+i>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>s&&(t.adler=Hr(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex+=a,ai(t),r.pending!==0)return r.last_flush=-1,sn;s=0,i-=a}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending+=i,r.gzhead.hcrc&&r.pending>s&&(t.adler=Hr(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex=0}r.status=HP}if(r.status===HP){if(r.gzhead.name){let s=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>s&&(t.adler=Hr(t.adler,r.pending_buf,r.pending-s,s)),ai(t),r.pending!==0)return r.last_flush=-1,sn;s=0}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,It(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(t.adler=Hr(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex=0}r.status=WP}if(r.status===WP){if(r.gzhead.comment){let s=r.pending,i;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>s&&(t.adler=Hr(t.adler,r.pending_buf,r.pending-s,s)),ai(t),r.pending!==0)return r.last_flush=-1,sn;s=0}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,It(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(t.adler=Hr(t.adler,r.pending_buf,r.pending-s,s))}r.status=JP}if(r.status===JP){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(ai(t),r.pending!==0))return r.last_flush=-1,sn;It(r,t.adler&255),It(r,t.adler>>8&255),t.adler=0}if(r.status=ll,ai(t),r.pending!==0)return r.last_flush=-1,sn}if(t.avail_in!==0||r.lookahead!==0||e!==Fu&&r.status!==Xm){let s=r.level===0?_K(r,e):r.strategy===A_?Bbe(r,e):r.strategy===mbe?Ibe(r,e):Ym[r.level].func(r,e);if((s===pl||s===Hf)&&(r.status=Xm),s===Pn||s===pl)return t.avail_out===0&&(r.last_flush=-1),sn;if(s===zf&&(e===lbe?cbe(r):e!==DV&&(VP(r,0,0,!1),e===dbe&&(Cu(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),ai(t),t.avail_out===0))return r.last_flush=-1,sn}return e!==qi?sn:r.wrap<=0?xV:(r.wrap===2?(It(r,t.adler&255),It(r,t.adler>>8&255),It(r,t.adler>>16&255),It(r,t.adler>>24&255),It(r,t.total_in&255),It(r,t.total_in>>8&255),It(r,t.total_in>>16&255),It(r,t.total_in>>24&255)):(Zm(r,t.adler>>>16),Zm(r,t.adler&65535)),ai(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?sn:xV)},Mbe=t=>{if(dy(t))return po;let e=t.state.status;return t.state=null,e===ll?dl(t,fbe):sn},qbe=(t,e)=>{let r=e.length;if(dy(t))return po;let n=t.state,s=n.wrap;if(s===2||s===1&&n.status!==Uf||n.lookahead)return po;if(s===1&&(t.adler=oy(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){s===0&&(Cu(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(e.subarray(r-n.w_size,r),0),e=c,r=n.w_size}let i=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,Vf(n);n.lookahead>=gt;){let c=n.strstart,u=n.lookahead-(gt-1);do n.ins_h=Tu(n,n.ins_h,n.window[c+gt-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--u);n.strstart=c,n.lookahead=gt-1,Vf(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=gt-1,n.match_available=0,t.next_in=o,t.input=a,t.avail_in=i,n.wrap=s,sn},Lbe=jbe,Ube=SK,Vbe=EK,Kbe=wK,zbe=$be,Hbe=Nbe,Wbe=Mbe,Jbe=qbe,Gbe="pako deflate (from Nodeca project)",ey={deflateInit:Lbe,deflateInit2:Ube,deflateReset:Vbe,deflateResetKeep:Kbe,deflateSetHeader:zbe,deflate:Hbe,deflateEnd:Wbe,deflateSetDictionary:Jbe,deflateInfo:Gbe},Zbe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Xbe=function(t){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(let n in r)Zbe(r,n)&&(t[n]=r[n])}}return t},Ybe=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;let r=new Uint8Array(e);for(let n=0,s=0,i=t.length;n<i;n++){let o=t[n];r.set(o,s),s+=o.length}return r},k_={assign:Xbe,flattenChunks:Ybe},AK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{AK=!1}var ay=new Uint8Array(256);for(let t=0;t<256;t++)ay[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;ay[254]=ay[254]=1;var Qbe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,s,i,o=t.length,a=0;for(s=0;s<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(a),i=0,s=0;i<a;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e},e_e=(t,e)=>{if(e<65534&&t.subarray&&AK)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r},t_e=(t,e)=>{let r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s,i=new Array(r*2);for(s=0,n=0;n<r;){let o=t[n++];if(o<128){i[s++]=o;continue}let a=ay[o];if(a>4){i[s++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<r;)o=o<<6|t[n++]&63,a--;if(a>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return e_e(i,s)},r_e=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+ay[t[r]]>e?r:e},uy={string2buf:Qbe,buf2string:t_e,utf8border:r_e};function n_e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var DK=n_e,xK=Object.prototype.toString,{Z_NO_FLUSH:i_e,Z_SYNC_FLUSH:s_e,Z_FULL_FLUSH:o_e,Z_FINISH:a_e,Z_OK:T_,Z_STREAM_END:u_e,Z_DEFAULT_COMPRESSION:c_e,Z_DEFAULT_STRATEGY:l_e,Z_DEFLATED:d_e}=ml;function fy(t){this.options=k_.assign({level:c_e,method:d_e,chunkSize:16384,windowBits:15,memLevel:8,strategy:l_e},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new DK,this.strm.avail_out=0;let r=ey.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==T_)throw new Error(fl[r]);if(e.header&&ey.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=uy.string2buf(e.dictionary):xK.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=ey.deflateSetDictionary(this.strm,n),r!==T_)throw new Error(fl[r]);this._dict_set=!0}}fy.prototype.push=function(t,e){let r=this.strm,n=this.options.chunkSize,s,i;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?a_e:i_e,typeof t=="string"?r.input=uy.string2buf(t):xK.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(i===s_e||i===o_e)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(s=ey.deflate(r,i),s===u_e)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),s=ey.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===T_;if(r.avail_out===0){this.onData(r.output);continue}if(i>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};fy.prototype.onData=function(t){this.chunks.push(t)};fy.prototype.onEnd=function(t){t===T_&&(this.result=k_.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function tO(t,e){let r=new fy(e);if(r.push(t,!0),r.err)throw r.msg||fl[r.err];return r.result}function f_e(t,e){return e=e||{},e.raw=!0,tO(t,e)}function p_e(t,e){return e=e||{},e.gzip=!0,tO(t,e)}var h_e=fy,m_e=tO,y_e=f_e,g_e=p_e,v_e=ml,b_e={Deflate:h_e,deflate:m_e,deflateRaw:y_e,gzip:g_e,constants:v_e},D_=16209,__e=16191,w_e=function(e,r){let n,s,i,o,a,c,u,l,d,p,f,h,y,g,A,x,b,w,D,F,C,I,k,T,j=e.state;n=e.next_in,k=e.input,s=n+(e.avail_in-5),i=e.next_out,T=e.output,o=i-(r-e.avail_out),a=i+(e.avail_out-257),c=j.dmax,u=j.wsize,l=j.whave,d=j.wnext,p=j.window,f=j.hold,h=j.bits,y=j.lencode,g=j.distcode,A=(1<<j.lenbits)-1,x=(1<<j.distbits)-1;e:do{h<15&&(f+=k[n++]<<h,h+=8,f+=k[n++]<<h,h+=8),b=y[f&A];t:for(;;){if(w=b>>>24,f>>>=w,h-=w,w=b>>>16&255,w===0)T[i++]=b&65535;else if(w&16){D=b&65535,w&=15,w&&(h<w&&(f+=k[n++]<<h,h+=8),D+=f&(1<<w)-1,f>>>=w,h-=w),h<15&&(f+=k[n++]<<h,h+=8,f+=k[n++]<<h,h+=8),b=g[f&x];r:for(;;){if(w=b>>>24,f>>>=w,h-=w,w=b>>>16&255,w&16){if(F=b&65535,w&=15,h<w&&(f+=k[n++]<<h,h+=8,h<w&&(f+=k[n++]<<h,h+=8)),F+=f&(1<<w)-1,F>c){e.msg="invalid distance too far back",j.mode=D_;break e}if(f>>>=w,h-=w,w=i-o,F>w){if(w=F-w,w>l&&j.sane){e.msg="invalid distance too far back",j.mode=D_;break e}if(C=0,I=p,d===0){if(C+=u-w,w<D){D-=w;do T[i++]=p[C++];while(--w);C=i-F,I=T}}else if(d<w){if(C+=u+d-w,w-=d,w<D){D-=w;do T[i++]=p[C++];while(--w);if(C=0,d<D){w=d,D-=w;do T[i++]=p[C++];while(--w);C=i-F,I=T}}}else if(C+=d-w,w<D){D-=w;do T[i++]=p[C++];while(--w);C=i-F,I=T}for(;D>2;)T[i++]=I[C++],T[i++]=I[C++],T[i++]=I[C++],D-=3;D&&(T[i++]=I[C++],D>1&&(T[i++]=I[C++]))}else{C=i-F;do T[i++]=T[C++],T[i++]=T[C++],T[i++]=T[C++],D-=3;while(D>2);D&&(T[i++]=T[C++],D>1&&(T[i++]=T[C++]))}}else if(w&64){e.msg="invalid distance code",j.mode=D_;break e}else{b=g[(b&65535)+(f&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){j.mode=__e;break e}else{e.msg="invalid literal/length code",j.mode=D_;break e}else{b=y[(b&65535)+(f&(1<<w)-1)];continue t}break}}while(n<s&&i<a);D=h>>3,n-=D,h-=D<<3,f&=(1<<h)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<a?257+(a-i):257-(i-a),j.hold=f,j.bits=h},qf=15,PV=852,OV=592,FV=0,BP=1,TV=2,E_e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),S_e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),A_e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),D_e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),x_e=(t,e,r,n,s,i,o,a)=>{let c=a.bits,u=0,l=0,d=0,p=0,f=0,h=0,y=0,g=0,A=0,x=0,b,w,D,F,C,I=null,k,T=new Uint16Array(qf+1),j=new Uint16Array(qf+1),L=null,Q,ne,W;for(u=0;u<=qf;u++)T[u]=0;for(l=0;l<n;l++)T[e[r+l]]++;for(f=c,p=qf;p>=1&&T[p]===0;p--);if(f>p&&(f=p),p===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<p&&T[d]===0;d++);for(f<d&&(f=d),g=1,u=1;u<=qf;u++)if(g<<=1,g-=T[u],g<0)return-1;if(g>0&&(t===FV||p!==1))return-1;for(j[1]=0,u=1;u<qf;u++)j[u+1]=j[u]+T[u];for(l=0;l<n;l++)e[r+l]!==0&&(o[j[e[r+l]]++]=l);if(t===FV?(I=L=o,k=20):t===BP?(I=E_e,L=S_e,k=257):(I=A_e,L=D_e,k=0),x=0,l=0,u=d,C=i,h=f,y=0,D=-1,A=1<<f,F=A-1,t===BP&&A>PV||t===TV&&A>OV)return 1;for(;;){Q=u-y,o[l]+1<k?(ne=0,W=o[l]):o[l]>=k?(ne=L[o[l]-k],W=I[o[l]-k]):(ne=96,W=0),b=1<<u-y,w=1<<h,d=w;do w-=b,s[C+(x>>y)+w]=Q<<24|ne<<16|W|0;while(w!==0);for(b=1<<u-1;x&b;)b>>=1;if(b!==0?(x&=b-1,x+=b):x=0,l++,--T[u]===0){if(u===p)break;u=e[r+o[l]]}if(u>f&&(x&F)!==D){for(y===0&&(y=f),C+=d,h=u-y,g=1<<h;h+y<p&&(g-=T[h+y],!(g<=0));)h++,g<<=1;if(A+=1<<h,t===BP&&A>PV||t===TV&&A>OV)return 1;D=x&F,s[D]=f<<24|h<<16|C-i|0}}return x!==0&&(s[C+x]=u-y<<24|64<<16|0),a.bits=f,0},ty=x_e,C_e=0,CK=1,PK=2,{Z_FINISH:IV,Z_BLOCK:P_e,Z_TREES:x_,Z_OK:hl,Z_STREAM_END:O_e,Z_NEED_DICT:F_e,Z_STREAM_ERROR:Li,Z_DATA_ERROR:OK,Z_MEM_ERROR:FK,Z_BUF_ERROR:T_e,Z_DEFLATED:BV}=ml,R_=16180,kV=16181,RV=16182,$V=16183,jV=16184,NV=16185,MV=16186,qV=16187,LV=16188,UV=16189,I_=16190,ya=16191,kP=16192,VV=16193,RP=16194,KV=16195,zV=16196,HV=16197,WV=16198,C_=16199,P_=16200,JV=16201,GV=16202,ZV=16203,XV=16204,YV=16205,$P=16206,QV=16207,eK=16208,Qt=16209,TK=16210,IK=16211,I_e=852,B_e=592,k_e=15,R_e=k_e,tK=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function $_e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var yl=t=>{if(!t)return 1;let e=t.state;return!e||e.strm!==t||e.mode<R_||e.mode>IK?1:0},BK=t=>{if(yl(t))return Li;let e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=R_,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(I_e),e.distcode=e.distdyn=new Int32Array(B_e),e.sane=1,e.back=-1,hl},kK=t=>{if(yl(t))return Li;let e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,BK(t)},RK=(t,e)=>{let r;if(yl(t))return Li;let n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Li:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,kK(t))},$K=(t,e)=>{if(!t)return Li;let r=new $_e;t.state=r,r.strm=t,r.window=null,r.mode=R_;let n=RK(t,e);return n!==hl&&(t.state=null),n},j_e=t=>$K(t,R_e),rK=!0,jP,NP,N_e=t=>{if(rK){jP=new Int32Array(512),NP=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ty(CK,t.lens,0,288,jP,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ty(PK,t.lens,0,32,NP,0,t.work,{bits:5}),rK=!1}t.lencode=jP,t.lenbits=9,t.distcode=NP,t.distbits=5},jK=(t,e,r,n)=>{let s,i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(e.subarray(r-n,r-n+s),i.wnext),n-=s,n?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},M_e=(t,e)=>{let r,n,s,i,o,a,c,u,l,d,p,f,h,y,g=0,A,x,b,w,D,F,C,I,k=new Uint8Array(4),T,j,L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(yl(t)||!t.output||!t.input&&t.avail_in!==0)return Li;r=t.state,r.mode===ya&&(r.mode=kP),o=t.next_out,s=t.output,c=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,u=r.hold,l=r.bits,d=a,p=c,I=hl;e:for(;;)switch(r.mode){case R_:if(r.wrap===0){r.mode=kP;break}for(;l<16;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,k[0]=u&255,k[1]=u>>>8&255,r.check=Hr(r.check,k,2,0),u=0,l=0,r.mode=kV;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Qt;break}if((u&15)!==BV){t.msg="unknown compression method",r.mode=Qt;break}if(u>>>=4,l-=4,C=(u&15)+8,r.wbits===0&&(r.wbits=C),C>15||C>r.wbits){t.msg="invalid window size",r.mode=Qt;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?UV:ya,u=0,l=0;break;case kV:for(;l<16;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(r.flags=u,(r.flags&255)!==BV){t.msg="unknown compression method",r.mode=Qt;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Qt;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,r.check=Hr(r.check,k,2,0)),u=0,l=0,r.mode=RV;case RV:for(;l<32;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,k[2]=u>>>16&255,k[3]=u>>>24&255,r.check=Hr(r.check,k,4,0)),u=0,l=0,r.mode=$V;case $V:for(;l<16;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,r.check=Hr(r.check,k,2,0)),u=0,l=0,r.mode=jV;case jV:if(r.flags&1024){for(;l<16;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,r.check=Hr(r.check,k,2,0)),u=0,l=0}else r.head&&(r.head.extra=null);r.mode=NV;case NV:if(r.flags&1024&&(f=r.length,f>a&&(f=a),f&&(r.head&&(C=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+f),C)),r.flags&512&&r.wrap&4&&(r.check=Hr(r.check,n,f,i)),a-=f,i+=f,r.length-=f),r.length))break e;r.length=0,r.mode=MV;case MV:if(r.flags&2048){if(a===0)break e;f=0;do C=n[i+f++],r.head&&C&&r.length<65536&&(r.head.name+=String.fromCharCode(C));while(C&&f<a);if(r.flags&512&&r.wrap&4&&(r.check=Hr(r.check,n,f,i)),a-=f,i+=f,C)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=qV;case qV:if(r.flags&4096){if(a===0)break e;f=0;do C=n[i+f++],r.head&&C&&r.length<65536&&(r.head.comment+=String.fromCharCode(C));while(C&&f<a);if(r.flags&512&&r.wrap&4&&(r.check=Hr(r.check,n,f,i)),a-=f,i+=f,C)break e}else r.head&&(r.head.comment=null);r.mode=LV;case LV:if(r.flags&512){for(;l<16;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Qt;break}u=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=ya;break;case UV:for(;l<32;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}t.adler=r.check=tK(u),u=0,l=0,r.mode=I_;case I_:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=a,r.hold=u,r.bits=l,F_e;t.adler=r.check=1,r.mode=ya;case ya:if(e===P_e||e===x_)break e;case kP:if(r.last){u>>>=l&7,l-=l&7,r.mode=$P;break}for(;l<3;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}switch(r.last=u&1,u>>>=1,l-=1,u&3){case 0:r.mode=VV;break;case 1:if(N_e(r),r.mode=C_,e===x_){u>>>=2,l-=2;break e}break;case 2:r.mode=zV;break;case 3:t.msg="invalid block type",r.mode=Qt}u>>>=2,l-=2;break;case VV:for(u>>>=l&7,l-=l&7;l<32;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Qt;break}if(r.length=u&65535,u=0,l=0,r.mode=RP,e===x_)break e;case RP:r.mode=KV;case KV:if(f=r.length,f){if(f>a&&(f=a),f>c&&(f=c),f===0)break e;s.set(n.subarray(i,i+f),o),a-=f,i+=f,c-=f,o+=f,r.length-=f;break}r.mode=ya;break;case zV:for(;l<14;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(r.nlen=(u&31)+257,u>>>=5,l-=5,r.ndist=(u&31)+1,u>>>=5,l-=5,r.ncode=(u&15)+4,u>>>=4,l-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Qt;break}r.have=0,r.mode=HV;case HV:for(;r.have<r.ncode;){for(;l<3;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}r.lens[L[r.have++]]=u&7,u>>>=3,l-=3}for(;r.have<19;)r.lens[L[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,T={bits:r.lenbits},I=ty(C_e,r.lens,0,19,r.lencode,0,r.work,T),r.lenbits=T.bits,I){t.msg="invalid code lengths set",r.mode=Qt;break}r.have=0,r.mode=WV;case WV:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],A=g>>>24,x=g>>>16&255,b=g&65535,!(A<=l);){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(b<16)u>>>=A,l-=A,r.lens[r.have++]=b;else{if(b===16){for(j=A+2;l<j;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(u>>>=A,l-=A,r.have===0){t.msg="invalid bit length repeat",r.mode=Qt;break}C=r.lens[r.have-1],f=3+(u&3),u>>>=2,l-=2}else if(b===17){for(j=A+3;l<j;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}u>>>=A,l-=A,C=0,f=3+(u&7),u>>>=3,l-=3}else{for(j=A+7;l<j;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}u>>>=A,l-=A,C=0,f=11+(u&127),u>>>=7,l-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Qt;break}for(;f--;)r.lens[r.have++]=C}}if(r.mode===Qt)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Qt;break}if(r.lenbits=9,T={bits:r.lenbits},I=ty(CK,r.lens,0,r.nlen,r.lencode,0,r.work,T),r.lenbits=T.bits,I){t.msg="invalid literal/lengths set",r.mode=Qt;break}if(r.distbits=6,r.distcode=r.distdyn,T={bits:r.distbits},I=ty(PK,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T),r.distbits=T.bits,I){t.msg="invalid distances set",r.mode=Qt;break}if(r.mode=C_,e===x_)break e;case C_:r.mode=P_;case P_:if(a>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=a,r.hold=u,r.bits=l,w_e(t,p),o=t.next_out,s=t.output,c=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,u=r.hold,l=r.bits,r.mode===ya&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],A=g>>>24,x=g>>>16&255,b=g&65535,!(A<=l);){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(x&&!(x&240)){for(w=A,D=x,F=b;g=r.lencode[F+((u&(1<<w+D)-1)>>w)],A=g>>>24,x=g>>>16&255,b=g&65535,!(w+A<=l);){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}u>>>=w,l-=w,r.back+=w}if(u>>>=A,l-=A,r.back+=A,r.length=b,x===0){r.mode=YV;break}if(x&32){r.back=-1,r.mode=ya;break}if(x&64){t.msg="invalid literal/length code",r.mode=Qt;break}r.extra=x&15,r.mode=JV;case JV:if(r.extra){for(j=r.extra;l<j;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=GV;case GV:for(;g=r.distcode[u&(1<<r.distbits)-1],A=g>>>24,x=g>>>16&255,b=g&65535,!(A<=l);){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(!(x&240)){for(w=A,D=x,F=b;g=r.distcode[F+((u&(1<<w+D)-1)>>w)],A=g>>>24,x=g>>>16&255,b=g&65535,!(w+A<=l);){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}u>>>=w,l-=w,r.back+=w}if(u>>>=A,l-=A,r.back+=A,x&64){t.msg="invalid distance code",r.mode=Qt;break}r.offset=b,r.extra=x&15,r.mode=ZV;case ZV:if(r.extra){for(j=r.extra;l<j;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Qt;break}r.mode=XV;case XV:if(c===0)break e;if(f=p-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Qt;break}f>r.wnext?(f-=r.wnext,h=r.wsize-f):h=r.wnext-f,f>r.length&&(f=r.length),y=r.window}else y=s,h=o-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do s[o++]=y[h++];while(--f);r.length===0&&(r.mode=P_);break;case YV:if(c===0)break e;s[o++]=r.length,c--,r.mode=P_;break;case $P:if(r.wrap){for(;l<32;){if(a===0)break e;a--,u|=n[i++]<<l,l+=8}if(p-=c,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Hr(r.check,s,p,o-p):oy(r.check,s,p,o-p)),p=c,r.wrap&4&&(r.flags?u:tK(u))!==r.check){t.msg="incorrect data check",r.mode=Qt;break}u=0,l=0}r.mode=QV;case QV:if(r.wrap&&r.flags){for(;l<32;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Qt;break}u=0,l=0}r.mode=eK;case eK:I=O_e;break e;case Qt:I=OK;break e;case TK:return FK;case IK:default:return Li}return t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=a,r.hold=u,r.bits=l,(r.wsize||p!==t.avail_out&&r.mode<Qt&&(r.mode<$P||e!==IV))&&jK(t,t.output,t.next_out,p-t.avail_out),d-=t.avail_in,p-=t.avail_out,t.total_in+=d,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?Hr(r.check,s,p,t.next_out-p):oy(r.check,s,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===ya?128:0)+(r.mode===C_||r.mode===RP?256:0),(d===0&&p===0||e===IV)&&I===hl&&(I=T_e),I},q_e=t=>{if(yl(t))return Li;let e=t.state;return e.window&&(e.window=null),t.state=null,hl},L_e=(t,e)=>{if(yl(t))return Li;let r=t.state;return r.wrap&2?(r.head=e,e.done=!1,hl):Li},U_e=(t,e)=>{let r=e.length,n,s,i;return yl(t)||(n=t.state,n.wrap!==0&&n.mode!==I_)?Li:n.mode===I_&&(s=1,s=oy(s,e,r,0),s!==n.check)?OK:(i=jK(t,e,r,r),i?(n.mode=TK,FK):(n.havedict=1,hl))},V_e=kK,K_e=RK,z_e=BK,H_e=j_e,W_e=$K,J_e=M_e,G_e=q_e,Z_e=L_e,X_e=U_e,Y_e="pako inflate (from Nodeca project)",va={inflateReset:V_e,inflateReset2:K_e,inflateResetKeep:z_e,inflateInit:H_e,inflateInit2:W_e,inflate:J_e,inflateEnd:G_e,inflateGetHeader:Z_e,inflateSetDictionary:X_e,inflateInfo:Y_e};function Q_e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var e1e=Q_e,NK=Object.prototype.toString,{Z_NO_FLUSH:t1e,Z_FINISH:r1e,Z_OK:cy,Z_STREAM_END:MP,Z_NEED_DICT:qP,Z_STREAM_ERROR:n1e,Z_DATA_ERROR:nK,Z_MEM_ERROR:i1e}=ml;function py(t){this.options=k_.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new DK,this.strm.avail_out=0;let r=va.inflateInit2(this.strm,e.windowBits);if(r!==cy)throw new Error(fl[r]);if(this.header=new e1e,va.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=uy.string2buf(e.dictionary):NK.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=va.inflateSetDictionary(this.strm,e.dictionary),r!==cy)))throw new Error(fl[r])}py.prototype.push=function(t,e){let r=this.strm,n=this.options.chunkSize,s=this.options.dictionary,i,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?r1e:t1e,NK.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=va.inflate(r,o),i===qP&&s&&(i=va.inflateSetDictionary(r,s),i===cy?i=va.inflate(r,o):i===nK&&(i=qP));r.avail_in>0&&i===MP&&r.state.wrap>0&&t[r.next_in]!==0;)va.inflateReset(r),i=va.inflate(r,o);switch(i){case n1e:case nK:case qP:case i1e:return this.onEnd(i),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||i===MP))if(this.options.to==="string"){let c=uy.utf8border(r.output,r.next_out),u=r.next_out-c,l=uy.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(l)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===cy&&a===0)){if(i===MP)return i=va.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};py.prototype.onData=function(t){this.chunks.push(t)};py.prototype.onEnd=function(t){t===cy&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=k_.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function rO(t,e){let r=new py(e);if(r.push(t),r.err)throw r.msg||fl[r.err];return r.result}function s1e(t,e){return e=e||{},e.raw=!0,rO(t,e)}var o1e=py,a1e=rO,u1e=s1e,c1e=rO,l1e=ml,d1e={Inflate:o1e,inflate:a1e,inflateRaw:u1e,ungzip:c1e,constants:l1e},{Deflate:f1e,deflate:p1e,deflateRaw:h1e,gzip:m1e}=b_e,{Inflate:y1e,inflate:g1e,inflateRaw:v1e,ungzip:b1e}=d1e,_1e=f1e,w1e=p1e,E1e=h1e,S1e=m1e,A1e=y1e,D1e=g1e,x1e=v1e,C1e=b1e,P1e=ml,nO={Deflate:_1e,deflate:w1e,deflateRaw:E1e,gzip:S1e,Inflate:A1e,inflate:D1e,inflateRaw:x1e,ungzip:C1e,constants:P1e};var oO={};xr(oO,{getCurrentXmlSchema112Timestamp:()=>hy,getFutureXmlSchema112Timestamp:()=>O1e,getXmlSchema112Timestamp:()=>$_,isValidRFC3339Timestamp:()=>sO,isValidXmlSchema112Timestamp:()=>iO});function hy(){return new Date().toISOString().replace(/\.\d+Z$/,"Z")}function $_(t){return new Date(t*1e3).toISOString().replace(/\.\d{3}/,"")}function O1e(t){return new Date(Date.now()+t*1e3).toISOString().replace(/\.\d+Z$/,"Z")}function iO(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(t))return!1;let r=new Date(t);return!isNaN(r.getTime())}function sO(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})$/.test(t))return!1;let r=new Date(t);return!isNaN(r.getTime())}var Sz=xs(wz(),1);var _l="VerifiablePresentation",AO=class t{constructor(e){this.vpDataModel=e}get type(){return this.vpDataModel.type[this.vpDataModel.type.length-1]}get holder(){return this.vpDataModel.holder.toString()}get verifiableCredential(){return this.vpDataModel.verifiableCredential}async sign(e){return await ss.sign({signerDid:e.did,payload:{vp:this.vpDataModel,iss:e.did.uri,sub:e.did.uri,jti:this.vpDataModel.id,iat:Math.floor(Date.now()/1e3)}})}toString(){return JSON.stringify(this.vpDataModel)}static async create(e){let{type:r,holder:n,vcJwts:s,additionalData:i}=e;if(i&&typeof JSON.parse(JSON.stringify(i))!="object")throw new Error("Expected data to be parseable into a JSON object");if(!n)throw new Error("Holder must be defined");if(typeof n!="string")throw new Error("Holder must be of type string");let o={"@context":[_a],type:Array.isArray(r)?[_l,...r]:r?[_l,r]:[_l],id:`urn:uuid:${za.randomUuid()}`,holder:n,verifiableCredential:s,...i};return Ez(o),new t(o)}static async verify({vpJwt:e}){let{payload:r}=await ss.verify({jwt:e}),n=r.vp;if(!n)throw new Error("vp property missing.");Ez(n);for(let s of n.verifiableCredential)await wl.verify({vcJwt:s});return{issuer:r.iss,subject:r.sub,vp:r.vp}}static parseJwt({vpJwt:e}){let n=ss.parse({jwt:e}).decoded.payload.vp;if(!n)throw Error("Jwt payload missing vp property");return new t(n)}};function Ez(t){Vi.validateContext(t["@context"]),Vi.validateVpType(t.type)}var Cwe=new Sz.Validator,Vi=class{static validateCredentialPayload(e){this.validateContext(e.vcDataModel["@context"]),this.validateVcType(e.type),this.validateCredentialSubject(e.vcDataModel.credentialSubject),e.vcDataModel.issuanceDate&&this.validateTimestamp(e.vcDataModel.issuanceDate),e.vcDataModel.expirationDate&&this.validateTimestamp(e.vcDataModel.expirationDate)}static validateContext(e){let r=this.asArray(e);if(r.length<1||r.indexOf(_a)===-1)throw new Error(`@context is missing default context "${_a}"`)}static validateVcType(e){let r=this.asArray(e);if(r.length<1||r.indexOf(wa)===-1)throw new Error(`type is missing default "${wa}"`)}static validateVpType(e){let r=this.asArray(e);if(r.length<1||r.indexOf(_l)===-1)throw new Error(`type is missing default "${_l}"`)}static validateCredentialSubject(e){if(Object.keys(e).length===0)throw new Error("credentialSubject must not be empty")}static validateTimestamp(e){if(!iO(e)&&!sO(e))throw new Error("timestamp is not valid xml schema 112 timestamp")}static async validateCredentialSchema(e){let r=e.credentialSchema;if(!r||Array.isArray(r)&&r.length===0)throw new Error("Credential schema is missing or empty");let n=Array.isArray(r)?r[0].id:r.id,s;try{let o=await fetch(n);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);s=await o.json()}catch(o){throw new Error(`Failed to fetch schema from ${n}: ${o.message}`)}let i=Cwe.validate(e,s);if(!i.valid)throw new Error(`Schema Validation Errors: ${JSON.stringify(i.errors)}`)}static asArray(e){return Array.isArray(e)?e:[e]}};var _a="https://www.w3.org/2018/credentials/v1",wa="VerifiableCredential",wl=class t{constructor(e){this.vcDataModel=e}get type(){return this.vcDataModel.type[this.vcDataModel.type.length-1]}get issuer(){return this.vcDataModel.issuer.toString()}get subject(){return Array.isArray(this.vcDataModel.credentialSubject)?this.vcDataModel.credentialSubject[0].id:this.vcDataModel.credentialSubject.id}async sign(e){return await ss.sign({signerDid:e.did,payload:{vc:this.vcDataModel,nbf:Math.floor(new Date(this.vcDataModel.issuanceDate).getTime()/1e3),jti:this.vcDataModel.id,iss:e.did.uri,sub:this.subject,iat:Math.floor(Date.now()/1e3),...this.vcDataModel.expirationDate&&{exp:Math.floor(new Date(this.vcDataModel.expirationDate).getTime()/1e3)}}})}toString(){return JSON.stringify(this.vcDataModel)}static async create(e){let{type:r,issuer:n,subject:s,data:i,issuanceDate:o,expirationDate:a,credentialStatus:c,credentialSchema:u,evidence:l}=e,d=JSON.parse(JSON.stringify(i));if(typeof d!="object")throw new Error("Expected data to be parseable into a JSON object");if(!n||!s)throw new Error("Issuer and subject must be defined");if(typeof n!="string"||typeof s!="string")throw new Error("Issuer and subject must be of type string");let p={id:s,...d},f=[_a];c!==null&&f.push(U_);let h={"@context":f,type:Array.isArray(r)?[wa,...r]:r?[wa,r]:[wa],id:`urn:uuid:${za.randomUuid()}`,issuer:n,issuanceDate:o||hy(),credentialSubject:p,...a&&{expirationDate:a},...c&&{credentialStatus:c},...u&&{credentialSchema:u},...l&&{evidence:l}};return DO(h),new t(h)}static async verify({vcJwt:e}){let{payload:r}=await ss.verify({jwt:e}),{exp:n,iss:s,nbf:i,jti:o,sub:a,vc:c}=r;if(!c)throw new Error("vc property missing.");let u=r.vc;if(n&&u.expirationDate&&n!==Math.floor(new Date(u.expirationDate).getTime()/1e3))throw new Error("Verification failed: exp claim does not match expirationDate");if(n&&(u.expirationDate=$_(n)),!s)throw new Error("Verification failed: iss claim is required");if(s!==u.issuer)throw new Error("Verification failed: iss claim does not match expected issuer");if(i&&i>Math.floor(Date.now()/1e3))throw new Error("Verification failed: nbf claim is in the future");if(i&&u.issuanceDate&&i!==Math.floor(new Date(u.issuanceDate).getTime()/1e3))throw new Error("Verification failed: nbf claim does not match issuanceDate");if(i&&(u.issuanceDate=$_(i)),a&&!Array.isArray(u.credentialSubject)&&a!==u.credentialSubject.id)throw new Error("Verification failed: sub claim does not match credentialSubject.id");if(a&&!Array.isArray(u.credentialSubject)&&(u.credentialSubject.id=a),o&&o!==u.id)throw new Error("Verification failed: jti claim does not match id");return o&&(u.id=o),DO(u),u.credentialSchema&&await Vi.validateCredentialSchema(u),{issuer:r.iss,subject:r.sub,vc:u}}static parseJwt({vcJwt:e}){let n=ss.parse({jwt:e}).decoded.payload.vc;if(!n)throw Error("Jwt payload missing vc property");return DO(n),new t(n)}};function DO(t){Vi.validateContext(t["@context"]),Vi.validateVcType(t.type),Vi.validateCredentialSubject(t.credentialSubject),t.issuanceDate&&Vi.validateTimestamp(t.issuanceDate),t.expirationDate&&Vi.validateTimestamp(t.expirationDate)}var U_="https://w3id.org/vc/status-list/2021/v1",Pwe="StatusList2021Credential",Dz=(r=>(r.revocation="revocation",r.suspension="suspension",r))(Dz||{}),Az=16*1024*8,xO=class{static create(e){let{statusListCredentialId:r,issuer:n,statusPurpose:s,credentialsToDisable:i}=e,o=this.validateStatusListEntryIndexesAreAllUnique(s,i),a=this.generateBitString(o),c={id:r,type:"StatusList2021",statusPurpose:s,encodedList:a},u={"@context":[_a,U_],type:[wa,Pwe],id:r,issuer:n,issuanceDate:hy(),credentialSubject:c};return new wl(u)}static validateCredentialInStatusList(e,r){let n=e.vcDataModel.credentialStatus,s=r.vcDataModel.credentialSubject,i=s.statusPurpose,o=s.encodedList;if(!n.statusPurpose)throw new Error("status purpose in the credential to validate is undefined");if(!i)throw new Error("status purpose in the status list credential is undefined");if(n.statusPurpose!==i)throw new Error("status purposes do not match between the credentials");if(!o)throw new Error("compressed bitstring is null or empty");return this.getBit(o,parseInt(n.statusListIndex))}static validateStatusListEntryIndexesAreAllUnique(e,r){let n=new Set;for(let s of r){if(!s.vcDataModel.credentialStatus)throw new Error("no credential status found in credential");let i=s.vcDataModel.credentialStatus;if(i.statusPurpose!==e)throw new Error("status purpose mismatch");if(n.has(i.statusListIndex))throw new Error(`duplicate entry found with index: ${i.statusListIndex}`);if(parseInt(i.statusListIndex)<0)throw new Error("status list index cannot be negative");if(parseInt(i.statusListIndex)>=Az)throw new Error("status list index is larger than the bitset size");n.add(i.statusListIndex)}return Array.from(n).map(s=>parseInt(s))}static generateBitString(e){let r=new Uint8Array(Az/8);e.forEach(i=>{let o=Math.floor(i/8),a=i%8;r[o]=r[o]|1<<7-a});let n=nO.gzip(r);return le.uint8Array(n).toBase64Url()}static getBit(e,r){let n=le.base64Url(e).toUint8Array(),s=nO.inflate(n),i=Math.floor(r/8),o=r%8;return(s[i]>>7-o&1)===1}};return W_(Owe);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

punycode/punycode.js:
  (*! https://mths.be/punycode v1.4.1 by @mathias *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

uint8-util/util.js:
  (* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
  *
  * @author   Jimmy Wrting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
  * @license  MIT
  *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
//# sourceMappingURL=browser.js.map
